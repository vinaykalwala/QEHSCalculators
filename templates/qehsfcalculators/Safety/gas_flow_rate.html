{% extends 'base.html' %}
{% block title %}Gas Flow Rate Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gas Flow Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .back-btn {
            background: linear-gradient(#1560bd, #000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }

        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }

        @media (max-width: 900px) {
            .calc-content {
                flex-direction: column;
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }

        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
        }

        .calc-card:hover {
            transform: translateY(-5px);
        }

        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Input rows for side-by-side fields */
        .input-row {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        @media (min-width: 480px) {
            .input-row {
                flex-direction: row;
            }
        }

        .input-row .form-group {
            flex: 1;
        }

        /* Inputs */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }

        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }

        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd, #000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
            margin-top: 20px;
        }

        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }

        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }

        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;
            justify-content: center;
        }

        .result-value {
            width: 100%;
        }

        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }

        .rate-label {
            color: #7f8c8d;
        }

        /* Meter */
        .safety-meter {
            width: 100%;
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }

        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }

        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }

        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .feedback-content {
            color: #34495e;
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease;
        }

        .note-card:hover {
            transform: translateY(-2px);
        }

        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }

        .note-card p,
        .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }

        .note-list {
            margin: 0;
            padding-left: 18px;
        }

        .good {
            color: #2e7d32;
            font-weight: 600;
        }

        .average {
            color: #f9a825;
            font-weight: 600;
        }

        .bad {
            color: #c62828;
            font-weight: 600;
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }

        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }

        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>

    <div class="calculator-container printable" id="printArea">
        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Gas Flow Rate Calculator</h1>
            <p>Calculate the volumetric flow rate of gas through pipes accounting for pressure drops, temperature, and
                gas properties</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="input-row">
                    <div class="form-group">
                        <label for="temperature">Temperature (T) (¬∞R or K)</label>
                        <input type="number" id="temperature" class="form-input" min="0" placeholder="e.g., 520">
                    </div>
                    <div class="form-group">
                        <label for="compressibility">Compressibility Factor (Z)</label>
                        <input type="number" id="compressibility" class="form-input" min="0.1" max="2" step="0.01"
                            placeholder="e.g., 1.0">
                    </div>
                </div>

                <div class="input-row">
                    <div class="form-group">
                        <label for="diameter">Pipe Diameter (D) (inches or m)</label>
                        <input type="number" id="diameter" class="form-input" min="0" placeholder="e.g., 4">
                    </div>
                    <div class="form-group">
                        <label for="length">Pipe Length (L) (ft or m)</label>
                        <input type="number" id="length" class="form-input" min="0" placeholder="e.g., 100">
                    </div>
                </div>

                <div class="input-row">
                    <div class="form-group">
                        <label for="pressureIn">Inlet Pressure (P‚ÇÅ) (psi or Pa)</label>
                        <input type="number" id="pressureIn" class="form-input" min="0" placeholder="e.g., 100">
                    </div>
                    <div class="form-group">
                        <label for="pressureOut">Outlet Pressure (P‚ÇÇ) (psi or Pa)</label>
                        <input type="number" id="pressureOut" class="form-input" min="0" placeholder="e.g., 50">
                    </div>
                </div>

                <div class="form-group">
                    <label for="friction">Friction Factor (f)</label>
                    <input type="number" id="friction" class="form-input" min="0.001" max="0.1" step="0.001"
                        placeholder="e.g., 0.02">
                </div>

                <button class="calculate-btn" onclick="calculateGasFlow()">Calculate Flow Rate</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Safety illustration">

                    <p>This tool will calculate the <strong>Gas Flow Rate</strong>. Enter your data to see results and
                        insights here.</p>
                </div>

                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>

                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType"
                        style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Gas Flow Rate</h2>
                    </div>
                    <div class="rate-display">
                        <div class="rate-value" id="rateValue">0.00</div>
                        <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">SCFH</div>
                    </div>

                    <div class="safety-meter">
                        <div class="meter-fill" id="meterFill"></div>
                    </div>
                    <div class="meter-labels">
                        <span>Low</span><span>Moderate</span><span>Normal</span><span>High</span><span>Very High</span>
                    </div>

                    <div class="result-feedback">
                        <div class="feedback-title">Flow Rate Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">

            <!-- üìò ABOUT THIS CALCULATOR -->
            <div class="note-card">
                <h3>üìò About This Calculator</h3>
                <p>
                    This tool calculates the <strong>Gas Flow Rate</strong> under both actual and standard conditions.
                    It helps in converting flow readings into standardized units, considering pressure, temperature,
                    and compressibility effects. The calculator is useful for engineers designing gas distribution,
                    processing, and measurement systems where accuracy across varying operating conditions is critical.
                </p>
            </div>

            <!-- ‚öô PARAMETERS USED -->
            <div class="note-card">
                <h3>‚öô Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>Temperature (T):</strong> Absolute gas temperature in Kelvin (K) or Rankine (¬∞R).</li>
                    <li><strong>Compressibility Factor (Z):</strong> Corrects for real gas deviation from ideal
                        behavior.</li>
                    <li><strong>Pipe Diameter (D):</strong> Internal diameter of the pipe carrying the gas.</li>
                    <li><strong>Pipe Length (L):</strong> Distance between pressure measurement points.</li>
                    <li><strong>Inlet Pressure (P‚ÇÅ):</strong> Absolute pressure at the pipe inlet.</li>
                    <li><strong>Outlet Pressure (P‚ÇÇ):</strong> Absolute pressure at the pipe outlet.</li>
                    <li><strong>Friction Factor (f):</strong> Dimensionless parameter representing resistance to flow.
                    </li>
                </ul>
            </div>

            <!-- ‚úÖ INPUT VALIDATION RULES -->
            <div class="note-card">
                <h3>‚úÖ Input Validation Rules</h3>
                <ul class="note-list">
                    <li><strong>Temperature (T):</strong> Must be &gt; 0. Typical range: 200‚Äì500 K (400‚Äì1000 ¬∞R).</li>
                    <li><strong>Compressibility Factor (Z):</strong> Must be between 0.1‚Äì2.0 (normal range: 0.8‚Äì1.2).
                    </li>
                    <li><strong>Pipe Diameter (D):</strong> Must be &gt; 0. Typical range: 0.5‚Äì48 in (0.01‚Äì1.2 m).</li>
                    <li><strong>Pipe Length (L):</strong> Must be &gt; 0. Typical range: 1‚Äì10,000 ft (0.3‚Äì3000 m).</li>
                    <li><strong>Inlet Pressure (P‚ÇÅ):</strong> Must be &gt; 0.</li>
                    <li><strong>Outlet Pressure (P‚ÇÇ):</strong> Must be ‚â• 0 and less than P‚ÇÅ.</li>
                    <li><strong>Friction Factor (f):</strong> Must be between 0.001‚Äì0.1 (typical 0.01‚Äì0.05).</li>
                    <li><strong>Decimals:</strong> Up to 3 decimal places allowed.</li>
                </ul>
            </div>

            <!-- OUTPUT VALIDATIONS -->
            <div class="note-card">
                <h3>üìä Output Validations</h3>
                <ul class="note-list">
                    <li><strong>&lt; 1 m¬≥/h:</strong> Low Flow Rate ‚Üí May indicate undersized system.</li>
                    <li><strong>1‚Äì10 m¬≥/h:</strong> Moderate Flow Rate ‚Üí Suitable for small to medium systems.</li>
                    <li><strong>10‚Äì50 m¬≥/h:</strong> High Flow Rate ‚Üí Normal range for industrial applications.</li>
                    <li><strong>&gt; 50 m¬≥/h:</strong> Extreme Flow Rate ‚Üí Verify system capacity; possible oversizing.
                    </li>
                </ul>
                <p><em>The same assessment text (feedback) appears beside the result meter to guide users based on flow
                        range.</em></p>
            </div>

            <!-- üìê GOVERNING PRINCIPLE -->
            <div class="note-card">
                <h3>üìê Governing Principle</h3>
                <p>
                    A Gas Flow Rate Calculator is not tied to one single standard, but rather uses a set of defined
                    Standard
                    Conditions for Temperature and Pressure (STP or NTP) to normalize gas flow readings. Common units
                    include
                    Standard Cubic Feet per Minute (SCFM) and Standard Liters per Minute (SLPM), which express volume at
                    standardized conditions like the common US standard of 70¬∞F and 14.696 PSIA. The specific standard
                    used
                    depends on the application and region, so calculators often allow users to select the relevant
                    standard.
                </p>
                <p>
                    <strong>Key concepts to understand:</strong><br>
                    <b>Standard Conditions:</b> Pre-defined temperature and pressure values for standardized flow
                    measurement.<br>
                    <b>Actual Conditions:</b> Real-time pressure and temperature at which gas is flowing.<br>
                    <b>Correction:</b> Gas meters measure actual volume; correction converts to standard flow.<br><br>

                    <b>Units:</b><br>
                    SCFM (Standard Cubic Feet per Minute): Volume in cubic feet at standard conditions.<br>
                    SLPM (Standard Liters per Minute): Volume in liters at standard conditions.<br>
                    NM¬≥/h (Normal Cubic Meters per Hour): Metric equivalent of SCFM.<br><br>

                    <b>Common Standards:</b><br>
                    US Standard: 14.696 psi (1 atm) and 70¬∞F (21.1¬∞C).<br>
                    Metric Standard: 1 bar (100 kPa) and 0¬∞C (273.15 K).<br>
                    Normal Temperature & Pressure (NTP): 20¬∞C and 1 atm.<br><br>

                    <b>Why different standards exist:</b><br>
                    Different industries adopt varying temperature and pressure bases. A good Gas Flow Rate Calculator
                    lets
                    users choose the appropriate standard for their application.
                </p>
            </div>

            <!-- üß© CONCLUSION -->
            <div class="note-card">
                <h3>üß© Conclusion</h3>
                <p>
                    The Gas Flow Rate Calculator standardizes the measurement of gas volume across different conditions,
                    ensuring precision in system design, energy balance, and compliance with industrial norms. It
                    enables
                    engineers to evaluate both actual and standardized flow rates, providing essential insight for
                    process
                    optimization and operational safety.
                </p>
            </div>

        </div>

    </div>

    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function () {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateGasFlow() {
            // Get input values
            const T = parseFloat(document.getElementById('temperature').value.trim());
            const Z = parseFloat(document.getElementById('compressibility').value.trim());
            const D = parseFloat(document.getElementById('diameter').value.trim());
            const L = parseFloat(document.getElementById('length').value.trim());
            const P1 = parseFloat(document.getElementById('pressureIn').value.trim());
            const P2 = parseFloat(document.getElementById('pressureOut').value.trim());
            const f = parseFloat(document.getElementById('friction').value.trim());

            const errorBox = document.getElementById('resultError');
            const errorMessage = document.getElementById('errorMessage');
            const placeholder = document.getElementById('placeholder');
            const resultValue = document.getElementById('resultValue');

            let errors = [];
            let warnings = [];

            // --- Input Validations ---

            if (isNaN(T) || T <= 0) {
                errors.push("üëâ Temperature must be a positive number (>0). Typical range: 200‚Äì500 K (400‚Äì1000 ¬∞R).");
            }

            if (isNaN(Z) || Z < 0.1 || Z > 2) {
                errors.push("üëâ Compressibility Factor (Z) must be between 0.1 and 2.0 (normal 0.8‚Äì1.2).");
            }

            if (isNaN(D) || D <= 0) {
                errors.push("üëâ Pipe Diameter must be >0. Typical range: 0.5‚Äì48 in (0.01‚Äì1.2 m).");
            }

            if (isNaN(L) || L <= 0) {
                errors.push("üëâ Pipe Length must be >0. Typical range: 1‚Äì10,000 ft (0.3‚Äì3000 m).");
            }

            if (isNaN(P1) || P1 <= 0) {
                errors.push("üëâ Inlet Pressure (P‚ÇÅ) must be >0.");
            }

            if (isNaN(P2) || P2 < 0) {
                errors.push("üëâ Outlet Pressure (P‚ÇÇ) must be ‚â•0.");
            }

            if (!isNaN(P1) && !isNaN(P2) && P1 <= P2) {
                errors.push("üëâ Inlet Pressure (P‚ÇÅ) must be greater than Outlet Pressure (P‚ÇÇ).");
            }

            if (isNaN(f) || f < 0.001 || f > 0.1) {
                errors.push("üëâ Friction Factor (f) must be between 0.001 and 0.1 (typical 0.01‚Äì0.05).");
            }

            // Stop if errors
            if (errors.length > 0) {
                errorMessage.innerHTML = errors.join("<br>");
                errorBox.classList.remove("hidden");
                placeholder.classList.add("hidden");
                resultValue.classList.add("hidden");
                return;
            } else {
                errorBox.classList.add("hidden");
            }

            // --- Calculation ---
            const numerator = 353.7 * T * Z * Math.pow(D, 2) * Math.pow(P1, 2);
            const denominator = f * L * Math.sqrt(Math.pow(P1, 2) - Math.pow(P2, 2));
            const Q = numerator / denominator;

            // Edge case: Division errors
            if (!isFinite(Q) || isNaN(Q)) {
                errorMessage.innerHTML = "üëâ Calculation error: check inputs (possible division by zero).";
                errorBox.classList.remove("hidden");
                resultValue.classList.add("hidden");
                return;
            }

            // --- Output Warnings ---
            if (Q < 1 || Q > 1000000) {
                warnings.push("‚ö†Ô∏è Calculated flow rate outside typical range (1‚Äì1,000,000 SCFH). Verify inputs.");
            }
            if (Z < 0.8 || Z > 1.2) {
                warnings.push("‚ö†Ô∏è Unusual compressibility factor. Verify gas properties.");
            }
            if (f < 0.01 || f > 0.05) {
                warnings.push("‚ö†Ô∏è Friction factor outside typical range (0.01‚Äì0.05).");
            }

            document.getElementById('rateValue').textContent = Q.toFixed(2);

            // Meter & Feedback
            const meterFill = document.getElementById('meterFill');
            let meterWidth, meterColor, feedback;

            if (Q < 1000) {
                meterWidth = '20%'; meterColor = '#2ecc71';
                feedback = 'Low flow rate. May indicate undersized system.';
            } else if (Q <= 10000) {
                meterWidth = '40%'; meterColor = '#27ae60';
                feedback = 'Moderate flow rate for small to medium systems.';
            } else if (Q <= 50000) {
                meterWidth = '60%'; meterColor = '#f39c12';
                feedback = 'Normal range for industrial applications.';
            } else if (Q <= 100000) {
                meterWidth = '80%'; meterColor = '#e67e22';
                feedback = 'High flow rate. Verify system capacity.';
            } else {
                meterWidth = '95%'; meterColor = '#e74c3c';
                feedback = 'Very high flow rate. May indicate oversized system.';
            }

            meterFill.style.width = meterWidth;
            meterFill.style.backgroundColor = meterColor;

            document.getElementById('feedbackContent').textContent = feedback + (warnings.length ? " " + warnings.join(" ") : "");

            placeholder.classList.add('hidden');
            resultValue.classList.remove('hidden');
        }

        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);

            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>

</html>
{% endblock %}

{% comment %}
1. ‚úÖ Detailed Input Validation Rules (QEHS/Fire Safety)
Input Validation Rule Real-world Reason (Compliance)
Temperature (T) Must be >0. Recommended range 200‚Äì500 K (‚âà400‚Äì1000 ¬∞R). Allow decimals up to 2. Absolute temperatures
required. Below 200 K or above 500 K is outside industrial safe range for natural gas distribution.
Compressibility Factor (Z) Must be between 0.1 and 2.0. Normal range 0.8‚Äì1.2. Ensures realistic deviation from ideal gas
law. Extreme Z means calculation not valid.
Pipe Diameter (D) Must be >0. Typical 0.5‚Äì48 in (0.01‚Äì1.2 m). Decimals up to 3. Negative/zero impossible; too
large/small is unrealistic and could break flow formulas.
Pipe Length (L) Must be >0. Typically 1‚Äì10,000 ft (0.3‚Äì3000 m). Zero length invalid (division by zero in equation).
Extremely long pipes rare in one section.
Inlet Pressure (P‚ÇÅ) Must be >0. Typical 5‚Äì1440 psi (35 kPa ‚Äì 10 MPa) depending on system. Zero/negative impossible.
Needed for safe flow analysis.
Outlet Pressure (P‚ÇÇ) Must be ‚â•0 and less than P‚ÇÅ. Safety-critical: if P‚ÇÇ ‚â• P‚ÇÅ, no flow. Negative pressure is physically
meaningless.
Friction Factor (f) Must be between 0.001 and 0.1. Typical 0.01‚Äì0.05. Based on Darcy‚ÄìWeisbach equation. Outside range
means unrealistic pipe conditions.
Decimals Allow up to 3 decimal places for all inputs. Standard precision for process calculations.
Cross-field dependencies - P‚ÇÅ > P‚ÇÇ always.
- D > 0, L > 0, else equation breaks. Ensures physically meaningful inputs.
2. üìä Output Validation & Thresholds

Flow Rate (Q) in SCFH:

< 1000 ‚Üí Low ‚Üí System may be undersized. 1,000‚Äì10,000 ‚Üí Moderate ‚Üí Small/medium system. 10,000‚Äì50,000 ‚Üí Normal ‚Üí
    Industrial range. 50,000‚Äì100,000 ‚Üí High ‚Üí Must check system design capacity.> 100,000 ‚Üí Very High ‚Üí May indicate
    oversized or unsafe system.

    > 1,000,000 ‚Üí Unrealistic ‚Üí Show warning.

    3. üõ† Corrected JavaScript Code (with comments & validations)
    /**
    * Gas Flow Rate Calculator - Validations & Formula
    * Formula: Q = (353.7 * T * Z * D¬≤ * P‚ÇÅ¬≤) / (f * L * ‚àö(P‚ÇÅ¬≤ - P‚ÇÇ¬≤))
    *
    * Input Validation Rules:
    * - Temperature (T): >0, recommended 200‚Äì500 K (400‚Äì1000 ¬∞R)
    * - Compressibility Factor (Z): 0.1‚Äì2.0 (typical 0.8‚Äì1.2)
    * - Pipe Diameter (D): >0, typical 0.5‚Äì48 in (0.01‚Äì1.2 m)
    * - Pipe Length (L): >0, typical 1‚Äì10,000 ft (0.3‚Äì3000 m)
    * - Inlet Pressure (P‚ÇÅ): >0, typical 5‚Äì1440 psi (35 kPa ‚Äì 10 MPa)
    * - Outlet Pressure (P‚ÇÇ): ‚â•0 and < P‚ÇÅ * - Friction Factor (f): 0.001‚Äì0.1 (typical 0.01‚Äì0.05) * - Decimals: Allow up
        to 3 * * Safety: Ensures compliance with OSHA, ISO 45001, NFPA pipe-flow safety guidelines. */ {% endcomment %}