{% extends 'base.html' %}
{% block title %}Potential Energy Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
          @media (max-width: 768px) {
    .rate-value {
        font-size: 28px; /* smaller font for tablets/mobiles */
    }
}

@media (max-width: 480px) {
    .rate-value {
        font-size: 24px; /* even smaller for phones */
    }
}
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
    <div class="calculator-container printable" id="printArea">
    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Potential Energy Calculator</h1>
        <p>Calculate the gravitational potential energy (PE) of an object based on its mass, height, and Earth's gravity.</p>
    </div>

    <div class="calc-content">
        <!-- Calculator -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label for="mass">Mass (kg)</label>
                <input type="number" id="mass" class="form-input" min="0" placeholder="e.g., 50">
            </div>
            <div class="form-group">
                <label for="height">Height (m)</label>
                <input type="number" id="height" class="form-input" placeholder="e.g., 10">
            </div>
            <div class="form-group">
                <label for="gravity">Gravitational Constant (g, m/sÂ²)</label>
                <input type="number" id="gravity" class="form-input" value="9.81" disabled>
            </div>

            <button class="calculate-btn" onclick="calculatePotentialEnergy()">Calculate Potential Energy</button>
        </div>

        <!-- Result Section -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/resultimage.png' %}" alt="Energy illustration">
                <p>This tool will calculate the <strong>Potential Energy</strong>. Enter your data to see results and insights here.</p>
            </div>

            <div class="result-error hidden" id="resultError">
                <div class="error-icon">â</div>
                <div class="error-message" id="errorMessage"></div>
            </div>

            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Potential Energy Result</h2>
                </div>
                <div class="rate-value" id="peValue">0.00 J</div>
                <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">Joules (J)</div>

                <div class="result-feedback">
                    <div class="feedback-title">Energy Assessment</div>
                    <div class="feedback-content" id="feedbackContent"></div>
                </div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

   <!-- Notes Section -->
<div class="note-section">

    <!-- About -->
    <div class="note-card">
        <h3>ð About This Calculator</h3>
        <p>
            The <strong>Potential Energy Calculator</strong> computes the gravitational potential energy stored in an object
            based on its mass, height, and gravitational acceleration. It provides an easy-to-use tool for physics,
            engineering, and safety calculations.
        </p>
    </div>

    <!-- Parameters -->
    <div class="note-card">
        <h3>âï¸ Parameters Used</h3>
        <ul class="note-list">
            <li><strong>Mass (m, kg):</strong> Amount of matter in the object; must be positive.</li>
            <li><strong>Height (h, m):</strong> Position relative to a reference point; can be positive, zero, or negative.</li>
            <li><strong>Gravitational Constant (g, m/sÂ²):</strong> Standard Earth gravity (9.81 m/sÂ²).</li>
            <li><strong>Potential Energy (PE, J):</strong> Energy stored due to mass and height: PE = m Ã g Ã h.</li>
        </ul>
    </div>

    <!-- Input Validation -->
    <div class="note-card">
        <h3>ð Input Validation Rules</h3>
        <ul class="note-list">
            <li><strong>Mass:</strong> Positive number (>0 kg). Warn if >10,000 kg.</li>
            <li><strong>Height:</strong> Can be negative, zero, or positive. Typical range: -50 to 500 m.</li>
            <li><strong>Gravity:</strong> Fixed at 9.81 m/sÂ².</li>
            <li><strong>Decimal Precision:</strong> Mass and height: max 2 decimals.</li>
            <li><strong>Cross-field consistency:</strong> Extreme combinations leading to PE >10,000 J trigger a warning.</li>
            <li><strong>Missing or invalid inputs:</strong> Show error messages.</li>
        </ul>
    </div>

    <!-- Output Validations -->
    <div class="note-card">
        <h3>ð Output Validations</h3>
        <ul class="note-list">
            <li><span class="good">PE = 0 J:</span> Ground level; no stored energy.</li>
            <li><span class="good">0 < PE â¤ 100 J:</span> Low potential energy; minimal risk.</li>
            <li><span class="average">100 < PE â¤ 1000 J:</span> Moderate energy; handle with care.</li>
            <li><span class="bad">1000 < PE â¤ 10000 J:</span> High energy; safety protocols required.</li>
            <li><span class="special">PE > 10000 J:</span> Critical energy; verify inputs and ensure safety compliance.</li>
            <li><span class="special">Negative PE:</span> Underground or below reference level; consider context.</li>
        </ul>
    </div>

    <!-- Governing Principle -->
    <div class="note-card">
        <h3>ð Governing Principle</h3>
        <p>
            A potential energy calculator follows the International System of Units (SI) standard, which uses the joule (J) as the unit of energy, derived from base units of kilograms, meters, and seconds. If you use SI units for mass, height, and gravitational acceleration in the formula Ep = mgh, the result will be in joules.
        </p>
        <ul class="note-list">
            <li><strong>SI Units:</strong> Ensures consistency and universality in scientific and engineering contexts.</li>
            <li><strong>Joules (J):</strong> Standard unit of energy; work done when 1 N acts over 1 m.</li>
            <li><strong>Formula:</strong> Ep = m Ã g Ã h, where m = mass (kg), g = gravity (m/sÂ²), h = height (m).</li>
            <li><strong>Consistency:</strong> Using SI units guarantees accurate and comparable results.</li>
        </ul>
    </div>

    <!-- Conclusion -->
    <div class="note-card">
        <h3>â Conclusion</h3>
        <ul class="note-list">
            <li>Quantifies energy stored due to an objectâs position relative to a reference point.</li>
            <li>Supports safe handling of elevated objects in industrial, educational, and hydropower contexts.</li>
            <li>Extremely high PE should trigger safety checks; negative PE requires contextual consideration.</li>
        </ul>
    </div>

</div>
</div>                                  


<script>
function calculatePotentialEnergy() {
    const massInput = document.getElementById('mass').value.trim();
    const heightInput = document.getElementById('height').value.trim();
    const gravity = 9.81;

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const peValue = document.getElementById('peValue');
    const feedbackContent = document.getElementById('feedbackContent');

    let errors = [];

    // --- Mass Validation ---
    const mass = parseFloat(massInput);
    if (massInput === "" || isNaN(mass) || mass <= 0) {
        errors.push("ð Mass must be a positive number (>0 kg).");
    } else if (mass > 10000) {
        errors.push("â ï¸ Mass entered is unusually high. Verify value for safety compliance.");
    } else if (!/^\d+(\.\d{1,2})?$/.test(massInput)) {
        errors.push("ð Mass can have up to 2 decimal places only.");
    }

    // --- Height Validation ---
    const height = parseFloat(heightInput);
    if (heightInput === "" || isNaN(height)) {
        errors.push("ð Height must be a valid number.");
    } else if (height < -50 || height > 500) {
        errors.push("â ï¸ Height entered is outside typical safety range (-50 to 500 m).");
    } else if (!/^-?\d+(\.\d{1,2})?$/.test(heightInput)) {
        errors.push("ð Height can have up to 2 decimal places only.");
    }

    // --- Display errors if any ---
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // --- Calculate Potential Energy ---
    const potentialEnergy = mass * gravity * height;
    peValue.textContent = potentialEnergy.toFixed(2) + " J";

    // --- Feedback based on Output Validations ---
    let feedback = "";
    if (potentialEnergy === 0) {
        feedback = "â PE = 0 J: Ground level; no stored energy.";
    } else if (potentialEnergy > 0 && potentialEnergy <= 100) {
        feedback = "â 0 < PE â¤ 100 J: Low potential energy; minimal risk.";
    } else if (potentialEnergy > 100 && potentialEnergy <= 1000) {
        feedback = "â ï¸ 100 < PE â¤ 1000 J: Moderate energy; handle with care.";
    } else if (potentialEnergy > 1000 && potentialEnergy <= 10000) {
        feedback = "â 1000 < PE â¤ 10000 J: High energy; safety protocols required.";
    } else if (potentialEnergy > 10000) {
        feedback = "ð¨ PE > 10000 J: Critical energy; verify inputs and ensure safety compliance.";
    } else if (potentialEnergy < 0) {
        feedback = "ð» Negative PE: Underground or below reference level; consider context.";
    }

    feedbackContent.innerHTML = feedback;
    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}
</script>

    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- 1ï¸â£ Analysis of Inputs, Outputs, and Calculation Formula

Inputs:

Mass (kg) â represents the weight of the object. Critical for calculating energy stored in elevated objects.

Height (m) â vertical position relative to a reference level; can be positive, zero, or negative.

Gravity (g, m/sÂ²) â standard Earth gravity (9.81); fixed.

Output:

Potential Energy (PE, J) â energy stored due to position: PE = mass * g * height.

Used for safety assessment of elevated objects, machinery, and industrial setups.

Use in QEHS/Fire Safety:

High PE indicates risk of injury or damage if an object falls.

Used in audits, risk assessments, and compliance with OSHA, NFPA, and ISO 45001 standards.

2ï¸â£ Recommended Input Validation Rules (QEHS Perspective)
Input	Rule	Unit	Thresholds	Justification
Mass	Must be a number > 0	kg	Min: 0.1 kg, Max: 10,000 kg (industrial scenarios)	Objects with zero or negative mass are physically impossible; extremely high mass must be verified for safety reports.
Height	Must be a number (can be negative, zero, or positive)	m	Min: -50 m (basement/underground), Max: 500 m (crane towers, high structures)	Ensures realistic evaluation of stored energy; extremely high or low heights may need validation for industrial compliance.
Gravity	Fixed at 9.81 m/sÂ²	m/sÂ²	Fixed	Standard Earth gravity; prevents input errors affecting calculations.

Cross-field dependency rules:

Mass > 0 requires height to be a valid number â an object with mass but no position cannot calculate meaningful PE.

Extremely high PE (>10,000 J) triggers a warning, requiring recheck of mass/height inputs.

Decimal Handling:

Mass: up to 2 decimals (kg precision).

Height: up to 2 decimals (m precision).

3ï¸â£ Output Validation Logic & Thresholds

Potential Energy Thresholds for Safety Assessment:

PE (J)	Safety Level	Feedback
0	Ground Level	No stored energy; safe.
0 < PE â¤ 100	Low	Minimal risk from falling objects.
100 < PE â¤ 1000	Moderate	Potential risk; handle with care; safety measures required.
1000 < PE â¤ 10000	High	Significant risk; safety protocols mandatory.
PE > 10000	Critical	Extremely high energy; validate inputs and ensure safety compliance.
PE < 0	Underground	Negative energy; may represent subterranean objects; check context.

Rationale:

Provides industry-compliant safety guidance for handling objects.

Ensures output is meaningful for audits and hazard assessments.

4ï¸â£ Edge Case Considerations
Edge Case	Handling
Mass = 0	Show error: âMass must be > 0.â
Height = 0	PE = 0, feedback: âObject at reference level.â
Mass negative	Show error.
Height negative	Allow, feedback shows âUnderground level.â
Non-numeric input	Show error.
Extremely high PE (>10,000 J)	Trigger warning for verification.
Extremely small PE (<0.01 J)	Optional info: negligible energy.
Missing input	Show error. -->