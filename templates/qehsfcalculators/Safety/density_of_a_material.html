{% extends 'base.html' %}
{% block title %}Density Of A Material Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Density Of A Material Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background: linear-gradient(#1560bd, #000040);
            /* Dark navy background */
            color: #ffffff;
            /* White text */
            border: 2px solid #1560bd;
            /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
            /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }

        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }

        @media (max-width: 900px) {
            .calc-content {
                flex-direction: column;
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }

        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }

        .calc-card:hover {
            transform: translateY(-5px);
        }

        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }

        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }

        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd, #000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }

        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }

        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }

        .result-value {
            width: 100%;
        }

        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }

        .rate-label {
            color: #7f8c8d;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }

        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .feedback-content {
            color: #34495e;
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease;
        }

        .note-card:hover {
            transform: translateY(-2px);
        }

        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }

        .note-card p,
        .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }

        .note-list {
            margin: 0;
            padding-left: 18px;
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }

        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }

        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden {
            display: none;
        }

        .material-info {
            display: flex;
            align-items: center;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .material-icon {
            font-size: 48px;
            margin-right: 15px;
        }

        .material-details {
            text-align: left;
        }
    </style>
</head>

<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    <div class="calculator-container printable" id="printArea">

        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Density Of A Material Calculator</h1>
            <p>Calculate the density of a material based on its mass and volume</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="form-group">
                    <label for="mass">Mass (m) (kg)</label>
                    <input type="number" id="mass" class="form-input" min="0" step="any" placeholder="e.g., 25.5">
                </div>
                <div class="form-group">
                    <label for="volume">Volume (V) (m¬≥)</label>
                    <input type="number" id="volume" class="form-input" min="0.001" step="any" placeholder="e.g., 0.5">
                </div>

                <button class="calculate-btn" onclick="calculateDensity()">Calculate Density</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="{% static 'images/resultimage.png' %}" alt="Safety illustration">
                    <p>This tool will calculate the <strong>Density</strong> of a material. Enter mass and volume to see
                        results here.</p>
                </div>

                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>

                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType"
                        style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Density</h2>
                    </div>
                    <div class="rate-value" id="densityValue">0.00</div>
                    <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">Kilograms per cubic
                        meter (kg/m¬≥)</div>

                    <div class="result-feedback">
                        <div class="feedback-title">Assessment</div>
                        <div class="feedback-content" id="materialInfo"></div>
                    </div>

                    <div class="material-info hidden" id="commonMaterial">
                        <div class="material-icon">üìä</div>
                        <div class="material-details" id="materialDetails"></div>
                    </div>

                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
            <div class="note-card">
                <h3>üìò About This Calculator</h3>
                <p>
                    The <strong>Density Calculator</strong> helps determine how dense a material is by calculating its
                    mass per unit volume.
                </p>
                <h3> What is Density?</h3>
                <p>Density is a physical property of matter defined as mass per unit volume. It describes how much mass
                    is contained in a given volume of a material.</p>
                <h3>Common Material Densities</h3>
                <ul class="note-list">
                    <li><strong>Air:</strong> ~1.2 kg/m¬≥</li>
                    <li><strong>Water:</strong> 1000 kg/m¬≥</li>
                    <li><strong>Aluminum:</strong> 2700 kg/m¬≥</li>
                    <li><strong>Iron:</strong> 7870 kg/m¬≥</li>
                    <li><strong>Lead:</strong> 11340 kg/m¬≥</li>
                </ul>
            </div>

            <div class="note-card">
                <h3>‚öôÔ∏è Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>Mass (m):</strong> The amount of matter in the material, measured in kilograms (kg).
                    </li>
                    <li><strong>Volume (V):</strong> The space the material occupies, measured in cubic meters (m¬≥).
                    </li>
                </ul>

            </div>
            <div class="note-card">
                <h3>‚úÖ Input Validation Rules</h3>
                <ul class="note-list">
                    <li><strong>Mass (m):</strong> Must be > 0, range 0.001 ‚Äì 100,000 kg, up to 4 decimals.</li>
                    <li><strong>Volume (V):</strong> Must be > 0, range 0.001 ‚Äì 1000 m¬≥, up to 6 decimals.</li>
                    <li><strong>No division by zero:</strong> Volume cannot be 0.</li>
                    <li><strong>Density Output:</strong> Valid range 0.001 ‚Äì 25,000 kg/m¬≥ (flag unrealistic values).
                    </li>
                    <li><strong>All values must be numeric:</strong> No text or negative entries allowed.</li>
                </ul>
            </div>
            <div class="note-card">
                <h3>üìä Output Validations</h3>
                <p>This section represents the material density range (in kg/m¬≥), used to identify the type and behavior
                    of materials based on their mass per unit volume.</p>

                <ul class="note-list">
                    <li>&lt; 10 kg/m¬≥ ‚Äî Very low density material, similar to foams or gases. <br>Examples: Air (1.2
                        kg/m¬≥), Polystyrene foam (15‚Äì30 kg/m¬≥).</li>
                    <li>10 ‚Äì 500 kg/m¬≥ ‚Äî Low density material, similar to wood or light plastics.<br> Examples: Balsa
                        wood (100‚Äì120 kg/m¬≥), Cork (240 kg/m¬≥).</li>
                    <li>500 ‚Äì 1200 kg/m¬≥ ‚Äî Medium density, comparable to water or light woods.<br> Examples: Water (1000
                        kg/m¬≥), Oak (600‚Äì900 kg/m¬≥).</li>
                    <li>1200 ‚Äì 3000 kg/m¬≥ ‚Äî Moderate density, similar to aluminum or magnesium. <br>Examples: Magnesium
                        (1740 kg/m¬≥), Aluminum (2700 kg/m¬≥).</li>
                    <li>3000 ‚Äì 8000 kg/m¬≥ ‚Äî High density, comparable to iron or steel. <br>Examples: Iron (7870 kg/m¬≥),
                        Steel (7850 kg/m¬≥).</li>
                    <li>&gt; 8000 kg/m¬≥ ‚Äî Very high density, typical of heavy metals like lead.<br> Examples: Copper
                        (8940 kg/m¬≥), Lead (11340 kg/m¬≥).</li>
                </ul>
            </div>


            <div class="note-card">
                <h3>üìè Governing Principle</h3>
                <p>
                    A <strong>Density Calculator</strong> operates using the International System of Units (SI), where
                    density is measured in kilograms per cubic meter (kg/m¬≥).
                    However, it can also perform calculations based on other unit systems, such as the CGS
                    (Centimeter‚ÄìGram‚ÄìSecond) system or the US customary system, depending on application needs.
                </p>
                <h3>Common Standards and Units</h3>
                <ul class="note-list">
                    <li><strong>SI Units:</strong> Kilograms per cubic meter (kg/m¬≥) ‚Äî standard for engineering and
                        scientific use.</li>
                    <li><strong>CGS Units:</strong> Grams per cubic centimeter (g/cm¬≥), grams per milliliter (g/mL), or
                        grams per liter (g/L) ‚Äî used in labs for solids, liquids, and gases respectively.</li>
                    <li><strong>US Customary Units:</strong> Pounds per cubic foot (lb/ft¬≥) ‚Äî often applied in
                        industrial and construction contexts.</li>
                </ul>
                <h3>How Calculators Handle Standards</h3>
                <ul class="note-list">
                    <li><strong>Unit Conversion:</strong> Modern calculators automatically convert between unit systems,
                        allowing results in kg/m¬≥, g/cm¬≥, or lb/ft¬≥ as needed.</li>
                    <li><strong>Contextual Application:</strong> The preferred unit system depends on the industry or
                        region, though SI units remain the global standard.</li>
                </ul>
            </div>

            <div class="note-card">
                <h3>üìå Conclusion</h3>
                <p>
                    Density is one of the most fundamental physical properties of matter.
                    Ensuring accurate mass and volume measurements guarantees meaningful results that can guide material
                    selection, quality control, and safety analysis across engineering, environmental, and scientific
                    applications.
                </p>
            </div>


        </div>
    </div>

    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function () {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateDensity() {
            const mass = document.getElementById('mass').value.trim();
            const volume = document.getElementById('volume').value.trim();

            const errorBox = document.getElementById('resultError');
            const errorMessage = document.getElementById('errorMessage');
            const placeholder = document.getElementById('placeholder');
            const resultValue = document.getElementById('resultValue');
            const commonMaterial = document.getElementById('commonMaterial');

            let errors = [];

            // ============================
            // MASS VALIDATION
            // ============================
            if (mass === "") {
                errors.push("üëâ Please enter the mass of the material.");
            } else {
                const m = parseFloat(mass);
                if (isNaN(m) || m <= 0) {
                    errors.push("üëâ Mass must be a number greater than 0.");
                } else if (m < 0.001) {
                    errors.push("üëâ Mass less than 0.001 kg is too small for reliable measurement.");
                } else if (m > 100000) {
                    errors.push("üëâ Mass exceeds 100,000 kg. Please verify.");
                }
            }

            // ============================
            // VOLUME VALIDATION
            // ============================
            if (volume === "") {
                errors.push("üëâ Please enter the volume of the material.");
            } else {
                const v = parseFloat(volume);
                if (isNaN(v) || v <= 0) {
                    errors.push("üëâ Volume must be a number greater than 0.");
                } else if (v < 0.001) {
                    errors.push("üëâ Volume less than 0.001 m¬≥ is too small for practical measurement.");
                } else if (v > 1000) {
                    errors.push("üëâ Volume exceeds 1000 m¬≥. Please verify.");
                }
            }

            // ============================
            // ERROR HANDLING
            // ============================
            if (errors.length > 0) {
                errorMessage.innerHTML = errors.join("<br>");
                errorBox.classList.remove("hidden");
                placeholder.classList.add("hidden");
                resultValue.classList.add("hidden");
                commonMaterial.classList.add("hidden");
                return;
            } else {
                errorBox.classList.add("hidden");
            }

            // ============================
            // CALCULATION
            // ============================
            const m = parseFloat(mass);
            const v = parseFloat(volume);
            const density = m / v;

            // Validate calculation result
            if (!isFinite(density) || density <= 0) {
                errorMessage.innerHTML = "‚ùå Invalid calculation result. Please check inputs.";
                errorBox.classList.remove("hidden");
                resultValue.classList.add("hidden");
                commonMaterial.classList.add("hidden");
                return;
            }

            if (density < 0.001 || density > 25000) {
                errorMessage.innerHTML = "‚ö†Ô∏è Density result is outside realistic range (0.001 ‚Äì 25,000 kg/m¬≥). Please check inputs.";
                errorBox.classList.remove("hidden");
                resultValue.classList.add("hidden");
                commonMaterial.classList.add("hidden");
                return;
            }

            // Display result
            document.getElementById('densityValue').textContent = density.toFixed(4);

            // Material classification logic remains unchanged
            let materialInfo = "";
            let materialDetails = "";

            if (density < 10) {
                materialInfo = "Very low density material, similar to foams or gases.";
                materialDetails = "Examples: Air (1.2 kg/m¬≥), Polystyrene foam (15-30 kg/m¬≥)";
            } else if (density < 500) {
                materialInfo = "Low density material, similar to wood or light plastics.";
                materialDetails = "Examples: Balsa wood (100-120 kg/m¬≥), Cork (240 kg/m¬≥)";
            } else if (density < 1200) {
                materialInfo = "Medium density, comparable to water or light woods.";
                materialDetails = "Examples: Water (1000 kg/m¬≥), Oak (600-900 kg/m¬≥)";
            } else if (density < 3000) {
                materialInfo = "Moderate density, similar to aluminum or magnesium.";
                materialDetails = "Examples: Magnesium (1740 kg/m¬≥), Aluminum (2700 kg/m¬≥)";
            } else if (density < 8000) {
                materialInfo = "High density, comparable to iron or steel.";
                materialDetails = "Examples: Iron (7870 kg/m¬≥), Steel (7850 kg/m¬≥)";
            } else {
                materialInfo = "Very high density, typical of heavy metals like lead.";
                materialDetails = "Examples: Copper (8940 kg/m¬≥), Lead (11340 kg/m¬≥)";
            }

            document.getElementById('materialInfo').textContent = materialInfo;
            document.getElementById('materialDetails').textContent = materialDetails;

            commonMaterial.classList.remove("hidden");
            placeholder.classList.add("hidden");
            resultValue.classList.remove("hidden");
        }

        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);

            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>

</html>
{% endblock %}



{% comment %}
1. Formula

The calculator uses the standard density formula:

Density¬†(œÅ)
=
Mass¬†(m)
Volume¬†(V)
Density¬†(œÅ)=
Volume¬†(V)
Mass¬†(m)
‚Äã


œÅ (Density): kg/m¬≥

m (Mass): kilograms (kg)

V (Volume): cubic meters (m¬≥)

2. Input Validation Rules (QEHS / Fire Safety Perspective)
Mass (m, in kg)

Must be numeric only.

Must be > 0 (a physical object cannot have zero or negative mass).

Acceptable practical range: 0.001 kg to 100,000 kg

Below 0.001 kg ‚Üí negligible for material density calculations.

Above 100,000 kg ‚Üí unusual for a single sample in occupational safety context.

Allow up to 4 decimal places for precision (small samples in lab work).

Volume (V, in m¬≥)

Must be numeric only.

Must be > 0 (cannot occupy zero or negative volume).

Acceptable practical range: 0.001 m¬≥ to 1000 m¬≥

Below 0.001 m¬≥ ‚Üí unrealistic except for lab-scale micro samples.

Above 1000 m¬≥ ‚Üí rare in occupational/material testing; likely a wrong entry.

Allow up to 6 decimal places (since volume measurements can be very precise).

3. Output Validation Logic
Density Ranges

< 1 kg/m¬≥: Light gases (e.g., air ~1.2 kg/m¬≥). 1‚Äì500 kg/m¬≥: Foams, cork, lightweight woods/plastics. 500‚Äì1200 kg/m¬≥:
    Water, plastics, woods. 1200‚Äì3000 kg/m¬≥: Common structural metals (aluminum, magnesium). 3000‚Äì8000 kg/m¬≥: Iron,
    steel.> 8000 kg/m¬≥: Heavy metals (copper, lead, uranium).

    ‚ö†Ô∏è If the result falls outside 0.001‚Äì25,000 kg/m¬≥, flag as unrealistic.

    4. Edge Cases & Handling

    Division by zero (Volume = 0): Block calculation, show error.

    Mass = 0: Block calculation, as no density can be calculated.

    Extremely high densities (>25,000 kg/m¬≥): Warn user; likely input error.

    Extremely small densities (<0.001 kg/m¬≥): Warn user; only possible in ultra-low-density gases. Non-numeric input
        (NaN, text, empty): Show validation error. Negative numbers: Not allowed for mass or volume. 5. Corrected
        JavaScript Validation Logic Here‚Äôs the improved validation function with full compliance-grade checks. I also
        added comments with formulas and rules so future developers/inspectors can see the logic basis.
        /*=================================================Density Calculator (QEHS & Fire Safety Validations) Formula:
        Density (œÅ)=Mass (m) / Volume (V) Units: œÅ in kg/m¬≥, m in kg, V in m¬≥ Validation Rules: Mass (kg): - Must be> 0
        - Range: 0.001 ‚Äì 100,000 kg
        - Up to 4 decimals allowed
        Volume (m¬≥):
        - Must be > 0
        - Range: 0.001 ‚Äì 1000 m¬≥
        - Up to 6 decimals allowed
        Density (kg/m¬≥):
        - Expected range: 0.001 ‚Äì 25,000 kg/m¬≥
        - Flag unrealistic values outside this
        =================================================
        */ {% endcomment %}