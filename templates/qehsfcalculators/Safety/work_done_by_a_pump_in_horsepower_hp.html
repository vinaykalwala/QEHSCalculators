{% extends 'base.html' %}
{% block title %}Work Done By A Pump In Horsepower Hp{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Done By A Pump In Horsepower Hp</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        
        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }
        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        @media (max-width: 900px) {
            .calc-content {
                flex-direction: column;
            }
        }
        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        .calc-card:hover {
            transform: translateY(-5px);
        }
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }
        /* Inputs */
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        .form-input, .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }
        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }
        /* Result Card */
        .result-placeholder {
            text-align: center;
            margin: auto;
        }
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: baseline;
            justify-content: center;
        }
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
        }
        .rate-label {
            color: #2980b9;
            font-weight: bold;
            font-size: 20px;
        }
        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        .feedback-content {
            color: #34495e;
        }
        /* Notes Section */
        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }
        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
        }
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        .note-list { margin: 0; padding-left: 18px; }
        .calculation-nav {
            display: flex;
            justify-content: center;
            margin-top: 15px;
        }
        .calculation-link {
            display: inline-block;
            background: linear-gradient(135deg, #1560bd, #000040);
            padding: 10px 20px;
            color: white;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .calculation-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        /* Error Message */
        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px; padding: 20px;
            text-align: left; gap: 12px; margin-top: 20px;
        }
        .error-icon { font-size: 76px; flex-shrink: 0; text-align: center; }
        .error-message { font-size: 24px; line-height: 1.6; }
        .hidden { display: none; }
        .btn-container { display: flex; justify-content: center; margin: 30px 0; }
        .back-btn {
            background: linear-gradient(#1560bd,#000040); color: #ffffff; border: 2px solid #1560bd;
            padding: 10px 20px; font-size: 14px; font-weight: 600; border-radius: 8px;
            text-decoration: none; transition: all 0.3s ease; cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>

    <div class="calculator-container printable" id="printArea">
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Work Done by a Pump Calculator</h1>
            <p>Calculate the work done by a pump in metric horsepower (HP).</p>
        </div>

        <div class="calc-content">
            <div class="calc-card">
                <h2>Pump Parameters</h2>
                <div class="form-group">
                    <label for="specificWeight">Specific Weight of Fluid (kg/m³)</label>
                    <input type="number" id="specificWeight" class="form-input" value="1000">
                </div>
                <div class="form-group">
                    <label for="discharge">Discharge of Pump (m³/s)</label>
                    <input type="number" id="discharge" class="form-input" placeholder="Enter discharge rate">
                </div>
                <div class="form-group">
                    <label for="totalHead">Total Head (m)</label>
                    <input type="number" id="totalHead" class="form-input" placeholder="Enter total head">
                </div>
                <button class="calculate-btn" onclick="calculateAndDisplay()">Calculate Pump Work</button>
            </div>

            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Engineering illustration">
                    <p>Enter the pump's parameters to calculate the work done in horsepower.</p>
                </div>
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">❌</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                <div id="resultValue" class="hidden" style="text-align: center;">
                    <h2>Work Done by Pump</h2>
                    <div class="rate-display">
                        <div class="rate-value" id="rateValue">0.00</div>
                        <div class="rate-label">HP</div>
                    </div>
                    <div class="result-feedback">
                        <div class="feedback-title">Summary of Calculation</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                       <div class="btn-wrapper">
                            <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                        </div>
                </div>
            </div>
        </div>

        <div class="note-section">
            <div class="note-card">
                <h3>📘 About This Calculator</h3>
                <p>
                    The <strong>Work Done by a Pump Calculator</strong> determines the power required by a pump to move a specific volume of fluid against a certain pressure or head. This power, often expressed in horsepower (HP), represents the energy transferred to the fluid. It is a fundamental calculation for sizing pumps, evaluating system efficiency, and estimating energy consumption in various hydraulic applications.
                </p>
            </div>
            <div class="note-card">
                <h3>⚙️ Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>Specific Weight of Fluid (γ):</strong> The weight per unit volume of the fluid being pumped. For water, this is approximately 1000 kg/m³.</li>
                    <li><strong>Discharge of Pump (Q):</strong> The volumetric flow rate, or the volume of fluid that passes through the pump per second (m³/s).</li>
                    <li><strong>Total Head (H):</strong> The total effective height the fluid is lifted, which includes the vertical elevation change plus any pressure differences and friction losses in the system, measured in meters (m).</li>
                </ul>
            </div>
            <div class="note-card">
                <h3>✅ Input Validation Rules</h3>
                <ul class="note-list">
                    <li><strong>Specific Weight:</strong> Must be a positive number, typically between 500 and 1500 kg/m³ for most liquids.</li>
                    <li><strong>Discharge:</strong> Must be a positive number greater than zero.</li>
                    <li><strong>Total Head:</strong> Must be a positive number greater than zero.</li>
                    <li>All inputs are required and must be within specified decimal limits for accuracy.</li>
                </ul>
            </div>
            <div class="note-card">
                <h3>Output Validations</h3>
                <p>Upon successful calculation, a summary is provided that reiterates the inputs and displays the final result. The output message will be in the following format:</p>
                <ul class="note-list">
                    <li><span class="good">The calculation is based on:
                        <br><strong>Specific Weight:</strong> [Value] kg/m³
                        <br><strong>Discharge:</strong> [Value] m³/s
                        <br><strong>Total Head:</strong> [Value] m
                        <br><strong>Work Done by Pump:</strong> [Value] H.P.</span></li>
                </ul>
            </div>
            <div class="note-card">
                <h3>Governing Principle</h3>
                <p>
                    A calculator for the work done by a pump in horsepower (HP) is based on the <strong>Imperial (Foot-Pound-Second) system</strong>, which defines HP as 550 foot-pounds of work per second. This unit of power was invented by Scottish engineer James Watt to compare the output of steam engines to that of draft horses.
                </p>
                <p>When applied to pumps, this concept is often referred to as <strong>Water Horsepower (WHP)</strong>, which is the theoretical power required to move a given volume of water against a certain pressure or head. Pump calculators adapt this fundamental principle into various formulas depending on the units used for flow rate (e.g., Gallons Per Minute) and pressure (e.g., psi), but all are derived from the core definition of horsepower as a rate of doing work.</p>
            </div>
            <div class="note-card">
                <h3>Conclusion</h3>
                <p>
                    Calculating the work done by a pump is essential for the proper design and operation of any fluid-handling system. This value directly informs the selection of the motor required to drive the pump, ensuring it can meet the system's demands without being oversized (which is inefficient) or undersized (which can lead to failure). Accurate power calculation is a key step in creating a reliable, safe, and energy-efficient system.
                </p>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (document.getElementById('printDate')) {
                const now = new Date();
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            }
        });

        function calculateAndDisplay() {
            const errorBox = document.getElementById('resultError');
            const errorMessage = document.getElementById('errorMessage');
            const placeholder = document.getElementById('placeholder');
            const resultValueBox = document.getElementById('resultValue');
            const rateValue = document.getElementById('rateValue');
            const feedbackContent = document.getElementById('feedbackContent');

            // Reset UI
            errorBox.classList.add('hidden');
            resultValueBox.classList.add('hidden');
            placeholder.classList.remove('hidden');

            let errors = [];

            // Helper function for validation
            function getVal(id, label, opts = {}) {
                const el = document.getElementById(id);
                const raw = el.value?.toString().trim();

                if (!raw) {
                    errors.push(`👉 ${label} is required.`);
                    return null;
                }

                const num = parseFloat(raw);
                if (isNaN(num) || num <= 0) {
                    errors.push(`👉 Enter a valid positive number for ${label}.`);
                    return null;
                }

                if (opts.min !== undefined && num < opts.min) {
                    errors.push(`👉 ${label} must be ≥ ${opts.min}.`);
                }

                if (opts.max !== undefined && num > opts.max) {
                    errors.push(`👉 ${label} must be ≤ ${opts.max}.`);
                }

                // Decimal restriction if specified
                if (opts.decimals !== undefined) {
                    const decimalPart = raw.split('.')[1];
                    if (decimalPart && decimalPart.length > opts.decimals) {
                        errors.push(`👉 ${label} can have up to ${opts.decimals} decimal place(s).`);
                    }
                }

                return num;
            }

            // Input validations
            const specificWeight = getVal('specificWeight', 'Specific Weight of Fluid', { min: 500, max: 1500, decimals: 2 });
            const discharge = getVal('discharge', 'Discharge of Pump', { min: 0.001, max: 10, decimals: 3 });
            const totalHead = getVal('totalHead', 'Total Head', { min: 0.1, max: 500, decimals: 2 });

            if (errors.length > 0) {
                errorMessage.innerHTML = errors.join("<br>");
                errorBox.classList.remove('hidden');
                placeholder.classList.add('hidden');
                return;
            }

            // Pump work calculation (Metric H.P.)
            const pumpWork = (specificWeight * discharge * totalHead) / 75;

            // Display results
            placeholder.classList.add('hidden');
            resultValueBox.classList.remove('hidden');
            rateValue.textContent = pumpWork.toFixed(2);

            feedbackContent.innerHTML = `
                The calculation is based on:
                <br><strong>Specific Weight:</strong> ${specificWeight} kg/m³
                <br><strong>Discharge:</strong> ${discharge} m³/s
                <br><strong>Total Head:</strong> ${totalHead} m
                <br><span class="good"><strong>Work Done by Pump:</strong> ${pumpWork.toFixed(2)} H.P.</span>
            `;
        }

        function printReport() {
            if (document.getElementById('printDate')) {
                const now = new Date();
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            }
            window.print();
        }
    </script>

</body>
</html>
{% endblock %}

<!-- 
1️⃣ Input Validation Rules – QEHS Perspective
Input	Unit	Recommended Range	Allowed Decimals	Notes / Logical Consistency
Specific Weight of Fluid	kg/m³	500 – 1500	0–2 decimal places	Typical range: water ~1000 kg/m³; ensure positive, realistic density.
Discharge (Q)	m³/s	0.001 – 10	0–3 decimal places	Must be positive; extremely high flow rates (>10 m³/s) flagged as unusual.
Total Head (H)	m	0.1 – 500	0–2 decimal places	Must be positive; very high head (>500 m) flagged as extreme/unrealistic.

Cross-field dependency:

All inputs must be > 0; otherwise, pump work calculation is physically meaningless.

Ensure discharge × head doesn’t exceed typical operational limits (optional warning).

Edge Cases to Handle:

Zero or negative values → reject input.

Non-numeric values → reject input.

Unrealistic extreme values (e.g., density < 500 or > 1500) → warn user.

Overflow / large results → ensure JS number safety.

2️⃣ Output Validation Logic & Explanation

Formula Used:

Pump Work (H.P.)
=
Specific Weight
×
Discharge
×
Total Head
75
Pump Work (H.P.)=
75
Specific Weight×Discharge×Total Head
	​


The denominator (75) converts N·m/s to Horsepower (H.P.) using standard units.

Output is meaningful only if inputs are physically realistic.

Result rounded to 2 decimal places for clarity in reports.

QEHS Compliance:

Validates user inputs against realistic engineering thresholds.

Prevents erroneous calculations that could misguide safety or operational decisions.

Ensures consistent units for audits and risk assessment reports.
-->