{% extends 'base.html' %}
{% block title %}Capacitance Law Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capacitance Law Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }
         .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }


        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            {% comment %} max-width: 700px; {% endcomment %}
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background:linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

        .capacitance-value {
            font-size: 32px;
            font-weight: 700;
            color: #2980b9;
            margin: 15px 0;
        }
        
        .scientific-value {
            font-size: 18px;
            color: #7f8c8d;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
        <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>


   <div class="calculator-container printable" id="printArea">

    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Capacitance Law Calculator</h1>
            <p>Calculate the capacitance of a parallel plate capacitor based on dielectric constant, plate area, and plate separation</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="form-group">
                    <label for="dielectric">Dielectric Constant (K)</label>
                    <input type="number" id="dielectric" class="form-input" min="0" step="1" placeholder="e.g., 3.5">
                </div>
                <div class="form-group">
                    <label for="area">Plate Area (A) in m¬≤</label>
                    <input type="number" id="area" class="form-input" min="0" step="0.001" placeholder="e.g., 0.5">
                </div>
                <div class="form-group">
                    <label for="distance">Distance Between Plates (D) in m</label>
                    <input type="number" id="distance" class="form-input" min="0" step="0.001" placeholder="e.g., 0.001">
                </div>
                
                <button class="calculate-btn" onclick="calculateCapacitance()">Calculate Capacitance</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="{% static 'images/resultimage.png' %}" alt="Safety illustration">
                    <p>This tool will calculate the <strong>Capacitance</strong> of a parallel plate capacitor. Enter your data to see results and insights here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                 
                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Capacitance Result</h2></DIV>
                    <div class="capacitance-value" id="capacitanceValue">0.00 F</div>
                    <div class="scientific-value" id="scientificValue" style="color:#2980b9; font-size:20px; font-weight:bold; " >0.00e+0 F</div>

                    <div class="result-feedback">
                        <div class="feedback-title"> Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
            <div class="note-card">
                <h3>üìò About This Calculator</h3>
                <p>
                    The <strong>Capacitance Law Calculator</strong> helps determine the capacitance of a parallel plate capacitor based on its physical properties.
                </p>
                <h3>‚ùì What is Capacitance?</h3>
                <p>Capacitance is the ability of a capacitor to store electrical energy in an electric field. It's measured in Farads (F).</p>
                     <p>Capacitance plays a vital role across various fields: in electronics, it is essential for designing capacitors used in circuits, filters, and power supplies; in energy storage, it is critical for supercapacitors and other energy storage systems; in sensor technology, capacitive sensors are widely used in touchscreens and proximity detection; and in high-frequency circuits, capacitance significantly impacts RF and microwave circuit performance.</p>

            </div>
           
            <div class="note-card">
                <h3>‚öôÔ∏è Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>Dielectric Constant (K):</strong> A material property that determines how well a dielectric medium can store electrical energy.</li>
                    <li><strong>Plate Area (A):</strong> The surface area of the capacitor plates in square meters.</li>
                    <li><strong>Distance Between Plates (D):</strong> The separation between the capacitor plates in meters.</li>
                </ul>
            </div>
            
           
           <div class="note-card">
    <h3>‚úÖ Input Validation Rules (Industry / Physics Standards)</h3>
    <ul class="note-list">
        <li>
            <strong>Dielectric Constant (K):</strong> Dimensionless, must be between <strong>1 ‚Äì 100</strong>.
            <ul>
                <li>Reason: Vacuum = 1, air ‚âà 1.0006, plastics 2‚Äì5, ceramics 10‚Äì100.</li>
                <li>K &lt; 1 or &gt; 100 ‚Üí physically non-physical.</li>
            </ul>
        </li>
        <li>
            <strong>Plate Area (A):</strong> In m¬≤, acceptable range <strong>1√ó10‚Åª‚Å∂ ‚Äì 10</strong>.
            <ul>
                <li>Reason: 1 mm¬≤ to 10 m¬≤; below 1 mm¬≤ ‚Üí unrealistic nano-scale, above 10 m¬≤ ‚Üí impractical capacitor.</li>
                <li>Must always be > 0.</li>
            </ul>
        </li>
        <li>
            <strong>Plate Distance (D):</strong> In meters, acceptable range <strong>1√ó10‚Åª‚Åπ ‚Äì 0.1</strong>.
            <ul>
                <li>Reason: 1 nm to 10 cm; smaller ‚Üí atomic scale, larger ‚Üí impractical for capacitors.</li>
                <li>D must always be &gt; 0.</li>
            </ul>
        </li>
        <li>
            <strong>Decimals:</strong> Up to 6 decimals recommended for precision in nano-scale electronics.
        </li>
       <li>
            <strong>Cross-Parameter Rules:</strong>
            <ul>
                <li>The plate area must always be greater than zero.</li>
                <li>The plate separation distance must always be greater than zero.</li>
                <li>The calculated capacitance must always be greater than zero; otherwise, the input values are invalid.</li>
            </ul>
        </li>
       
    </ul>
</div>
<div class="note-card">
    <h3>üìä Output Validation</h3>
    <ul class="note-list">
        <li>
            Capacitance &lt; 1 √ó 10‚Åª¬π¬≤ Farads: ‚ö†Ô∏è Very low capacitance (&lt;1pF), only useful in RF/high-frequency circuits.
        </li>
        <li>
            Capacitance between 1 √ó 10‚Åª¬π¬≤ and 1 √ó 10‚Åª‚Å∂ Farads: ‚úÖ Typical capacitance for electronic circuits (pF‚Äì¬µF).
        </li>
        <li>
            Capacitance between 1 √ó 10‚Åª‚Å∂ and 1 Farad: ‚úÖ Common capacitance for power electronics (¬µF‚ÄìF).
        </li>
        <li>
            Capacitance &gt; 1 Farad: ‚ö†Ô∏è Extremely high capacitance (&gt;1F). Likely only in supercapacitors.
        </li>
    </ul>
</div>
<div class="note-card">
    <h3>üìè Governing Principle </h3>
    <p>
        A capacitance calculator uses fundamental laws of physics rather than a single, universal standard. 
        The specific formula applied depends on the physical geometry of the capacitor being measured.
    </p>

    <h3>Fundamental Law</h3>
    <p>
        The core principle governing all capacitance calculations is the relationship between charge, voltage, and capacitance:
        <br>
        <em>C = Q / V</em>
        <br>
        where:
        <ul>
            <li><strong>C</strong> is capacitance, measured in farads (F), the SI unit.</li>
            <li><strong>Q</strong> is electric charge, measured in coulombs (C).</li>
            <li><strong>V</strong> is voltage, or electric potential difference, measured in volts (V).</li>
        </ul>
        Because one farad is a very large unit, calculators often use sub-multiples like microfarads (¬µF), nanofarads (nF), and picofarads (pF).
    </p>

    <h3>Calculations Based on Geometry</h3>
    <p>
        The calculator applies formulas derived from this law for different physical arrangements of conductors. 
        The formula changes based on the capacitor's shape and the dielectric material separating its plates.
    </p>

    <ul>
        <li>
            <strong>Parallel-Plate Capacitor:</strong>
            <br>
            For two identical conducting plates of area <em>A</em> separated by a distance <em>d</em>, 
            <em>C = Œµ A / d</em>, where Œµ is the permittivity of the dielectric material (Œµ = Œµ‚ÇÄ √ó Œµr).  
            <em>A</em> is the overlapping area of the plates, <em>d</em> is the distance between them.
        </li>
        <li>
            <strong>Cylindrical Capacitor (Coaxial Cable):</strong>
            <br>
            For a cylindrical arrangement with inner radius <em>a</em> and outer radius <em>b</em> of length <em>L</em>, 
            <em>C = 2œÄ Œµ L / ln(b / a)</em>.
        </li>
        <li>
            <strong>Spherical Capacitor:</strong>
            <br>
            For two concentric spheres with radii <em>R‚ÇÅ</em> and <em>R‚ÇÇ</em>, 
            <em>C = 4œÄ Œµ R‚ÇÅ R‚ÇÇ / (R‚ÇÇ - R‚ÇÅ)</em>.
        </li>
    </ul>

    <h3>Standards for Measurement and Components</h4>
    <ul>
        <li>
            <strong>International Electrotechnical Commission (IEC):</strong> Produces standards like IEC 60384-1 covering electrical characteristics, standard values, and tolerances for capacitors.
        </li>
        <li>
            <strong>National Institute of Standards and Technology (NIST):</strong> Provides standard reference data and calibration services to ensure measurement accuracy.
        </li>
        <li>
            <strong>A2LA:</strong> Accreditation body performing calibration services for capacitance standards based on ISO-17025, ensuring consistency in measurements.
        </li>
    </ul>
</div>
<div class="note-card">
    <h3>üèÅ Conclusion</h3>

        Capacitance calculators combine these fundamental physics laws with geometrical formulas and material properties 
        to accurately determine the capacitance of different types of capacitors. 
        While calculations rely on physics, adherence to international standards ensures practical, reliable, and consistent measurements for engineering and electronics applications.
    </p>
</div>


            
           
        </div>

    </div>

    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateCapacitance() {
    const K = parseFloat(document.getElementById('dielectric').value.trim());
    const A = parseFloat(document.getElementById('area').value.trim());
    const D = parseFloat(document.getElementById('distance').value.trim());

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');

    let errors = [];

    // ============================
    // VALIDATIONS
    // ============================

   if (isNaN(K) || K < 1 || K > 100) {
    errors.push("üëâ Dielectric constant (K) must be between 1 and 100.");
}

if (isNaN(A) || A <= 0 || A > 10 || A < 0.000001) {
    errors.push("üëâ Plate area must be between 0.000001 m¬≤ (1 mm¬≤) and 10 m¬≤.");
}

// Plate Separation (D)
if (isNaN(D) || D <= 0 || D > 1000 || D < 0.000000001) {
    errors.push("üëâ Plate separation must be between 0.000000001 m (1 nanometer) and 1000 m.");
}


    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // ============================
    // CALCULATION
    // ============================
    const epsilon0 = 8.854e-12; // Permittivity of free space (F/m)
    const capacitance = epsilon0 * K * (A / D);

    if (!isFinite(capacitance) || capacitance <= 0) {
        errorMessage.innerHTML = "‚ùå Invalid result: please check inputs.";
        errorBox.classList.remove("hidden");
        return;
    }

    // Format results
    const normalValue = capacitance.toFixed(12);
    const scientificValue = capacitance.toExponential(4);

    document.getElementById('capacitanceValue').textContent = `${normalValue} Farads`;
    document.getElementById('scientificValue').textContent = `${scientificValue} Farads`;

    // ============================
    // OUTPUT ASSESSMENT
    // ============================
    let feedback;
    if (capacitance < 1e-12) {
        feedback = "‚ö†Ô∏è Very low capacitance (<1pF), only useful in RF/high-frequency circuits.";
    } else if (capacitance >= 1e-12 && capacitance < 1e-6) {
        feedback = "‚úÖ Typical capacitance for electronic circuits (pF‚Äì¬µF).";
    } else if (capacitance >= 1e-6 && capacitance < 1) {
        feedback = "‚úÖ Common capacitance for power electronics (¬µF‚ÄìF).";
    } else {
        feedback = "‚ö†Ô∏è Extremely high capacitance (>1F). Likely only in supercapacitors.";
    }

    document.getElementById('feedbackContent').textContent = feedback;

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}


        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            
            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>

</body>
</html>
{% endblock %}


{% comment %} 

1. Formula (for code comments)
/*
Capacitance Law (Parallel Plate Capacitor):

C = Œµ‚ÇÄ √ó K √ó (A / D)

Where:
C   = Capacitance (Farads, F)
Œµ‚ÇÄ  = Permittivity of free space = 8.854 √ó 10‚Åª¬π¬≤ F/m
K   = Relative dielectric constant of material (dimensionless, >0)
A   = Plate area (m¬≤)
D   = Plate separation distance (m)

Note:
- Capacitance increases with larger plate area and higher dielectric constant.
- Capacitance decreases with larger separation distance.
*/


üëâ Your code is missing Œµ‚ÇÄ. Without it, results are off by 10‚Åª¬π¬≤. You should multiply by 8.854e-12.

2. Input Validation Rules (Industry / Physics Standards)
Parameter	Units	Acceptable Range	Reason
Dielectric Constant (K)	dimensionless	1 ‚Äì 100	Vacuum = 1, air ‚âà1.0006, plastics 2‚Äì5, ceramics 10‚Äì100. Below 1 or above 100 is non-physical.
Plate Area (A)	m¬≤	1e-6 ‚Äì 10	1 mm¬≤ to 10 m¬≤. Below = unrealistic nano-scale, above = impractical capacitor.
Distance (D)	m	1e-9 ‚Äì 0.1	1 nm (nano) to 10 cm. Larger gaps don‚Äôt make sense for capacitors, smaller is atomic scale.
Decimals	‚Äì	up to 6 decimals	Needed for precision in nano-scale electronics.

Cross-field rules:

A > 0, D > 0 always.

Capacitance > 0, otherwise invalid.

3. Edge Case Validations

D = 0 ‚Üí Division by zero ‚Üí error.

Negative values ‚Üí physically impossible.

K < 1 ‚Üí impossible dielectric ‚Üí error.

Extremely large C (>100 F) ‚Üí unrealistic for parallel plates, likely input error.

4. Output Validation Logic

C < 1 pF (10‚Åª¬π¬≤ F) ‚Üí too small, only useful for RF/high-frequency circuits.

1 pF ‚Äì 1 ¬µF (10‚Åª¬π¬≤‚Äì10‚Åª‚Å∂ F) ‚Üí typical for electronics.

1 ¬µF ‚Äì 1 F (10‚Åª‚Å∂‚Äì1 F) ‚Üí common for power electronics.

> 1 F ‚Üí only possible in supercapacitors ‚Üí check design validity. {% endcomment %}