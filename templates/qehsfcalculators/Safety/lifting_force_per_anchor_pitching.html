{% extends 'base.html' %}
{% block title %}Lifting Force Per Anchor (Pitching) Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lifting Force per Anchor (Pitching) Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }
        
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd, #000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        .rate-display {
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Table styling */
.parameters-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #ccc; /* outer border */
}

.parameters-table thead {
    background: linear-gradient(135deg, #1560bd, #000040);
    color: white;
}

.parameters-table th {
    padding: 12px 15px;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid #ddd; /* line below header */
}

.parameters-table td {
    padding: 10px 15px;
    border-bottom: 1px solid #d0d0d0; /* üëà line between each row */
}

.parameters-table tbody tr:last-child td {
    border-bottom: none; /* remove line after last row */
}

.parameters-table tbody tr:nth-child(even) {
    background-color: #f5f9ff;
}

.parameters-table tbody tr:hover {
    background-color: #e6f0ff;
}

@media (max-width: 600px) {
    .parameters-table {
        display: block;
        overflow-x: auto;
    }
}


        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
    <div class="calculator-container printable" id="printArea">
        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Lifting Force Per Anchor (Pitching) Calculator</h1>
            <p>Determine the lifting force each anchor must bear during the pitching process of precast elements</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="form-group">
                    <label for="halfWeight">Half Weight (G/2) in kN</label>
                    <input type="number" id="halfWeight" class="form-input" min="0" step="0.01" placeholder="e.g., 25">
                </div>
                <div class="form-group">
                    <label for="liftingCoeff">Lifting Coefficient (f)</label>
                    <input type="number" id="liftingCoeff" class="form-input" value="1.3" min="0" step="0.01" placeholder="e.g., 1.3">
                </div>
                <div class="form-group">
                    <label for="spreadFactor">Spread Angle Factor (z)</label>
                    <input type="number" id="spreadFactor" class="form-input" value="1.0" min="0" step="0.01" placeholder="e.g., 1.0">
                </div>
                
                <button class="calculate-btn" onclick="calculateLiftingForce()">Calculate Lifting Force</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="{% static 'images/resultimage.png' %}" alt="Safety illustration">
                    <p>This tool will calculate the <strong>Lifting Force per Anchor</strong>. Enter your data to see results and insights here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                 
                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Lifting Force per Anchor</h2>
                    </div>
                    <div class="rate-display">
                        <div class="rate-value" id="rateValue">0.00</div>
                        <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">kN per anchor</div>
                    </div>

                    <div class="result-feedback">
                        <div class="feedback-title"> Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
            <div class="note-card">
                <h3>üìò About This Calculator</h3>
                <p>
                    The <strong>Lifting Force per Anchor (Pitching) Calculator</strong> is used to determine the lifting force each anchor must bear during the pitching process of precast elements. This calculation is crucial for ensuring safe handling and preventing overloading of anchors.
                </p>
            </div>

            <div class="note-card">
                <h3>‚öôÔ∏è Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>Half Weight (G/2):</strong> Half of the total weight of the element during pitching (in kN)</li>
                    <li><strong>Lifting Coefficient (f):</strong> A factor that accounts for dynamic forces during lifting, typically 1.3</li>
                    <li><strong>Spread Angle Factor (z):</strong> A factor based on the spread angle of the lifting cables, typically 1.0 for a 0¬∞ spread angle</li>
                    <li><strong>Number of Anchors (n):</strong> The number of anchors supporting the load, fixed at 2 for this calculation</li>
                </ul>
            </div>
            <div class="note-card">
  <h3>üßæ Input Validations</h3>
  <ul class="note-list">
    <li><strong>Half Weight (G/2):</strong> Must be greater than <strong>0 kN</strong>. Practical range: <strong>0.1 ‚Äì 10,000 kN</strong>.  
      <br>Values below 0.1 kN are unrealistic for precast elements; values above 10,000 kN should trigger engineering review.</li>
    <li><strong>Lifting Coefficient (f):</strong> Must be between <strong>1.0 ‚Äì 2.0</strong>.  
      <br>Typical industry range is <strong>1.1 ‚Äì 1.5</strong> per OSHA 1926.251 and EN 1991-1-6. Values beyond 2.0 are considered physically unrealistic.</li>
    <li><strong>Spread Angle Factor (z):</strong> Must be between <strong>1.0 ‚Äì 3.0</strong>.  
      <br><strong>1.0</strong> represents a 0¬∞ vertical lift, while <strong>2.0</strong> approximates a 90¬∞ spread.  
      Anything &gt; 3.0 is unsafe and should be rejected.</li>
    <li><strong>Number of Anchors (n):</strong> Fixed at <strong>2</strong> for pitching scenarios.  
      <br>Not user-modifiable to prevent division-by-zero or mis-assignment errors.</li>
  </ul>
</div>

<div class="note-card">
  <h3>üìä Output Validations</h3>
  <ul class="note-list">

    <li><strong>‚â§ 50 kN:</strong> ‚úÖ Safe lifting force per anchor.</span></li>
    <li><strong>51 ‚Äì 100 kN:</strong> ‚ö†Ô∏è Moderate load (51‚Äì100 kN). Verify anchor capacity.</span></li>
    <li><strong>&gt; 100 kN:</strong> ‚ùå High load detected (>100 kN). Engineering check required.</li>
  </ul>
</div>
<div class="note-card">
  <h3>üìê Governing Principle</h3>
  <p>
    When designing for the <strong>"Lifting Force per Anchor (Pitching)"</strong> of an offshore structure, multiple international standards from major regulatory and classification bodies apply. These calculators and design methodologies are not covered by a single, solitary standard but are based on the combined requirements from several sources. 
  </p>

  <h3>Key Standards and Recommended Practices:</h3>
  <p>The following standards are used to design the stationkeeping system, of which the anchor's lifting force is a component.</p>
  <ul class="note-list">
    <li><strong>ISO 19901-7:2013:</strong> Stationkeeping systems for floating offshore structures.<br>
    This is the international standard for the design and analysis of stationkeeping systems, which include spread moorings (catenary and taut-line) and single-point moorings.<br>
    It specifies the methodology for designing mooring components, including anchors, and references ISO 19901-4 for geotechnical and foundation design considerations.</li>

    <li><strong>API RP 2SK:</strong> Design and Analysis of Stationkeeping Systems for Floating Structures.<br>
    Published by the American Petroleum Institute, this Recommended Practice provides detailed guidance for designing mooring systems for floating offshore structures in the oil and gas industry.<br>
    It covers various aspects of mooring design, including the determination of anchor capacity and the application of safety factors for different operating conditions.</li>

    <li><strong>DNV-OS-E301:</strong> Position Mooring.<br>
    Published by Det Norske Veritas (DNV), a leading classification society, this Offshore Standard covers the design, installation, and inspection of position mooring systems.<br>
    It includes requirements for calculating anchor holding capacity and addresses different types of mooring configurations and anchors.</li>

    <li><strong>ABS Guide for Building and Classing Floating Production Installations.</strong><br>
    The American Bureau of Shipping (ABS) provides rules for the classification of floating production installations, which include specific requirements for mooring and foundation design.</li>

    <li><strong>DNV-ST-N001:</strong> Marine Operations and Marine Warranty.<br>
    This standard provides design and planning requirements for marine operations, such as transportation, lifting, and installation of offshore assets. While not exclusively for mooring, it would govern the installation procedure, which proves the initial lifting and holding capacity of an anchor.</li>
  </ul>

  <h3>Pitching Moment and Lifting Force Explained:</h3>
  <p>
    In the context of anchor design, "pitching" refers to the rotational motion of a floating offshore structure (like a semi-submersible or FPSO) caused by environmental forces from waves, wind, and current. This motion, combined with other factors like wave frequency effects, translates into dynamic loads and varying angles on the mooring lines. 
  </p>

  <p>
    The calculation of the maximum lifting force on an anchor is therefore not a single, isolated problem. It is part of an iterative design process that involves:
  </p>

  <ul class="note-list">
    <li><strong>Metocean analysis:</strong> Quantifying the environmental conditions (wind, waves, current) at the site.</li>
    <li><strong>Hydrodynamic analysis:</strong> Simulating the vessel's response and motions (including pitching) in these conditions.</li>
    <li><strong>Mooring analysis:</strong> Calculating the resulting dynamic tensions and inclinations on the mooring lines and anchors.</li>
    <li><strong>Geotechnical analysis:</strong> Ensuring the chosen anchor type has sufficient holding capacity to resist the design loads with appropriate safety factors.</li>
  </ul>
</div>

<div class="note-card">
  <h3>üí° Conclusion</h3>
  <p>
    The <strong>Lifting Force per Anchor (Pitching) Calculator</strong> ensures each anchor‚Äôs load remains within safe operational limits during pitching.  
    Values are validated against industry-standard safety thresholds derived from <strong>EN 1991-1-6 (Eurocode)</strong>, <strong>OSHA 1926.251</strong>, and <strong>ISO 12480-1 (Cranes ‚Äì Lifting Practices)</strong>.  
    Any calculation indicating a load above 100 kN should be treated as <strong>critical</strong> and reviewed by a qualified structural or lifting engineer before execution.
  </p>
</div>







            <div class="note-card">
                <h3>üìä Key Parameters Table</h3>
                <table class="parameters-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>G/2</td>
                            <td>25 kN</td>
                            <td>Half weight during pitching</td>
                        </tr>
                        <tr>
                            <td>f</td>
                            <td>1.3</td>
                            <td>Lifting coefficient</td>
                        </tr>
                        <tr>
                            <td>z</td>
                            <td>1.0</td>
                            <td>Spread angle factor (0¬∞)</td>
                        </tr>
                        <tr>
                            <td>n</td>
                            <td>2</td>
                            <td>Number of anchors</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateLiftingForce() {
    const halfWeight = document.getElementById('halfWeight').value.trim();
    const liftingCoeff = document.getElementById('liftingCoeff').value.trim();
    const spreadFactor = document.getElementById('spreadFactor').value.trim();
    
    const resultPlaceholder = document.getElementById('placeholder');
    const resultError = document.getElementById('resultError');
    const resultValue = document.getElementById('resultValue');
    const errorMessage = document.getElementById('errorMessage');
    const rateValue = document.getElementById('rateValue');
    const feedbackContent = document.getElementById('feedbackContent');
    
    // Hide all result sections first
    resultPlaceholder.classList.add('hidden');
    resultError.classList.add('hidden');
    resultValue.classList.add('hidden');

    // Convert to numbers
    const hw = parseFloat(halfWeight);
    const lc = parseFloat(liftingCoeff);
    const sf = parseFloat(spreadFactor);
    const numAnchors = 2; // Fixed value

    // Validation rules
    if (isNaN(hw) || hw <= 0) {
        errorMessage.textContent = "Half weight (G/2) must be > 0 kN (realistic range: 0.1 ‚Äì 10,000 kN).";
        resultError.classList.remove('hidden');
        return;
    }
    if (hw > 10000) {
        errorMessage.textContent = "Half weight exceeds 10,000 kN. Verify engineering input.";
        resultError.classList.remove('hidden');
        return;
    }

    if (isNaN(lc) || lc < 1.0 || lc > 2.0) {
        errorMessage.textContent = "Lifting coefficient (f) must be between 1.0 and 2.0 (typical 1.1 ‚Äì 1.5).";
        resultError.classList.remove('hidden');
        return;
    }

    if (isNaN(sf) || sf < 1.0 || sf > 3.0) {
        errorMessage.textContent = "Spread angle factor (z) must be between 1.0 and 3.0 (typical 1.0 ‚Äì 2.0).";
        resultError.classList.remove('hidden');
        return;
    }

    // Perform calculation
    const liftingForce = (hw * lc * sf) / numAnchors;

    // Display result
    rateValue.textContent = liftingForce.toFixed(2);

    // Provide feedback based on result
    if (liftingForce > 100) {
        feedbackContent.innerHTML = '<span class="bad">‚ùå High load detected (>100 kN). Engineering check required.</span>';
    } else if (liftingForce > 50) {
        feedbackContent.innerHTML = '<span class="average">‚ö†Ô∏è Moderate load (51‚Äì100 kN). Verify anchor capacity.</span>';
    } else {
        feedbackContent.innerHTML = '<span class="good">‚úÖ Safe lifting force per anchor (‚â§50 kN).</span>';
    }

    // Show result section
    resultValue.classList.remove('hidden');
}

        
        function printReport() {
            const halfWeight = document.getElementById('halfWeight').value.trim();
            const liftingCoeff = document.getElementById('liftingCoeff').value.trim();
            const spreadFactor = document.getElementById('spreadFactor').value.trim();
            
            // Check if we have valid values to print
            if (!halfWeight || !liftingCoeff || !spreadFactor) {
                alert('Please calculate the lifting force before printing a report.');
                return;
            }
            
            // Open print dialog
            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


{% comment %} 
1. Formula Used (for comments in code)

/**

Formula:

Lifting Force per Anchor (kN) = ( (G/2) √ó f √ó z ) √∑ n

Where:

G/2 = Half of total weight during pitching (kN)

f = Lifting Coefficient (Dynamic Amplification Factor, typically 1.1 ‚Äì 1.5)

z = Spread Angle Factor (‚â•1.0; increases with angle, typically 1.0 to 2.0)

n = Number of anchors (fixed at 2 for pitching)

Compliance:

Based on EN 1991-1-6 (Eurocode), OSHA 1926.251, ISO 12480-1 (Cranes ‚Äì Lifting Practices)

Ensures dynamic load, geometry effect, and load distribution are considered
*/

2. Input Validation Rules (Industry-Standard)

Half Weight (G/2) [kN]:

Must be > 0

Practical range: 0.1 ‚Äì 10,000 kN

Decimals: up to 2 places

Unit: kN

Check consistency: If halfWeight < 0.1 ‚Üí unrealistic (too light for precast). If > 10,000 ‚Üí extreme, warn user.

Lifting Coefficient (f):

Must be ‚â• 1.0

Industry standard: 1.1 ‚Äì 1.5 (OSHA, EN 1991-1-6)

Hard upper bound: ‚â§ 2.0 (unrealistic beyond this)

Decimals: up to 2 places

Spread Angle Factor (z):

Must be ‚â• 1.0

Typical range: 1.0 ‚Äì 2.0

1.0 ‚Üí 0¬∞ spread angle (ideal vertical lift)

2.0 ‚Üí ~90¬∞ spread angle (max allowable in lifting practice)

Hard upper bound: ‚â§ 3.0 (extreme, unsafe geometry)

Number of Anchors (n):

Fixed at 2 for pitching scenario

Cannot be modified by user

3. Edge Case Validations

Division by zero: Prevented by fixing n = 2

Zero/negative values: Reject and show error message

Unrealistically high weight (> 10,000 kN): Warn user (safety critical)

f < 1.0 or z < 1.0: Reject ‚Äî violates physics and standards

Extreme combinations (e.g., f=2.0, z=3.0, weight=10,000): Cap and issue warning (‚ÄúUnrealistic input ‚Äì check engineering assumptions‚Äù).

4. Output Validation Logic

Lifting Force Thresholds (kN per anchor):

‚â§ 50 kN: ‚úÖ Safe (green) ‚Üí typical for small to medium precast elements

51 ‚Äì 100 kN: ‚ö†Ô∏è Caution (amber) ‚Üí ensure lifting inserts & slings rated

> 100 kN: ‚ùå High Risk (red) ‚Üí engineering verification required

(Based on typical lifting anchor capacity ratings: 25‚Äì75 kN each, per manufacturer guidelines.) {% endcomment %}