{% extends 'base.html' %}
{% block title %}Bernoulli's Equation Multiplied Throughout by 'pg' Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bernoulli's Equation Multiplied Throughout by 'pg' Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }
        .btn-container {
    display: flex;
    justify-content: center; /* Horizontally center */
    margin: 30px 0;
}

.back-btn {
    background:linear-gradient(#1560bd,#000040); /* Dark navy background */
    color: #ffffff; /* White text */
    border: 2px solid #1560bd; /* Highlight border */
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none; /* Remove underline for link */
    transition: all 0.3s ease;
    cursor: pointer;
}

.back-btn:hover {
    background-color: #1560bd; /* Highlight on hover */
    color: #ffffff;
    border-color: #000040;
    transform: scale(1.05); /* Subtle hover effect */
}

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            {% comment %} max-width: 700px; {% endcomment %}
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            {% comment %} display: flex; {% endcomment %}
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Input rows */
        .input-row {
            display: flex;
            gap: 20px;
            {% comment %} margin-bottom: 15px; {% endcomment %}
        }
        
        @media (max-width: 768px) {
            .input-row {
                flex-direction: column;
                gap: 15px;
            }
        }

        /* Inputs */
        .form-group { 
            flex: 1;
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }
        
        .form-input.error {
            border-color: #e74c3c;
            box-shadow: 0 0 0 3px rgba(231,76,60,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Result feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Note section */
        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>
           <div class="btn-container">
    <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
</div>
   <div class="calculator-container printable" id="printArea">

    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}
     
        <div class="calculator-header">
            <h1>Bernoulli's Equation Multiplied Throughout by 'pg' Calculator</h1>
            <p>Calculate fluid dynamics parameters using Bernoulli's principle multiplied by œÅg</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="p1">Pressure at Point 1 (P1) in Pascals</label>
                        <input type="number" id="p1" class="form-input" min="0" placeholder="e.g., 101325" step="any">
                    </div>
                    
                    <div class="form-group">
                        <label for="p2">Pressure at Point 2 (P2) in Pascals</label>
                        <input type="number" id="p2" class="form-input" min="0" placeholder="e.g., 100000" step="any">
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="h1">Height at Point 1 (h1) in meters</label>
                        <input type="number" id="h1" class="form-input" min="0" placeholder="e.g., 10" step="any">
                    </div>
                    
                    <div class="form-group">
                        <label for="h2">Height at Point 2 (h2) in meters</label>
                        <input type="number" id="h2" class="form-input" min="0" placeholder="e.g., 5" step="any">
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="u1">Velocity at Point 1 (u1) in m/s</label>
                        <input type="number" id="u1" class="form-input" min="0" placeholder="e.g., 5" step="any">
                    </div>
                    
                    <div class="form-group">
                        <label for="u2">Velocity at Point 2 (u2) in m/s</label>
                        <input type="number" id="u2" class="form-input" min="0" placeholder="e.g., 10" step="any">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="density">Fluid Density (œÅ) in kg/m¬≥</label>
                    <input type="number" id="density" class="form-input" value="1000" min="0.1" placeholder="e.g., 1000" step="any">
                </div>
                
                <button class="calculate-btn" onclick="calculateBernoulli()">Calculate</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="{% static 'images/resultimage.png' %}" alt="Safety illustration">
                    <p>This tool will help you analyze fluid flow using Bernoulli's principle. Enter your data to see results and insights here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                 
                <div class="result-value hidden" id="resultValue">
                     <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Bernoulli's Equation Results</h2></div>
                    <div class='rate-display'>
                    <div class="rate-value" id="lhsValue">0.00</div>
                    <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">Left Side</div></div>
                    <div class='rate-display'>
                    <div class="rate-value" id="rhsValue">0.00</div>
                    <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">Right Side</div></div>

                    <div class="result-feedback">
                        <div class="feedback-title">Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
          <div class="note-card">
    <h3>‚ÑπÔ∏è About This Calculator</h3>
    <p>
        This Bernoulli‚Äôs Equation Calculator is designed to help users analyze and verify the energy conservation in fluid flow systems. 
        By entering values for pressure, velocity, height, and fluid density at two points, the calculator determines whether Bernoulli‚Äôs 
        equation holds true under given conditions. It also validates user inputs, highlights possible deviations, and provides feedback 
        on the balance of energy between two points. However, it is important to note that this calculator assumes an ideal, incompressible, 
        and frictionless flow. It does not account for energy losses due to friction, turbulence, or viscous effects, and may not provide 
        accurate results for highly viscous fluids such as honey or oil. This tool serves as an excellent aid for students, engineers, and 
        educators studying fluid mechanics and the practical implications of Bernoulli‚Äôs principle.
    </p>
</div>

            
            <div class="note-card">
               <h3>üìê Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>P1 and P2:</strong> Pressure at two different points in the system.</li>
                    <li><strong>h1 and h2:</strong> Height of the fluid at two points (measured from a reference level).</li>
                    <li><strong>u1 and u2:</strong> Velocity of the fluid at two points.</li>
                    <li><strong>œÅ (Density):</strong> The mass per unit volume of the fluid (kg/m¬≥).</li>
                    <li><strong>g (Gravity):</strong> Standard gravitational acceleration (9.81 m/s¬≤).</li>
                </ul>
            </div>
            
            <!-- <div class="note-card">
                <h3>üìä Assumptions in Bernoulli's Equation</h3>
                <ul class="note-list">
                    <li>The fluid is incompressible.</li>
                    <li>The flow is steady (no changes over time).</li>
                    <li>No energy is lost due to viscosity (frictionless flow).</li>
                    <li>The equation applies along a streamline.</li>
                </ul>
            </div>
            
            <div class="note-card">
                <h3>üåç Real-Life Applications</h3>
                <ul class="note-list">
                    <li><strong>Aerodynamics:</strong> Explains how airplane wings generate lift.</li>
                    <li><strong>Carburetors in Automobiles:</strong> Controls the air-fuel mixture using pressure differences.</li>
                    <li><strong>Venturi Effect:</strong> Used in medical devices like oxygen masks and atomizers.</li>
                    <li><strong>Water Flow Measurement:</strong> Used in devices like Venturi meters and Pitot tubes.</li>
                    <li><strong>Fire Sprinkler Systems:</strong> Utilizes pressure variations to distribute water effectively.</li>
                    <li><strong>City Water Supply Systems:</strong> Helps in designing pipelines for efficient water distribution.</li>
                </ul>
            </div> -->
            
           
           <div class="note-card">
    <h3>‚ö†Ô∏è Input Validation Rules</h3>
    <ul class="note-list">
        <li><strong>Pressure at Point 1 (Pressure at first measurement location):</strong> 0 ‚Äì 10,000,000 Pascals (warn if > 2,000,000 Pascals)</li>
        <li><strong>Pressure at Point 2 (Pressure at second measurement location):</strong> 0 ‚Äì 10,000,000 Pascals (warn if > 2,000,000 Pascals)</li>
        <li><strong>Height at Point 1 (Elevation of fluid at first point above reference):</strong> 0 ‚Äì 1000 meters (recommend ‚â§200 meters for fire safety systems)</li>
        <li><strong>Height at Point 2 (Elevation of fluid at second point above reference):</strong> 0 ‚Äì 1000 meters (recommend ‚â§200 meters for fire safety systems)</li>
        <li><strong>Velocity at Point 1 (Speed of fluid at first measurement location):</strong> 0 ‚Äì 100 meters/second (recommend ‚â§10 meters/second for water pipelines)</li>
        <li><strong>Velocity at Point 2 (Speed of fluid at second measurement location):</strong> 0 ‚Äì 100 meters/second (recommend ‚â§10 meters/second for water pipelines)</li>
        <li><strong>Fluid Density (Mass per unit volume of the fluid in kg/m¬≥):</strong> 0.1 ‚Äì 2000 kg/m¬≥ (standard water density ‚âà 1000 kg/m¬≥)</li>
        <li><strong>Cross-field Checks:</strong> All input values for pressure, height, and velocity cannot be zero simultaneously; fluid density cannot be near zero.</li>
        <li><strong>Outputs:</strong> Bernoulli's equation is considered balanced if the percentage difference between left and right side is less than 1%; nearly balanced if less than 5%.</li>
    </ul>
</div>

<div class="note-card">
    <h3>üìä Output Validations</h3>
    <ul class="note-list">
        <li>0% ‚Äì 1% Difference: ‚úÖ Bernoulli‚Äôs equation is perfectly balanced.</li>
        <li>1% ‚Äì 5% Difference: ‚ö†Ô∏è The equation is nearly balanced, indicating minor deviations likely due to measurement or rounding errors.</li>
        <li>> 5% Difference: ‚ùå The equation is not balanced ‚Äî this could indicate turbulence, viscosity losses, or incorrect data input.</li>
    </ul>
</div>

<div class="note-card">
    <h3>üìè Governing Principle</h3>
    <p style="font-size: 15px; line-height: 1.6; color: #333;">
        Bernoulli‚Äôs equation is based on the principle of conservation of energy for a flowing fluid. 
        When the equation is multiplied throughout by the product of fluid density and gravitational acceleration (œÅg), 
        it takes the energy form, relating pressure, velocity, and elevation at any two points in a streamline. 
        The equation can be expressed in three standard forms depending on the type of quantity represented:
    </p>
    <ul class="note-list">
        <li><strong>Head Form:</strong> In this version, each term is expressed as a height (or head), with units of length such as meters or feet. It represents the sum of pressure head, velocity head, and elevation head remaining constant along a streamline.</li>
        <li><strong>Pressure Form:</strong> Here, each term is expressed in units of pressure (e.g., Pascals). It shows that the total pressure at any point in a flowing fluid‚Äîcomprising static, dynamic, and hydrostatic components‚Äîremains constant in the absence of energy losses.</li>
        <li><strong>Energy Form:</strong> This form expresses energy per unit mass of fluid, combining pressure energy, kinetic energy, and potential energy into a single relationship that remains constant along a streamline.</li>
    </ul>
</div>

            <div class="note-card">
                <h3>üìù Conclusion</h3>
                 <p>Bernoulli‚Äôs principle is fundamental in fluid mechanics and plays a significant role in engineering applications. It helps predict pressure, velocity, and height relationships in a fluid system, leading to innovations in transportation, medical devices, and industrial fluid control.</p>
            </div>
        </div>
    </div>

   <script>
    // -------------------------------
    // üåç Set Current Date in Print Header
    // -------------------------------
    document.addEventListener('DOMContentLoaded', function () {
        const currentDate = new Date();
        const formattedDate = currentDate.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        const dateElement = document.getElementById('printDate');
        if (dateElement) {
            dateElement.textContent = formattedDate;
        }
    });

    // -------------------------------
    // ‚úÖ Function: Validate a Single Field
    // -------------------------------
    function validateInputField(fieldId, fieldLabel, minValue, maxValue, recommendedMaxValue = null) {
        const inputElement = document.getElementById(fieldId);
        const fieldValue = parseFloat(inputElement.value);

        if (isNaN(fieldValue)) {
            inputElement.classList.add("error");
            return `${fieldLabel} is required.`;
        }

        if (fieldValue < minValue) {
            inputElement.classList.add("error");
            return `${fieldLabel} must be at least ${minValue}.`;
        }

        if (fieldValue > maxValue) {
            inputElement.classList.add("error");
            return `${fieldLabel} exceeds the maximum allowed value (${maxValue}).`;
        }

        if (recommendedMaxValue !== null && fieldValue > recommendedMaxValue) {
            inputElement.classList.add("warning");
            return `‚ö†Ô∏è ${fieldLabel} exceeds the typical safe range (${recommendedMaxValue}).`;
        }

        inputElement.classList.remove("error");
        return null;
    }

    // -------------------------------
    // ‚öôÔ∏è Function: Perform Bernoulli‚Äôs Equation Calculation
    // -------------------------------
    function calculateBernoulli() {
        const errorContainer = document.getElementById('resultError');
        const errorMessageBox = document.getElementById('errorMessage');
        const placeholderContainer = document.getElementById('placeholder');
        const resultDisplayContainer = document.getElementById('resultValue');

        let validationErrors = [];

        // -------------------------------
        // üîç Validate Each Field
        // -------------------------------
        validationErrors.push(validateInputField('p1', "Pressure at Point 1 (P‚ÇÅ)", 0, 1e7, 2e6));
        validationErrors.push(validateInputField('p2', "Pressure at Point 2 (P‚ÇÇ)", 0, 1e7, 2e6));
        validationErrors.push(validateInputField('h1', "Height at Point 1 (h‚ÇÅ)", 0, 1000, 200));
        validationErrors.push(validateInputField('h2', "Height at Point 2 (h‚ÇÇ)", 0, 1000, 200));
        validationErrors.push(validateInputField('u1', "Velocity at Point 1 (u‚ÇÅ)", 0, 100, 10));
        validationErrors.push(validateInputField('u2', "Velocity at Point 2 (u‚ÇÇ)", 0, 100, 10));
        validationErrors.push(validateInputField('density', "Fluid Density (œÅ)", 0.1, 2000, 1500));

        // Filter out null entries
        validationErrors = validationErrors.filter(error => error !== null);

        // -------------------------------
        // üö´ Check for Special Invalid Conditions
        // -------------------------------
        const allInputValues = ['p1', 'p2', 'h1', 'h2', 'u1', 'u2'].map(id => parseFloat(document.getElementById(id).value) || 0);

        if (allInputValues.every(value => value === 0)) {
            validationErrors.push("All input fields cannot be zero simultaneously.");
        }

        if (validationErrors.length > 0) {
            errorMessageBox.innerHTML = validationErrors.join("<br>");
            errorContainer.classList.remove("hidden");
            placeholderContainer.classList.add("hidden");
            resultDisplayContainer.classList.add("hidden");
            return;
        } else {
            errorContainer.classList.add("hidden");
        }

        // -------------------------------
        // üßÆ Perform the Calculations
        // Bernoulli‚Äôs Equation (Multiplied by œÅg)
        // P‚ÇÅ + œÅgh‚ÇÅ + ¬ΩœÅu‚ÇÅ¬≤ = P‚ÇÇ + œÅgh‚ÇÇ + ¬ΩœÅu‚ÇÇ¬≤
        // -------------------------------
        const pressureAtPoint1 = parseFloat(document.getElementById('p1').value);
        const pressureAtPoint2 = parseFloat(document.getElementById('p2').value);
        const heightAtPoint1 = parseFloat(document.getElementById('h1').value);
        const heightAtPoint2 = parseFloat(document.getElementById('h2').value);
        const velocityAtPoint1 = parseFloat(document.getElementById('u1').value);
        const velocityAtPoint2 = parseFloat(document.getElementById('u2').value);
        const fluidDensity = parseFloat(document.getElementById('density').value);
        const gravityAcceleration = 9.81; // m/s¬≤

        // Compute Left-Hand Side (LHS) and Right-Hand Side (RHS)
        const leftSideEquation = pressureAtPoint1 + (fluidDensity * gravityAcceleration * heightAtPoint1) + (0.5 * fluidDensity * Math.pow(velocityAtPoint1, 2));
        const rightSideEquation = pressureAtPoint2 + (fluidDensity * gravityAcceleration * heightAtPoint2) + (0.5 * fluidDensity * Math.pow(velocityAtPoint2, 2));

        // Display numeric results
        document.getElementById('lhsValue').textContent = leftSideEquation.toFixed(2);
        document.getElementById('rhsValue').textContent = rightSideEquation.toFixed(2);

        // -------------------------------
        // üìä Evaluate the Result
        // -------------------------------
        const absoluteDifference = Math.abs(leftSideEquation - rightSideEquation);
        const averageValue = (leftSideEquation + rightSideEquation) / 2;
        const percentageDifference = (absoluteDifference / averageValue) * 100;

        let feedbackMessage;
        if (percentageDifference < 1) {
            feedbackMessage = "‚úÖ Bernoulli‚Äôs equation is perfectly balanced.";
        } else if (percentageDifference < 5) {
            feedbackMessage = "‚ö†Ô∏è The equation is nearly balanced, indicating minor deviations likely due to measurement or rounding errors.";
        } else {
            feedbackMessage = "‚ùå The equation is not balanced ‚Äî this could indicate turbulence, viscosity losses, or incorrect data input.";
        }

        feedbackMessage += `<br><br><strong>Difference:</strong> ${absoluteDifference.toFixed(2)} Pa (${percentageDifference.toFixed(2)}%)`;
        document.getElementById('feedbackContent').innerHTML = feedbackMessage;

        // -------------------------------
        // üßæ Display the Result Section
        // -------------------------------
        placeholderContainer.classList.add('hidden');
        resultDisplayContainer.classList.remove('hidden');
    }

    // -------------------------------
    // üñ®Ô∏è Function: Print the Report
    // -------------------------------
    function printReport() {
        const currentDate = new Date();
        const formattedDate = currentDate.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        const dateElement = document.getElementById('printDate');
        if (dateElement) {
            dateElement.textContent = formattedDate;
        }
        window.print();
    }
</script>

    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}

{% comment %} 

1. Formula Used in the Calculator
// Bernoulli‚Äôs Equation (multiplied throughout by œÅg):
// P1 + œÅgh1 + ¬ΩœÅu1¬≤ = P2 + œÅgh2 + ¬ΩœÅu2¬≤
//
// where:
// P1, P2 = pressure at points 1 & 2 [Pa]
// h1, h2 = height (elevation) at points 1 & 2 [m]
// u1, u2 = velocity at points 1 & 2 [m/s]
// œÅ = density [kg/m¬≥]
// g = gravitational acceleration = 9.81 m/s¬≤

2. Validation Rules (QEHS / Fire Safety Aligned)
‚úÖ Pressure (P1, P2) [Pa]

Must be ‚â• 0 (negative pressure is vacuum and not in scope here).

Typical operating range for water/fire safety systems: 0 ‚Äì 2,000,000 Pa (20 bar).

Allow up to 1e7 Pa (100 bar) for industrial systems, but warn if above 20 bar.

Decimal precision: 2‚Äì3 decimals reasonable.

‚úÖ Height (h1, h2) [m]

Must be ‚â• 0 (reference datum is ground).

Practical range in building/fire systems: 0 ‚Äì 200 m (approx. 60 floors).

Hard cap: 0 ‚Äì 1000 m.

‚úÖ Velocity (u1, u2) [m/s]

Must be ‚â• 0.

Safe water system velocity: 0 ‚Äì 10 m/s.

Hard cap: 0 ‚Äì 100 m/s (beyond this is unrealistic for water/fire safety systems).

‚úÖ Density (œÅ) [kg/m¬≥]

Must be > 0.

Acceptable range: 0.1 ‚Äì 2000 (water, air, foam).

Standard water density ‚âà 1000.

‚úÖ Cross-field / Logical Validations

At least one input difference (ŒîP, Œîh, Œîu) must exist; otherwise, both sides equal trivially.

If density is extremely low (like <1), warn about compressibility (violates Bernoulli assumptions).

If density >2000, warn about unrealistic value for common fire safety fluids.

3. Edge Case Handling

Division by Zero ‚Üí Not relevant here, but density = 0 must be blocked.

Extreme outliers ‚Üí Pressures >100 bar, velocities >100 m/s ‚Üí flag as ‚Äúunrealistic‚Äù.

All inputs = 0 ‚Üí Should error with ‚ÄúAll inputs cannot be zero.‚Äù

Negative inputs ‚Üí Blocked, not physically meaningful in this context.

4. Output Validation Logic

Balanced Equation:
If % difference < 1% ‚Üí valid for real system.

Nearly Balanced:
If % difference < 5% ‚Üí measurement error possible.

Not Balanced:

5% ‚Üí turbulence, viscosity losses, or data entry error. {% endcomment %}

{% comment %} /*
=============================
VALIDATION RULES (QEHS / FIRE SAFETY)
- Pressure (P1, P2): 0 ‚â§ P ‚â§ 1e7 Pa, warn if >2e6 Pa
- Height (h1, h2): 0 ‚â§ h ‚â§ 1000 m, recommend ‚â§200 m
- Velocity (u1, u2): 0 ‚â§ u ‚â§ 100 m/s, recommend ‚â§10 m/s
- Density (œÅ): 0.1 ‚â§ œÅ ‚â§ 2000 kg/m¬≥ (water ~1000)
- Cross-field: All inputs cannot be zero; density cannot be near 0
=============================
*/ {% endcomment %}