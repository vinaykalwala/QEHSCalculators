{% extends 'base.html' %}
{% block title %}Specifi gravity calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 350px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        @media (max-width: 768px) {
    .result-placeholder img {
        max-width: 80%;    /* Slightly smaller on tablets */
    }
}

@media (max-width: 480px) {
    .result-placeholder img {
        max-width: 100%;   /* Full width on small screens */
        margin-bottom: 15px;
    }
}
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
          @media (max-width: 768px) {
    .rate-value {
        font-size: 28px; /* smaller font for tablets/mobiles */
    }
}

@media (max-width: 480px) {
    .rate-value {
        font-size: 24px; /* even smaller for phones */
    }
}
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
 <div class="calculator-container printable" id="printArea">
    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Specific Gravity Calculator</h1>
        <p>Determine the specific gravity of a substance by comparing its density to that of water.</p>
    </div>

    <div class="calc-content">
        <!-- Calculator -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label for="substanceDensity">Density of Substance (Ds) (g/cm¬≥)</label>
                <input type="number" id="substanceDensity" class="form-input" min="0" step="0.01" placeholder="e.g., 2.7">
            </div>
            <div class="form-group">
                <label for="waterDensity">Density of Water (Dw) (g/cm¬≥)</label>
                <input type="number" id="waterDensity" class="form-input" min="0" step="0.01" placeholder="e.g., 1">
            </div>
            <button class="calculate-btn" onclick="calculateSpecificGravity()">Calculate Specific Gravity</button>
        </div>

        <!-- Result Section -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/specificgravity.png' %}" alt="Specific Gravity illustration">
                <p>This tool will calculate <strong>Specific Gravity</strong>. Enter your data to see results and insights here.</p>
            </div>
            
            <div class="result-error hidden" id="resultError">
                <div class="error-icon">‚ùå</div>
                <div class="error-message" id="errorMessage"></div>
            </div>
            
            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Specific Gravity Result</h2>
                </div>
                <div class="rate-value" id="specificGravityValue">0</div>
                <div class="rate-label" style="color:#2980b9; font-size:16px; font-weight:bold;">
                    Dimensionless Ratio (Ds / Dw)
                </div>

                <div class="result-feedback">
                    <div class="feedback-title">Assessment</div>
                    <div class="feedback-content" id="feedbackContent"></div>
                </div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

<div class="note-section">

    <!-- 1Ô∏è‚É£ About This Calculator -->
    <div class="note-card">
        <h3>üìò About This Calculator</h3>
        <p>
            The <strong>Specific Gravity Calculator</strong> helps determine whether a substance will float or sink in water by comparing its density to that of water. 
            This property is essential in <strong>material identification, fluid analysis, geology, mining, and industrial processes</strong>.
        </p>
        <p>
            <strong>What is Gravity?</strong><br>
            Gravity is the natural force that pulls objects toward the center of the Earth. It affects the weight of substances and plays a role in how materials interact with fluids.
        </p>
        <p>
            <strong>What is Specific Gravity?</strong><br>
            Specific gravity is a <em>dimensionless ratio</em> that compares the density of a substance (Ds) to the density of water (Dw). 
            Unlike density, which has units (g/cm¬≥), specific gravity has no units because it is a comparison.
        </p>
        <p>
            <strong>Why is Specific Gravity Important?</strong>
        </p>
        <ul class="note-list">
            <li>üåä <em>Buoyancy:</em> Predicts whether a substance will float (< 1) or sink (> 1) in water.</li>
            <li>ü™® <em>Material Identification:</em> Helps classify minerals, liquids, and construction materials.</li>
            <li>‚öôÔ∏è <em>Engineering & Industry:</em> Used in quality control, fluid mechanics, and design of equipment handling liquids or solids.</li>
            <li>üî¨ <em>Science & Research:</em> Essential for experiments in chemistry, geology, and physics.</li>
        </ul>
    </div>

    <!-- 2Ô∏è‚É£ Parameters Used -->
    <div class="note-card">
        <h3>‚öô Parameters Used</h3>
        <ul class="note-list">
            <li><strong>Density of Substance (Ds):</strong> Mass per unit volume of the substance, measured in g/cm¬≥.</li>
            <li><strong>Density of Water (Dw):</strong> Mass per unit volume of water, typically 1 g/cm¬≥ at 4¬∞C.</li>
        </ul>
    </div>

    <!-- 3Ô∏è‚É£ Input Validation Rules -->
    <div class="note-card">
        <h3>‚úÖ Input Validation Rules</h3>
        <ul class="note-list">
            <li><strong>Density of Substance (Ds):</strong> Must be positive and numeric. Acceptable range is <em>0.1 ‚Äì 25 g/cm¬≥</em>. Values above 25 are flagged as implausible.</li>
            <li><strong>Density of Water (Dw):</strong> Must be positive and numeric. Acceptable range is <em>0.8 ‚Äì 1.2 g/cm¬≥</em> to allow for temperature and salinity variations.</li>
            <li><strong>Decimal Precision:</strong> Maximum of two decimal places (e.g., 2.65 is valid).</li>
            <li><strong>Invalid Entries:</strong> Empty, zero, negative, or non-numeric inputs will trigger an error message.</li>
            <li><strong>Logical Consistency:</strong> Both inputs must be valid. Division by zero is prevented (Dw ‚â† 0).</li>
        </ul>
    </div>

    <!-- 4Ô∏è‚É£ Output Validation Rules -->
    <div class="note-card">
        <h3>‚úÖ Output Validation Rules & Feedback</h3>
        <ul class="note-list">
            <li><strong>Specific Gravity &lt; 1:</strong> ‚úÖ The substance will float. (Fire safety note: flammable liquids with a specific gravity below 1 spread rapidly on water surfaces, increasing fire risk.)</li>
            <li><strong>Specific Gravity = 1:</strong> ‚ö†Ô∏è Neutral buoyancy. The substance may suspend in water, which can obstruct flow in storage tanks or piping systems.</li>
            <li><strong>Specific Gravity &gt; 1 and ‚â§ 25:</strong> ‚ùå The substance will sink. Dense materials require safe handling, proper ergonomic practices, and lifting controls to prevent workplace injuries.</li>
            <li><strong>Specific Gravity &gt; 25:</strong> üö® Implausible value detected. This is likely an input error. Please verify the values, units, and re-enter correctly.</li>
            <li><strong>Assessment/Feedback:</strong> These same feedback messages appear in the result section to help users understand the physical behavior of the material and associated safety notes.</li>
        </ul>
    </div>

  <!-- 5Ô∏è‚É£ Governing Principle -->
<div class="note-card">
    <h3>‚öñ Governing Principle</h3>
    <p>
        A specific gravity calculator doesn't follow a single standard; instead, standards like <strong>ASTM D792</strong> and <strong>ISO 1183</strong> (for plastics) and <strong>ASTM D854</strong> (for soil) define the specific procedures and conditions under which specific gravity is measured. The fundamental concept of specific gravity is a dimensionless ratio of a substance's density to the density of a reference substance (usually water) at a specified temperature, a principle used across many scientific and engineering fields.
    </p>

    <p><strong style="color: #1976d2;">Standards for Specific Gravity Calculation</strong></p>
    <p>
        Specific gravity calculators are often based on established standards for different materials, which dictate the testing methods and reference temperatures:
    </p>
    <ul class="note-list">
        <li><strong>ASTM D792 & ISO 1183:</strong> These are widely used standards for determining the density and specific gravity of plastics using immersion methods.</li>
        <li><strong>ASTM D854:</strong> This standard is used specifically for determining the specific gravity of soil solids.</li>
        <li><strong>ASTM D891:</strong> This standard is for the specific gravity of liquid industrial chemicals.</li>
        <li><strong>Other Material-Specific Standards:</strong> Standards also exist for materials like sand, soil (e.g., Civil Engineering standards), and cement, each with its own specific testing procedures.</li>
    </ul>

    <p><strong style="color: #1976d2;">Fundamental Concept</strong></p>
    <p>
        At its core, a specific gravity calculator uses the formula: <br>
        <code>Specific Gravity = (Density of Substance) / (Density of Water)</code><br>
        This calculation requires knowledge of both the material's density and the reference substance's density at a defined temperature. The most common reference is water at 4¬∞C, which has a density of 1 g/cm¬≥.
    </p>

    <p><strong style="color: #1976d2;">Why Standards Matter</strong></p>
    <ul class="note-list">
        <li><strong>Consistency:</strong> Standards ensure that specific gravity measurements are taken under the same conditions, leading to consistent and comparable results.</li>
        <li><strong>Quality Control:</strong> They serve as a critical step in quality assurance and material identification in various industries.</li>
        <li><strong>Repeatability:</strong> Standards establish the procedures necessary for repeatable and reliable measurements, crucial for manufacturing and research.</li>
    </ul>
</div>


    <!-- 6Ô∏è‚É£ Conclusion -->
    <div class="note-card">
        <h3>üèÅ Conclusion</h3>
        <p>
            The <strong>Specific Gravity Calculator</strong> provides a quick and reliable way to evaluate whether a material will float or sink, 
            assisting in engineering design, material identification, and safety analysis.
        </p>
        <p>
            By following input and output validation rules and referring to standardized methods (ASTM, ISO), 
            users can ensure scientifically accurate and safe interpretations of specific gravity data.
        </p>
    </div>

</div>


<script>
function calculateSpecificGravity() {
    const Ds = parseFloat(document.getElementById('substanceDensity').value);
    const Dw = parseFloat(document.getElementById('waterDensity').value);
    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const feedbackContent = document.getElementById('feedbackContent');

    let errors = [];

    // --- Basic Validations ---
    if (isNaN(Ds)) errors.push("üëâ Density of Substance (Ds) must be a number in g/cm¬≥.");
    if (isNaN(Dw)) errors.push("üëâ Density of Water (Dw) must be a number in g/cm¬≥.");
    if (Ds <= 0) errors.push("üëâ Ds must be greater than 0 (physical density cannot be zero or negative).");
    if (Dw <= 0) errors.push("üëâ Dw must be greater than 0 (division by zero not allowed).");

    // --- Realistic Range Checks ---
    if (Ds > 25) errors.push("‚ö†Ô∏è Ds unusually high (>25 g/cm¬≥). Verify units (did you enter kg/m¬≥ instead of g/cm¬≥?).");
    if (Dw < 0.8 || Dw > 1.2) errors.push("‚ö†Ô∏è Dw outside typical range (0.8‚Äì1.2 g/cm¬≥). Verify input.");

    // --- Stop and Display Errors ---
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // --- Calculation ---
    const specificGravity = Ds / Dw;
    document.getElementById('specificGravityValue').textContent = specificGravity.toFixed(3);

    // --- Feedback & Compliance Notes ---
    let feedback = "";
    let color = "";

  if (specificGravity < 1) {
    feedback = "‚úÖ Specific Gravity less than 1: The substance will float. (Fire safety note: flammable liquids with a specific gravity below 1 spread rapidly on water surfaces, increasing fire risk.)";
    color = "green";
} else if (specificGravity === 1) {
    feedback = "‚ö†Ô∏è Specific Gravity equal to 1: Neutral buoyancy. The substance may suspend in water, which can obstruct flow in storage tanks or piping systems.";
    color = "orange";
} else if (specificGravity > 1 && specificGravity <= 25) {
    feedback = "‚ùå Specific Gravity greater than 1 and less than or equal to 25: The substance will sink. Dense materials require safe handling, proper ergonomic practices, and lifting controls to prevent workplace injuries.";
    color = "red";
} else {
    feedback = "üö® Specific Gravity greater than 25: Implausible value detected. This is likely an input error. Please verify the values, units of measurement, and re-enter correctly.";
    color = "darkred";
}


    feedbackContent.innerHTML = `<strong style="color:${color}">${feedback}</strong>`;
    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

</script>


    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- ‚úÖ 1. Input Validation Rules (QEHS / Fire Safety perspective)
Density of Substance (Ds)

Units: g/cm¬≥ (mandatory).

Minimum: >0 (a material must have positive density).

Typical range:

Liquids: ~0.5 ‚Äì 2 g/cm¬≥ (e.g., gasoline ‚âà 0.7, sulfuric acid ‚âà 1.8).

Solids: ~0.5 ‚Äì 25 g/cm¬≥ (wood ‚âà 0.6, aluminum ‚âà 2.7, lead ‚âà 11.3, osmium ‚âà 22.6).

Maximum threshold: 25 g/cm¬≥ (flag >25 as ‚Äúimplausible‚Äù unless specialized materials are tested).

Decimals: Allow up to 3 decimal places (to cover lab-grade precision).

Density of Water (Dw)

Units: g/cm¬≥.

Minimum: >0.

Expected range:

Freshwater (0.99‚Äì1.00 at standard lab temperature).

Seawater: up to 1.03.

Warm/cold water: 0.95‚Äì1.05.

Practical thresholds: Warn if outside 0.8‚Äì1.2 (suggests wrong units or wrong fluid).

Cross-field Consistency

Prevent division by zero (Dw ‚â† 0).

If both Ds and Dw are zero or blank ‚Üí invalid input (physical impossibility).

If Ds and Dw are entered with drastically different units (e.g., kg/m¬≥ vs g/cm¬≥) ‚Üí SG will be absurdly high/low ‚Üí must warn user.

‚úÖ 2. Output Validation Logic

Specific Gravity (SG = Ds / Dw) should be dimensionless.

SG < 1.0 ‚Üí ‚úÖ Substance floats.

SG = 1.0 ‚Üí ‚ö†Ô∏è Neutral buoyancy (safety note: can obstruct water flow in tanks/pipelines).

SG 1.0‚Äì25.0 ‚Üí ‚ùå Sinks (but valid).

SG > 25.0 ‚Üí üö® Implausible, likely input error (wrong units or invalid measurement).

QEHS / Safety Relevance:

Buoyancy ‚Üí Fire & Chemical Safety: Flammable liquids (SG < 1) float on water ‚Üí major hazard in firefighting (fire spreads on water surface).

High-density materials (>10) ‚Üí pose ergonomic/manual handling risks and potential confined space hazards if spilled.

Accurate SG reporting ‚Üí required in OSHA Material Safety Data Sheets (MSDS) and NFPA hazard documentation.

‚úÖ 5. Why Each Validation Matters (Compliance)

Range checks: Ensures results align with physical laws ‚Üí avoids reporting nonsense values in OSHA/ISO reports.

Unit consistency: Prevents mix-up between g/cm¬≥ and kg/m¬≥ ‚Üí common in lab reports.

Outlier warnings: Helps auditors quickly detect misreported values (a compliance red flag in ISO 45001 audits).

Division by zero check: Protects calculator integrity and ensures reliability in official safety documentation.

Feedback tied to hazards: Adds occupational and fire safety context, which aligns with NFPA fire-prevention standards and OSHA MSDS reporting. -->