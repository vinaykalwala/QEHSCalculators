{% extends 'base.html' %}
{% block title %}Specifi gravity calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 350px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        @media (max-width: 768px) {
    .result-placeholder img {
        max-width: 80%;    /* Slightly smaller on tablets */
    }
}

@media (max-width: 480px) {
    .result-placeholder img {
        max-width: 100%;   /* Full width on small screens */
        margin-bottom: 15px;
    }
}
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
          @media (max-width: 768px) {
    .rate-value {
        font-size: 28px; /* smaller font for tablets/mobiles */
    }
}

@media (max-width: 480px) {
    .rate-value {
        font-size: 24px; /* even smaller for phones */
    }
}
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
 <div class="calculator-container printable" id="printArea">
    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Specific Gravity Calculator</h1>
        <p>Determine the specific gravity of a substance by comparing its density to that of water.</p>
    </div>

    <div class="calc-content">
        <!-- Calculator -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label for="substanceDensity">Density of Substance (Ds) (g/cm³)</label>
                <input type="number" id="substanceDensity" class="form-input" min="0" step="0.01" placeholder="e.g., 2.7">
            </div>
            <div class="form-group">
                <label for="waterDensity">Density of Water (Dw) (g/cm³)</label>
                <input type="number" id="waterDensity" class="form-input" min="0" step="0.01" placeholder="e.g., 1">
            </div>
            <button class="calculate-btn" onclick="calculateSpecificGravity()">Calculate Specific Gravity</button>
        </div>

        <!-- Result Section -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/specificgravity.png' %}" alt="Specific Gravity illustration">
                <p>This tool will calculate <strong>Specific Gravity</strong>. Enter your data to see results and insights here.</p>
            </div>
            
            <div class="result-error hidden" id="resultError">
                <div class="error-icon">❌</div>
                <div class="error-message" id="errorMessage"></div>
            </div>
            
            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Specific Gravity Result</h2>
                </div>
                <div class="rate-value" id="specificGravityValue">0</div>
                <div class="rate-label" style="color:#2980b9; font-size:16px; font-weight:bold;">
                    Dimensionless Ratio (Ds / Dw)
                </div>

                <div class="result-feedback">
                    <div class="feedback-title">Assessment</div>
                    <div class="feedback-content" id="feedbackContent"></div>
                </div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Section -->
    <div class="note-section">
        <div class="note-card">
    <h3>📘 About This Calculator</h3>
    <p>
        The <strong>Specific Gravity Calculator</strong> helps determine whether a substance will float or sink in water by comparing its density to that of water. This property is useful in <strong>material identification, fluid analysis, geology, mining, and industrial processes</strong>.
    </p>
    <p>
        <strong>What is Gravity?</strong><br>
        Gravity is the natural force that pulls objects toward the center of the Earth. It affects the weight of substances and plays a role in how materials interact with fluids.
    </p>
    <p>
        <strong>What is Specific Gravity?</strong><br>
        Specific gravity is a <em>dimensionless ratio</em> that compares the density of a substance (Ds) to the density of water (Dw). Unlike density, which has units (g/cm³), specific gravity has no units because it is a comparison.  
    </p>
    <p>
        <strong>Why is Specific Gravity Important?</strong>
        <ul class="note-list">
            <li>🌊 <em>Buoyancy:</em> Predicts whether a substance will float (< 1) or sink (> 1) in water.</li>
            <li>🪨 <em>Material Identification:</em> Helps classify minerals, liquids, and construction materials.</li>
            <li>⚙️ <em>Engineering & Industry:</em> Used in quality control, fluid mechanics, and design of equipment handling liquids or solids.</li>
            <li>🔬 <em>Science & Research:</em> Essential for experiments in chemistry, geology, and physics.</li>
        </ul>
    </p>
</div>


        <div class="note-card">
            <h3>⚙️ Parameters Used</h3>
            <ul class="note-list">
                <li><strong>Density of Substance (Ds):</strong> Mass per unit volume of the substance, measured in g/cm³.</li>
                <li><strong>Density of Water (Dw):</strong> Mass per unit volume of water, typically 1 g/cm³ at 4°C.</li>
            </ul>
        </div>

       <div class="note-card">
    <h3>✅ Input Validation Rules</h3>
    <ul class="note-list">
        <li><strong>Density of Substance:</strong> 
            Must be a positive numeric value. The typical safe range is <em>0.1 to 25 grams per cubic centimeter (g/cm³)</em>. 
            Values greater than 25 g/cm³ are extremely uncommon in practice and will be flagged for review.
        </li>
        <li><strong>Density of Water:</strong> 
            Must be a positive numeric value. The standard reference is <em>1 g/cm³ at 4 °C</em>. 
            Acceptable input range is <em>0.8 to 1.2 g/cm³</em> to allow for variations in temperature or salinity. 
            Values outside this range will trigger a warning message.
        </li>
        <li><strong>Decimal Precision:</strong> 
            Inputs should be entered with a maximum of <em>two decimal places</em> to ensure accuracy without over-precision.  
            For example, <em>2.65</em> is valid, but <em>2.65347</em> will be rounded automatically.
        </li>
        <li><strong>Invalid Entries:</strong> 
            Empty fields, zero values, negative values, or non-numeric entries are not permitted. 
            Such inputs will generate an error message and block calculation.
        </li>
        <li><strong>Logical Consistency:</strong> 
            Both the density of the substance and the density of water must be valid before calculation can proceed. 
            Division by zero (for example, if the density of water is set to zero) is strictly prevented.
        </li>
    </ul>
</div>


       <div class="note-card">
    <h3>📊 Output Validations</h3>
    <ul class="note-list">
        <li><span class="good">Specific Gravity less than 1:</span> ✅ The substance will float. (Fire safety note: flammable liquids with a specific gravity below 1 spread rapidly on water surfaces, increasing fire risk.)</li>
        <li><span class="average">Specific Gravity equal to 1:</span> ⚠️ Neutral buoyancy. The substance may suspend in water, which can obstruct flow in storage tanks or piping systems.</li>
        <li><span class="bad">Specific Gravity greater than 1 and less than or equal to 25:</span> ❌ The substance will sink. Dense materials require safe handling, proper ergonomic practices, and lifting controls to prevent workplace injuries.</li>
        <li><span class="critical">Specific Gravity greater than 25:</span> 🚨 Implausible value detected. This is likely an input error. Please verify the values, units of measurement, and re-enter correctly.</li>
    </ul>
</div>

        <div class="note-card">
    <h3>📋 Standards, Compliance & Safety</h3>
    <p>
        Specific Gravity calculations are widely recognized in occupational safety, fire safety, and industrial quality assurance. This tool supports compliance with established scientific and regulatory frameworks while also reinforcing safe material handling practices:
    </p>
    <ul class="note-list">
        <li><strong>ASTM Standards:</strong> Aligns with ASTM D792 (Plastics Density & Specific Gravity by displacement) and ASTM C127 (Aggregates Specific Gravity), ensuring standardized measurement methods.</li>
        <li><strong>ISO & OSHA:</strong> Supports ISO 45001 and OSHA regulations by promoting accurate identification of materials, reducing risks of misclassification, chemical exposure, or unsafe handling in workplaces.</li>
        <li><strong>NFPA Guidelines:</strong> Essential in fire safety, as the specific gravity of flammable liquids determines whether spills float or sink on water — a key factor in predicting fire spread, vapor hazards, and emergency response strategies.</li>
        <li><strong>ILO & Best Practice:</strong> Reinforces International Labour Organization (ILO) recommendations for chemical and material management in mining, petrochemical, and construction sectors, protecting worker health and environmental safety.</li>
        <li><strong>Quality Control & Audits:</strong> Provides reliable data for lab testing, compliance audits, and regulatory reporting, ensuring materials are safe for use, storage, and transport.</li>
        <li><strong>Safety Application:</strong> Prevents accidents by ensuring proper labeling, storage, and spill response planning — particularly for hazardous liquids with unusual buoyancy behavior.</li>
    </ul>
</div>


        <div class="note-card">
            <h3>🏁 Conclusion</h3>
            <p>
                The <strong>Specific Gravity Calculator</strong> is a simple yet powerful tool for evaluating the density relationship between a substance and water. It is widely applied in science, engineering, and industry to assess buoyancy, material quality, and fluid behavior.
            </p>
        </div>
    </div>
</div>

<script>
function calculateSpecificGravity() {
    const Ds = parseFloat(document.getElementById('substanceDensity').value);
    const Dw = parseFloat(document.getElementById('waterDensity').value);
    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const feedbackContent = document.getElementById('feedbackContent');

    let errors = [];

    // --- Basic Validations ---
    if (isNaN(Ds)) errors.push("👉 Density of Substance (Ds) must be a number in g/cm³.");
    if (isNaN(Dw)) errors.push("👉 Density of Water (Dw) must be a number in g/cm³.");
    if (Ds <= 0) errors.push("👉 Ds must be greater than 0 (physical density cannot be zero or negative).");
    if (Dw <= 0) errors.push("👉 Dw must be greater than 0 (division by zero not allowed).");

    // --- Realistic Range Checks ---
    if (Ds > 25) errors.push("⚠️ Ds unusually high (>25 g/cm³). Verify units (did you enter kg/m³ instead of g/cm³?).");
    if (Dw < 0.8 || Dw > 1.2) errors.push("⚠️ Dw outside typical range (0.8–1.2 g/cm³). Verify input.");

    // --- Stop and Display Errors ---
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // --- Calculation ---
    const specificGravity = Ds / Dw;
    document.getElementById('specificGravityValue').textContent = specificGravity.toFixed(3);

    // --- Feedback & Compliance Notes ---
    let feedback = "";
    let color = "";

  if (specificGravity < 1) {
    feedback = "✅ Specific Gravity less than 1: The substance will float. (Fire safety note: flammable liquids with a specific gravity below 1 spread rapidly on water surfaces, increasing fire risk.)";
    color = "green";
} else if (specificGravity === 1) {
    feedback = "⚠️ Specific Gravity equal to 1: Neutral buoyancy. The substance may suspend in water, which can obstruct flow in storage tanks or piping systems.";
    color = "orange";
} else if (specificGravity > 1 && specificGravity <= 25) {
    feedback = "❌ Specific Gravity greater than 1 and less than or equal to 25: The substance will sink. Dense materials require safe handling, proper ergonomic practices, and lifting controls to prevent workplace injuries.";
    color = "red";
} else {
    feedback = "🚨 Specific Gravity greater than 25: Implausible value detected. This is likely an input error. Please verify the values, units of measurement, and re-enter correctly.";
    color = "darkred";
}


    feedbackContent.innerHTML = `<strong style="color:${color}">${feedback}</strong>`;
    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

</script>


    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- ✅ 1. Input Validation Rules (QEHS / Fire Safety perspective)
Density of Substance (Ds)

Units: g/cm³ (mandatory).

Minimum: >0 (a material must have positive density).

Typical range:

Liquids: ~0.5 – 2 g/cm³ (e.g., gasoline ≈ 0.7, sulfuric acid ≈ 1.8).

Solids: ~0.5 – 25 g/cm³ (wood ≈ 0.6, aluminum ≈ 2.7, lead ≈ 11.3, osmium ≈ 22.6).

Maximum threshold: 25 g/cm³ (flag >25 as “implausible” unless specialized materials are tested).

Decimals: Allow up to 3 decimal places (to cover lab-grade precision).

Density of Water (Dw)

Units: g/cm³.

Minimum: >0.

Expected range:

Freshwater (0.99–1.00 at standard lab temperature).

Seawater: up to 1.03.

Warm/cold water: 0.95–1.05.

Practical thresholds: Warn if outside 0.8–1.2 (suggests wrong units or wrong fluid).

Cross-field Consistency

Prevent division by zero (Dw ≠ 0).

If both Ds and Dw are zero or blank → invalid input (physical impossibility).

If Ds and Dw are entered with drastically different units (e.g., kg/m³ vs g/cm³) → SG will be absurdly high/low → must warn user.

✅ 2. Output Validation Logic

Specific Gravity (SG = Ds / Dw) should be dimensionless.

SG < 1.0 → ✅ Substance floats.

SG = 1.0 → ⚠️ Neutral buoyancy (safety note: can obstruct water flow in tanks/pipelines).

SG 1.0–25.0 → ❌ Sinks (but valid).

SG > 25.0 → 🚨 Implausible, likely input error (wrong units or invalid measurement).

QEHS / Safety Relevance:

Buoyancy → Fire & Chemical Safety: Flammable liquids (SG < 1) float on water → major hazard in firefighting (fire spreads on water surface).

High-density materials (>10) → pose ergonomic/manual handling risks and potential confined space hazards if spilled.

Accurate SG reporting → required in OSHA Material Safety Data Sheets (MSDS) and NFPA hazard documentation.

✅ 5. Why Each Validation Matters (Compliance)

Range checks: Ensures results align with physical laws → avoids reporting nonsense values in OSHA/ISO reports.

Unit consistency: Prevents mix-up between g/cm³ and kg/m³ → common in lab reports.

Outlier warnings: Helps auditors quickly detect misreported values (a compliance red flag in ISO 45001 audits).

Division by zero check: Protects calculator integrity and ensures reliability in official safety documentation.

Feedback tied to hazards: Adds occupational and fire safety context, which aligns with NFPA fire-prevention standards and OSHA MSDS reporting. -->