{% extends 'base.html' %}
{% block title %}Critical Flow Scaling Parameter Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Critical Flow Scaling Parameter Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background: linear-gradient(#1560bd, #000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-block;
        }

        .back-btn:hover {
            background: linear-gradient(#000040, #1560bd); /* Reverse gradient on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            {% comment %} display: flex; {% endcomment %}
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
            min-height: 420px;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: linear-gradient(#000040, #1560bd);
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
            flex-wrap: wrap;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
            font-size: 20px;
            font-weight: bold;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

        .input-row {
            display: flex;
            gap: 20px;
        }
        
        .input-row .form-group {
            flex: 1;
        }
        
        .error {
            color: #e74c3c;
            font-size: 14px;
            display: block;
            margin-top: 5px;
        }

        @media print {
            .btn-container, .calculate-btn, .print-btn {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    <div class="calculator-container printable" id="printArea">

        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Critical Flow Scaling Parameter Calculator</h1>
            <p>Calculate the critical flow scaling parameter for two-phase fluid flow analysis</p>
        </div>

        <div class="calc-content">
            <div class="calc-card">
                <h2>Enter Data</h2>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="x">Quality or Mass Fraction of Vapor (x)</label>
                        <input type="number" id="x" class="form-input" min="0" max="1" step="0.01" placeholder="e.g., 0.5">
                        <span class="error" id="error-x"></span>
                    </div>
                    <div class="form-group">
                        <label for="v_fg">Difference in Specific Volume (v_fg)</label>
                        <input type="number" id="v_fg" class="form-input" min="0.0001" step="0.0001" placeholder="e.g., 0.1">
                        <span class="error" id="error-v_fg"></span>
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="v">Specific Volume (v)</label>
                        <input type="number" id="v" class="form-input" min="0.0001" step="0.0001" placeholder="e.g., 0.5">
                        <span class="error" id="error-v"></span>
                    </div>
                    <div class="form-group">
                        <label for="C_p">Specific Heat at Constant Pressure (C_p)</label>
                        <input type="number" id="C_p" class="form-input" min="0.0001" step="0.0001" placeholder="e.g., 4.18">
                        <span class="error" id="error-C_p"></span>
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="T">Temperature (T in Kelvin)</label>
                        <input type="number" id="T" class="form-input" min="1" step="0.01" placeholder="e.g., 373.15">
                        <span class="error" id="error-T"></span>
                    </div>
                    <div class="form-group">
                        <label for="P">Pressure (P in Pascals)</label>
                        <input type="number" id="P" class="form-input" min="1" step="0.01" placeholder="e.g., 101325">
                        <span class="error" id="error-P"></span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="h_fg">Latent Heat of Vaporization (h_fg)</label>
                    <input type="number" id="h_fg" class="form-input" min="0.0001" step="0.0001" placeholder="e.g., 2257">
                    <span class="error" id="error-h_fg"></span>
                </div>
                
                <button class="calculate-btn" onclick="calculateOmega()">Calculate Critical Flow Scaling Parameter</button>
            </div>

            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Safety illustration">
                    <p>This tool will calculate the <strong>Critical Flow Scaling Parameter (ω)</strong>. Enter your data to see results here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">❌</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                    
                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Critical Flow Scaling Parameter</h2>
                    </div>
                    <div class='rate-display'>
                        <div class="rate-value" id="omegaValue">0.00000</div>
                        <div class="rate-label">Dimensionless parameter (ω)</div>
                    </div>

                    <div class="result-feedback">
                        <div class="feedback-title">Interpretation</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="note-section">
            <div class="note-card">
                <h3>📘 About This Calculator</h3>
                <p>
                    The <strong>Critical Flow Scaling Parameter (ω) Calculator</strong> is a specialized tool used in thermodynamics and fluid dynamics to analyze two-phase flow (a mixture of liquid and vapor) under critical, or "choked," conditions. The parameter ω is a dimensionless value that helps predict the behavior of the fluid as it undergoes rapid pressure changes, such as through a nozzle or safety relief valve. This is crucial for designing and ensuring the safety of systems in power generation, cryogenics, and the process industries.
                </p>
            </div>
            <div class="note-card">
                <h3>⚙️ Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>Quality or Mass Fraction of Vapor (x):</strong> The proportion of the mixture that is in the vapor phase (from 0 for a pure liquid to 1 for a pure vapor).</li>
                    <li><strong>Difference in Specific Volume (v_fg):</strong> The change in volume per unit mass when a liquid turns into a vapor at a constant pressure.</li>
                    <li><strong>Specific Volume (v):</strong> The overall volume per unit mass of the two-phase mixture.</li>
                    <li><strong>Specific Heat at Constant Pressure (C_p):</strong> The amount of heat energy required to raise the temperature of a unit mass of the substance by one degree at constant pressure.</li>
                    <li><strong>Temperature (T):</strong> The absolute temperature of the system in Kelvin.</li>
                    <li><strong>Pressure (P):</strong> The absolute pressure of the system in Pascals.</li>
                    <li><strong>Latent Heat of Vaporization (h_fg):</strong> The energy absorbed per unit mass during the phase change from liquid to vapor.</li>
                </ul>
            </div>
            <div class="note-card">
                <h3>✅ Input Validation Rules</h3>
                <ul class="note-list">
                    <li><strong>Vapor Quality (x):</strong> Must be a value between 0 and 1, inclusive.</li>
                    <li><strong>Specific Volumes (v, v_fg):</strong> Must be positive numbers. For physical consistency, the specific volume of the mixture (v) must be greater than the contribution from the vapor phase alone (x * v_fg).</li>
                    <li><strong>Thermodynamic Properties (C_p, T, P, h_fg):</strong> All must be positive values within realistic physical ranges. Temperature must be above absolute zero.</li>
                </ul>
            </div>
             <div class="note-card">
                <h3>Output Validations</h3>
                 <p>The interpretation of the result provides insight into the fluid's behavior:</p>
                <ul class="note-list">
                    <li><span class="good">Low Parameter (ω < 0.1):</span> Minimal two-phase flow effects are expected.</li>
                    <li><span class="average">Moderate Parameter (0.1 ≤ ω < 0.5):</span> Indicates the early onset of two-phase effects.</li>
                    <li><span class="average">Significant Parameter (0.5 ≤ ω < 1.0):</span> Notable two-phase flow effects will be present.</li>
                    <li><span class="bad">High Parameter (ω ≥ 1.0):</span> Strong two-phase flow effects dominate, which may require careful safety monitoring and system design considerations.</li>
                </ul>
            </div>
             <div class="note-card">
                <h3>Governing Principle</h3>
                <p>There is not a single, universal standard for a "Critical Flow Scaling Parameter Calculator". The specific standard depends on the industry and the nature of the fluid being analyzed. Two of the most common standard procedures that involve critical flow and related scaling parameters are:</p>
                <ul class="note-list">
                    <li><strong>American Petroleum Institute (API) Recommended Practice (RP) 520:</strong> This is a standard procedure used for sizing and verifying pressure-relieving systems in the process industry. The API RP 520 procedure, alongside the Omega method, provides standard calculation procedures for critical (or choked) flow conditions for a variety of fluids.</li>
                    <li><strong>ASTM D6393:</strong> This is the Standard Test Method for Bulk Solids Characterization by Carr Indices. While not for fluids, this standard uses various measurements and scaling parameters (known as Carr Indices) to characterize the flowability of powders and granular materials.</li>
                </ul>
                <p>For calculations involving a compressible fluid like a gas or vapor, the API RP 520 procedure provides the critical pressure ratio to determine the point at which flow becomes critical. However, more rigorous calculations based on the evaluation of local sonic velocity can improve upon these standard methods, particularly in high-pressure regions.</p>
            </div>
            <div class="note-card">
                <h3>Conclusion</h3>
                <p>
                    The Critical Flow Scaling Parameter (ω) is a vital metric for engineers designing and analyzing systems with two-phase flow. This calculator provides an accurate value for ω based on standard thermodynamic principles, enabling better design of safety relief systems, nozzles, and turbines. The results should be used in conjunction with established industry standards like API RP 520 to ensure system safety and efficiency.
                </p>
            </div>
        </div>
    </div>

    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateOmega() {
            // Clear previous error messages
            document.querySelectorAll('.error').forEach(el => el.textContent = '');
            
            const fields = {
                x: document.getElementById('x').value.trim(),
                v_fg: document.getElementById('v_fg').value.trim(),
                v: document.getElementById('v').value.trim(),
                C_p: document.getElementById('C_p').value.trim(),
                T: document.getElementById('T').value.trim(),
                P: document.getElementById('P').value.trim(),
                h_fg: document.getElementById('h_fg').value.trim()
            };

            let errors = [];

            // Parse and Validate fields
            const x_val = parseFloat(fields.x);
            const v_fg_val = parseFloat(fields.v_fg);
            const v_val = parseFloat(fields.v);
            const C_p_val = parseFloat(fields.C_p);
            const T_val = parseFloat(fields.T);
            const P_val = parseFloat(fields.P);
            const h_fg_val = parseFloat(fields.h_fg);

            // x validation
            if (fields.x === '' || isNaN(x_val) || x_val < 0 || x_val > 1) {
                document.getElementById('error-x').textContent = 'Quality of vapor (x) must be between 0 and 1.';
                errors.push("Quality of vapor (x) must be between 0 and 1.");
            }

            // v_fg validation
            if (fields.v_fg === '' || isNaN(v_fg_val) || v_fg_val <= 0 || v_fg_val > 100) {
                document.getElementById('error-v_fg').textContent = 'v_fg must be >0 and ≤100 m³/kg.';
                errors.push("v_fg must be >0 and realistically ≤100 m³/kg.");
            }

            // v validation
            if (fields.v === '' || isNaN(v_val) || v_val <= 0 || v_val > 100) {
                document.getElementById('error-v').textContent = 'Specific volume (v) must be >0 and ≤100 m³/kg.';
                errors.push("Specific volume (v) must be >0 and ≤100 m³/kg.");
            } else if (!isNaN(x_val) && !isNaN(v_fg_val) && v_val <= x_val * v_fg_val) {
                document.getElementById('error-v').textContent = 'Specific volume (v) must be greater than x·v_fg.';
                errors.push("Specific volume (v) must be greater than x·v_fg for physical consistency.");
            }

            // C_p validation
            if (fields.C_p === '' || isNaN(C_p_val) || C_p_val <= 0 || C_p_val > 10000) {
                document.getElementById('error-C_p').textContent = 'Specific heat (C_p) must be >0 and ≤10,000 J/kg·K.';
                errors.push("Specific heat (C_p) must be >0 and ≤10,000 J/kg·K.");
            }

            // T validation
            if (fields.T === '' || isNaN(T_val) || T_val < 1 || T_val > 6000) {
                document.getElementById('error-T').textContent = 'Temperature (T) must be between 1 K and 6000 K.';
                errors.push("Temperature (T) must be between 1 K and 6000 K.");
            }

            // P validation
            if (fields.P === '' || isNaN(P_val) || P_val < 1 || P_val > 1e9) {
                document.getElementById('error-P').textContent = 'Pressure (P) must be between 1 Pa and 1e9 Pa.';
                errors.push("Pressure (P) must be between 1 Pa and 1e9 Pa.");
            }

            // h_fg validation
            if (fields.h_fg === '' || isNaN(h_fg_val) || h_fg_val <= 0 || h_fg_val > 1e7) {
                document.getElementById('error-h_fg').textContent = 'Latent heat (h_fg) must be >0 and ≤10⁷ J/kg.';
                errors.push("Latent heat (h_fg) must be >0 and ≤10⁷ J/kg.");
            }

            if (errors.length > 0) {
                document.getElementById('errorMessage').innerHTML = "👉 " + errors.join("<br>👉 ");
                document.getElementById('resultError').classList.remove("hidden");
                document.getElementById('resultValue').classList.add("hidden");
                document.getElementById('placeholder').classList.add("hidden");
                return;
            }

            // Safe calculation
            const term1 = (x_val * v_fg_val) / v_val;
            const term2 = ((C_p_val * T_val * P_val) / v_val) * Math.pow((v_fg_val / h_fg_val), 2);
            let omega = term1 + term2;

            // Overflow guard
            if (omega > 1e6 || !isFinite(omega)) {
                document.getElementById('errorMessage').innerHTML = "⚠️ Result too large or invalid. Check input units.";
                document.getElementById('resultError').classList.remove("hidden");
                document.getElementById('resultValue').classList.add("hidden");
                document.getElementById('placeholder').classList.add("hidden");
                return;
            }

            // Show result
            document.getElementById('omegaValue').textContent = omega.toFixed(5);

            let feedback;
            if (omega < 0.1) feedback = '<span class="good">Low critical flow scaling parameter. Minimal two-phase flow effects.</span>';
            else if (omega < 0.5) feedback = '<span class="average">Moderate parameter. Early onset of two-phase effects.</span>';
            else if (omega < 1.0) feedback = '<span class="average">Significant parameter. Notable two-phase flow effects.</span>';
            else feedback = '<span class="bad">High parameter. Strong two-phase flow effects — safety monitoring required.</span>';

            document.getElementById('feedbackContent').innerHTML = feedback;
            document.getElementById('resultError').classList.add("hidden");
            document.getElementById('resultValue').classList.remove("hidden");
            document.getElementById('placeholder').classList.add("hidden");
        }

        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            
            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>

</body>
</html>
{% endblock %}


{% comment %} 

/*
 Formula:
 ω = ( (x * v_fg) / v ) + [ (C_p * T * P) / v ] * (v_fg / h_fg)^2

 Validation rules:
 - x: 0 ≤ x ≤ 1
 - v_fg: >0, typical range 0.0001 – 100
 - v: >0, typical range 0.0001 – 100, must be > (x * v_fg)
 - C_p: >0, 0.1 – 10000 J/kg·K
 - T: >0, 1 – 6000 K
 - P: >0, 1 – 1e9 Pa
 - h_fg: >0, 0.1 – 1e7 J/kg
*/


1. Formula Used

Based on your script, the formula for the Critical Flow Scaling Parameter (ω) is:

ω = ( (x · v_fg) / v )  +  [ (C_p · T · P) / v ] · (v_fg / h_fg)²


Where:

x = vapor quality (0 ≤ x ≤ 1, dimensionless)

v_fg = difference in specific volume between vapor & liquid (m³/kg)

v = specific volume (m³/kg)

C_p = specific heat at constant pressure (kJ/kg·K or J/kg·K, unit consistency needed)

T = temperature (K)

P = pressure (Pa)

h_fg = latent heat of vaporization (kJ/kg or J/kg, unit consistency needed)

2. Validation Rules (Field-Specific)
🔹 x (Quality or Vapor Mass Fraction)

Range: 0 ≤ x ≤ 1

Precision: 2 decimals (engineering practice)

Validation: Must not be empty, must be numeric.

Compliance: Prevents invalid vapor fraction (>100% vapor or negative).

🔹 v_fg (Difference in Specific Volume)

Range: 0.0001 ≤ v_fg ≤ 100 m³/kg (most real fluids are between 0.001 and 10, but leave buffer for cryogenics).

Validation: Must be >0.

Compliance: Avoids divide-by-zero risk and unrealistic vacuum-like values.

🔹 v (Specific Volume)

Range: 0.0001 ≤ v ≤ 100 m³/kg

Validation: Must be >0 and v > x·v_fg to avoid negative effective liquid volume.

Compliance: Maintains thermodynamic consistency between phases.

🔹 C_p (Specific Heat at Constant Pressure)

Range: 0.1 ≤ C_p ≤ 10,000 J/kg·K (covering gases, water, metals, cryogenic fluids).

Validation: Must be >0.

Compliance: Prevents non-physical negative heat capacity.

🔹 T (Temperature in Kelvin)

Range: 1 ≤ T ≤ 6000 K (absolute scale, upper bound protects against typos).

Validation: Must be >0.

Compliance: Prevents entry of °C mistakenly as negative Kelvin.

🔹 P (Pressure in Pascals)

Range: 1 ≤ P ≤ 1e9 Pa (covers vacuum to ~10,000 bar).

Validation: Must be >0.

Compliance: Prevents division instability, avoids negative pressure.

🔹 h_fg (Latent Heat of Vaporization)

Range: 0.1 ≤ h_fg ≤ 1e7 J/kg

Validation: Must be >0.

Compliance: Zero/negative values would crash (v_fg/h_fg)² term.

3. Output Validation & Thresholds
ω Interpretation Logic:

ω < 0.1 → Low: negligible two-phase effects.

0.1 ≤ ω < 0.5 → Moderate: early onset of two-phase instabilities.

0.5 ≤ ω < 1.0 → Significant: high caution, may impact safety-critical equipment.

ω ≥ 1.0 → High: strong two-phase interaction → triggers QEHS escalation (risk of flashing, choked flow, or pipe erosion).

📌 Compliance reason:
These thresholds align with how safety reports interpret dimensionless scaling numbers: values above 1 indicate uncontrolled or severe effects that can damage boilers, reactors, or cryogenic tanks. {% endcomment %}