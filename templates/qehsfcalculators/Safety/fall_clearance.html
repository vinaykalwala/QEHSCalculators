{% extends 'base.html' %}
{% block title %}Fall Clearance Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fall Clearance Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }
        
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 480px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }
        
        {% comment %} /* Input rows for side-by-side fields */
        .input-row {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        @media (min-width: 480px) {
            .input-row {
                flex-direction: row;
            }
        }
        
        .input-row .form-group {
            flex: 1;
        } {% endcomment %}

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        .image-content {
            text-align: center;
            margin-top: 20px;
        }
        
        .image-content img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
        /* Only apply flex to note-cards that need image on right */
.note-card.validation-flex {
  display: flex;
  justify-content: space-between;
  align-items: stretch;
  gap: 16px;
}

        .validation-image {
  flex: 1;
  display: flex;
  align-items: center;
}

/* Fix image responsiveness */
.validation-image img {
  max-width: 50%;
  height: auto;
  border-radius: 8px;
  margin-left: 60px;
  cursor: pointer;
  box-shadow: 0px 2px 6px rgba(0,0,0,0.15);
}
@media (max-width: 900px) {
  .note-card.validation-flex {
    flex-direction: column;
    {% comment %} align-items: center;
    text-align: center; {% endcomment %}
  }

  .validation-image {
    justify-content: center;
    margin-top: 15px;
    width: 100%;
  }
}
/* Stack validation-flex vertically on smaller screens */
@media (max-width: 760px) {
  .note-card.validation-flex {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .validation-image {
    justify-content: center;
    margin-top: 15px;
  }
}


/* Popup modal */
.image-popup {
  display: none;
  position: fixed;
  z-index: 999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
}

.image-popup img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 10px;
  box-shadow: 0px 4px 12px rgba(0,0,0,0.3);
  animation: zoomIn 0.3s ease;
}

@keyframes zoomIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}



       
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
    <div class="calculator-container printable" id="printArea">
        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Fall Clearance Calculator</h1>
            <p>Calculate the minimum fall clearance required to safely stop a worker in case of a fall</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="input-row">
                    <div class="form-group">
                        <label for="lanyardLength">Lanyard Length (LL) (ft)</label>
                        <input type="number" id="lanyardLength" class="form-input" min="0" step="0.1" placeholder="e.g., 6">
                    </div>
                    <div class="form-group">
                        <label for="decelerationDistance">Deceleration Distance (DD) (ft)</label>
                        <input type="number" id="decelerationDistance" class="form-input" min="0" step="0.1" placeholder="e.g., 3.5">
                    </div>
                </div>
                <div class="input-row">
                    <div class="form-group">
                        <label for="workerHeight">Height of Suspended Worker (HH) (ft)</label>
                        <input type="number" id="workerHeight" class="form-input" min="0" step="0.1" placeholder="e.g., 6">
                    </div>
                    <div class="form-group">
                        <label for="safetyFactor">Safety Factor (C) (ft)</label>
                        <input type="number" id="safetyFactor" class="form-input" min="0" step="0.1" placeholder="e.g., 2">
                    </div>
                </div>
                
                <button class="calculate-btn" onclick="calculateFallClearance()">Calculate Fall Clearance</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="{% static 'images/resultimage.png' %}" alt="Safety illustration">

                    <p>This tool will calculate the <strong>Fall Clearance</strong> required for fall protection. Enter your data to see results and insights here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                 
                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Required Fall Clearance</h2>
                    </div>
                    <div class="rate-display">
                        <div class="rate-value" id="rateValue">0.00</div>
                        <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">ft</div>
                    </div>

                    <div class="safety-meter">
                        <div class="meter-fill" id="meterFill"></div>
                    </div>
                    <div class="meter-labels">
                        <span>Low Risk</span>
                        <span>Moderate</span>
                        <span>High Risk</span>
                    </div>

                    <div class="result-feedback">
                        <div class="feedback-title">Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

<!-- Notes Section -->
<div class="note-section">
    <!-- 1. About This Calculator -->
    <div class="note-card">
        <h3>üìò About This Calculator</h3>
        <p>
            This tool calculates the <strong>Minimum Fall Clearance</strong> required to safely stop a worker 
            in case of a fall, ensuring proper fall protection system design according to OSHA and ANSI standards.
        </p>
    </div>

    <!-- 2. Parameters Used -->
    <div class="note-card">
        <h3>‚öôÔ∏è Parameters Used</h3>
        <ul class="note-list">
            <li><strong>Lanyard Length (LL):</strong> The length of the lanyard used (in feet).</li>
            <li><strong>Deceleration Distance (DD):</strong> The distance required to stop the fall after the lanyard engages (in feet).</li>
            <li><strong>Height of Suspended Worker (HH):</strong> The worker's height (in feet).</li>
            <li><strong>Safety Factor (C):</strong> An additional buffer for safety, typically recommended by standards (in feet).</li>
        </ul>
    </div>

    <!-- 3. Input Validation Rules -->
    <div class="note-card validation-flex">
        <div class="note-content">
            <h3>‚úÖ Input Validation Rules</h3>
            <ul class="note-list">
                <li><strong>Lanyard Length (LL):</strong> Must be 0‚Äì20 ft (typical 4‚Äì6 ft). Warning if >10 ft.</li>
                <li><strong>Deceleration Distance (DD):</strong> Must be 0‚Äì5 ft (typical 3.5 ft for most systems, OSHA max 3.5 ft).</li>
                <li><strong>Height of Suspended Worker (HH):</strong> Must be 0‚Äì10 ft (average 5‚Äì7 ft).</li>
                <li><strong>Safety Factor (C):</strong> Must be 0‚Äì5 ft (OSHA recommends ‚â•2 ft).</li>
                <li><strong>Decimals:</strong> Up to 1 decimal place allowed for accuracy.</li>
                <li><strong>All Inputs = 0:</strong> Invalid scenario.</li>
            </ul>
        </div>

        <!-- Image -->
        <div class="validation-image">
            <img src="{% static 'images/fallcal4.jpg' %}" 
                 alt="Diagram illustrating fall distance calculation"
                 onclick="openImagePopup(this.src)">
        </div>
    </div>

    <!-- 4. Output Validations (with feedback) -->
    <div class="note-card">
        <h3>üìä Output Validations</h3>
        <p>
            The calculated <strong>Fall Clearance</strong> is validated against ANSI/OSHA standards. 
            The safety assessment is displayed along with the result:
        </p>
        <ul class="note-list">
            <li><span class="good">Below 15 ft</span> ‚Üí Low clearance requirement. Standard fall arrest system typically sufficient.</li>
            <li><span class="average">15‚Äì20 ft</span> ‚Üí Moderate clearance. Verify equipment compatibility and anchorage strength.</li>
            <li><span class="bad">Above 20 ft</span> ‚Üí High clearance. Requires specialized fall protection planning and systems.</li>
        </ul>
        <p>‚ö†Ô∏è Warnings for unusual input values (e.g., LL >10 ft, DD >3.5 ft, C <2 ft) are displayed alongside the assessment.</p>
    </div>

    <!-- 5. Governing Principle -->
    <div class="note-card">
        <h3>üìñ Governing Principle</h3>
        <p>
            A fall clearance calculator is based on both the Occupational Safety and Health Administration (OSHA) standards, particularly OSHA 1926.502(d)(1), and American National Standards Institute (ANSI) standards, primarily ANSI Z359.1 and Z359.13. These standards define the acceptable distances for free fall, deceleration, harness stretch, and safety factors that determine the total fall clearance.
        </p>
        <ul class="note-list">
            <li><strong>OSHA:</strong> Regulatory requirements, free fall ‚â§6 ft, deceleration ‚â§3.5 ft.</li>
            <li><strong>ANSI Z359.1:</strong> Requirements for fall protection systems and components.</li>
            <li><strong>ANSI Z359.13:</strong> Specific standard for energy absorbers/energy-absorbing lanyards.</li>
            <li><strong>ANSI Z359.14:</strong> Standards for self-retracting devices affecting fall clearance.</li>
        </ul>
        <p>
            Components used in the calculation include: Free Fall Distance, Deceleration Distance, Harness Stretch, and Safety Factor.
        </p>
    </div>

    <!-- 6. Conclusion -->
    <div class="note-card">
        <h3>‚úÖ Conclusion</h3>
        <p>
            This calculator ensures safe fall clearance by summing all key components and validating against OSHA/ANSI standards. The output includes a risk assessment, providing actionable guidance for safe fall protection system planning.
        </p>
    </div>
</div>

<!-- Popup Modal -->
<div id="imagePopup" class="image-popup" onclick="closeImagePopup()">
  <img id="popupImg" src="" alt="">
</div>


    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateFallClearance() {
    const lanyardLength = parseFloat(document.getElementById('lanyardLength').value.trim());
    const decelerationDistance = parseFloat(document.getElementById('decelerationDistance').value.trim());
    const workerHeight = parseFloat(document.getElementById('workerHeight').value.trim());
    const safetyFactor = parseFloat(document.getElementById('safetyFactor').value.trim());

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');

    let errors = [];
    let warnings = [];

    // === Input Validations ===
    if (isNaN(lanyardLength) || lanyardLength < 0 || lanyardLength > 20) {
        errors.push("üëâ Lanyard Length must be between 0 and 20 ft.");
    } else if (lanyardLength > 10) {
        warnings.push("‚ö†Ô∏è Lanyard Length above 10 ft is uncommon. Verify equipment specification.");
    }

    if (isNaN(decelerationDistance) || decelerationDistance < 0 || decelerationDistance > 5) {
        errors.push("üëâ Deceleration Distance must be between 0 and 5 ft.");
    } else if (decelerationDistance > 3.5) {
        warnings.push("‚ö†Ô∏è OSHA requires deceleration ‚â§ 3.5 ft. Check equipment compliance.");
    }

    if (isNaN(workerHeight) || workerHeight < 0 || workerHeight > 10) {
        errors.push("üëâ Worker Height must be between 0 and 10 ft.");
    }

    if (isNaN(safetyFactor) || safetyFactor < 0 || safetyFactor > 5) {
        errors.push("üëâ Safety Factor must be between 0 and 5 ft.");
    } else if (safetyFactor < 2) {
        warnings.push("‚ö†Ô∏è OSHA recommends a minimum 2 ft safety factor.");
    }

    if (lanyardLength === 0 && decelerationDistance === 0 && workerHeight === 0 && safetyFactor === 0) {
        errors.push("üëâ All inputs cannot be zero. Provide valid fall protection parameters.");
    }

    // === Error Handling ===
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // === Calculation ===
    const requiredClearance = lanyardLength + decelerationDistance + workerHeight + safetyFactor;
    document.getElementById('rateValue').textContent = requiredClearance.toFixed(1);

    // === Risk Feedback ===
    const meterFill = document.getElementById('meterFill');
    let meterWidth, meterColor, feedback;

    if (requiredClearance < 15) {
        meterWidth = '30%'; meterColor = '#2ecc71';
        feedback = 'Low clearance requirement. Standard fall arrest system typically sufficient.';
    } else if (requiredClearance <= 20) {
        meterWidth = '60%'; meterColor = '#f39c12';
        feedback = 'Moderate clearance. Verify equipment compatibility and anchorage strength.';
    } else {
        meterWidth = '90%'; meterColor = '#e74c3c';
        feedback = 'High clearance. Requires specialized fall protection planning and systems.';
    }

    meterFill.style.width = meterWidth;
    meterFill.style.backgroundColor = meterColor;

    let finalFeedback = feedback;
    if (warnings.length > 0) {
        finalFeedback += " ‚ö†Ô∏è " + warnings.join(" ");
    }

    document.getElementById('feedbackContent').textContent = finalFeedback;

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            
            window.print();
        }
        function openImagePopup(src) {
  document.getElementById("popupImg").src = src;
  document.getElementById("imagePopup").style.display = "flex";
}

function closeImagePopup() {
  document.getElementById("imagePopup").style.display = "none";
}
    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}



{% comment %} 
1. Real-world QEHS/Fire Safety Formula & Inputs

üëâ Formula Used in Industry (OSHA / ANSI Z359.6):

Fall¬†Clearance¬†(FC)
=
Lanyard¬†Length¬†(LL)
+
Deceleration¬†Distance¬†(DD)
+
Worker¬†Height¬†(HH)
+
Safety¬†Factor¬†(C)
Fall¬†Clearance¬†(FC)=Lanyard¬†Length¬†(LL)+Deceleration¬†Distance¬†(DD)+Worker¬†Height¬†(HH)+Safety¬†Factor¬†(C)

LL (Lanyard Length): 4‚Äì6 ft typical, fixed-length lanyards usually 6 ft.

DD (Deceleration Distance): OSHA 1926.502(d)(16)(iv) requires ‚â§ 3.5 ft.

HH (Worker Height): Typically 5‚Äì7 ft depending on body height.

C (Safety Factor): OSHA/ANSI recommend a 2 ft clearance buffer.

‚úî This matches the code formula and is compliant.

2. Detailed Input Validation Rules

üîë Field-specific rules (with real-world justification):

Lanyard Length (LL, ft)

Must be ‚â• 0 (no negative lengths).

Typical range: 4‚Äì6 ft (ANSI/OSHA standard).

Validation: allow 0‚Äì20 ft for flexibility, but warn if >10 ft (rare/unrealistic).

Decimals allowed: 1 decimal max.

Deceleration Distance (DD, ft)

Must be ‚â• 0.

OSHA limit: ‚â§ 3.5 ft (standard shock-absorbing lanyards).

Validation: accept 0‚Äì5 ft, warning if >3.5.

Decimals: 1 decimal max.

Worker Height (HH, ft)

Must be ‚â• 0.

Human height range: 4‚Äì8 ft.

Validation: accept 0‚Äì10 ft, error if >10 ft.

Decimals: 1 decimal max.

Safety Factor (C, ft)

Must be ‚â• 0.

OSHA recommends 2 ft minimum buffer.

Validation: accept 0‚Äì5 ft, warning if <2.

Decimals: 1 decimal max.

3. Edge Case Validations

Division by zero ‚Äì Not applicable (no division).

All inputs = 0 ‚Üí clearance = 0 ‚Üí invalid scenario ‚Üí show error.

Extremely high inputs (LL > 20, HH > 10, DD > 10, C > 10) ‚Üí unrealistic ‚Üí show warning/error.

Safety factor < 2 ft ‚Üí warn that OSHA recommends at least 2 ft.

Negative values ‚Üí error.

Non-numeric values ‚Üí error.

4. Output Validation Logic

Fall Clearance Output Thresholds (based on ANSI/OSHA risk categories):

< 15 ft ‚Üí Low risk (manageable with standard fall arrest).

15‚Äì20 ft ‚Üí Moderate risk (requires careful planning, harness type selection, anchorage check).

> 20 ft ‚Üí High risk (specialized systems, horizontal lifelines, engineered anchorages).

‚úî Already in your code, but we‚Äôll link explicitly to OSHA guidance.


/*
Formula Reference:
Fall Clearance (FC) = Lanyard Length (LL) + Deceleration Distance (DD) + Worker Height (HH) + Safety Factor (C)

Validation Rules (OSHA / ANSI Z359.6 / ISO 45001):
- LL: 0‚Äì20 ft (typical 4‚Äì6 ft). Error if negative. Warning if >10 ft.
- DD: 0‚Äì5 ft (OSHA max 3.5 ft). Error if negative. Warning if >3.5 ft.
- HH: 0‚Äì10 ft (typical 5‚Äì7 ft). Error if >10 ft.
- C: 0‚Äì5 ft (OSHA recommends ‚â•2 ft). Warning if <2 ft.
- Decimals allowed: 1 decimal place max.
*/ {% endcomment %}