{% extends 'base.html' %}
{% block title %}Kinetic Energy Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kinetic Energy Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }
        
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .calc-card {
    flex: 1;
    background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
    color: #fff;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease;
    height: 420px;              /* fixed height */
    overflow-y: auto;           /* scroll when content is bigger */
}

.result-card {
    flex: 1;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    padding: 30px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start; /* keep heading visible at top */
    align-items: center;
    height: 420px;              /* match calc card */
    overflow-y: auto;           /* enable scroll inside result box */
    text-align: center;
    border: 2px solid #1560bd;
}

        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd, #000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .rate-display {
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
      
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
    <div class="calculator-container printable" id="printArea">
        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Kinetic Energy Calculator</h1>
            <p>Calculate the kinetic energy of an object based on its mass and velocity</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="form-group">
                    <label for="mass">Mass of Object (m, kg)</label>
                    <input type="number" id="mass" class="form-input" min="0" step="any" placeholder="e.g., 5">
                </div>
                <div class="form-group">
                    <label for="velocity">Velocity of Object (u, m/s)</label>
                    <input type="number" id="velocity" class="form-input" step="any" placeholder="e.g., 10">
                </div>
                
                <button class="calculate-btn" onclick="calculateKineticEnergy()">Calculate Kinetic Energy</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="{% static 'images/resultimage.png' %}" alt="Safety illustration">
                    <p>This tool will calculate the <strong>Kinetic Energy</strong>. Enter your data to see results and insights here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                 
                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd; margin-top:20px;">
                        <h2>Kinetic Energy</h2>
                    </div>
                    <div class="rate-display">
                        <div class="rate-value" id="rateValue">0.00</div>
                        <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">Joules (J)</div>
                    </div>

                    <div class="safety-meter">
                        <div class="meter-fill" id="meterFill"></div>
                    </div>
                    <div class="meter-labels">
                        <span>Low</span><span>Moderate</span><span>High</span><span>Very High</span><span>Extreme</span>
                    </div>

                    <div class="result-feedback">
                        <div class="feedback-title">Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
<div class="note-section">

  <!-- üìò About This Calculator -->
  <div class="note-card">
    <h3>üìò About This Calculator</h3>
    <p>
      The <strong>Kinetic Energy Calculator</strong> determines the energy an object possesses due to its motion. 
      It is widely used in <strong>physics, engineering, and industrial safety</strong> to assess motion-related energy for 
      performance analysis, design, and hazard evaluation.
    </p>
  </div>

  <!-- ‚öô Parameters Used -->
  <div class="note-card">
    <h3>‚öôÔ∏è Parameters Used</h3>
    <ul class="note-list">
      <li><strong>Mass (kg):</strong> Total amount of matter in motion. Must be positive and within realistic limits.</li>
      <li><strong>Velocity (m/s):</strong> Speed of the object in a given direction, can be positive or negative.</li>
    </ul>
  </div>

  <!-- ‚úÖ Input Validation Rules -->
  <div class="note-card">
    <h3>‚úÖ Input Validation Rules</h3>
    <ul class="note-list">
      <li><b>Mass (kg):</b> Must be greater than 0 and ‚â§ 1,000,000 kg, up to 3 decimal places.</li>
      <li><b>Velocity (m/s):</b> Can be positive or negative, must not exceed 300,000,000 m/s (speed of light), up to 3 decimal places.</li>
      <li><b>Kinetic Energy (J):</b> Always ‚â• 0 since velocity is squared in computation.</li>
      <li><b>Invalid Inputs:</b> Empty, non-numeric, or unrealistic values are automatically rejected.</li>
      <li><b>Decimals:</b> Maximum of three decimals allowed for accuracy and unit consistency.</li>
    </ul>
  </div>

  <!-- üßæ Output Validations -->
  <div class="note-card">
    <h3>üßæ Output Validations</h3>
    <ul class="note-list">
      <li>Each result is verified for physical validity and displayed with a color-coded feedback bar for easy understanding.</li>
      <li>Outputs correspond directly to motion safety levels and are displayed as descriptive feedback:</li>
      <ul class="note-sublist">
        <li>‚úÖ <b>Zero kinetic energy</b> ‚Äî object is at rest.</li>
        <li>‚úÖ <b>Low kinetic energy</b> ‚Äî minimal motion hazard.</li>
        <li>üîµ <b>Moderate kinetic energy</b> ‚Äî significant movement energy.</li>
        <li>‚ö†Ô∏è <b>High kinetic energy</b> ‚Äî handle with caution.</li>
        <li>‚ùå <b>Extremely high kinetic energy</b> ‚Äî dangerous levels, critical safety risk.</li>
      </ul>
      <li>Each output includes contextual information about the entered mass and velocity values.</li>
      <li>All displayed values are rounded to two decimal places for precision and readability.</li>
    </ul>
  </div>

  <!-- ‚öñ Governing Principle -->
  <div class="note-card">
  <h3>‚öñ Governing Principle</h3>
  <p>
    A <strong>Kinetic Energy Calculator</strong> operates under the standards of the <strong>International System of Units (SI)</strong>, where kinetic energy is measured in Joules (J). 
    Input values for mass and velocity are standardized, with mass in kilograms (kg) and velocity in meters per second (m/s).
  </p>

  <h4>Standards Used in Kinetic Energy Calculators</h4>
  <ul class="note-list">
    <li><strong>Units of Measurement:</strong> The primary standard is the SI system.</li>
    <li><strong>Formula:</strong> Kinetic energy is calculated using the fundamental formula: <em>KE = ¬Ω mv¬≤</em>.</li>
    <li><strong>Input Values:</strong>
      <ul class="note-sublist">
        <li><strong>Mass (m):</strong> Standardized as kilograms (kg).</li>
        <li><strong>Velocity (v):</strong> Standardized as meters per second (m/s).</li>
      </ul>
    </li>
    <li><strong>Output Value:</strong> Kinetic Energy (KE) is expressed in Joules (J), the SI unit for energy.</li>
    <li><strong>Conversion:</strong> Some calculators may also provide results in alternative units, such as calories or electron volts.</li>
  </ul>

  <h4>How the Calculator Works</h4>
  <ul class="note-list">
    <li>Provide the object's mass in kilograms (kg).</li>
    <li>Input the object's velocity in meters per second (m/s).</li>
    <li>The calculator applies the formula <strong>KE = ¬Ω mv¬≤</strong>.</li>
    <li>The result is presented in Joules (J).</li>
  </ul>
</div>


  <!-- üèÅ Conclusion -->
  <div class="note-card">
    <h3>üèÅ Conclusion</h3>
    <p>
      The <strong>Kinetic Energy Calculator</strong> provides a reliable method to evaluate the energy content associated with motion. 
      By validating input accuracy and correlating energy levels with safety interpretations, it aids in <strong>engineering analysis, 
      design assessment, and safety evaluation</strong>. For critical applications, results should always be cross-checked with 
      experimental data and professional engineering standards.
    </p>
  </div>

</div>


    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });
        
        function calculateKineticEnergy() {
    const mass = document.getElementById('mass').value.trim();
    const velocity = document.getElementById('velocity').value.trim();

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');

    let errors = [];

    // --- Mass Validation ---
    if (mass === "" || isNaN(mass)) {
        errors.push("üëâ Please enter the mass of the object.");
    } else if (parseFloat(mass) <= 0) {
        errors.push("üëâ Mass must be greater than 0 kg.");
    } else if (parseFloat(mass) > 1000000) {
        errors.push("üëâ Mass cannot exceed 1,000,000 kg (out of range).");
    } else if (!/^\d+(\.\d{1,3})?$/.test(mass)) {
        errors.push("üëâ Mass must have at most 3 decimal places.");
    }

    // --- Velocity Validation ---
    if (velocity === "" || isNaN(velocity)) {
        errors.push("üëâ Please enter the velocity of the object.");
    } else if (Math.abs(parseFloat(velocity)) > 300000000) {
        errors.push("üëâ Velocity cannot exceed the speed of light (300,000,000 m/s).");
    } else if (!/^-?\d+(\.\d{1,3})?$/.test(velocity)) {
        errors.push("üëâ Velocity must have at most 3 decimal places.");
    }

    // --- Error Handling ---
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // --- Safe Calculations ---
    const m = parseFloat(mass);
    const u = parseFloat(velocity);

    // Formula: KE = 1/2 * m * u¬≤
    const kineticEnergy = 0.5 * m * Math.pow(u, 2);

    document.getElementById('rateValue').textContent = kineticEnergy.toFixed(2);

    const meterFill = document.getElementById('meterFill');
    let meterWidth, meterColor, feedback;

    // --- Risk Thresholds ---
    if (kineticEnergy === 0) {
        meterWidth = '5%'; 
        meterColor = '#27ae60';
        feedback = '‚úÖ Zero kinetic energy - object is at rest.';
    } else if (kineticEnergy <= 100) {
        meterWidth = '20%'; 
        meterColor = '#2ecc71';
        feedback = '‚úÖ Low kinetic energy - minimal motion hazard.';
    } else if (kineticEnergy <= 1000) {
        meterWidth = '40%'; 
        meterColor = '#f1c40f';
        feedback = 'üîµ Moderate kinetic energy - significant movement energy.';
    } else if (kineticEnergy <= 10000) {
        meterWidth = '65%'; 
        meterColor = '#e67e22';
        feedback = '‚ö†Ô∏è High kinetic energy - handle with caution.';
    } else {
        meterWidth = '95%'; 
        meterColor = '#e74c3c';
        feedback = '‚ùå Extremely high kinetic energy - dangerous levels.';
    }

    meterFill.style.width = meterWidth;
    meterFill.style.backgroundColor = meterColor;

    // Add contextual info
    feedback += `<br><br>Mass: ${m} kg, Velocity: ${u} m/s`;
    document.getElementById('feedbackContent').innerHTML = feedback;

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            
            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


{% comment %} 
1. Formula

We are calculating Kinetic Energy (KE) as:

ùêæ
ùê∏
=
1
2
ùëö
ùë£
2
KE=
2
1
	‚Äã

mv
2

m = mass (kg) ‚Üí must always be positive.

v = velocity (m/s) ‚Üí can be positive or negative (squared, so direction irrelevant).

KE = Joules (J).

2. Input Validation Rules (Real-World QEHS Perspective)
Mass (kg)

Minimum: > 0 (an object cannot have zero or negative mass).

Maximum: 1,000,000 kg (‚âà maximum realistic industrial equipment load; anything beyond is unrealistic in safety assessments).

Allowed Decimals: up to 3 decimal places (kg precision in scientific/engineering contexts).

Units: strictly kilograms (kg).

Compliance Justification:

OSHA & ISO 45001 require realistic risk assessments.

Very high/unrealistic values could distort energy risk ranking in safety reports.

Velocity (m/s)

Minimum: ‚â• 0 (negative allowed in input, but squared in formula ‚Üí always positive KE).

Maximum: 300,000,000 m/s (speed of light = physical upper bound). For QEHS, anything > 1,000 m/s is already extreme.

Allowed Decimals: up to 3 decimal places (precise speed monitoring in industries like aerospace, automotive crash tests).

Units: strictly meters per second (m/s).

Compliance Justification:

Prevents input of physically impossible speeds.

Protects from misinterpretation in accident energy analyses.

Kinetic Energy (Joules)

Always ‚â• 0.

Interpretation thresholds (safety context):

0 J ‚Üí At rest (no hazard).

1 ‚Äì 100 J ‚Üí Low energy (minor motion hazard).

101 ‚Äì 1000 J ‚Üí Moderate (enough to injure in certain conditions).

1001 ‚Äì 10,000 J ‚Üí High (serious hazard, common in machinery, vehicles).

> 10,000 J ‚Üí Extreme (severe safety concern, often catastrophic impact energy).

Compliance Justification:

These thresholds align with safety audits (ILO & OSHA accident investigation methodologies).

Helps classify risks for incident reporting.

3. Edge Case Validations

Mass = 0 ‚Üí Invalid (error).

Negative mass ‚Üí Invalid (error).

Velocity = 0 ‚Üí KE = 0, valid, but flagged as "object at rest."

Negative velocity ‚Üí Valid (treated same as positive).

Extremely high values (mass > 1,000,000 kg or velocity > speed of light) ‚Üí reject input.

Non-numeric input (text, symbols) ‚Üí reject input.

Scientific notation inputs (e.g., 1e6) ‚Üí allow, but validate against thresholds.

4. Corrected JavaScript Code with Validations

I‚Äôve kept your original flow intact and just enhanced the validation logic + added explanatory comments.

/*
Formula:
KE = 1/2 * m * v^2
- m = mass (kg), must be > 0
- v = velocity (m/s), can be +/-, squared anyway
- KE ‚â• 0 always

Validation Rules:
1. Mass:
   - Must be numeric
   - > 0 kg
   - ‚â§ 1,000,000 kg
   - Up to 3 decimals allowed
2. Velocity:
   - Must be numeric
   - Can be positive/negative
   - ‚â§ 300,000,000 m/s (speed of light)
   - Up to 3 decimals allowed
3. Output KE:
   - Always ‚â• 0
   - Risk thresholds:
     0 J ‚Üí At rest
     1‚Äì100 J ‚Üí Low
     101‚Äì1000 J ‚Üí Moderate
     1001‚Äì10000 J ‚Üí High
     >10000 J ‚Üí Extreme
*/ {% endcomment %}