{% extends 'base.html' %}
{% block title %}Double-T Beam Weight Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Double-T Beam Weight Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
            /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 12px;
        }
         .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            {% comment %} max-width: 700px; {% endcomment %}
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

        /* Mobile-specific adjustments */
        @media (max-width: 320px) {
            .calculator-container {
                padding: 10px;
            }
            
            .calculator-header h1 {
                font-size: 1.8rem;
            }
            
            .calculator-header p {
                font-size: 16px;
            }
            
            .calc-card, .result-card {
                padding: 20px 15px;
                border-radius: 12px;
            }
            
            .calc-card h2 {
                font-size: 1.4rem;
            }
            
            .form-input {
                padding: 12px 14px;
                font-size: 14px;
            }
            
            .calculate-btn {
                padding: 12px;
                font-size: 0.9rem;
            }
            
            .result-placeholder img {
                max-width: 180px;
            }
            
            .rate-value {
                font-size: 36px;
            }
            
            .note-card {
                padding: 15px 18px;
            }
            
            .note-card h3 {
                font-size: 16px;
            }
            
            .note-card p, .note-card li {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
    <div class="calculator-container printable" id="printArea">
        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Double-T Beam Weight Calculator</h1>
            <p>Calculate the weight of a double-T beam based on its dimensions and material properties</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                
                <div class="form-group">
                    <label for="A1">Area of Top Flange (A‚ÇÅ) in m¬≤</label>
                    <input type="number" id="A1" class="form-input" min="0" step="0.1" placeholder="e.g., 0.5">
                </div>
                
                <div class="form-group">
                    <label for="A2">Area of One Web (A‚ÇÇ) in m¬≤</label>
                    <input type="number" id="A2" class="form-input" min="0" step="0.1" placeholder="e.g., 0.3">
                </div>
                
                <div class="form-group">
                    <label for="L">Length of Beam (L) in m</label>
                    <input type="number" id="L" class="form-input" min="0" step="1" placeholder="e.g., 10">
                </div>
                
                <div class="form-group">
                    <label for="p">Density of Concrete (œÅ) in kN/m¬≥</label>
                    <input type="number" id="p" class="form-input" min="0" step="1" placeholder="e.g., 24" value="24">
                </div>
                
                <button class="calculate-btn" onclick="calculateWeight()">Calculate Weight</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                   <img src="https://img.icons8.com/fluency/96/pallet.png" alt="Steel load icon" width="100">
                    <p>This tool will calculate the <strong>Weight of Double-T Beam</strong>. Enter your data to see results here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                 
                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Double-T Beam Weight</h2>
                    </div>
                    <div class='rate-display'>
                    <div class="rate-value" id="rateValue">0.00</div>
                    <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">kN (kilonewtons)</div></div>

                    <div class="result-feedback">
                        <div class="feedback-title">Calculation Details</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
            <div class="note-card">
                <h3>üìò About This Calculator</h3>
                <p>
                    The <strong>Double-T Beam Weight Calculator</strong> helps determine the weight of a double-T beam in kilonewtons (kN) based on the area, length, and density of concrete. It is useful for estimating material requirements, ensuring structural integrity, and supporting accurate beam design.
                </p>
            </div>

            <div class="note-card">
                <h3>‚öôÔ∏è Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>A‚ÇÅ:</strong> Area of the top flange in m¬≤.</li>
                    <li><strong>A‚ÇÇ:</strong> Area of one web in m¬≤.</li>
                    <li><strong>L:</strong> Length of the beam in m.</li>
                    <li><strong>œÅ:</strong> Density of concrete in kN/m¬≥.</li>
                    <li><strong>G:</strong> Weight of the double-T beam in kN.</li>
                </ul>
            </div>

            <div class="note-card">
                <h3>üèóÔ∏è Real-Life Applications</h3>
                <ul class="note-list">
                    <li><strong>Construction:</strong> Used in bridges and buildings for load-bearing.</li>
                    <li><strong>Safety Assessments:</strong> Ensures structural integrity under load.</li>
                    <li><strong>Material Estimation:</strong> Helps in calculating required materials for construction projects.</li>
                    <li><strong>Transport Planning:</strong> Assists in determining transportation requirements for beams.</li>
                </ul>
            </div>

            <div class="note-card">
    <h3>üõ°Ô∏è Input Validation Rules</h3>
    <ul class="note-list">
        <li><strong>A‚ÇÅ (Top Flange Area):</strong> 0.001‚Äì10 m¬≤, up to 4 decimals.</li>
        <li><strong>A‚ÇÇ (Web Area):</strong> 0.001‚Äì5 m¬≤, up to 4 decimals.</li>
        <li><strong>L (Beam Length):</strong> 0.1‚Äì100 m, up to 2 decimals.</li>
        <li><strong>œÅ (Concrete Density):</strong> 20‚Äì30 kN/m¬≥, up to 1 decimal.</li>
        <li><strong>Cross-checks:</strong> 
            <ul>
                <li>All inputs must be > 0.</li>
                <li>Weight must not exceed 10,000 kN.</li>
                <li>Unrealistic inputs trigger warnings for recheck.</li>
            </ul>
        </li>
        <li><strong>Output Feedback:</strong> Small beams (<50 kN), medium beams (50‚Äì500 kN), heavy beams (>500 kN).</li>
    </ul>
</div>


            <div class="note-card">
                <h3>üîç Why Is This Calculation Important?</h3>
                <p>
                    Calculating the weight of a double-T beam is crucial for:
                </p>
                <ul class="note-list">
                    <li><strong>Structural Design:</strong> Ensuring beams can support intended loads.</li>
                    <li><strong>Safety Compliance:</strong> Meeting building codes and safety standards.</li>
                    <li><strong>Cost Estimation:</strong> Accurately budgeting for materials and transportation.</li>
                    <li><strong>Installation Planning:</strong> Determining appropriate equipment for placement.</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateWeight() {
    const A1 = document.getElementById('A1').value.trim();
    const A2 = document.getElementById('A2').value.trim();
    const L = document.getElementById('L').value.trim();
    const p = document.getElementById('p').value.trim();

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');

    let errors = [];

    // -------------------------
    // Validation function
    // -------------------------
    function validateInput(name, val, min, max, decimals) {
        if (val === "") {
            return `üëâ Please enter ${name}.`;
        }
        const num = parseFloat(val);
        if (isNaN(num)) {
            return `üëâ ${name} must be a number.`;
        }
        if (num < min || num > max) {
            return `üëâ ${name} must be between ${min} and ${max}.`;
        }
        const regex = new RegExp(`^\\d+(\\.\\d{1,${decimals}})?$`);
        if (!regex.test(val)) {
            return `üëâ ${name} can only have up to ${decimals} decimal places.`;
        }
        return null;
    }

    // Apply validation rules
    const checks = [
        validateInput("Area of top flange (A‚ÇÅ)", A1, 0.001, 10, 4),
        validateInput("Area of one web (A‚ÇÇ)", A2, 0.001, 5, 4),
        validateInput("Length of beam (L)", L, 0.1, 100, 2),
        validateInput("Density of concrete (œÅ)", p, 20, 30, 1)
    ];

    checks.forEach(err => { if (err) errors.push(err); });

    // Error handling
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // -------------------------
    // Calculation
    // -------------------------
    const a1 = parseFloat(A1);
    const a2 = parseFloat(A2);
    const length = parseFloat(L);
    const density = parseFloat(p);

    const totalArea = a1 + (2 * a2);
    const volume = totalArea * length;
    const weight = volume * density;

    if (weight <= 0 || weight > 10000) {
        errorMessage.innerHTML = "‚ùå Unrealistic beam weight. Please check inputs.";
        errorBox.classList.remove("hidden");
        resultValue.classList.add("hidden");
        return;
    }

    document.getElementById('rateValue').textContent = weight.toFixed(2);

    // -------------------------
    // Feedback interpretation
    // -------------------------
    let feedback = `Total Cross-Sectional Area: ${totalArea.toFixed(4)} m¬≤<br>`;
    feedback += `Volume: ${volume.toFixed(2)} m¬≥<br>`;
    feedback += `Weight: ${weight.toFixed(2)} kN<br>`;

    if (weight < 50) {
        feedback += "‚û°Ô∏è Small beam, manageable with standard lifting.";
    } else if (weight < 500) {
        feedback += "‚û°Ô∏è Medium beam, crane handling required.";
    } else {
        feedback += "‚û°Ô∏è Heavy beam, special lifting/transport planning required.";
    }

    document.getElementById('feedbackContent').innerHTML = feedback;

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}


        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            
            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}




{% comment %} 
1. Formula (Structural Engineering Basis)

For a Double-T (I-shaped) beam:

ùê∫
=
(
ùê¥
1
+
2
√ó
ùê¥
2
)
√ó
ùêø
√ó
ùúå
G=(A
1
	‚Äã

+2√óA
2
	‚Äã

)√óL√óœÅ

Where:

ùê¥
1
A
1
	‚Äã

 = Area of top flange (m¬≤)

ùê¥
2
A
2
	‚Äã

 = Area of one web (m¬≤)

ùêø
L = Length of beam (m)

ùúå
œÅ = Density of material (kN/m¬≥, concrete ‚âà 24)

ùê∫
G = Total beam weight (kN)

2. Input Validation Rules (QEHS / Fire Safety Perspective)
(a) Area of Top Flange (A‚ÇÅ, m¬≤)

Must be > 0.001 m¬≤ (structurally realistic lower bound).

Should not exceed 10 m¬≤ (beyond this, it‚Äôs not a practical cross-section).

Decimal precision: up to 4 decimals (engineering drawings often give mm precision).

(b) Area of One Web (A‚ÇÇ, m¬≤)

Must be > 0.001 m¬≤.

Typical range: 0.001 ‚Äì 5 m¬≤ (practical concrete sections).

Decimal precision: up to 4 decimals.

(c) Length of Beam (L, m)

Must be ‚â• 0.1 m (shortest realistic segment).

Should not exceed 100 m (practical transport limit; beyond that ‚Üí abnormal load).

Decimal precision: 2 decimals.

(d) Density of Concrete (œÅ, kN/m¬≥)

Must be ‚â• 20 and ‚â§ 30 kN/m¬≥ (standard reinforced concrete 23‚Äì25 kN/m¬≥, lightweight ~18‚Äì20, high-density ~30).

Default: 24.

Decimal precision: 1 decimal is sufficient.

3. Output Validation & Interpretation

Weight (kN) must always be:

ùê∫
>
0
G>0

If result > 10,000 kN, flag as ‚Äúunrealistically high ‚Äî check inputs.‚Äù

Provide interpretation feedback:

< 50 kN ‚Üí ‚ÄúSmall beam, manageable with standard lifting.‚Äù

50‚Äì500 kN ‚Üí ‚ÄúMedium beam, requires crane handling.‚Äù

500 kN ‚Üí ‚ÄúHeavy beam, special equipment and transport needed.‚Äù

4. Edge Cases to Handle

Blank inputs ‚Üí error message.

Negative values / zero ‚Üí reject.

Extremely high areas/densities ‚Üí reject as unrealistic.

Density outside [20‚Äì30] ‚Üí warning (‚ÄúNon-standard material density ‚Äî verify‚Äù).

Division by zero? Not applicable here.

Length = 0 but areas >0 ‚Üí reject (volume = 0).

5. Corrected JavaScript Code (with QEHS audit comments)

/*
üìò Formula:
G = (A1 + 2 √ó A2) √ó L √ó œÅ

‚úÖ Validation Rules (QEHS & Fire Safety):

A1: 0.001‚Äì10 m¬≤, up to 4 decimals

A2: 0.001‚Äì5 m¬≤, up to 4 decimals

L: 0.1‚Äì100 m, up to 2 decimals

œÅ: 20‚Äì30 kN/m¬≥, up to 1 decimal

Output: 0 < G ‚â§ 10,000 kN

Edge Cases:

Blank inputs ‚Üí error

Negative/zero values ‚Üí reject

Unrealistic size/density ‚Üí warning

Feedback categories for safe handling
*/ {% endcomment %}