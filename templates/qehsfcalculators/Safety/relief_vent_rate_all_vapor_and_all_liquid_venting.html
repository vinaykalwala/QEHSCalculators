{% extends 'base.html' %}
{% block title %}Relief Vent Rate  All-Vapor and All-Liquid Venting Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Required Opening Force For A Balanced Safety Valve  Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
            height: 420px;
            overflow-y: scroll;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            align-items: center;
            min-height: 420px;
            text-align: center;
            
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
          @media (max-width: 768px) {
    .rate-value {
        font-size: 28px; /* smaller font for tablets/mobiles */
    }
}

@media (max-width: 480px) {
    .rate-value {
        font-size: 24px; /* even smaller for phones */
    }
}
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
  <div class="calculator-container printable" id="printArea">
    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

    <!-- Header -->
    <div class="calculator-header">
        <h1>Relief Vent Rate (All-Vapor and All-Liquid Venting) Calculator </h1>
        <p>Calculate the final temperature rise in a system due to venting for safety and fire calculations.</p>
    </div>

    <div class="calc-content">
        <!-- Calculator -->
        <div class="calc-card">
            <h2>Enter Data</h2>

            <div class="form-group">
                <label for="Tr">Set Temperature (Tr) in Kelvin:</label>
                <input type="number" id="Tr" class="form-input" min="1" placeholder="Enter set temperature">
            </div>
            <div class="form-group">
                <label for="q">Heat Release Rate (q):</label>
                <input type="number" id="q" class="form-input" min="1" placeholder="Enter heat release rate">
            </div>
            <div class="form-group">
                <label for="Cv">Specific Heat at Constant Volume (Cv):</label>
                <input type="number" id="Cv" class="form-input" min="1" placeholder="Enter specific heat">
            </div>
            <div class="form-group">
                <label for="t">Time (t) in seconds:</label>
                <input type="number" id="t" class="form-input" min="0" placeholder="Enter time">
            </div>
            <div class="form-group">
                <label for="hfa">Latent Heat of Vaporization (hfa):</label>
                <input type="number" id="hfa" class="form-input" min="1" placeholder="Enter latent heat">
            </div>
            <div class="form-group">
                <label for="vfa">Specific Volume of Liquid (vfa):</label>
                <input type="number" id="vfa" class="form-input" min="1" placeholder="Enter specific volume">
            </div>
            <div class="form-group">
                <label for="mo">Initial Mass (mo):</label>
                <input type="number" id="mo" class="form-input" min="1" placeholder="Enter initial mass">
            </div>
            <div class="form-group">
                <label for="G">Mass Flux (G):</label>
                <input type="number" id="G" class="form-input" min="1" placeholder="Enter mass flux">
            </div>
            <div class="form-group">
                <label for="A">Vent Area (A):</label>
                <input type="number" id="A" class="form-input" min="1" placeholder="Enter vent area">
            </div>
            <div class="form-group">
                <label for="Ao">Initial Vent Area (Ao):</label>
                <input type="number" id="Ao" class="form-input" min="1" placeholder="Enter initial vent area">
            </div>
            <div class="form-group">
                <label for="tr">Emptying Time (tr) in seconds:</label>
                <input type="number" id="tr" class="form-input" min="1" placeholder="Enter emptying time">
            </div>

            <button class="calculate-btn" onclick="calculateReliefVentRate()">Calculate Final Temperature</button>
        </div>

        <!-- Result Section -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/resultimage.png' %}" alt="Vent illustration">
                <p>This tool will calculate the <strong>Final Temperature</strong> during venting. Enter your data to see results and insights here.</p>
            </div>

            <div class="result-error hidden" id="resultError">
                <div class="error-icon">‚ùå</div>
                <div class="error-message" id="errorMessage"></div>
            </div>

            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Final Temperature Result</h2>
                </div>
                <div class="rate-value" id="finalTemperatureValue">0.00 K</div>

                <div class="result-feedback">
                    <div class="feedback-title"> Assessment</div>
                    <div class="feedback-content" id="feedbackContent"></div>
                </div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Section -->
    <div class="note-section">
       <div class="note-card">
    <h3>üìò About This Calculator</h3>
    <p>
        The <strong>Relief Vent Rate Calculator</strong> determines the final temperature rise in a closed system when pressure relief occurs through venting, 
        whether the system contains all-vapor or all-liquid substances. 
        This calculation is critical in industrial safety engineering because excessive temperature rise can lead to equipment failure, 
        chemical hazards, or fire risk. By understanding the thermal response of the system during venting, engineers can design venting systems, 
        set appropriate vent areas, and implement safety measures to protect both personnel and equipment. 
        The calculator uses key parameters such as heat release rate, specific heat, latent heat, mass flux, and vent dimensions to provide 
        a realistic estimation of temperature rise for safe operation.
    </p>
</div>

        <div class="note-card">
    <h3>‚öôÔ∏è Parameters Used</h3>
    <ul class="note-list">
        <li><strong>Set Temperature (Tr)</strong>: The initial temperature of the system in Kelvin before venting begins. This serves as the baseline for calculating temperature rise.</li>
        <li><strong>Heat Release Rate (q)</strong>: The amount of heat energy released per unit time in the system, typically due to chemical reactions or fire. Measured in appropriate energy units.</li>
        <li><strong>Specific Heat at Constant Volume (Cv)</strong>: The amount of heat required to raise the temperature of a unit mass of the substance by one degree while keeping the volume constant. It defines how much the substance resists temperature changes.</li>
        <li><strong>Time (t)</strong>: The duration in seconds over which heat is being released into the system. Longer times generally result in higher temperature rise.</li>
        <li><strong>Latent Heat of Vaporization (hfa)</strong>: The energy required to convert a unit mass of liquid into vapor without changing its temperature. This affects the vapor formation during venting.</li>
        <li><strong>Specific Volume of Liquid (vfa)</strong>: The volume occupied by a unit mass of the liquid. It influences the energy distribution and venting rate.</li>
        <li><strong>Initial Mass of the Substance (mo)</strong>: The total mass of the gas or liquid present in the system before venting starts. Higher mass can lead to higher energy storage and temperature rise.</li>
        <li><strong>Mass Flux (G)</strong>: The rate of mass flow per unit area through the vent. It determines how quickly the substance is relieved from the system.</li>
        <li><strong>Vent Area (A)</strong>: The cross-sectional area of the vent opening through which the substance escapes. Larger areas allow faster venting.</li>
        <li><strong>Initial Vent Area (Ao)</strong>: The vent area at the start of venting. This value is used as a reference for calculating changes in venting conditions over time.</li>
        <li><strong>Emptying Time (tr)</strong>: The total time in seconds required to empty the system through the vent. This affects the final temperature and safety assessment.</li>
    </ul>
</div>

<div class="note-card">
    <h3>‚úÖ Input Validation Rules</h3>
    <ul class="note-list">
        <li><strong>Set Temperature (Tr):</strong> The temperature of the system before venting must be between <em>273 Kelvin (equivalent to 0¬∞C)</em> and <em>2000 Kelvin (equivalent to 1727¬∞C)</em>. It should be entered with one to two decimal places. The set temperature must always be lower than the final calculated temperature. This ensures that the starting condition of the system is physically realistic and avoids reporting temperatures that are dangerously low or impossibly high.</li>
        
        <li><strong>Heat Release Rate (q):</strong> The amount of heat energy released per unit of time must be greater than zero and should not exceed <em>1,000,000 kilowatts (or joules per second)</em>. The value should be entered with one to two decimal places. This prevents input of unrealistically high values that could indicate errors in system configuration or incorrect unit usage.</li>
        
        <li><strong>Specific Heat at Constant Volume (Cv):</strong> The heat required to raise the temperature of one unit mass of a substance by one degree at constant volume must be greater than zero and should not exceed <em>10 kilojoules per kilogram per Kelvin</em>. The value should be entered with one to two decimal places. This range ensures that the value is consistent with real gases and liquids and prevents calculation errors.</li>
        
        <li><strong>Time (t):</strong> The duration over which heat is applied must be greater than or equal to zero and less than or equal to <em>36,000 seconds (10 hours)</em>. No decimal places are needed. A zero value is acceptable for instantaneous scenarios. This ensures that the heat release duration is realistic and within typical industrial safety assessment ranges.</li>
        
        <li><strong>Latent Heat of Vaporization (hfa):</strong> The energy required to convert a unit mass of liquid into vapor at constant temperature must be greater than zero and should not exceed <em>5000 kilojoules per kilogram</em>. The value should be entered with one to two decimal places. This prevents entry of unphysical energy values that would distort the calculation.</li>
        
        <li><strong>Specific Volume of Liquid (vfa):</strong> The volume occupied by one unit mass of liquid must be greater than zero and should not exceed <em>0.01 cubic meters per kilogram</em>. The value should be entered with three decimal places for precision. This reflects typical density-based values for liquids and avoids unrealistic data entry.</li>
        
        <li><strong>Initial Mass (mo):</strong> The total mass of the substance in the system before venting must be greater than zero and should not exceed <em>1,000,000 kilograms</em>. The value should be entered with zero to two decimal places. It must also be consistent with the values entered for mass flux, vent area, and initial vent area. This ensures that the input mass is physically plausible for the tank or system being modeled.</li>
        
        <li><strong>Mass Flux (G):</strong> The mass flow rate per unit vent area must be greater than zero and should not exceed <em>1000 kilograms per square meter per second</em>. The value should be entered with one to two decimal places. It must be logically consistent with the vent area, initial vent area, and emptying time. This prevents unrealistic venting rates that could compromise safety system design.</li>
        
        <li><strong>Vent Area (A):</strong> The cross-sectional area of the vent opening must be greater than zero and less than or equal to the initial vent area. It should be entered with one to four decimal places. This ensures that the vent opening is physically possible and prevents invalid calculations in the logarithmic function.</li>
        
        <li><strong>Initial Vent Area (Ao):</strong> The baseline vent area before venting begins must be greater than zero and less than or equal to <em>100 square meters</em>. It should be entered with one to four decimal places. It must always be greater than or equal to the vent area. This ensures proper baseline reference for venting calculations.</li>
        
        <li><strong>Emptying Time (tr):</strong> The total time required to empty the system through the vent must be greater than zero and less than or equal to <em>36,000 seconds (10 hours)</em>. No decimal places are needed. The emptying time must always be greater than or equal to the heat release time. This ensures the emptying process duration is logical and safe for system assessment.</li>
    </ul>
<br>
    <h3>üîÑ Additional Cross-Field Validation Rules</h3>
    <ul class="note-list">
        <li>The ratio of vent area to initial vent area (A √∑ Ao) must be greater than zero to keep the logarithmic function valid and avoid mathematical errors.</li>
        <li>The sum of the temperature rise components (term1 + term2) must always be less than five times the set temperature. This prevents unrealistic and physically impossible spikes in final calculated temperature.</li>
        <li>The emptying time must always be greater than or equal to the heat release time. This prevents situations where the system is considered fully emptied before the heat release process is complete, which would be a safety violation.</li>
    </ul>
</div>
<div class="note-card">
    <h3>üìä Output Validations</h3>
    <ul class="note-list">
        <li><strong>‚úÖ Safe Zone (Temperature Rise ‚â§ 50 K):</strong> System remains stable and within material design margins. No corrective action required.</li>
        <li><strong>‚ö†Ô∏è Caution Zone (50 K < Temperature Rise ‚â§ 100 K):</strong> Moderate temperature increase detected. Review cooling capacity, verify vent sizing, and implement preventive monitoring to ensure continued safety.</li>
        <li><strong>üö® Danger Zone (Temperature Rise > 100 K):</strong> High temperature rise beyond safe thresholds. Immediate action is required ‚Äî stop operation, inspect relief vents, and comply with ASME/API safety protocols.</li>
    </ul>
</div>

       <div class="note-card">
    <h3>üìã Standards & Compliance</h3>
    <ul class="note-list">
        <li>Set Temperature and Heat Release must comply with **NFPA 30, NFPA 68** for process safety and fire protection.</li>
        <li>Mass, Mass Flux, and Vent Areas should comply with **ASME Boiler & Pressure Vessel Code (BPVC)** and **ISO 45001** for occupational safety.</li>
        <li>Latent Heat, Specific Heat, and Specific Volume must reflect validated material properties from **chemical engineering handbooks or ISO/ASTM standards**.</li>
        <li>All calculations must avoid division by zero and logarithm of zero/negative numbers, as required by **good engineering practice (GEP)**.</li>
        <li>Output temperature rise thresholds should be assessed according to **company QEHS guidelines, NFPA fire safety limits, and OSHA heat exposure standards**.</li>
    </ul>
</div>

        <div class="note-card">
            <h3>Conclusion</h3>
            <p>
                Calculating the final temperature helps ensure the safety and reliability of pressure relief systems in industrial applications.
            </p>
        </div>
    </div>
</div>

<script>
   function calculateReliefVentRate() {
    // --- Fetch inputs ---
    const Tr = parseFloat(document.getElementById("Tr").value);
    const q = parseFloat(document.getElementById("q").value);
    const Cv = parseFloat(document.getElementById("Cv").value);
    const t = parseFloat(document.getElementById("t").value);
    const hfa = parseFloat(document.getElementById("hfa").value);
    const vfa = parseFloat(document.getElementById("vfa").value);
    const mo = parseFloat(document.getElementById("mo").value);
    const G = parseFloat(document.getElementById("G").value);
    const A = parseFloat(document.getElementById("A").value);
    const Ao = parseFloat(document.getElementById("Ao").value);
    const tr = parseFloat(document.getElementById("tr").value);

    const errorBox = document.getElementById("resultError");
    const errorMessage = document.getElementById("errorMessage");
    const placeholder = document.getElementById("placeholder");
    const resultValue = document.getElementById("resultValue");
    const feedbackContent = document.getElementById("feedbackContent");

    let errors = [];

    // --- Individual input validations ---
    if (isNaN(Tr) || Tr < 273 || Tr > 2000) errors.push("üëâ Set Temperature (Tr) must be between 273 K and 2000 K.");
    if (isNaN(q) || q <= 0 || q > 1e6) errors.push("üëâ Heat Release Rate (q) must be positive and realistic (‚â§ 1,000,000).");
    if (isNaN(Cv) || Cv <= 0 || Cv > 10) errors.push("üëâ Specific Heat at Constant Volume (Cv) must be positive and ‚â§ 10 kJ/kg¬∑K.");
    if (isNaN(t) || t < 0 || t > 36000) errors.push("üëâ Time (t) must be between 0 and 36,000 seconds.");
    if (isNaN(hfa) || hfa <= 0 || hfa > 5000) errors.push("üëâ Latent Heat of Vaporization (hfa) must be positive and ‚â§ 5000 kJ/kg.");
    if (isNaN(vfa) || vfa <= 0 || vfa > 0.01) errors.push("üëâ Specific Volume of Liquid (vfa) must be positive and ‚â§ 0.01 m¬≥/kg.");
    if (isNaN(mo) || mo <= 0 || mo > 1e6) errors.push("üëâ Initial Mass (mo) must be positive and ‚â§ 1,000,000 kg.");
    if (isNaN(G) || G <= 0 || G > 1000) errors.push("üëâ Mass Flux (G) must be positive and ‚â§ 1000 kg/m¬≤¬∑s.");
    if (isNaN(A) || A <= 0) errors.push("üëâ Vent Area (A) must be positive.");
    if (isNaN(Ao) || Ao <= 0 || Ao > 100) errors.push("üëâ Initial Vent Area (Ao) must be positive and ‚â§ 100 m¬≤.");
    if (A > Ao) errors.push("üëâ Vent Area (A) cannot be greater than Initial Vent Area (Ao).");
    if (A / Ao <= 0) errors.push("üëâ The term inside logarithm (A/Ao) must be greater than zero.");
    if (isNaN(tr) || tr <= 0 || tr > 36000) errors.push("üëâ Emptying Time (tr) must be positive and ‚â§ 36,000 seconds.");
    if (tr < t) errors.push("üëâ Emptying Time (tr) cannot be less than heat release Time (t).");

    // --- Display errors ---
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // --- Calculation ---
    const term1 = (mo * q * tr) / (G * A * Cv) * (1 - (A / Ao));
    const term2 = (hfa / (Cv * vfa)) * Math.log(A / Ao);
    const finalTemperature = Tr + term1 + term2;

    if (!isFinite(finalTemperature) || finalTemperature > 5000) {
        errorMessage.innerHTML = "‚ùå Calculation error! Result is unphysical. Check input values.";
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    }

    document.getElementById("finalTemperatureValue").textContent = `${finalTemperature.toFixed(2)} K`;

    // --- Feedback ---
 let feedback = "";

if (finalTemperature - Tr <= 50) {
    feedback = "‚úÖ Safe Zone : System remains stable and within material design margins. No corrective action required.";
} 
else if (finalTemperature - Tr <= 100) {
    feedback = "‚ö†Ô∏è Caution Zone : Moderate temperature increase detected. Review cooling capacity, verify vent sizing, and implement preventive monitoring to ensure continued safety.";
} 
else {
    feedback = "üö® Danger Zone : High temperature rise beyond safe thresholds. Immediate action is required ‚Äî stop operation, inspect relief vents, and comply with ASME/API safety protocols.";
}


    feedbackContent.innerHTML = feedback;
    placeholder.classList.add("hidden");
    resultValue.classList.remove("hidden");
}

</script>


    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}




<!-- 1Ô∏è‚É£ Input Validation Rules ‚Äì Real-World QEHS Perspective
Input	Unit	Acceptable Range	Decimals	Cross-field / Logical Checks	QEHS Rationale
Set Temperature (Tr)	K	273 ‚Äì 2000 K (0¬∞C ‚Äì 1727¬∞C)	1‚Äì2	Must be lower than final temperature	Ensures system temperature is physically realistic; prevents misreporting dangerously cold/high systems.
Heat Release Rate (q)	kW / J/s	0 < q ‚â§ 1e6 (depends on system scale)	1‚Äì2	None	Prevents unrealistically high heat inputs, which could indicate misconfiguration or unit errors.
Specific Heat at Constant Volume (Cv)	kJ/kg¬∑K	0 < Cv ‚â§ 10	1‚Äì2	None	Realistic range for gases/liquids; avoids calculation errors.
Time (t)	s	0 ‚â§ t ‚â§ 36000 (up to 10 hours)	0	None	Zero is allowed (instantaneous); ensures realistic process duration.
Latent Heat of Vaporization (hfa)	kJ/kg	0 < hfa ‚â§ 5000	1‚Äì2	None	Prevents unphysical energy inputs.
Specific Volume of Liquid (vfa)	m¬≥/kg	0 < vfa ‚â§ 0.01	3	None	Typical liquid density-based volume; avoids calculation errors.
Initial Mass (mo)	kg	0 < mo ‚â§ 1e6	0‚Äì2	Must be compatible with G, A, Ao	Ensures mass is physically plausible for tank/system.
Mass Flux (G)	kg/m¬≤¬∑s	0 < G ‚â§ 1000	1‚Äì2	Must be compatible with A, Ao, tr	Prevents unrealistic venting rates; critical for safety design.
Vent Area (A)	m¬≤	0 < A ‚â§ Ao	1‚Äì4	Must be ‚â§ Ao	A cannot exceed Ao to prevent negative logarithm; reflects physical vent geometry.
Initial Vent Area (Ao)	m¬≤	0 < Ao ‚â§ 100	1‚Äì4	Must be ‚â• A	Baseline reference area; ensures logarithmic calculations are valid.
Emptying Time (tr)	s	0 < tr ‚â§ 36000	0	Must be ‚â• t	Represents total emptying duration; ensures safety duration calculations.

Additional Cross-Field Checks:

(A / Ao) > 0 ‚Üí Logarithm cannot be negative or zero.

term1 + term2 < 5 * Tr ‚Üí Avoids physically impossible temperature spikes.

tr >= t ‚Üí Total emptying time cannot be less than heat release time.

2Ô∏è‚É£ Output Validation Logic

The Final Temperature (Tf) output must be:

Output	Threshold	QEHS Interpretation
Tf - Tr ‚â§ 50 K	Safe	Normal venting, system within design limits.
50 < Tf - Tr ‚â§ 100 K	Moderate	Elevated temperature; check vent design, insulation, and PPE.
Tf - Tr > 100 K	High / Critical	Unsafe; may trigger fire/explosion hazard. Requires immediate intervention.
Tf > 2000 K	Unrealistic	Likely input error; check heat release, mass, or Cv values.

Rationale: These thresholds ensure the system stays within thermal limits defined by NFPA/OSHA/ISO standards for pressure vessels and chemical storage.

3Ô∏è‚É£ Edge Case Validations

Division by zero: G, A, Cv, vfa, Ao cannot be zero.

Logarithm domain: (A / Ao) must be > 0.

Negative/zero values: All physical quantities (mass, heat, volume) must be positive.

Extreme ratios: (mo * q * tr) / (G * A * Cv) too high ‚Üí potential overflow, needs upper bound.

Logical inconsistency: A > Ao ‚Üí invalid geometry; tr < t ‚Üí venting faster than heating.

Non-finite results: NaN or Infinity ‚Üí calculation fails.

Why Each Validation Is Essential

Positive numbers: Safety parameters cannot be negative in real systems.

Maximum limits: Avoid unphysical results, equipment design violations, and OSHA/NFPA non-compliance.

Cross-field checks (A ‚â§ Ao, tr ‚â• t): Ensure geometric and temporal consistency.

Logarithm domain: Prevent math errors and calculation crashes.

Output limits: Reflect industrial safety thresholds; prevent reporting impossible -->