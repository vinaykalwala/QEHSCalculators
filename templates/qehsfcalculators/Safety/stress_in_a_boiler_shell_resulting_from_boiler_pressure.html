{% extends 'base.html' %}
{% block title %}Stress In A Boiler Shell Resulting From Boiler Pressure Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
     
            @media screen and (max-width: 768px) {
    .calculator-header h1 {
        font-size: 1.5rem; /* smaller font for mobile */
        margin-bottom: 8px;
        text-align: center; /* optional: center the heading on mobile */
    }
}
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: scroll;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 250px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
       
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
          @media (max-width: 768px) {
    .rate-value {
        font-size: 28px; /* smaller font for tablets/mobiles */
    }
}

@media (max-width: 480px) {
    .rate-value {
        font-size: 24px; /* even smaller for phones */
    }
}
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
<div class="calculator-container printable" id="printArea">
    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Stress In A Boiler Shell Resulting From Boiler Pressure Calculator</h1>
        <p>Calculate the circumferential stress in a boiler shell due to internal pressure to ensure safe design.</p>
    </div>

    <div class="calc-content">
        <!-- Calculator Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label for="pressure">Boiler Pressure (N/m¬≤)</label>
                <input type="number" id="pressure" class="form-input" min="0" placeholder="e.g., 2e6">
            </div>
            <div class="form-group">
                <label for="diameter">Cylinder Diameter (m)</label>
                <input type="number" id="diameter" class="form-input" min="0" placeholder="e.g., 1.5">
            </div>
            <div class="form-group">
                <label for="thickness">Plate Thickness (m)</label>
                <input type="number" id="thickness" class="form-input" min="0" placeholder="e.g., 0.02">
            </div>
            <button class="calculate-btn" onclick="calculateHoopStress()">Calculate Hoop Stress</button>
        </div>

        <!-- Result Section -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/resultimage.png' %}" alt="Boiler illustration">
                <p>This tool will calculate <strong>Hoop Stress</strong>. Enter your data to see results and insights here.</p>
            </div>
            
            <div class="result-error hidden" id="resultError">
                <div class="error-icon">‚ùå</div>
                <div class="error-message" id="errorMessage"></div>
            </div>
            
            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Hoop Stress Result</h2>
                </div>
                <div class="rate-value" id="stressValue">0</div>
              

                <div class="result-feedback">
                    <div class="feedback-title">Assessment</div>
                    <div class="feedback-content" id="feedbackContent"></div>
                </div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

<!-- Notes Section -->
<div class="note-section">

    <!-- 1. About This Calculator -->
    <div class="note-card">
        <h3>üìò About This Calculator</h3>
        <p>
            The <strong>Stress In A Boiler Shell Resulting From Boiler Pressure Calculator</strong> calculates the 
            <strong>hoop stress</strong> (circumferential stress) experienced by a cylindrical shell under internal pressure. 
            <strong>Hoop stress</strong> is the stress acting tangentially around the circumference of a cylinder or pipe, 
            caused by the internal pressure pushing outward. It is a critical parameter in designing boilers, pressure vessels, 
            and pipelines to ensure structural integrity, prevent failures, and select appropriate materials for safe and efficient operation.
        </p>
    </div>

    <!-- 2. Parameters Used -->
    <div class="note-card">
        <h3>‚öôÔ∏è Parameters Used</h3>
        <ul class="note-list">
            <li><strong>Boiler Pressure:</strong> The internal pressure applied inside the cylinder or boiler shell, given in N/m¬≤ (or bar √ó 10‚Åµ).</li>
            <li><strong>Diameter of Cylinder:</strong> The internal diameter of the shell or cylindrical structure, measured in meters (m).</li>
            <li><strong>Plate Thickness:</strong> The thickness of the shell or plate material, measured in meters (m).</li>
        </ul>
    </div>

    <!-- 3. Input Validation Rules -->
    <div class="note-card">
        <h3>‚úÖ Input Validation Rules</h3>
        <ul class="note-list">
            <li><strong>Boiler Pressure (P):</strong> Must be numeric and &gt; 0 N/m¬≤. Typical range: 10,000 ‚Äì 100,000,000 N/m¬≤. Values outside this range trigger a warning.</li>
            <li><strong>Cylinder Diameter (D):</strong> Must be numeric and &gt; 0 m. Realistic range: 0.1 ‚Äì 10 m. Values outside this range trigger a warning.</li>
            <li><strong>Plate Thickness (x):</strong> Must be numeric and &gt; 0 m. Typical range: 0.005 ‚Äì 1 m. Extremely thin or thick plates trigger a warning.</li>
            <li><strong>Logical Consistency:</strong> Plate Thickness must be less than half of Cylinder Diameter; otherwise, a warning is triggered.</li>
            <li><strong>Missing or Invalid Inputs:</strong> Empty, zero, or non-numeric values must be corrected before calculation.</li>
            <li><strong>Calculated Hoop Stress:</strong> Values above 100,000,000 N/m¬≤ indicate unusually high stress and should be verified for safety.</li>
        </ul>
    </div>

    <!-- 4. Output Validations -->
    <div class="note-card">
        <h3>üìä Output Validations</h3>
        <p>
            Based on the calculated hoop stress, the following categories help assess the safety and reliability of the boiler shell. 
            The same feedback is displayed in the results after calculation.
        </p>
        <ul class="note-list">
            <li><span class="good">Low Stress (&lt;5,000,000 N/m¬≤):</span> ‚úÖ Safe design with minimal risk of failure. Suitable for standard boiler materials and normal operating conditions.</li>
            <li><span class="average">Moderate Stress (5,000,000 ‚Äì 50,000,000 N/m¬≤):</span> ‚ö†Ô∏è Acceptable for most materials; check material grade, operational safety, and maintenance schedule.</li>
            <li><span class="bad">High Stress (&gt;50,000,000 N/m¬≤):</span> ‚ùå High risk of failure; review design, material selection, and operational parameters immediately.</li>
        </ul>
    </div>

    <!-- 5. Governing Principle -->
<div class="note-card">
    <h3>üß≠ Governing Principle</h3>
    <p>
        Stress in a boiler shell resulting from internal pressure is defined and governed by the ASME Boiler and Pressure Vessel Code (BPVC) and other relevant national and international standards that dictate design, material selection, and acceptable stress levels to ensure safety and prevent failures. These codes, developed by organizations like The American Society of Mechanical Engineers (ASME), specify the allowable tensile stress, influencing the required wall thickness and ensuring the shell can withstand the internal pressure with a suitable safety margin.
    </p>
    <p><strong style="color: #1976d2;">Key Aspects of the Standard:</strong></p>
    <ul class="note-list">
        <li><strong>Governing Body:</strong> The ASME BPVC is the primary standard for the design and construction of boilers and pressure vessels in many regions, including the United States.</li>
        <li><strong>Purpose:</strong> The code sets forth requirements for ensuring the structural integrity of pressure vessels, including calculating the stresses induced by internal pressure and establishing acceptable stress limits.</li>
        <li><strong>Material Selection:</strong> The BPVC, specifically Section II (Materials), provides guidelines for selecting appropriate materials for boiler construction, ensuring that the chosen materials have the necessary strength and properties to withstand the operating stresses.</li>
        <li><strong>Allowable Stress:</strong> A safety factor is applied to the material's maximum stress capacity, resulting in the maximum allowable stress value that the boiler shell must not exceed.</li>
        <li><strong>Design Calculations:</strong> The code includes formulas and guidelines for calculating the stresses, such as hoop stress and longitudinal stress, that develop in the boiler shell due to the internal pressure.</li>
        <li><strong>Compliance and Verification:</strong> ASME acts as an accreditation body, enabling third-party inspection agencies to verify compliance with the BPVC during design and construction phases.</li>
        <li><strong>Output Feedback:</strong> The same assessment logic (Low, Moderate, High stress) described in Output Validations is derived from these standards to guide safe design.</li>
    </ul>
</div>



    <!-- 6. Conclusion -->
    <div class="note-card">
        <h3>üèÅ Conclusion</h3>
        <p>
            Using the <strong>Stress In A Boiler Shell Resulting From Boiler Pressure Calculator</strong>, engineers can evaluate the circumferential stress in boilers and pressure vessels, prevent structural failures, and optimize material usage. Always ensure inputs are realistic for accurate and safe results.
        </p>
    </div>

</div>


<script>
function calculateHoopStress() {
    const P = parseFloat(document.getElementById("pressure").value);
    const D = parseFloat(document.getElementById("diameter").value);
    const x = parseFloat(document.getElementById("thickness").value);

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const feedbackContent = document.getElementById('feedbackContent');

    let errors = [];

   // --- Mandatory & Numeric Check ---
// --- Mandatory & Numeric Check ---
if (isNaN(P) || P <= 0) errors.push("üëâ Boiler Pressure must be a number greater than 0 N/m¬≤.");
if (isNaN(D) || D <= 0) errors.push("üëâ Cylinder Diameter must be a number greater than 0 m.");
if (isNaN(x) || x <= 0) errors.push("üëâ Plate Thickness must be a number greater than 0 m.");

// --- Realistic Range Checks ---
if (P < 1e4 || P > 1e8) 
    errors.push("‚ö†Ô∏è Boiler Pressure is outside the typical boiler operating range (10,000 ‚Äì 100,000,000 N/m¬≤).");
if (D < 0.1 || D > 10) errors.push("‚ö†Ô∏è Cylinder Diameter is outside realistic range for boilers (0.1 ‚Äì 10 m).");
if (x < 0.005 || x > 1) errors.push("‚ö†Ô∏è Plate Thickness is outside realistic range (0.005 ‚Äì 1 m).");

// --- Logical Consistency ---
if (x >= D/2) errors.push("‚ö†Ô∏è Plate Thickness must be less than half the Cylinder Diameter.");
const hoopStressEstimate = (P * D) / (2 * x);
if (hoopStressEstimate > 1e8) errors.push("‚ö†Ô∏è Calculated Hoop Stress is unusually high (>100,000,000 N/m¬≤ ). Verify Boiler Pressure, Cylinder Diameter, and Plate Thickness.");

    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // --- Calculate Hoop Stress ---
    const hoopStress = (P * D) / (2 * x); // N/m¬≤
    document.getElementById("stressValue").textContent = hoopStress.toFixed(2) + " N/m¬≤";

    // --- Feedback based on stress ---
   
   let feedback = "";
let color = "";

if (hoopStress < 5e6) {
    feedback = "‚úÖ Low Stress: Safe design with minimal risk of failure. Suitable for standard boiler materials and normal operating conditions.";
    color = "green";
} else if (hoopStress >= 5e6 && hoopStress <= 50e6) {
    feedback = "‚ö†Ô∏è Moderate Stress: Acceptable for most materials; check material grade, operational safety, and maintenance schedule.";
    color = "orange";
} else {
    feedback = "‚ùå High Stress: High risk of failure; review design, material selection, and operational parameters immediately.";
    color = "red";
}

feedbackContent.innerHTML = `<strong style="color:${color}">${feedback}</strong>`;


    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

</script>

    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- 1. Analysis of Calculator Inputs, Outputs, and Formula

Formula used:

Hoop¬†Stress¬†
(
ùúé
)
=
ùëÉ
‚ãÖ
ùê∑
2
‚ãÖ
ùë•
Hoop¬†Stress¬†(œÉ)=
2‚ãÖx
P‚ãÖD
	‚Äã


Where:

ùëÉ
P = Internal boiler pressure (N/m¬≤)

ùê∑
D = Cylinder internal diameter (m)

ùë•
x = Plate thickness (m)

Purpose:

Hoop stress is the circumferential stress in a boiler shell due to internal pressure.

Critical for determining if the material can safely withstand operational pressure.

Directly impacts fire and occupational safety, as failure of boiler shells under high pressure can lead to catastrophic explosions.

Outputs:

Hoop Stress (N/m¬≤)

Feedback classification (Low, Moderate, High)

2. Recommended Input Validation Rules
Parameter	Units	Range	Decimal Allowed	Cross-Checks	Rationale (QEHS/Fire Safety)
Pressure 
ùëÉ
P	N/m¬≤ (or bar √ó 10‚Åµ)	1e4 ‚Äì 1e8	0‚Äì2 decimals	Check against extreme combinations: P * D / 2x	Ensures realistic boiler operating pressures; extremely high pressures indicate unsafe design. OSHA/ASME compliance.
Diameter 
ùê∑
D	m	0.1 ‚Äì 10	0‚Äì3 decimals	Must be larger than plate thickness * 2	Small diameters (<0.1 m) unrealistic for boilers; >10 m uncommon and may indicate input error.
Plate Thickness 
ùë•
x	m	0.005 ‚Äì 1	0‚Äì3 decimals	Must be < D/2; avoid division by zero	Prevents extremely thin shells (risk of rupture) and ensures correct hoop stress calculation. Critical for NFPA and ISO 45001 compliance.

Cross-field dependencies:

ùë•
x should never exceed 
ùê∑
/
2
D/2.

Very high 
ùëÉ
P with thin 
ùë•
x should trigger a warning (risk of structural failure).

Edge Cases & Outliers:

Division by zero (
ùë•
=
0
x=0) ‚Üí error

Non-numeric or blank inputs ‚Üí error

Extremely high calculated stress (>100 MPa) ‚Üí alert as unsafe

Unrealistic combination: low pressure + thick shell ‚Üí warn of possibly over-conservative design

3. Output Validation Logic
Hoop Stress Range	Assessment	Rationale
< 5 MPa	‚úÖ Low Stress	Safe design; minimal risk of failure. Compliant with typical ASME safety margins.
5‚Äì50 MPa	‚ö†Ô∏è Moderate Stress	Acceptable for most carbon steel and boiler materials; check material grade.
> 50 MPa	‚ùå High Stress	High risk of shell failure; immediate design review required. Ensures OSHA/ISO 45001 and fire safety compliance.

Tip: Values should be presented in both N/m¬≤ and MPa for clarity in safety reports.

6. Why Each Validation is Essential (Compliance Perspective)

Mandatory & Numeric ‚Äì Prevents invalid or empty entries which can lead to false safety conclusions.

Realistic Range Checks ‚Äì Ensures inputs match standard boiler design limits (OSHA, ASME, NFPA).

Logical Consistency (x < D/2) ‚Äì Prevents impossible geometries, avoids division by zero.

Extreme Stress Warnings ‚Äì Flags potential safety hazards before operation; essential for fire prevention and occupational safety.

Decimal precision & units ‚Äì Ensures outputs are accurate for engineering and audit reports. -->