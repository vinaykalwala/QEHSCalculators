{% extends 'base.html' %}
{% block title %}Horizontal Stress Calculator (Breckels and van Eekelen Model){% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horizontal Stress Calculator (Breckels and van Eekelen Model)</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }
        
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }
        
        /* Input rows for side-by-side fields */
        .input-row {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        @media (min-width: 480px) {
            .input-row {
                flex-direction: row;
            }
        }
        
        .input-row .form-group {
            flex: 1;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        .display {
            display: flex;
            gap: 10px;
            align-items: center;  
            justify-content: center; 
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        @media (max-width: 420px) {
        .display {
            flex-direction: column;
            gap: 15px;
        }
        
        .rate-display {
            min-width: auto;
            width: 100%;
        }
    }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Result Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
        .select-wrapper {
    position: relative;
    display: inline-block;
    width: 100%;
}

.form-select {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
    appearance: none;            /* removes default arrow */
    -webkit-appearance: none;    /* for Safari */
    -moz-appearance: none;       /* for Firefox */
    background: #fff;
    font-size: 1rem;
    cursor: pointer;
}

/* Custom dropdown arrow */
.select-wrapper::after {
    content: "‚ñº";   /* Unicode arrow */
    font-size: 0.9rem;
    color: #1560bd;
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none; /* lets clicks pass through */
}

       
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
    <div class="calculator-container printable" id="printArea">
        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Horizontal Stress Calculator (Breckels and van Eekelen Model)</h1>
            <p>Calculate horizontal stress for geomechanical analysis and wellbore stability</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="input-row">
                    <div class="form-group">
                        <label for="depth">Depth</label>
                        <input type="number" id="depth" class="form-input" min="0" placeholder="e.g., 2500">
                    </div>
                    <div class="form-group">
                        <label for="unit">Depth Unit</label>
                        <div class="select-wrapper">
                        <select id="unit" class="form-select">
                            <option value="meters">Meters (m)</option>
                            <option value="feet">Feet (ft)</option>
                        </select>
                        </div>
                    </div>
                </div>
                <div class="input-row">
                    <div class="form-group">
                        <label for="porePressure">Pore Pressure (MPa)</label>
                        <input type="number" id="porePressure" class="form-input" min="0" step="0.001" placeholder="e.g., 40">
                    </div>
                    <div class="form-group">
                        <label for="normalPorePressure">Normal Pore Pressure (MPa)</label>
                        <input type="number" id="normalPorePressure" class="form-input" min="0" step="0.001" placeholder="e.g., 35">
                    </div>
                </div>
                
                <button class="calculate-btn" onclick="calculateHorizontalStress()">Calculate Horizontal Stress</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Safety illustration">
                    <p>This tool will calculate the <strong>Horizontal Stress</strong> using the Breckels and van Eekelen model. Enter your data to see results and insights here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                 
                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Horizontal Stress</h2>
                    </div>
                    <div class="display">
                    <div class="rate-display">
                        <div class="rate-value" id="stressValueMpa">0.000</div>
                        <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">MPa</div>
                    </div>
                    
                    <div class="rate-display">
                        <div class="rate-value" id="stressValuePsi">0.00</div>
                        <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">psi</div>
                    </div></div>

                    <div class="result-feedback">
                        <div class="feedback-title">Stress Level Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
        
            <!-- üìò ABOUT THIS CALCULATOR -->
            <div class="note-card">
                <h3>üìò About This Calculator</h3>
                <p>
                    This tool calculates the <strong>Minimum Horizontal Stress (œÉh)</strong> using the
                    <strong>Breckels and van Eekelen (1982) empirical model</strong>.
                    It is primarily used in <strong>geomechanical modeling, wellbore stability assessment, hydraulic fracturing
                        design,</strong>
                    and <strong>reservoir stress estimation</strong> across sedimentary basins such as the U.S. Gulf Coast and
                    other normal-stress regions.
                </p>
            </div>
        
            <!-- ‚öô PARAMETERS USED -->
            <div class="note-card">
                <h3>‚öô Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>Depth (D):</strong> Vertical depth where horizontal stress is being calculated (in meters or
                        feet).</li>
                    <li><strong>Pore Pressure (P<sub>f</sub>):</strong> Pressure exerted by fluids in rock pores (in MPa).</li>
                    <li><strong>Normal Pore Pressure (P<sub>f,n</sub>):</strong> Baseline pore pressure under normal hydrostatic
                        conditions (in MPa).</li>
                </ul>
            </div>
        
            <!-- ‚úÖ INPUT VALIDATION RULES -->
            <div class="note-card">
                <h3>‚úÖ Input Validation Rules</h3>
                <ul class="note-list">
                    <li><strong>Depth:</strong> Must be > 0; typical range: 100‚Äì10,000 m (‚âà 300‚Äì30,000 ft); up to 2 decimals
                        allowed.</li>
                    <li><strong>Pore Pressure (P<sub>f</sub>):</strong> ‚â• 0 MPa, typically 0‚Äì150 MPa; up to 3 decimals allowed.
                    </li>
                    <li><strong>Normal Pore Pressure (P<sub>f,n</sub>):</strong> ‚â• 0 MPa, typically 0‚Äì150 MPa; up to 3 decimals
                        allowed.</li>
                    <li><strong>Relationship:</strong> If P<sub>f</sub>
                        < P<sub>f,n</sub>, flagged as <em>underpressured</em> (warning message shown).
                    </li>
                    <li><strong>Outputs:</strong> œÉ<sub>h</sub> ‚â• 0 and ‚â§ 200 MPa (practical upper limit).</li>
                </ul>
            </div>
        
            <!-- üìä OUTPUT VALIDATIONS -->
            <div class="note-card">
                <h3>üìä Output Validations</h3>
                <ul class="note-list">
                    <li><strong>&lt; 20 MPa:</strong> Low Stress ‚Üí Generally favorable for drilling operations.</li>
                    <li><strong>20‚Äì40 MPa:</strong> Moderate Stress ‚Üí Normal conditions; standard well planning applicable.</li>
                    <li><strong>40‚Äì60 MPa:</strong> High Stress ‚Üí Caution advised; requires optimized mud weight and wellbore
                        design.</li>
                    <li><strong>&gt; 60 MPa:</strong> Very High Stress ‚Üí Potential wellbore instability; specialized engineering
                        required.</li>
                </ul>
                <p><em>These exact feedback messages appear dynamically beside the result meter based on stress magnitude.</em>
                </p>
            </div>
        
            <!-- üìê GOVERNING PRINCIPLE -->
            <div class="note-card">
                <h3>üìê Governing Principle</h3>
                <p>
                    The Breckels and van Eekelen Model is not a formal standard but rather an empirical correlation
                    developed from real-world data. Published in 1982, the model provides a methodology for estimating
                    the minimum horizontal stress in sedimentary basins, particularly the U.S. Gulf Coast.
                </p>
                <p>
                    <strong>Key aspects of the Breckels and van Eekelen model:</strong><br>
                    <b>Empirical approach:</b> Created by fitting a curve to hydraulic fracture and leak-off test data.<br>
                    <b>Depth-based:</b> Estimates the minimum horizontal stress as a function of depth.<br>
                    <b>Regional focus:</b> Though derived from U.S. Gulf Coast data, it applies to other normal-stress regions
                    like the North Sea.<br>
                    <b>Comparison:</b> Commonly compared with other geomechanical stress models, such as those by Eaton (1969)
                    and Matthews & Kelly (1967).<br><br>
        
                    <strong>Why it‚Äôs not a standard:</strong><br>
                    Unlike codified engineering standards, this model represents a set of empirical relationships designed for
                    petroleum
                    and geomechanical applications. Its accuracy depends on how closely a new geological area's conditions
                    align with those of the original dataset. Due to these limitations, newer and more adaptive models have
                    since been developed.
                </p>
            </div>
        
            <!-- üß© CONCLUSION -->
            <div class="note-card">
                <h3>üß© Conclusion</h3>
                <p>
                    The Breckels and van Eekelen Model remains a valuable empirical tool for estimating minimum horizontal
                    stress,
                    particularly in sedimentary basins. Though not a universal standard, its widespread use in petroleum and
                    geomechanical studies highlights its practicality. Users should, however, apply it with caution and
                    compare results with modern calibration data for improved reliability.
                </p>
            </div>
        
        </div>

    </div>

    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateHorizontalStress() {
    const depthRaw = document.getElementById('depth').value.trim();
    const unit = document.getElementById('unit').value;
    const porePressureRaw = document.getElementById('porePressure').value.trim();
    const normalPorePressureRaw = document.getElementById('normalPorePressure').value.trim();

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');

    let errors = [];
    let warnings = [];

    // Convert to floats
    let depth = parseFloat(depthRaw);
    let Pf = parseFloat(porePressureRaw);
    let Pfn = parseFloat(normalPorePressureRaw);

    // Depth validation
    if (isNaN(depth) || depth <= 0) {
        errors.push("üëâ Depth must be a positive number.");
    } else {
        if (unit === "feet") depth *= 0.3048;
        if (depth < 100 || depth > 10000) {
            warnings.push("‚ö†Ô∏è Depth is outside typical operational range (100‚Äì10,000 m).");
        }
    }

    // Pore Pressure validation
    if (isNaN(Pf) || Pf < 0) {
        errors.push("üëâ Pore Pressure must be a non-negative number.");
    } else if (Pf > 150) {
        warnings.push("‚ö†Ô∏è Pore Pressure exceeds typical upper limit (150 MPa).");
    }

    // Normal Pore Pressure validation
    if (isNaN(Pfn) || Pfn < 0) {
        errors.push("üëâ Normal Pore Pressure must be a non-negative number.");
    } else if (Pfn > 150) {
        warnings.push("‚ö†Ô∏è Normal Pore Pressure exceeds typical upper limit (150 MPa).");
    }

    // Cross-validation: Pf vs Pfn
    if (!isNaN(Pf) && !isNaN(Pfn)) {
        if (Pf < Pfn) {
            warnings.push("‚ö†Ô∏è Pore Pressure < Normal Pore Pressure ‚Üí underpressured formation.");
        }
    }

    // Show errors if any
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // Perform calculation
    let horizontalStress;
    if (depth < 3500) {
        horizontalStress = 0.0053 * Math.pow(depth, 1.145) + 0.46 * (Pf - Pfn);
    } else {
        horizontalStress = 0.0264 * depth - 31.7 + 0.46 * (Pf - Pfn);
    }

    // Convert to psi
    const horizontalStressPsi = horizontalStress * 145.038;

    // Output validation
    if (horizontalStress < 0) {
        errorMessage.innerHTML = "üëâ Negative stress result. Check input values.";
        errorBox.classList.remove("hidden");
        resultValue.classList.add("hidden");
        return;
    }
    if (horizontalStress > 200) {
        warnings.push("‚ö†Ô∏è Calculated stress exceeds typical geomechanical range (>200 MPa).");
    }

    // Display results
    document.getElementById('stressValueMpa').textContent = horizontalStress.toFixed(3);
    document.getElementById('stressValuePsi').textContent = horizontalStressPsi.toFixed(2);

    // Feedback logic
    let feedback;
    if (horizontalStress < 20) {
        feedback = 'Low stress. Generally favorable for drilling.';
    } else if (horizontalStress <= 40) {
        feedback = 'Moderate stress. Standard drilling practices apply.';
    } else if (horizontalStress <= 60) {
        feedback = 'High stress. Careful well planning required.';
    } else {
        feedback = 'Very high stress. Potential wellbore stability issues; consult experts.';
    }

    // Add warnings
    if (warnings.length > 0) {
        feedback += " " + warnings.join(" ");
    }

    document.getElementById('feedbackContent').textContent = feedback;

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            
            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}



{% comment %} 
1. üìè Detailed Input Validation Rules (QEHS/Geomechanics Standards)
Depth

Must be > 0

Valid range:

100‚Äì10,000 m (‚âà 300‚Äì30,000 ft) ‚Üí based on drilling/geomechanical industry limits.

Allowed decimals: up to 2 (depth beyond 2 decimals has no practical significance).

If unit is feet, convert internally to meters.

Cross-validation: Depth should be consistent with pressure values (e.g., shallow wells cannot have abnormally high pore pressures).

Pore Pressure (Pf, MPa)

Must be ‚â• 0

Typical range: 0‚Äì150 MPa (‚âà 0‚Äì21,750 psi).

Allowed decimals: up to 3.

Must not exceed expected maximum at given depth (hydrostatic pressure ~0.01 √ó depth (m)).

Normal Pore Pressure (Pfn, MPa)

Must be ‚â• 0

Same range as Pf: 0‚Äì150 MPa.

Allowed decimals: up to 3.

Cross-validation:

Normally Pf ‚â• Pfn in overpressured zones.

Pf < Pfn possible in underpressured formations (warning, not error).

2. üìä Output Validation & Thresholds
Formula Used (from Breckels & van Eekelen model)
// If depth < 3500 m:
œÉh = 0.0053 √ó D^1.145 + 0.46 √ó (Pf ‚àí Pfn)

// If depth ‚â• 3500 m:
œÉh = 0.0264 √ó D ‚àí 31.7 + 0.46 √ó (Pf ‚àí Pfn)

// Output units:
// MPa (primary), psi (secondary; 1 MPa = 145.038 psi)

Thresholds for Stress Levels

< 20 MPa ‚Üí Low stress (generally safe drilling conditions)

20‚Äì40 MPa ‚Üí Moderate stress (normal precautions apply)

40‚Äì60 MPa ‚Üí High stress (requires advanced planning)

60 MPa ‚Üí Very high stress (wellbore stability risk, HSE hazard potential)

Output Validation

Horizontal Stress must be ‚â• 0 (negative stress = invalid input combination).

Stress should not exceed ~200 MPa in realistic wells (beyond that is geologically implausible).

3. ‚úÖ Corrected JavaScript Code (Validation Function)
/*
---------------------------------------------------
 Horizontal Stress Calculator (Breckels & van Eekelen)
 Validation Rules (QEHS/Geomechanics Standards)
---------------------------------------------------
 FORMULAS:
 For depth < 3500 m:
   œÉh = 0.0053 √ó D^1.145 + 0.46 √ó (Pf ‚àí Pfn)
 For depth ‚â• 3500 m:
   œÉh = 0.0264 √ó D ‚àí 31.7 + 0.46 √ó (Pf ‚àí Pfn)
 Units: MPa (converted to psi internally; 1 MPa = 145.038 psi)

 VALIDATIONS:
 Depth:
   - > 0
   - Range: 100‚Äì10,000 m (or 300‚Äì30,000 ft)
   - Max 2 decimals
 Pore Pressure (Pf):
   - ‚â• 0, ‚â§ 150 MPa
   - Max 3 decimals
 Normal Pore Pressure (Pfn):
   - ‚â• 0, ‚â§ 150 MPa
   - Max 3 decimals
 Relationships:
   - Pf ‚â• Pfn ‚Üí normal or overpressured (OK)
   - Pf < Pfn ‚Üí warning (underpressured)
 Outputs:
   - œÉh ‚â• 0
   - œÉh ‚â§ 200 MPa (practical limit)
---------------------------------------------------
*/ {% endcomment %}