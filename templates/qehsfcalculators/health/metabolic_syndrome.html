{% extends 'base.html' %}
{% block title %}Metabolic Syndrome Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metabolic Syndrome Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
    
        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
    
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
    
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }
    
        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
    
        @media (max-width: 900px) {
            .calc-content {
                flex-direction: column;
            }
        }
    
        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
    
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
    
        .calc-card:hover {
            transform: translateY(-5px);
        }
    
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }
    
        /* Inputs */
        .criterion {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
    
        .criterion:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    
        .criterion input[type="checkbox"] {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }
    
        .criterion label {
            color: #fff;
            font-weight: 500;
            line-height: 1.4;
        }
    
        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
    
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }
    
        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd, #000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }
    
        /* Result Card */
        .result-placeholder {
            text-align: center;
            margin: auto;
        }
    
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
    
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
    
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: baseline;
            justify-content: center;
        }
    
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
        }
    
        .rate-label {
            color: #7f8c8d;
            font-weight: 500;
            font-size: 20px;
        }
    
        /* Meter */
        .safety-meter {
            width: 100%;
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0 10px;
            overflow: hidden;
        }
    
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out, background-color 1s ease-in-out;
            border-radius: 6px;
        }
    
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }
    
        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
    
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
    
        .feedback-content {
            color: #34495e;
        }
    
        /* Notes Section & Table */
        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }
    
        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }
    
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
    
        .note-card p,
        .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
    
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
    
        .custom-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
    
        .custom-table thead {
            background-color: #1560bd;
            color: white;
        }
    
        .custom-table th,
        .custom-table td {
            padding: 12px 16px;
            border: 1px solid #ddd;
            text-align: left;
        }
    
        .custom-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    
        .image-container {
            display: flex;
            flex-wrap: wrap; /* Allows images to move to the next line if they don’t fit */
            gap: 20px;
            margin-top: 15px;
            justify-content: center; /* Centers images horizontally */
            align-items: flex-start;
        }

        .image-container img {
            flex: 1 1 300px; /* Grow, shrink, and base width */
            max-width: 45%;  /* Max width to prevent images from getting too large on wide screens */
            height: auto;
            border-radius: 8px;
            object-fit: cover; /* Ensures the image scales nicely */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Optional: subtle shadow for visual appeal */
            transition: transform 0.3s ease; /* Optional: smooth hover effect */
        }

        .image-container img:hover {
            transform: scale(1.05); /* Optional: slight zoom on hover */
        }

        /* Small screens */
        @media (max-width: 900px) {
            .image-container img {
                max-width: 100%; /* Take full width on tablets and small devices */
            }
        }

        @media (max-width: 600px) {
            .image-container {
                flex-direction: column; /* Stack images vertically */
                gap: 15px;
            }
        }
    
        /* Error Message */
        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
    
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
    
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }
    
        .hidden {
            display: none;
        }
    
        .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
    
        .back-btn {
            background: linear-gradient(#1560bd, #000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'healthcategory_calculators'%}" class="back-btn">Back To Health Calculators</a>
    </div>

    <div class="calculator-container printable" id="printArea">
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Metabolic Syndrome Calculator</h1>
            <p>Check your risk factors to see if you meet the criteria for metabolic syndrome.</p>
        </div>

        <div class="calc-content">
            <div class="calc-card">
                <h2>Check Applicable Criteria</h2>
                <div class="criterion">
                    <input type="checkbox" id="waist"><label for="waist"><strong>Large Waistline:</strong> >35 in (women) or >40
                        in (men)</label>
                </div>
                <div class="criterion">
                    <input type="checkbox" id="triglycerides"><label for="triglycerides"><strong>High Triglycerides:</strong>
                        ≥150 mg/dL or on medication</label>
                </div>
                <div class="criterion">
                    <input type="checkbox" id="hdl"><label for="hdl"><strong>Low HDL Cholesterol:</strong>
                        <50 mg/dL (women) or <40 mg/dL (men)</label>
                </div>
                <div class="criterion">
                    <input type="checkbox" id="bp"><label for="bp"><strong>High Blood Pressure:</strong> ≥130/85 mmHg or on
                        medication</label>
                </div>
                <div class="criterion">
                    <input type="checkbox" id="glucose"><label for="glucose"><strong>High Fasting Glucose:</strong> ≥100 mg/dL
                        or on medication</label>
                </div>
                <button class="calculate-btn" onclick="calculateAndDisplay()">Assess My Risk</button>
            </div>
        
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="{% static 'images/resultimage.png' %}" alt="Health illustration">
                    <p>Check the boxes for the criteria that apply to you to assess your risk.</p>
                </div>
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">❌</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                <div id="resultValue" class="hidden" style="text-align: center;">
                    <h2>Risk Score</h2>
                    <div class="rate-display">
                        <div class="rate-value" id="rateValue">0</div>
                        <span class="rate-label">/ 5 Criteria Met</span>
                    </div>
                    <div class="safety-meter">
                        <div class="meter-fill" id="meterFill"></div>
                    </div>
                    <div class="meter-labels">
                        <span>Low Risk</span>
                        <span>Metabolic Syndrome</span>
                    </div>
                    <div class="result-feedback">
                        <div class="feedback-title">Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="note-section">
            <div class="note-card">
                <h3>🔎 About This Calculator </h3>
                <p>
                    Metabolic syndrome, also known as insulin resistance syndrome or syndrome X, is a cluster of conditions that
                    greatly increase the risk of developing type 2 diabetes, heart disease, and stroke. Diagnosis is made when a
                    person has <strong>at least three</strong> of the five risk factors listed below.
                </p>
                <p>Having metabolic syndrome increases your risk for:</p>
                <ul class="note-list">
                    <li>Type 2 diabetes (5x higher risk)</li>
                    <li>Heart disease (2x higher risk)</li>
                    <li>Stroke</li>
                    <li>Fatty liver disease</li>
                </ul>
                <div class="image-container">
                    <img src="{% static 'images/metasyn1.webp' %}" alt="Visual of metabolic syndrome risk factors."
                        class="responsive-image">
                    <img src="{% static 'images/metasyn2.webp' %}" alt="Diagram showing organs affected by metabolic syndrome."
                        class="responsive-image">
                </div>
            </div>
        <div class="note-card">
    <h3>🧾 Parameters Used</h3>
    <ul class="note-list">
        <li><strong>Waist Circumference:</strong> Reflects central obesity. A large waistline (>35 inches for women or >40 inches for men) indicates excess visceral fat linked to metabolic risks.</li>
        <li><strong>Triglycerides:</strong> Elevated levels (≥150 mg/dL or on medication) suggest impaired lipid metabolism and increased cardiovascular risk.</li>
        <li><strong>HDL Cholesterol:</strong> Low levels (&lt;50 mg/dL for women, &lt;40 mg/dL for men) indicate reduced protective cholesterol, raising heart disease risk.</li>
        <li><strong>Blood Pressure:</strong> High readings (≥130/85 mmHg or on medication) signify vascular strain and higher risk of heart and metabolic disorders.</li>
        <li><strong>Fasting Glucose:</strong> High fasting glucose (≥100 mg/dL or on medication) reflects insulin resistance or prediabetes, central to metabolic syndrome.</li>
    </ul>
</div>

        
            <div class="note-card">
                    <h3>✅ Input Validations</h3>
                    <ul class="note-list">
                        <li><strong>Large Waistline:</strong> Check this if your waist circumference is >35 inches for women or >40
                            inches for men.</li>
                        <li><strong>High Triglycerides:</strong> Check if triglycerides are ≥150 mg/dL or if you are taking
                            medication to lower triglycerides.</li>
                        <li><strong>Low HDL Cholesterol:</strong> Check if HDL cholesterol is <50 mg/dL (women) or <40 mg/dL
                                (men).</li>
                        <li><strong>High Blood Pressure:</strong> Check if your blood pressure is ≥130/85 mmHg or if you are taking
                            medication for hypertension.</li>
                        <li><strong>High Fasting Glucose:</strong> Check if fasting glucose is ≥100 mg/dL or if you are taking
                            medication for high blood sugar.</li>
                    </ul>
                </div>
                <div class="note-card">
    <h3>✅ Output Validations</h3>
    <ul class="note-list">
        <li> <strong>0 Criteria Met:</strong></span>  
                ✅ You currently meet <strong>0 criteria</strong>. This is excellent! Continue to maintain your healthy habits to prevent future risk.</li>

            <li> <strong>1–2 Criteria Met:</strong></span>  
                ⚠️ You have <strong>1–2 risk factors</strong>. While this is not metabolic syndrome, it indicates an increased risk. Lifestyle changes are strongly recommended to prevent progression.</li>

            <li> <strong>3–5 Criteria Met:</strong></span>  
                ❌ With <strong>3 or more criteria met</strong>, you meet the definition for metabolic syndrome.  
                This significantly increases your risk for <strong>heart disease, stroke, and type 2 diabetes</strong>.  
                It is highly recommended to consult a healthcare provider for further evaluation and management.</li>
        </ul>
        
</div>

                <div class="note-card">
    <h3>📐 Governing Principle</h3>
    <p>
        A metabolic syndrome calculator uses standards such as the International Diabetes Federation (IDF) definition or the National Cholesterol Education Program's Adult Treatment Panel III (NCEP ATP-III) criteria to assess the presence of metabolic syndrome by evaluating key components like waist circumference, triglycerides, HDL cholesterol, blood pressure, and fasting glucose. However, the specific standard used depends on the particular calculator, as some may use IDF criteria, which require central obesity plus two other components, while others, like the traditional ATP-III, require any three of the five criteria.
    </p>

    <h3 style="margin-top:12px; color:#1976d2;">Common Standards for Metabolic Syndrome Calculators</h3>
    <ul class="note-list">
        <li><b>International Diabetes Federation (IDF) Definition:</b> This standard considers central obesity as a prerequisite for diagnosis, requiring a specific waist circumference for an ethnic group plus two of the four other factors (raised triglycerides, low HDL, high blood pressure, high fasting glucose).</li>
        <li><b>NCEP ATP-III Criteria:</b> Based on the Adult Treatment Panel III report, this standard defines metabolic syndrome as the presence of three or more of the following abnormalities: elevated waist circumference, elevated triglycerides, reduced HDL cholesterol, elevated blood pressure, and elevated blood glucose.</li>
    </ul>

    <h3 style="margin-top:12px; color:#1976d2;">How to Determine the Standard of a Specific Calculator</h3>
    <ul class="note-list">
        <li><b>Check the Calculator's Source:</b> Look for information provided with the calculator, such as a reference to the IDF, ATP-III, or other recognized clinical guidelines.</li>
        <li><b>Review the Criteria Used:</b> Examine the specific criteria listed in the calculator's description. For instance, if it requires a waist circumference as a mandatory starting point, it likely follows the IDF definition. If it allows any three of the five components, it is more likely based on ATP-III.</li>
    </ul>
</div>
            <div class="note-card">
                <h3>Understanding the 5 Criteria</h3>
                <p>Each checkbox in the calculator corresponds to a diagnostic criterion:</p>
                <div style="overflow-x:auto;">
                    <table class="custom-table">
                        <thead>
                            <tr>
                                <th>Criterion</th>
                                <th>Why it Matters</th>
                                <th>How to Measure / Test Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Waist Circumference</strong></td>
                                <td>Abdominal fat is metabolically active, increasing inflammation and insulin resistance.</td>
                                <td>Measure at the navel after exhaling normally.</td>
                            </tr>
                            <tr>
                                <td><strong>Triglycerides</strong></td>
                                <td>High levels indicate excess energy storage as fat.</td>
                                <td>Fasting lipid panel (9–12 hours fast).</td>
                            </tr>
                            <tr>
                                <td><strong>HDL Cholesterol</strong></td>
                                <td>Low levels of "good" cholesterol increase cardiovascular risk.</td>
                                <td>Blood test; women naturally have higher HDL than men.</td>
                            </tr>
                            <tr>
                                <td><strong>Blood Pressure</strong></td>
                                <td>High pressure damages blood vessels and strains the heart.</td>
                                <td>Multiple readings at different times recommended.</td>
                            </tr>
                            <tr>
                                <td><strong>Fasting Glucose</strong></td>
                                <td>Indicates how well the body processes sugar; high levels signal insulin resistance.</td>
                                <td>Blood test after 8+ hours of fasting.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        
            <div class="note-card">
                <h3>When to See a Doctor</h3>
                <ul class="note-list">
                    <li>If you meet ≥3 criteria</li>
                    <li>If you have 1–2 criteria plus a family history of diabetes or heart disease</li>
                    <li>For advice on medication if lifestyle changes are insufficient</li>
                </ul>
            </div>
        
            <div class="note-card">
                <h3>Treatment Recommendations</h3>
                <ul class="note-list">
                    <li><strong>Healthy Diet:</strong> Focus on fruits, vegetables, lean proteins, and whole grains. Limit
                        processed foods, sugar, and unhealthy fats.</li>
                    <li><strong>Regular Exercise:</strong> At least 150 minutes of moderate-intensity aerobic activity per week.
                    </li>
                    <li><strong>Weight Management:</strong> Even modest weight loss (5–10% of body weight) can significantly
                        improve all criteria.</li>
                    <li><strong>Stress Management:</strong> Practice relaxation techniques.</li>
                    <li><strong>Quit Smoking:</strong> Smoking worsens metabolic health.</li>
                </ul>
            </div>

            <div class="note-card">
                <h3>⚠️ Disclaimer</h3>
                <p>
                    This calculator provides information only and is not a substitute for professional medical advice. Always
                    consult with your healthcare provider for proper diagnosis and treatment.
                </p>
            </div>
            <div class="note-card">
    <h3>🧠 Conclusion</h3>
    <p>
        The Metabolic Syndrome Calculator provides a quick, evidence-based method to assess a person’s risk for metabolic syndrome.
        A score of <strong>three or more</strong> indicates the presence of metabolic syndrome, warranting medical review and lifestyle adjustments.
    </p>
    <p>
        Early identification of these risk factors allows timely prevention of serious conditions like diabetes, hypertension, and heart disease.
        This tool is designed for health awareness and should be used alongside professional medical advice, not as a diagnostic substitute.
    </p>
</div>

        </div>

    </div>

    <script>
        function calculateAndDisplay() {
            const placeholder = document.getElementById('placeholder');
            const resultValueBox = document.getElementById('resultValue');
            const errorBox = document.getElementById('resultError');
            const errorMessage = document.getElementById('errorMessage');
            const rateValue = document.getElementById('rateValue');
            const meterFill = document.getElementById('meterFill');
            const feedbackContent = document.getElementById('feedbackContent');

            // Reset UI
            errorBox.classList.add('hidden');
            placeholder.classList.add('hidden');
            resultValueBox.classList.remove('hidden');

            // --- Validate checkboxes exist and count checked criteria ---
            const criteriaIds = ['waist', 'triglycerides', 'hdl', 'bp', 'glucose'];
            let count = 0;
            let missingIds = [];

            criteriaIds.forEach(id => {
                const el = document.getElementById(id);
                if (!el) {
                    missingIds.push(id);
                } else if (el.checked) {
                    count++;
                }
            });

            // --- Handle missing checkbox IDs ---
            if (missingIds.length > 0) {
                errorMessage.innerHTML = `❌ Missing input elements: ${missingIds.join(', ')}. Please contact support.`;
                errorBox.classList.remove('hidden');
                resultValueBox.classList.add('hidden');
                return;
            }

            // --- Update result value and meter ---
            rateValue.textContent = count;
            meterFill.style.width = (count / 5) * 100 + '%';

            let interpretation = "";

            if (count >= 3) {
                meterFill.style.backgroundColor = '#e74c3c'; // Red
                interpretation = `❌ With <strong>${count} criteria met</strong>, you meet the definition for metabolic syndrome. This significantly increases your risk for heart disease, stroke, and type 2 diabetes. It is highly recommended to consult a healthcare provider.`;
            } else if (count > 0) {
                meterFill.style.backgroundColor = '#f39c12'; // Yellow
                interpretation = `⚠️ You have <strong>${count} risk factor(s)</strong>. While this is not a diagnosis of metabolic syndrome, it indicates an increased risk. Lifestyle changes are recommended to prevent progression.`;
            } else {
                meterFill.style.backgroundColor = '#2ecc71'; // Green
                interpretation = `✅ You currently meet <strong>0 criteria</strong>. This is excellent! Continue to maintain your healthy habits to prevent future risk.`;
            }

            feedbackContent.innerHTML = interpretation;
        }

        // --- Print Function ---
        function printReport() {
            window.print();
        }
    </script>

</body>
</html>
{% endblock %}

<!-- 
1. Input Validation Rules (QEHS / Safety Perspective)

Even though these are checkbox inputs, from a QEHS perspective, we need to ensure:

All fields exist – no missing or misnamed IDs.

Checkbox logic consistency – values are Boolean (true/false).

Cross-field dependencies – no impossible combinations (e.g., logically inconsistent with patient gender or measurement thresholds).

Units clarity – each criterion clearly mentions its unit and threshold.

User guidance – notes about thresholds (e.g., waistline differs by gender).

Table of input validations:

Field	Type	Expected Values	Notes / Compliance Reasoning
Waistline	Checkbox	true/false	>35 in for women, >40 in for men; critical for metabolic syndrome risk
Triglycerides	Checkbox	true/false	≥150 mg/dL or on medication; ensures lab threshold is respected
HDL	Checkbox	true/false	<50 mg/dL (women), <40 mg/dL (men); prevents misinterpretation of normal HDL
Blood Pressure	Checkbox	true/false	≥130/85 mmHg or on medication; aligns with accepted clinical criteria
Glucose	Checkbox	true/false	≥100 mg/dL or on medication; fasting glucose critical for metabolic syndrome diagnosis

QEHS justification: Even in non-lab tools, Boolean inputs must reflect compliance thresholds. Misinterpretation could lead to wrong risk assessment, like unsafe KPI reporting in industrial safety audits.

2. Output Validation Logic and Thresholds

Thresholds for metabolic syndrome diagnosis:

0–2 criteria met: Low risk / preventive advice.

3–5 criteria met: Likely metabolic syndrome → clinical follow-up required.

Compliance reasoning: Outputs must be clinically meaningful. Reporting someone as low-risk when they meet 3+ criteria would be equivalent to a false safety KPI in a fire safety audit—very high risk.

3. Edge Case Handling
Edge Case	Handling
No checkboxes selected	Show "0 criteria met" message (low risk)
All checkboxes selected	Show "5 criteria met" message (high risk)
Missing checkbox ID	JavaScript error → should log error and alert admin
Invalid type	Not possible for checkboxes; ensure Boolean handling
User toggles rapidly	Should update correctly on each calculation
-->