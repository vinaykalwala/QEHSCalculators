{% extends 'base.html' %}
{% block title %}Body Frame Size Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Body Frame Size Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }
        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        @media (max-width: 900px) {
            .calc-content {
                flex-direction: column;
            }
        }
        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            overflow-y: auto;
        }
        .calc-card:hover {
            transform: translateY(-5px);
        }
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }
        /* Inputs */
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        .form-input, .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }
        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }
        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }
        .print-btn:hover {
            background: #1560bd;
        }
        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        .rate-display {
            display: flex;
            flex-direction: column;
            gap: 6px;
            align-items: center;
            justify-content: center;
        }
        .result-value {
            width: 100%;
        }
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 0;
        }
        .rate-label {
            color: #7f8c8d;
            font-size: 16px;
        }
        /* Meter */
        .safety-meter {
            width: 100%;
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        .feedback-content {
            color: #34495e;
        }
        /* Notes Section */
        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }
        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        .note-card:hover {
            transform: translateY(-2px);
        }
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        .note-card p, .note-card li, .note-card ol {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        /* Table styles */
        .custom-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Table header */
        .custom-table thead {
            background-color: #1560bd;
            color: white;
        }

        .custom-table th, .custom-table td {
            padding: 12px 16px;
            border: 1px solid #ddd;
            text-align: center;
        }

        .custom-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        /* Make table responsive with horizontal scroll */
        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* smooth scrolling on mobile */
        }

        /* Optional: smaller padding/font for smaller screens */
        @media screen and (max-width: 768px) {
            .custom-table th, .custom-table td {
                padding: 10px 12px;
                font-size: 14px;
            }
        }

        /* Error Message */
        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }
        /* Toggle helper */
        .hidden {
            display: none;
        }
        .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        .back-btn {
            background: linear-gradient(#1560bd,#000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'healthcategory_calculators'%}" class="back-btn">Back To Health Calculators</a>
    </div>

    <div class="calculator-container printable" id="printArea">
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Body Frame Size Calculator</h1>
            <p>Determine your body frame size based on your wrist circumference and height.</p>
        </div>

        <div class="calc-content">
            <div class="calc-card">
                <h2>Enter Your Details</h2>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" class="form-select">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="height">Height (inches)</label>
                    <input type="number" id="height" class="form-input" min="0" placeholder="e.g., 68">
                </div>
                <div class="form-group">
                    <label for="wrist">Wrist Circumference (inches)</label>
                    <input type="number" id="wrist" class="form-input" min="0" placeholder="e.g., 6.5">
                </div>
                <button class="calculate-btn" onclick="calculateFrameSize()">Calculate Frame Size</button>
            </div>

            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Health illustration">
                    <p>Enter your details to determine your <strong>Body Frame Size</strong>.</p>
                </div>
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">❌</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                <div class="result-value hidden" id="resultValue">
                    <h2>Your Body Frame Size</h2>
                    <div class="rate-display">
                        <div class="rate-value" id="rateValue">Medium</div>
                        <div class="rate-label" id="indexValue">(Ratio: 0.0)</div>
                    </div>
                    <div class="safety-meter">
                        <div class="meter-fill" id="meterFill"></div>
                    </div>
                    <div class="meter-labels">
                        <span>Small Frame</span><span>Medium Frame</span><span>Large Frame</span>
                    </div>
                    <div class="result-feedback">
                        <div class="feedback-title">Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

<div class="note-section">

    <div class="note-card">
        <h3>📘 About This Calculator</h3>
        <p>
            The <strong>Body Frame Size Calculator</strong> estimates whether your skeletal structure is small, medium, or large based on 
            the ratio of wrist circumference to height. This classification provides additional context to body weight and BMI results, 
            offering a more personalized understanding of your overall build and health potential.
        </p>
    </div>

    <div class="note-card">
        <h3>📘 What is Body Frame Size?</h3>
        <p>
            Body frame size is a description of your body's skeletal structure. It can be categorized as small, medium, or large. 
            Knowing your frame size can help you set more realistic weight management goals, as it provides a better context 
            for interpreting metrics like Body Mass Index (BMI).
        </p>
    </div>

    <div class="note-card">
        <h3>⚙ Parameters Used</h3>
        <ul class="note-list">
            <li><strong>Height:</strong> The overall body height, measured in inches.</li>
            <li><strong>Wrist Circumference:</strong> The circumference of the wrist, measured in inches just above the wrist bone.</li>
            <li><strong>Gender:</strong> Male or Female — affects the threshold ratio for small, medium, and large frame categories.</li>
        </ul>
    </div>

    <div class="note-card">
        <h3>📏 How to Measure Your Wrist Circumference</h3>
        <ol>
            <li>Find the bony prominence on the outside of your wrist (the end of the ulna bone).</li>
            <li>Wrap a flexible measuring tape around your wrist, just above this bone.</li>
            <li>Read the measurement in inches. Ensure the tape is snug but not tight.</li>
        </ol>
    </div>

    <div class="note-card">
        <h3>📊 Body Frame Size Categories</h3>
        <p>Your frame size is determined by the ratio (r) of your height to your wrist circumference.</p>
    </div>

    <div class="table-wrapper">
        <table class="custom-table">
            <thead>
                <tr>
                    <th>Gender</th>
                    <th>Small Frame (r)</th>
                    <th>Medium Frame (r)</th>
                    <th>Large Frame (r)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Men</strong></td>
                    <td>r &gt; 10.4</td>
                    <td>9.6 – 10.4</td>
                    <td>r &lt; 9.6</td>
                </tr>
                <tr>
                    <td><strong>Women</strong></td>
                    <td>r &gt; 11.0</td>
                    <td>10.1 – 11.0</td>
                    <td>r &lt; 10.1</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="note-card">
        <h3>✅ Input Validation Rules</h3>
        <p>To ensure accurate Body Frame Size calculation, please follow these input guidelines:</p>
        <ul>
            <li><strong>Height (inches):</strong> Enter a realistic adult height. Acceptable range: <strong>48 – 90 inches</strong>.</li>
            <li><strong>Wrist Circumference (inches):</strong> Enter a numeric value. Acceptable range: <strong>4 – 10 inches</strong>.</li>
            <li><strong>Logical consistency:</strong> Height should always be greater than wrist circumference.</li>
            <li><strong>Data type:</strong> All inputs must be positive numbers; decimals are allowed.</li>
            <li><strong>Edge cases:</strong> Avoid extremely high or low values that are biologically improbable.</li>
        </ul>
        <p>This guidance ensures the calculator provides meaningful results in line with real-world health assessment standards.</p>
    </div>

    <div class="note-card">
        <h3>📊 Output Validations</h3>
        <p>The calculator provides a qualitative assessment based on the height-to-wrist ratio:</p>
        <ul class="note-list">
            <li><strong>Small Frame:</strong> Indicates a lighter skeletal build; BMI may overestimate fatness.</li>
            <li><strong>Medium Frame:</strong> Represents an average skeletal build; BMI interpretation is standard.</li>
            <li><strong>Large Frame:</strong> Indicates a heavier skeletal build; BMI may underestimate fatness.</li>
        </ul>
        <p>
            These results act as <strong>feedback</strong> or <strong>assessment</strong> for users, helping to understand how 
            bone structure influences overall body composition and health evaluation.
        </p>
    </div>

    <div class="note-card">
        <h3>⚖️ Governing Principle</h3>
        <p>
            There isn't a single, universal "standard" for a body frame size calculator; instead, they rely on various general methods, 
            most commonly the wrist circumference-to-height ratio to categorize body frame size as small, medium, or large. 
            However, other methods exist, such as using elbow breadth. These calculators serve as a general guideline and 
            are not a strict, formal standard.
        </p>
        <ul class="note-list">
            <li><strong>Common Method: Wrist and Height</strong><br>
                <strong>Measurement:</strong> You measure your wrist circumference and compare it to your height.<br>
                <strong>Application:</strong> Body frame size charts using this method often include categories for women and men separately because of natural differences in average height and muscle mass.<br>
                <strong>Purpose:</strong> This method helps provide a general estimate of someone's bone structure.
            </li>
            <li><strong>Alternative Method: Elbow Breadth</strong><br>
                <strong>Measurement:</strong> Some methods use the breadth of the elbow to classify bone structure, categorizing it based on percentile ranges.<br>
                <strong>Application:</strong> This approach is used in some scientific studies to assess body frame.
            </li>
            <li><strong>Why There's No Single Standard</strong><br>
                <strong>Variations in Populations:</strong> Body frame size naturally varies between individuals, and formal, universally accepted standards for a "frame size calculator" are not common in the same way that BMI is.<br>
                <strong>Purpose of Calculators:</strong> These calculators serve as general guidelines for estimating bone structure rather than a precise scientific standard.
            </li>
        </ul>
    </div>

    <div class="note-card">
        <h3>🧾 Conclusion</h3>
        <p>
            The <strong>Body Frame Size Calculator</strong> provides valuable insight into your skeletal structure, complementing 
            BMI and other body composition assessments. While not a medical diagnostic tool, it helps users set realistic 
            weight and health goals. For personalized evaluation or medical advice, consultation with a healthcare 
            professional is recommended.
        </p>
    </div>

</div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            if(document.getElementById('printDate')) {
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            }
        });

        // Main calculation function
        function calculateFrameSize() {
            const gender = document.getElementById('gender').value;
            const heightInput = document.getElementById('height').value.trim();
            const wristInput = document.getElementById('wrist').value.trim();

            const errorBox = document.getElementById('resultError');
            const errorMessage = document.getElementById('errorMessage');
            const placeholder = document.getElementById('placeholder');
            const resultValue = document.getElementById('resultValue');

            let errors = [];

            // Parse input values
            const heightVal = parseFloat(heightInput);
            const wristVal = parseFloat(wristInput);

            // Validation rules
            if (!gender) errors.push("👉 Please select your gender.");
            
            if (isNaN(heightVal) || heightVal <= 0) errors.push("👉 Enter a valid numeric height.");
            else if (heightVal < 48 || heightVal > 90) errors.push("👉 Height must be between 48 and 90 inches.");

            if (isNaN(wristVal) || wristVal <= 0) errors.push("👉 Enter a valid numeric wrist circumference.");
            else if (wristVal < 4 || wristVal > 10) errors.push("👉 Wrist circumference must be between 4 and 10 inches.");

            // Logical consistency
            if (!isNaN(heightVal) && !isNaN(wristVal) && heightVal < wristVal) {
                errors.push("👉 Height cannot be less than wrist circumference.");
            }

            // Display errors if any
            if (errors.length > 0) {
                errorMessage.innerHTML = errors.join("<br>");
                errorBox.classList.remove("hidden");
                placeholder.classList.add("hidden");
                resultValue.classList.add("hidden");
                return;
            } else {
                errorBox.classList.add("hidden");
            }

            // Body Frame Index calculation
            const frameIndex = heightVal / wristVal;
            let frameSize = "";
            let meterWidth = "", meterColor = "", feedback = "";

            // Gender-specific frame classification
            if (gender === "male") {
                if (frameIndex > 10.4) {
                    frameSize = "Small";
                    meterWidth = '33%'; meterColor = '#2ecc71';
                    feedback = "Your skeletal structure is smaller relative to your height. Maintain proper nutrition and strength.";
                } else if (frameIndex >= 9.6) {
                    frameSize = "Medium";
                    meterWidth = '66%'; meterColor = '#f39c12';
                    feedback = "Your skeletal structure is average relative to your height. Keep a balanced lifestyle.";
                } else {
                    frameSize = "Large";
                    meterWidth = '95%'; meterColor = '#e74c3c';
                    feedback = "Your skeletal structure is larger relative to your height. Focus on posture and strength training.";
                }
            } else { // Female
                if (frameIndex > 11.0) {
                    frameSize = "Small";
                    meterWidth = '33%'; meterColor = '#2ecc71';
                    feedback = "Your skeletal structure is smaller relative to your height. Support bone health with nutrition.";
                } else if (frameIndex >= 10.1) {
                    frameSize = "Medium";
                    meterWidth = '66%'; meterColor = '#f39c12';
                    feedback = "Your skeletal structure is average relative to your height. Maintain regular health routines.";
                } else {
                    frameSize = "Large";
                    meterWidth = '95%'; meterColor = '#e74c3c';
                    feedback = "Your skeletal structure is larger relative to your height. Focus on strength and posture.";
                }
            }

            // Update UI
            document.getElementById('rateValue').textContent = `${frameSize} Frame`;
            document.getElementById('indexValue').textContent = `(Ratio: ${frameIndex.toFixed(2)})`;
            const meterFill = document.getElementById('meterFill');
            meterFill.style.width = meterWidth;
            meterFill.style.backgroundColor = meterColor;
            document.getElementById('feedbackContent').textContent = feedback;

            placeholder.classList.add('hidden');
            resultValue.classList.remove('hidden');
        }

        // Print report
        function printReport() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            if(document.getElementById('printDate')) {
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            }
            window.print();
        }
    </script>

</body>
</html>
{% endblock %}

<!-- 
1. Input Validation Rules (QEHS Perspective)
Input	Units	Acceptable Range	Notes / Edge Case Rules
Gender	–	Male / Female	Must be selected. Missing gender will prevent calculation.
Height	inches	48 – 96	Less than 4 ft or more than 8 ft is unrealistic. Only positive numbers. Decimal allowed (e.g., 68.5).
Wrist Circumference	inches	4 – 9	Unrealistic smaller/larger wrists should be flagged. Decimal allowed.
Logical Consistency	–	Height / Wrist ratio > 0	Avoid division by zero (wrist = 0).

Additional Notes:

All inputs must be numeric.

Prevent negative values.

Warn users when extreme ratios (>20 or <5) occur—likely input error.

2. Output Validation and Thresholds

The Body Frame Index (BFI) = Height / Wrist.

Gender	Small Frame	Medium Frame	Large Frame
Male	BFI > 10.4	9.6 – 10.4	< 9.6
Female	BFI > 11	10.1 – 11	< 10.1

Notes:

Display frame size and index (2 decimals).

Show guidance based on frame size:

Small: “Your frame is delicate; ensure adequate muscle and bone support.”

Medium: “Balanced frame; maintain regular health and nutrition.”

Large: “Larger frame; support with strength and posture care.”

3. Edge Case Validations

Wrist = 0 → Division by zero error → Prevent with validation.

Height < wrist → Ratio < 1 → Unrealistic, flag error.

Extreme ratios (e.g., BFI > 20 or < 5) → Show warning for possible data entry mistake.

Non-numeric input → Show error.

Negative input → Show error.
-->