{% extends 'base.html' %}
{% block title %}Alzheimer's Life Expectancy Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alzheimer’s Life Expectancy Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
      

        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 12px;
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            justify-content: center;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
      .btn-wrapper {
    text-align: center; /* centers inline-block buttons */
    margin-top: 20px;
  }

   .btn-wrapper {
    text-align: center; /* centers the button */
    margin-top: 20px;
  }

  .print-btn {
    display: inline-block;
    background:linear-gradient(#1560bd,#000040);
    color: white;
    padding: 8px 18px;   /* control button size */
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    width: auto !important; /* prevent full width */
  }

  .print-btn:hover {
    background: #1560bd;
  }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

        /* Table styles */
        .custom-table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .custom-table thead {
            background-color: #1560bd;
            color: white;
        }
        .custom-table th, .custom-table td {
            padding: 12px 16px;
            border: 1px solid #ddd;
            text-align: center;
        }
        .custom-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
       
    </style>
</head>
<body>
<div class="calculator-container printable" id="printArea">

    {% include "includes/print_header_footer.html" with report_title="Alzheimer's Life Expectancy Report" %}

    <div class="calculator-header">
        <h1>Alzheimer’s Life Expectancy Calculator</h1>
        <p>Estimate life expectancy and stage duration based on the 7 stages of Alzheimer's disease.</p>
    </div>

    <div class="calc-content">
        <div class="calc-card">
            <h2>Select Alzheimer’s Stage</h2>
            <div class="form-group">
                <label for="alzStage">Select the current stage of the individual:</label>
                <select id="alzStage" class="form-input">
                    <option value="">-- Select Stage --</option>
                    <option value="1">Stage 1 – No cognitive decline</option>
                    <option value="2">Stage 2 – Very mild decline</option>
                    <option value="3">Stage 3 – Mild decline</option>
                    <option value="4">Stage 4 – Moderate decline</option>
                    <option value="5">Stage 5 – Moderately severe decline</option>
                    <option value="6">Stage 6 – Severe decline</option>
                    <option value="7">Stage 7 – Very severe decline</option>
                </select>
            </div>
            <button class="calculate-btn" onclick="calculateAlzheimersExpectancy()">Show Estimate</button>
        </div>

        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Health timeline icon">
                <p>Estimates for life expectancy and stage duration will be displayed here.</p>
            </div>
            <div class="result-error hidden" id="resultError"><div class="error-message" id="errorMessage"></div></div>
            <div class="result-value hidden" id="resultValue">
                <div class="rate-value" id="lifeExpectancyValue"></div>
                <div class="safety-meter">
                    <div class="meter-fill" id="meterFill"></div>
                </div>
                <div class="meter-labels">
                    <span>Stage 1</span><span>Stage 4</span><span>Stage 7</span>
                </div>
                <div class="result-feedback">
                    <div class="feedback-content" id="feedbackContent"></div>
                </div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

    <div class="note-section">
        <div class="note-card"><h3>Note:</h3><p><strong>Alzheimer’s Disease</strong> is a progressive neurodegenerative disorder that primarily affects memory, thinking skills, and the ability to carry out everyday tasks. It advances gradually through distinct stages, each with its own set of symptoms and implications for life expectancy.</p></div>
        <div class="note-card"><h3>About the Calculator:</h3><p>This Alzheimer's Life Expectancy Calculator provides estimated timelines for life expectancy and the typical duration of each stage of Alzheimer's disease. These estimates are based on statistical averages and clinical research, helping caregivers and families better prepare and plan for the journey ahead.</p></div>
        <div class="note-card"><h3>Explanation of Stages:</h3><ul><li><strong>Stage 1 – No cognitive decline:</strong> Normal function. No noticeable symptoms of dementia.</li><li><strong>Stage 2 – Very mild cognitive decline:</strong> Minor memory issues, often considered normal aging.</li><li><strong>Stage 3 – Mild cognitive decline:</strong> Increased forgetfulness and difficulty concentrating; may interfere with daily tasks.</li><li><strong>Stage 4 – Moderate cognitive decline:</strong> Clear-cut symptoms; trouble with simple arithmetic and short-term memory.</li><li><strong>Stage 5 – Moderately severe cognitive decline:</strong> Individuals may need help with daily activities like dressing and grooming.</li><li><strong>Stage 6 – Severe cognitive decline:</strong> Memory continues to worsen; difficulty recognizing family members; assistance required for basic tasks.</li><li><strong>Stage 7 – Very severe cognitive decline:</strong> Loss of ability to respond to environment; individuals require round-the-clock care.</li></ul></div>
        <div class="note-card"><h3>Why It Matters:</h3><p>Understanding the stage of Alzheimer's can help healthcare providers, caregivers, and families estimate life expectancy and prepare emotionally, financially, and logistically for the journey ahead.</p></div>
        <div class="note-card"><h3>Understanding the Results:</h3><p>When you select a stage in the calculator, you’ll receive two key pieces of information:</p><ul><li><strong>Estimated Life Expectancy:</strong> The average number of years a person may live after reaching the selected stage. This figure varies depending on individual health and quality of care.</li><li><strong>Average Duration of Stage:</strong> How long a person typically remains in that specific stage before progressing to the next.</li></ul></div>
        <div class="note-card"><h3>Conclusion:</h3><p>While each person's experience with Alzheimer's is unique, this calculator offers general guidance based on the current stage. It is not a substitute for professional medical advice, but rather a helpful tool for setting expectations and encouraging early intervention and support planning.</p></div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() { /* ... */ const printDateEl = document.getElementById('printDate'); if (printDateEl) { const now = new Date(); const options = { year: 'numeric', month: 'long', day: 'numeric' }; printDateEl.textContent = now.toLocaleDateString('en-US', options); } });

    function calculateAlzheimersExpectancy() {
        const errorBox = document.getElementById('resultError'), errorMessage = document.getElementById('errorMessage'), placeholder = document.getElementById('placeholder'), resultValueDiv = document.getElementById('resultValue');
        const stage = document.getElementById("alzStage").value;

        if (!stage) {
            errorMessage.innerHTML = "👉 Please select a valid stage from the dropdown.";
            errorBox.classList.remove("hidden");
            placeholder.classList.remove("hidden");
            resultValueDiv.classList.add("hidden");
            return;
        } else {
            errorBox.classList.add("hidden");
        }
        
        // **** CORRECTED: The original switch logic is restored to format the main result text ****
        let resultText = "";
        let lifeExpectancy = "";
        let meter = {};

        switch (stage) {
            case "1":
                resultText = `🧠 <strong>Stage 1 – No cognitive decline</strong><br>✅ Normal function. No memory loss or symptoms.<br>📆 Life Expectancy: <strong>Normal for age</strong><br>⏳ Duration: Not applicable`;
                lifeExpectancy = "Normal"; meter = { width: "5%", color: "#27ae60" };
                break;
            case "2":
                resultText = `🧠 <strong>Stage 2 – Very mild cognitive decline</strong><br>📆 Estimated Life Expectancy: <strong>> 10 years</strong><br>⏳ Average Duration of Stage: <strong>~15 years</strong>`;
                lifeExpectancy = "> 10 years"; meter = { width: "15%", color: "#2ecc71" };
                break;
            case "3":
                resultText = `🧠 <strong>Stage 3 – Mild cognitive decline</strong><br>📆 Estimated Life Expectancy: <strong>~10 years</strong><br>⏳ Average Duration of Stage: <strong>2–7 years</strong>`;
                lifeExpectancy = "~10 years"; meter = { width: "30%", color: "#f1c40f" };
                break;
            case "4":
                resultText = `🧠 <strong>Stage 4 – Moderate cognitive decline</strong><br>📆 Estimated Life Expectancy: <strong>3–8 years</strong><br>⏳ Average Duration of Stage: <strong>~2 years</strong>`;
                lifeExpectancy = "3–8 years"; meter = { width: "45%", color: "#f39c12" };
                break;
            case "5":
                resultText = `🧠 <strong>Stage 5 – Moderately severe cognitive decline</strong><br>📆 Estimated Life Expectancy: <strong>1.5–6.5 years</strong><br>⏳ Average Duration of Stage: <strong>~1.5 years</strong>`;
                lifeExpectancy = "1.5–6.5 years"; meter = { width: "60%", color: "#e67e22" };
                break;
            case "6":
                resultText = `🧠 <strong>Stage 6 – Severe cognitive decline</strong><br>📆 Estimated Life Expectancy: <strong>≤ 4 years</strong><br>⏳ Average Duration of Stage: <strong>~2.5 years</strong>`;
                lifeExpectancy = "≤ 4 years"; meter = { width: "75%", color: "#d35400" };
                break;
            case "7":
                resultText = `🧠 <strong>Stage 7 – Very severe cognitive decline</strong><br>📆 Estimated Life Expectancy: <strong>≤ 2.5 years</strong><br>⏳ Average Duration of Stage: <strong>1.5–2.5 years</strong>`;
                lifeExpectancy = "≤ 2.5 years"; meter = { width: "90%", color: "#c0392b" };
                break;
        }

        // Update the different parts of the result card
        document.getElementById('lifeExpectancyValue').textContent = lifeExpectancy;
        document.getElementById('feedbackContent').innerHTML = resultText;
        
        const meterFill = document.getElementById('meterFill');
        meterFill.style.width = meter.width;
        meterFill.style.backgroundColor = meter.color;

        placeholder.classList.add('hidden');
        resultValueDiv.classList.remove('hidden');
    }

    function printReport() { /* ... */ const printDateEl = document.getElementById('printDate'); if (printDateEl) { const now = new Date(); const options = { year: 'numeric', month: 'long', day: 'numeric' }; printDateEl.textContent = now.toLocaleDateString('en-US', options); } window.print(); }
</script>

</body>
</html>
{% endblock %}