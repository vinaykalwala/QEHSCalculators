{% extends 'base.html' %}
{% block title %}Acidity Calculator Based On Hydrogen Ion Concentration {% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acidity Calculator Based On Hydrogen Ion Concentration</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;

        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    .btn-container {

    display: flex;
    justify-content: center; /* Horizontally center */
    margin: 30px 0;
}

.back-btn {
    background:linear-gradient(#1560bd,#000040); /* Dark navy background */
    color: #ffffff; /* White text */
    border: 2px solid #1560bd; /* Highlight border */
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none; /* Remove underline for link */
    transition: all 0.3s ease;
    cursor: pointer;
}

.back-btn:hover {
    background-color: #1560bd; /* Highlight on hover */
    color: #ffffff;
    border-color: #000040;
    transform: scale(1.05); /* Subtle hover effect */
}

    </style>
</head>
<body>


<div class="calculator-container printable" id="printArea">

    {% include "includes/print_header_footer.html" %}

      <div class="btn-container">
    <a href="{% url 'quality_calculators' %}" class="back-btn">Back To Quality Calculators</a>
</div>

    <div class="calculator-header">
        <h1>Acidity Calculator Based On Hydrogen Ion Concentration</h1>
<p>Use this calculator to determine the acidity (pH) of a solution by entering the hydrogen ion concentration [H‚Å∫], or convert between pH, pOH, and [H‚Å∫] as needed. Ensure your inputs are within valid ranges for accurate results.</p>
    </div>

    <div class="calc-content">
        <!-- Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>

            <div class="form-group">
                <label for="calcType">Select Calculation Type</label>
                <select id="calcType" class="form-input" onchange="updateInputFields()">
                    <option value="h">Calculate pH from [H‚Å∫]</option>
                    <option value="oh">Calculate [H‚Å∫] from pH</option>
                    <option value="pOH">Calculate pH from pOH</option>
                </select>
            </div>

            <div class="form-group" id="hInput">
                <label for="hConc">Hydrogen Ion Concentration [H‚Å∫] (mol/L)</label>
                <input type="number" id="hConc" class="form-input" min="0" step="any" placeholder="Enter [H‚Å∫] in mol/L (e.g., 1e-7)">
            </div>

            <div class="form-group hidden" id="ohInput">
                <label for="ohConc">pH Value</label>
                <input type="number" id="ohConc" class="form-input" min="0" max="14" step="any" placeholder="Enter pH (0-14)">
            </div>

            <div class="form-group hidden" id="pOHInput">
                <label for="pOHValue">pOH</label>
                <input type="number" id="pOHValue" class="form-input" min="0" max="14" step="any" placeholder="Enter pOH (0-14)">
            </div>

            <button class="calculate-btn" onclick="calculatePH()">Calculate pH</button>
        </div>

        <!-- Result Card -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="pH illustration">
                <p>Enter your values to calculate the <strong>pH</strong> of the solution.</p>
            </div>

            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>pH Value</h2>
                </div>

                <div class="rate-value" id="phValue">0.0000</div>
                <div class="rate-label">pH</div>

                <div class="result-feedback">
                    <p id="hResult"></p>
                    <p id="ohResult"></p>
                    <p id="pohResult"></p>
                    <p id="classification"></p>
                    <p id="warning" style="color:red; font-weight:bold;"></p>
                </div>

                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

    <div class="note-section">
    <!-- About This Calculator -->
    <div class="note-card">
        <h3>üß™ About This Calculator</h3>
        <p>This calculator helps you determine the <strong>pH</strong> of a solution using the hydrogen ion concentration [H‚Å∫] in mol/L.</p>
        <ul class="note-list">
            <li><strong>Calculate pH from [H‚Å∫]:</strong> Enter the hydrogen ion concentration to get the pH.</li>
            <li><strong>Calculate [H‚Å∫] from pH:</strong> Enter the pH value to get the hydrogen ion concentration.</li>
            <li><strong>Calculate pH from pOH:</strong> Use the relation <strong>pH + pOH = 14</strong> to find pH.</li>
        </ul>
    </div>

    <!-- Why pH is Important -->
    <div class="note-card">
        <h3>üåø Why pH Matters</h3>
        <p>pH is a crucial factor in environmental monitoring, water treatment, and ecosystem health:</p>
        <ul class="note-list">
            <li>Affects metal solubility and nutrient availability.</li>
            <li>Most aquatic life survives only within specific pH ranges.</li>
            <li>Helps detect pollution or chemical imbalances in water.</li>
        </ul>
    </div>

    <!-- What Are We Calculating -->
    <div class="note-card">
        <h3>‚öóÔ∏è What This Calculator Does</h3>
        <ul class="note-list">
            <li><strong>1. pH from [H‚Å∫]:</strong> Converts hydrogen ion concentration into pH.</li>
            <li><strong>2. [H‚Å∫] from pH:</strong> Converts pH back into hydrogen ion concentration.</li>
            <li><strong>3. pH from pOH:</strong> Calculates pH using the relation <strong>pH + pOH = 14</strong>.</li>
        </ul>
    </div>

    <!-- Key Parameters -->
    <div class="note-card">
        <h3>üìå Key Parameters</h3>
        <ul class="note-list">
            <li><strong>[H‚Å∫]</strong> - Hydrogen ion concentration in mol/L</li>
            <li><strong>pH Scale:</strong> 0 (acidic) to 14 (basic), with 7 being neutral</li>
            <li><strong>Temperature:</strong> pH measurements can vary with temperature</li>
        </ul>
    </div>

    <!-- Environmental Applications -->
    <div class="note-card">
        <h3>üíß Environmental Applications</h3>
        <ul class="note-list">
            <li><strong>Drinking Water:</strong> pH 6.5‚Äì8.5 ensures safety and prevents pipe corrosion</li>
            <li><strong>Wastewater:</strong> pH control is crucial for treatment efficiency</li>
            <li><strong>Aquatic Life:</strong> Most fish thrive in pH 6.5‚Äì9.0</li>
            <li><strong>Soil Health:</strong> pH affects nutrient availability for plants</li>
            <li><strong>Industrial Discharges:</strong> Compliance with legal pH limits is required</li>
        </ul>
    </div>

    <!-- Health Impacts -->
    <div class="note-card">
        <h3>‚ö†Ô∏è Environmental & Health Impacts</h3>
        <ul class="note-list">
            <li><strong>Acid Rain:</strong> Low pH damages forests and aquatic systems</li>
            <li><strong>Algal Blooms:</strong> pH changes indicate nutrient pollution events</li>
            <li><strong>Heavy Metals:</strong> Low pH increases solubility of toxic metals in water</li>
        </ul>
    </div>

    <!-- Historical Incidents -->
    <div class="note-card">
        <h3>üìú Historical Examples</h3>
        <ul class="note-list">
            <li><strong>Acid Mine Drainage:</strong> pH as low as 2.0 devastates waterways</li>
            <li><strong>Ocean Acidification:</strong> CO‚ÇÇ increase reduces ocean pH, harming marine life</li>
            <li><strong>Flint Water Crisis:</strong> Improper pH control caused lead contamination</li>
        </ul>
    </div>

    <!-- Regulations -->
    <div class="note-card">
        <h3>üìù Standards & Regulations</h3>
        <p>Monitoring pH is required for regulatory compliance:</p>
        <ul class="note-list">
            <li>EPA NPDES permits: 6‚Äì9 for discharges</li>
            <li>Drinking water: 6.5‚Äì8.5</li>
            <li>Industrial & workplace safety: OSHA pH requirements</li>
        </ul>
    </div>

    <!-- Conclusion -->
    <div class="note-card">
        <h3>‚úÖ Conclusion</h3>
        <p>Measuring pH is vital for safe water, healthy ecosystems, and regulated industrial processes. Understanding pH helps detect pollution, maintain compliance, and protect both humans and the environment.</p>
    </div>
</div>

</div>

<script>
    // Toggle visibility based on selected option
    function updateInputFields() {
        const type = document.getElementById("calcType").value;
        document.getElementById("hInput").classList.add("hidden");
        document.getElementById("ohInput").classList.add("hidden");
        document.getElementById("pOHInput").classList.add("hidden");

    if(type === "h") document.getElementById("hInput").classList.remove("hidden");
    else if(type === "oh") document.getElementById("ohInput").classList.remove("hidden");
    else if(type === "pOH") document.getElementById("pOHInput").classList.remove("hidden");
}

function calculatePH() {
    const type = document.getElementById("calcType").value;
    const resultValue = document.getElementById("resultValue");
    const placeholder = document.getElementById("placeholder");

    let ph, h, poh, oh, classification, warning, errorMsg = "";

    // Validate and compute
    if(type === "h") {
        const hConc = parseFloat(document.getElementById("hConc").value.trim());
        if(isNaN(hConc) || hConc <= 0) { errorMsg = "Enter valid [H‚Å∫] > 0"; }
        else { ph = -Math.log10(hConc); h = hConc; }
    }
    else if(type === "oh") {
        const phInput = parseFloat(document.getElementById("ohConc").value.trim());
        if(isNaN(phInput) || phInput < 0 || phInput > 14) { errorMsg = "Enter valid pH 0-14"; }
        else { ph = phInput; h = Math.pow(10, -ph); }
    }
    else if(type === "pOH") {
        const pOH = parseFloat(document.getElementById("pOHValue").value.trim());
        if(isNaN(pOH) || pOH < 0 || pOH > 14) { errorMsg = "Enter valid pOH 0-14"; }
        else { ph = 14 - pOH; h = Math.pow(10, -ph); }
    }

    // Show result box
    placeholder.classList.add("hidden");
    resultValue.classList.remove("hidden");

    const phDisplay = document.getElementById("phValue");
    const hResult = document.getElementById("hResult");
    const ohResult = document.getElementById("ohResult");
    const pohResult = document.getElementById("pohResult");
    const classificationEl = document.getElementById("classification");
    const warningEl = document.getElementById("warning");

    if(errorMsg) {
        // Show error inside result box
        phDisplay.textContent = "-";
        hResult.textContent = "";
        ohResult.textContent = "";
        pohResult.textContent = "";
        classificationEl.textContent = "";
        warningEl.textContent = errorMsg;
        warningEl.style.color = "red";
        warningEl.style.fontWeight = "bold";
    } else {
        // Compute valid results
        poh = 14 - ph;
        oh = Math.pow(10, -poh);

        if (ph < 3) {
            classification = "Strongly acidic (hazardous)";
            warning = "‚ö† Highly acidic: May be corrosive and unsafe for handling without protection.";
        } else if (ph < 7) {
            classification = "Moderately acidic";
            warning = "";
        } else if (ph === 7) {
            classification = "Neutral";
            warning = "";
        } else if (ph <= 11) {
            classification = "Moderately basic";
            warning = "";
        } else {
            classification = "Strongly basic (hazardous)";
            warning = "‚ö† Highly basic: May be corrosive and unsafe for handling without protection.";
        }

        phDisplay.textContent = ph.toFixed(4);
        hResult.textContent = `[H‚Å∫]: ${h.toExponential(2)} mol/L`;
        ohResult.textContent = `[OH‚Åª]: ${oh.toExponential(2)} mol/L`;
        pohResult.textContent = `pOH: ${poh.toFixed(2)}`;
        classificationEl.textContent = `Classification: ${classification}`;
        warningEl.textContent = warning;
        warningEl.style.color = warning ? "red" : "#000";
        warningEl.style.fontWeight = warning ? "bold" : "normal";
    }
}

    // Friendly feedback text
    function getPHFeedback(pH, classification) {
        if (pH < 3) return '‚ö†Ô∏è Highly acidic: May be corrosive and unsafe for handling without protection.';
        if (pH < 6.5) return '‚ö†Ô∏è Acidic: Might be harmful to living organisms or cause metal corrosion.';
        if (pH <= 7.5) return '‚úÖ Near neutral: Suitable for most biological and environmental conditions.';
        if (pH < 9) return '‚ö†Ô∏è Mildly alkaline: Generally safe, but can affect chemical reactions or aquatic life.';
        if (pH <= 11) return '‚ö†Ô∏è Alkaline: Can be irritating to skin and eyes, handle with care.';
        return '‚ö†Ô∏è Highly alkaline: May be caustic or damaging to tissues and materials.';
    }

    // Add safety recommendations based on pH
    function addSafetyRecommendations(pH) {
        const warningElement = document.getElementById("warning");
        let additionalInfo = "";
        
        if (pH < 4 || pH > 10) {
            additionalInfo += "\n\nüîí Safety Protocols:";
            
            if (pH < 4 || pH > 10) {
                additionalInfo += "\n‚Ä¢ Implement secondary containment for storage";
                additionalInfo += "\n‚Ä¢ Maintain eyewash station and safety shower access";
                additionalInfo += "\n‚Ä¢ Review SDS before handling";
            }
            
            if (pH < 3 || pH > 11) {
                additionalInfo += "\n‚Ä¢ Restrict access to trained personnel only";
                additionalInfo += "\n‚Ä¢ Conduct pre-task risk assessment";
                additionalInfo += "\n‚Ä¢ Implement spill response procedures";
            }
            
            // Regulatory compliance notes
            additionalInfo += "\n\nüìã Regulatory Notes:";
            additionalInfo += "\n‚Ä¢ OSHA 29 CFR 1910.1200: Hazard Communication Standard";
            additionalInfo += "\n‚Ä¢ EPA regulations may apply to discharges (typically require pH 6-9)";
            additionalInfo += "\n‚Ä¢ NFPA 704: Hazard Identification System rating may apply";
        }
        
        warningElement.textContent += additionalInfo;
    }

    // Print function
    function printReport() {
        window.print();
    }

    // Setup listeners on load
    window.onload = function () {
        updateInputFields();
        document.getElementById("calcType").addEventListener('change', updateInputFields);
    };
</script>

    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>

{% endblock %}
