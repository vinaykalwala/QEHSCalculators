{% extends 'base.html' %}
{% block title %}Attendee Training Time Calculator{% endblock %}
{% block content %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendee Training Time Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
       .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
            
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
      .btn-wrapper {
    text-align: center; /* centers inline-block buttons */
    margin-top: 20px;
  }

   .btn-wrapper {
    text-align: center; /* centers the button */
    margin-top: 20px;
  }

  .print-btn {
    display: inline-block;
    background:linear-gradient(#1560bd,#000040);
    color: white;
    padding: 8px 18px;   /* control button size */
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    width: auto !important; /* prevent full width */
  }

  .print-btn:hover {
    background: #1560bd;
  }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

         .btn-container {
    display: flex;
    justify-content: center; /* Horizontally center */
    margin: 30px 0;
}

.back-btn {
    background:linear-gradient(#1560bd,#000040); /* Dark navy background */
    color: #ffffff; /* White text */
    border: 2px solid #1560bd; /* Highlight border */
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none; /* Remove underline for link */
    transition: all 0.3s ease;
    cursor: pointer;
}

.back-btn:hover {
    background-color: #1560bd; /* Highlight on hover */
    color: #ffffff;
    border-color: #000040;
    transform: scale(1.05); /* Subtle hover effect */
}

    </style>
 <div class="btn-container">
    <a href="{% url 'qualitycategory_calculators' %}" class="back-btn">Back To Quality Calculators</a>
</div>

<div class="calculator-container printable" id="printArea">

    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

     
    <div class="calculator-header">
        <h1>Attendee Training Time Calculator</h1>
        <p>Calculate the total time invested in a training session based on the number of attendees and session duration.</p>
    </div>

    <div class="calc-content">
        <!-- Calculator Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>

          <div class="form-group">
    <label for="attendees">Number of Attendees</label>
    <input type="number" id="attendees" class="form-input" min="1" step="any" placeholder="Enter number of attendees">
</div>

<div class="form-group">
    <label for="duration">Training Duration (minutes)</label>
    <input type="number" id="duration" class="form-input" min="1" step="any" placeholder="Enter duration in minutes">
</div>


            <button class="calculate-btn" onclick="calculateTrainingTime()">Calculate Total Time</button>
        </div>

        <!-- Result Section -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/resultimage.png' %}" alt="Training illustration">
                <p>This tool calculates the <strong>total training time</strong> in hours. Enter the number of attendees and session duration to see results.</p>
            </div>

            <div class="result-error hidden" id="resultError">
                <div class="error-icon">❌</div>
                <div class="error-message" id="errorMessage"></div>
            </div>

            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Total Training Time</h2>
                </div>
                <div class="rate-value" id="trainingTimeValue">0.00</div>
                <div class="rate-label"><strong>hours</strong></div>

                <div class="result-feedback" id="interpretationBox">
                <div class="feedback-title">Assessment</div>
                <div class="feedback-content" id="interpretationText">
                <!-- JS will fill this -->
                </div>
                 </div>


                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="window.print()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

   <!-- Notes Section -->
<div class="note-section">

    <!-- About this calculator -->
    <div class="note-card">
        <h3>🔎 About This Calculator</h3>
        <p>
            The <strong>Attendee Training Time Calculator</strong> estimates the total training hours invested by a group of attendees based on the number of participants and session duration in minutes. This helps organizations track compliance, plan resources, and monitor training effectiveness.
        </p>
    </div>

    <!-- Parameters Used -->
    <div class="note-card">
        <h3>⚙️ Parameters Used</h3>
        <ul class="note-list">
            <li><strong>Number of Attendees:</strong> The headcount of participants attending the training session.</li>
            <li><strong>Training Duration:</strong> Length of the training session per attendee, in minutes.</li>
        </ul>
    </div>

    <!-- Input Validation Rules -->
    <div class="note-card">
        <h3>✅ Input Validation Rules</h3>
        <ul class="note-list">
            <li><strong>Number of Attendees:</strong>
                <ul>
                    <li>Required: Cannot be empty.</li>
                    <li>Numeric: Must be a number.</li>
                    <li>Minimum: 1 attendee.</li>
                    <li>Maximum: 500 attendees (split sessions if exceeded).</li>
                    <li>Decimals: Not allowed (headcount must be a whole number).</li>
                    <li>Units: Count of people.</li>
                </ul>
            </li>
            <li><strong>Training Duration (minutes):</strong>
                <ul>
                    <li>Required: Cannot be empty.</li>
                    <li>Numeric: Must be a number.</li>
                    <li>Minimum: 5 minutes.</li>
                    <li>Maximum: 480 minutes (8 hours).</li>
                    <li>Decimals: Allowed for precision.</li>
                    <li>Units: Minutes.</li>
                </ul>
            </li>
            <li><strong>Edge Cases:</strong>
                <ul>
                    <li>Division by zero prevented (attendees and duration must be >0).</li>
                    <li>Non-numeric input blocked.</li>
                    <li>Blank inputs trigger explicit error messages.</li>
                    <li>Attendees >500 or duration >480 → warn user.</li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- Output Validations -->
    <div class="note-card">
        <h3>📊 Output Validations</h3>
        <ul class="note-list">
            <li><strong>Low Training Hours:</strong> &lt;10 hours – Short training effort. Consider extending sessions for deeper impact.</li>
            <li><strong>Moderate Training Hours:</strong> 10–50 hours – Balanced training schedule. Suitable for most medium groups.</li>
            <li><strong>High Training Hours:</strong> &gt;50 hours – Large investment. Ensure breaks and engagement strategies to maintain quality.</li>
            <li><strong>Units:</strong> Output is always reported in hours, rounded sensibly for clarity.</li>
        </ul>
    </div>

    <!-- Governance Principle -->
    <div class="note-card">
        <h3>📐 Governance Principles</h3>
        <p>
            This calculation aligns with international standards for occupational health, safety, and training compliance:
        </p>
        <ul class="note-list">
            <li><strong>ISO 45001:</strong> Provides requirements for occupational health and safety management systems, ensuring safe and effective training programs.</li>
            <li><strong>OHSAS 18001 / ISO 45001:</strong> Emphasizes accurate reporting of training hours for compliance and audit purposes.</li>
            <li><strong>Compliance Rationale:</strong> Training attendance must be accurately recorded, session durations realistic, and headcount whole numbers for regulatory and audit consistency.</li>
        </ul>
    </div>

    <!-- Conclusion -->
    <div class="note-card">
        <h3>💡 Conclusion</h3>
        <p>
            By using this calculator, organizations can quickly determine the total training hours invested, ensuring proper compliance, resource planning, and performance monitoring. It supports audit readiness and helps managers optimize training efficiency while maintaining accurate reporting standards.
        </p>
    </div>

</div>


</div>

<script>
function calculateTrainingTime() {
    const attendees = parseFloat(document.getElementById("attendees").value.trim());
    const duration = parseFloat(document.getElementById("duration").value.trim());

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const outputValue = document.getElementById('trainingTimeValue');

    let errors = [];

    // Basic validations
    if (isNaN(attendees) || attendees <= 0) {
        errors.push("👉 Please enter a valid number of attendees greater than 0.");
    }
    if (isNaN(duration) || duration <= 0) {
        errors.push("👉 Please enter a valid duration in minutes greater than 0.");
    }

  
    if (duration > 1440) {
        errors.push("👉 Training duration should be less than 24 hours (1440 minutes).Training sessions longer than a full day are impractical, and larger values could generate meaningless results.");
    }

    // Show errors if any
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // Perform calculation
    const totalTime = (attendees * duration) / 60;

    // Smart rounding: show 2 decimals for small results, whole numbers for large
    outputValue.textContent = totalTime < 100 ? totalTime.toFixed(2) : Math.round(totalTime);

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');

    // Interpretation feedback
    const interpretationBox = document.getElementById('interpretationBox');
    const interpretationText = document.getElementById('interpretationText');
    let interpretation = "";

    if (totalTime < 10) {
        interpretation = "🔹 Low Training Hours – Short training effort. Consider extending sessions for deeper impact.";
    } else if (totalTime >= 10 && totalTime < 50) {
        interpretation = "🔸 Moderate Training Hours – Balanced training schedule. Suitable for most medium groups.";
    } else {
        interpretation = "✅ High Training Hours – Large investment. Ensure breaks and engagement strategies to maintain quality.";
    }

    interpretationText.innerHTML = interpretation;
    interpretationBox.style.display = "block";
}

</script>
    <script src="{% static 'js/print.js' %}"></script>
    </body>
    </html>
{% endblock %}


<!--
1. Real-World Validation Rules for Inputs
-----------------------------------------------------------------------------------------------------------------

A. Number of Attendees (attendees)

Minimum: 1 (cannot have zero or negative attendees).

Maximum: 500 (practically, large auditoriums might hold more, but for compliance tracking >500 should be broken down into multiple sessions).

Allowed Decimals: ❌ Not allowed → must be an integer (you cannot have “2.5” attendees).

Units: Count of people.

Compliance Rationale: ISO 45001 and OSHA reporting requires training attendance to be based on actual headcount.
--------------------------------------------------------------------------------------------------------------
B. Training Duration (duration)

Minimum: 5 minutes (sessions shorter than this don’t qualify as official training).

Maximum: 480 minutes (8 hours → standard maximum single-day training shift; beyond this indicates incorrect entry or needs session splitting).

Allowed Decimals: ✅ Allowed (e.g., 90.5 minutes if measured digitally).

Units: Minutes.

Compliance Rationale: NFPA, ILO, and OSHA guidelines require realistic training durations for compliance records (no “1 minute fire drill” or “16-hour single session” without breaks).

======================Output Validation & Threshold Logic================================

The Total Training Time (hours) is:

Total Hours = (Attendees * Duration(min))/60
	​

Threshold Categories (for reporting KPIs)

< 10 hours:
Low Training Hours → May indicate insufficient training for compliance requirements.

10 – 50 hours:
Moderate Training Hours → Acceptable for small-medium programs.

> 50 hours:
High Training Hours → Large-scale training investment. Should be verified for realistic session planning.

✔ These ranges reflect how audits classify effort into “low / adequate / extensive”.


=============================Edge Case Validations=======================================

Division by Zero: Already prevented (attendees and duration must be >0).

Non-numeric inputs: Blocked with isNaN().

Decimals in attendees: Disallowed.

Extreme outliers:

Attendees >500 → split sessions.

Duration >480 → warn user (unrealistic).

Blank inputs: Explicit error message → “required”.

======================Why Each Validation Matters (Compliance View)==========================

Min Attendees = 1: Audits reject “zero training” reports.

Max Attendees = 500: Large crowds dilute training effectiveness; records must be credible.

Min Duration = 5 min: Anything below is not “training” (ILO/OSHA).

Max Duration = 480 min: Prevents fatigue violations and aligns with work-time laws.

No decimals for attendees: Because compliance requires headcount, not fractions.

Threshold classification (low, moderate, high): Mirrors audit review style → “is this effort sufficient?”.
-->
