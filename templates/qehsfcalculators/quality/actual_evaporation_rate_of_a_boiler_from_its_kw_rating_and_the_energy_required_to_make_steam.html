{% extends 'base.html' %}
{% block title %}Actual Evaporation Rate Of A Boiler From Its kW Rating And The Energy Required To Be Added To The Feedwater To Make Steam Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actual Evaporation Rate Of A Boiler From Its kW Rating And The Energy Required To Be Added To The Feedwater To Make Steam Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;

            border-radius: 12px;
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

          .btn-container {

    display: flex;
    justify-content: center; /* Horizontally center */
    margin: 30px 0;
}

.back-btn {
    background:linear-gradient(#1560bd,#000040); /* Dark navy background */
    color: #ffffff; /* White text */
    border: 2px solid #1560bd; /* Highlight border */
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none; /* Remove underline for link */
    transition: all 0.3s ease;
    cursor: pointer;
}

.back-btn:hover {
    background-color: #1560bd; /* Highlight on hover */
    color: #ffffff;
    border-color: #000040;
    transform: scale(1.05); /* Subtle hover effect */
}

    </style>
</head>
<body>
     <div class="btn-container">
    <a href="{% url 'qualitycategory_calculators' %}" class="back-btn">Back To Quality Calculators</a>
</div>

   <div class="calculator-container printable" id="printArea">

    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

       

        <div class="calculator-header">
            <h1>Actual Evaporation Rate Of A Boiler From Its kW Rating And The Energy Required To Be Added To The Feedwater To Make Steam Calculator</h1>
            <p>Calculates the actual steam output of a boiler based on its power rating (kW) and the energy required to convert feedwater into steam (kJ/kg)</p>
        </div>

        <div class="calc-content">
            <!-- Calculator Input Card -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="form-group">
                    <label for="Qdot">Boiler Rating (kW)</label>
                    <input type="number" id="Qdot" class="form-input" min="0" placeholder="Enter boiler rating">
                </div>

                <div class="form-group">
                    <label for="energy">Energy Required (kJ/kg)</label>
                    <input type="number" id="energy" class="form-input" min="0" placeholder="Enter energy required">
                </div>

                <button class="calculate-btn" onclick="calculateEvaporationRate()">Calculate Steam Output</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="{% static 'images/resultimage.png' %}" alt="Boiler illustration">
                    <p>This tool calculates the <strong>actual steam output</strong> in kg/h. Enter your boiler rating and energy required to see results.</p>
                </div>

                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">❌</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>

                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Steam Output</h2>
                    </div>
                    <div class="rate-value" id="steamOutputValue">0.00</div>
                    <div class="rate-label"><strong>kg/h</strong></div>
                    
                    <div class="result-feedback">
                        <div class="feedback-title">Assessment</div>
                        <div class="feedback-content" id="boilerFeedback"></div>
                    </div>
                    
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
           <div class="note-card">
    <h3>🔎 About This Calculator</h3>
    <p>
        The <strong>Boiler Evaporation Rate Calculator</strong> estimates how much steam (kg/h) a boiler produces using its power rating (kW) and the energy needed to convert water into steam (kJ/kg). It helps assess efficiency, optimize energy use, and maintain safe operations, with applications in <em>industrial boilers, power plants, environmental impact analysis, and quality & safety control</em>.
    </p> 
</div>

                        

            <div class="note-card">
            <h3>⚙️ Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>Boiler Rating:</strong> The heating power of the boiler, measured in kilowatts (kW), which represents how much energy the boiler can supply.</li>
                    <li><strong>Energy Required:</strong> The heat energy required to convert 1 kg of water into steam, measured in kilojoules per kilogram (kJ/kg).</li>

                </ul>
            </div>
            
          <div class="note-card">
    <h3>✅ Input Validation Rules </h3>
    <ul class="note-list">
        <li>
            <strong>Boiler Rating (Q̇, kW):</strong>
            <ul>
                <li>Required: Cannot be empty. <em>Every calculation needs a boiler rating to compute steam output.</em></li>
                <li>Numeric only: Reject non-numeric input. <em>Letters or symbols will cause errors in the calculation.</em></li>
                <li>Minimum: > 0 kW. <em>Zero or negative ratings are physically impossible.</em></li>
                <li>Maximum realistic: ≤ 300,000 kW. <em>This is the size of the largest industrial boilers; anything higher is likely a typo.</em></li>
                <li>Decimals: Allow up to 1 decimal place. <em>Small packaged boilers may have fractional ratings, e.g., 1500.5 kW.</em></li>
                <li>Units: Must be kW. <em>Do not use MW or HP; using the wrong unit will give incorrect results.</em></li>
            </ul>
        </li>

        <li>
            <strong>Energy Required (kJ/kg):</strong>
            <ul>
                <li>Required: Cannot be empty. <em>The energy per kg of steam is essential to calculate steam production.</em></li>
                <li>Numeric only: Reject non-numeric input. <em>Only numbers are valid; letters or symbols are not allowed.</em></li>
                <li>Minimum realistic: 2000 kJ/kg. <em>Lower values indicate subcooled or very low-pressure steam.</em></li>
                <li>Maximum realistic: 3200 kJ/kg (values up to 3500 kJ/kg may trigger a soft warning). <em>Higher values represent superheated steam; extreme values may be a unit mistake.</em></li>
                <li>Decimals: Allow up to 1 decimal place. <em>Provides realistic precision for thermodynamic data.</em></li>
                <li>Logical consistency: Energy cannot exceed known latent heat for normal operation. <em>Prevents unrealistic inputs that would overestimate steam output.</em></li>
                <li>Division by zero check: Must not be zero. <em>Energy = 0 would cause calculation failure.</em></li>
                <li>Unit clarification: Must be in kJ/kg. <em>Other units (J/g, MJ/kg) will give wrong results.</em></li>
            </ul>
        </li>

        <li>
            <strong>Edge Case Checks:</strong>
            <ul>
                <li>Empty input: Block calculation. <em>All fields are mandatory.</em></li>
                <li>Non-numeric input: Reject with error. <em>Helps avoid invalid calculations.</em></li>
                <li>Q̇ = 0 but Energy > 0: Invalid. <em>No steam can be generated if the boiler output is zero.</em></li>
                <li>Energy = 0: Invalid. <em>Division by zero would crash the calculation.</em></li>
                <li>Energy outside 2000–3500 kJ/kg: Soft warning. <em>May indicate a typo or unit confusion; user should verify input.</em></li>
            </ul>
        </li>

    </ul>
</div>

<div class="note-card">
    <h3>📊 Output Validations</h3>
    <ul class="note-list">
        <li>
            <strong>Steam Output – Low:</strong>
            <ul>
                <li>⚠️ Low Output (< 1,000 kg/h) – Boiler may be underloaded or inefficient.</li>
            </ul>
        </li>
        <li>
            <strong>Steam Output – Moderate:</strong>
            <ul>
                <li>✅ Moderate Output (1,000 – 10,000 kg/h) – Normal industrial range.</li>
            </ul>
        </li>
        <li>
            <strong>Steam Output – High:</strong>
            <ul>
                <li>🔥 High Output (10,000 – 100,000 kg/h) – Large capacity boiler. Ensure strict monitoring.</li>
            </ul>
        </li>
        <li>
            <strong>Steam Output – Very High:</strong>
            <ul>
                <li>🚨 Very High Output (>100,000 kg/h) – Utility-scale boiler. Mandatory compliance with NFPA & ISO standards.</li>
            </ul>
        </li>
    </ul>

    <p><strong>Note:</strong> Any additional warnings detected in the input will be appended to the feedback dynamically.</p>
</div>

          <div class="note-card">
    <h3>📐 Governing Principle</h3>
    <p>
        This calculation is aligned with the <strong>American Society of Mechanical Engineers (ASME)</strong> 
        Boiler and Pressure Vessel Code (BPVC). ASME standards establish the rules for the safe design, 
        construction, and operation of boilers. By applying the energy balance principle, the steam output is 
        determined based on the boiler’s rated power (kW) and the energy required to convert feedwater into 
        steam (kJ/kg). This ensures consistency with globally recognized safety and efficiency guidelines.
    </p>
</div>


          
            <div class="note-card">
                <h3>💡 Conclusion</h3>
                <p>This formula is crucial in industrial settings to monitor and optimize boiler performance. By calculating steam output, engineers can ensure energy efficiency, cost savings, and compliance with environmental standards. Regular assessments help improve operations and reduce fuel wastage while maintaining high safety standards.</p>
            </div>
        </div>
    </div>

    <script>
       function calculateEvaporationRate() {
    const Qdot = document.getElementById("Qdot").value.trim();
    const energy = document.getElementById("energy").value.trim();

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const outputValue = document.getElementById('steamOutputValue');
    const feedbackBox = document.getElementById('boilerFeedback'); 

    let errors = [];
    let warnings = [];

    // ✅ Boiler rating validation
    if (Qdot === "") {
        errors.push("👉 Please enter the boiler rating (kW).");
    } else if (isNaN(Qdot)) {
        errors.push("👉 Boiler rating must be a number.");
    } else if (parseFloat(Qdot) <= 0) {
        errors.push("👉 Boiler rating must be greater than 0.");
    } else if (parseFloat(Qdot) > 300000) {
        errors.push("👉 Boiler rating exceeds realistic industrial maximum (>300,000 kW). Please recheck input.");
    }

    // ✅ Energy required validation
    if (energy === "") {
        errors.push("👉 Please enter the energy required (kJ/kg).");
    } else if (isNaN(energy)) {
        errors.push("👉 Energy required must be a number.");
    } else if (parseFloat(energy) <= 0) {
        errors.push("👉 Energy required must be greater than 0.");
    } else if (parseFloat(energy) < 2000 || parseFloat(energy) > 3500) {
        warnings.push("⚠️ Energy required value is outside normal range (2000–3500 kJ/kg). Check units and inputs.");
    }

    // Show errors
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    const QdotNum = parseFloat(Qdot);
    const energyNum = parseFloat(energy);

    // Prevent divide by zero
    if (energyNum === 0) {
        errorMessage.innerHTML = "❌ Energy required cannot be zero (division by zero).";
        errorBox.classList.remove("hidden");
        return;
    }

    // ✅ Calculate steam output
    const steamOutput = (QdotNum * 3600) / energyNum;
    outputValue.textContent = steamOutput.toFixed(4);

    // ✅ Feedback messages
    let feedback = "";
    if (steamOutput < 1000) {
        feedback = "⚠️ Low Output  – Boiler may be underloaded or inefficient.";
    } else if (steamOutput < 10000) {
        feedback = "✅ Moderate Output  – Normal industrial range.";
    } else if (steamOutput < 100000) {
        feedback = "🔥 High Output  – Large capacity boiler. Ensure strict monitoring.";
    } else {
        feedback = "🚨 Very High Output  – Utility-scale boiler. Mandatory compliance with NFPA & ISO standards.";
    }

    if (warnings.length > 0) {
        feedback += " | " + warnings.join(" ");
    }

    feedbackBox.textContent = feedback;

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- 
=========================Input Validation Rules (QEHS / Fire Safety Context)===================
🔹 Boiler Rating (Q̇, kW)

Required (cannot be empty).

Minimum: > 0 kW (negative/zero is physically impossible).

Maximum realistic: ≤ 300,000 kW (≈ largest industrial utility boilers).

Decimals: Accept up to 1 decimal (kW ratings typically whole numbers, but small packaged boilers may use decimals).

Units: Must be kW, not MW or HP — clarify in label/tooltips.

============Energy Required (kJ/kg)============================

Required.

Minimum realistic range: 2000 kJ/kg (subcooled steam) – 3200 kJ/kg (superheated).

Reject unrealistic values: <2000 or >3500 → must warn user (entry error or wrong unit).

Decimals: Allow up to 1 decimal (thermodynamic tables usually quoted this way).

Logical consistency: Cannot be higher than known latent heat values under normal boiler operation.
================== Output Validation & Thresholds============================

Formula:


m = ((Q' * 3600) / (Energy_required))


================= Validation:=====================

Steam output must be positive.

Steam output must not exceed safe design capacity → if > 200,000 kg/h, trigger a warning.

Ensure denominator ≠ 0 (division by zero risk).

======================Interpretation Bands:===============================

< 1,000 kg/h → Small boiler, lab/pilot unit, or underloaded → ⚠️ monitor for inefficiency.

1,000 – 10,000 kg/h → Medium industrial boiler (normal safe range).

10,000 – 100,000 kg/h → Large industrial/utility → 🔥 high capacity, ensure safety controls.

> 100,000 kg/h → Very large utility boilers → 🚨 additional risk controls, compliance audits mandatory.

================Edge Case Validations==================

Empty input → block calculation.

Non-numeric input → reject.

Qdot = 0 but energy > 0 → invalid (no steam generated).

Energy = 0 → invalid (division by zero).

Energy outside 2000–3500 kJ/kg → soft warning (possible input error or unit confusion).

Steam output exceeding industry benchmarks → display a ⚠️ “review” message.
-->