{% extends 'base.html' %}
{% block title %}Boiler Horse Power From Heat Transfer Area Calculator{% endblock %}
{% block content %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boiler Horse Power From Heat Transfer Area Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
       .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
                        justify-content: center;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
      .btn-wrapper {
    text-align: center; /* centers inline-block buttons */
    margin-top: 20px;
  }

   .btn-wrapper {
    text-align: center; /* centers the button */
    margin-top: 20px;
  }

  .print-btn {
    display: inline-block;
    background:linear-gradient(#1560bd,#000040);
    color: white;
    padding: 8px 18px;   /* control button size */
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    width: auto !important; /* prevent full width */
  }

  .print-btn:hover {
    background: #1560bd;
  }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

        .btn-container {
    display: flex;
    justify-content: center; /* Horizontally center */
    margin: 30px 0;
}

.back-btn {
    background:linear-gradient(#1560bd,#000040); /* Dark navy background */
    color: #ffffff; /* White text */
    border: 2px solid #1560bd; /* Highlight border */
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none; /* Remove underline for link */
    transition: all 0.3s ease;
    cursor: pointer;
}

.back-btn:hover {
    background-color: #1560bd; /* Highlight on hover */
    color: #ffffff;
    border-color: #000040;
    transform: scale(1.05); /* Subtle hover effect */
}
    </style>
<div class="btn-container">
    <a href="{% url 'qualitycategory_calculators' %}" class="back-btn">Back To Quality Calculators</a>
</div>

<div class="calculator-container printable" id="printArea">

    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

    

    <div class="calculator-header">
        <h1>Boiler Horse Power From Heat Transfer Area Calculator</h1>
        <p>Calculate Boiler Horsepower (BHP) based on heat transfer area.</p>
    </div>

    <div class="calc-content">
        <!-- Calculator Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>

            <div class="form-group">
                <label for="heatTransfer"><strong>Heat Transfer Area (ft²):</strong></label>
                <input type="number" id="heatTransfer" class="form-input" min="1" placeholder="Enter heat transfer area">
            </div>


            <button class="calculate-btn" onclick="calculateBoilerHP()">Calculate BoilerHP</button>
        </div>

        <!-- Result Section -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Boiler illustration">
                <p>This tool calculates the <strong>total Boiler Horsepower </strong></p>
            </div>

            <div class="result-error hidden" id="resultError">
                <div class="error-icon">❌</div>
                <div class="error-message" id="errorMessage"></div>
            </div>

            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Boiler Horsepower</h2>
                </div>

                <div class="rate-value" id="bhpValue">0.00</div>
                <div class="rate-label">HP</div>

                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="window.print()">Print Report</button>
                </div>
            </div>
        </div>
    </div>



    <div class="note-section">



                <div class="note-card">
            <h3><strong>📘 About This Calculator</strong></h3>
            <p>
                This tool estimates <strong>Boiler Horsepower (BHP) </strong>from the heat transfer area. By dividing the area (ft²) by 17, it provides a quick measure of boiler capacity. Widely used in industries and power plants, it helps engineers with performance monitoring, efficiency checks, and capacity planning.
            </p>
            </div>

            <div class="note-card">
  <h3>📌 Input Validation</h3>
  <ul class="note-list">
    <li><strong>Input:</strong> Heat Transfer Area (ft²), required, positive number.</li>
    <li><strong>Format:</strong> Decimals & scientific notation allowed; max 3 decimals.</li>
    <li><strong>Range:</strong> 1 – 200,000 ft² (hard limits).</li>
      </ul>
</div>


        <div class="note-card">
            <h3><strong>Explanation of Parameters:</strong></h3>
             <ul class = "note-list">
        <li><strong>Heat Transfer (BTU/hr):</strong> The amount of heat energy transferred per hour.</li>
        <li><strong>Boiler Horsepower (HP):</strong> The measure of the boiler’s power output.</li>
        <li><strong>Constant Value (17):</strong> A conversion factor used to standardize the calculation.</li>
    </ul>
        </div>
        <div class="note-card">
            <h3><strong>About the Constant Value (17):</strong></h3>
            <p>The number 17 represents the amount of heat required to produce one boiler horsepower.
        It is derived from the historical definition where 1 boiler HP equals 33,475 BTU/hr.
        For simplified calculations, 17 square feet per boiler HP is commonly used in industrial applications.</p>
    </div>

        <div class="note-card">
            <h3><strong>Real-Life Applications:</strong></h3>
            <ul>
        <li><strong>Industrial Boilers:</strong> Used in factories and power plants for steam production.</li>
        <li><strong>HVAC Systems:</strong> Helps determine boiler efficiency in heating systems.</li>
        <li><strong>Power Plants:</strong> Calculates boiler capacity in large-scale energy production.</li>
        <li><strong>Manufacturing:</strong> Ensures optimal energy transfer in process heating applications.</li>
          </ul>
        </div>

                <div class="note-card">
                 <h3><strong>Conclusion:</strong></h3>
    <p>The boiler horsepower formula provides a simple yet effective way to estimate the power of a boiler based on its heat transfer capability. By using the constant value of 17, engineers and technicians can make quick calculations for boiler performance, efficiency, and capacity planning in industrial settings.</p>

                </div>
    </div>


</div>
<script>
function calculateBoilerHP() {
  const inputEl = document.getElementById("heatTransfer");
  const errorBox = document.getElementById("resultError");
  const errorMessage = document.getElementById("errorMessage");
  const placeholder = document.getElementById("placeholder");
  const resultValue = document.getElementById("resultValue");
  const outputValue = document.getElementById("bhpValue");

  // ---- Configurable constants (document these in your SOP) ----
  const MIN_AREA_FT2 = 1;            // hard minimum
  const MAX_AREA_FT2 = 200000;       // hard maximum to catch typos
  const SOFT_LOW_FT2 = 10;           // show warning if below
  const SOFT_HIGH_FT2 = 50000;       // show warning if above
  const FT2_PER_HP = 17;             // empirical factor -> 1 HP ≈ 17 ft² heating surface
  const MAX_DECIMALS = 3;            // precision limit for area input
  // -------------------------------------------------------------

  // Helpers
  const clearError = () => {
    errorMessage.innerHTML = "";
    errorBox.classList.add("hidden");
  };
  const showError = (msgs) => {
    errorMessage.innerHTML = msgs.join("<br>");
    errorBox.classList.remove("hidden");
    placeholder.classList.add("hidden");
    resultValue.classList.add("hidden");
  };
  const countDecimals = (valueStr) => {
    // handle scientific notation by converting to a normal number string first
    if (!/e/i.test(valueStr)) {
      const idx = valueStr.indexOf(".");
      return idx >= 0 ? (valueStr.length - idx - 1) : 0;
    }
    // convert and then count
    const n = Number(valueStr);
    if (!Number.isFinite(n)) return Infinity;
    const parts = n.toString().split(".");
    return parts.length === 2 ? parts[1].length : 0;
  };

  let errors = [];
  let warnings = [];

  // Raw input string (so we can validate before parse)
  const raw = (inputEl.value || "").trim();

  // Required
  if (raw.length === 0) {
    errors.push("👉 Heat Transfer Area (ft²) is required.");
  }

  // Numeric form only (allow decimals and scientific notation)
  // Disallow commas and stray characters
  if (raw.length > 0 && !/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/.test(raw)) {
    errors.push("👉 Enter a valid numeric value (decimals allowed; no commas or symbols).");
  }

  // Parse and numeric checks
  const area = Number(raw);
  if (raw.length > 0 && !Number.isFinite(area)) {
    errors.push("👉 Value must be a finite number (not Infinity/NaN).");
  }

  // Decimal places
  if (raw.length > 0 && countDecimals(raw) > MAX_DECIMALS) {
    errors.push(`👉 Use at most ${MAX_DECIMALS} decimal places for area.`);
  }

  // Range checks
  if (Number.isFinite(area)) {
    if (area <= 0) errors.push("👉 Heat Transfer Area must be greater than 0 ft².");
    if (area > 0 && area < MIN_AREA_FT2) {
      errors.push(`👉 Minimum allowed area is ${MIN_AREA_FT2.toLocaleString()} ft².`);
    }
    if (area > MAX_AREA_FT2) {
      errors.push(`👉 Maximum allowed area is ${MAX_AREA_FT2.toLocaleString()} ft². Check units (ft² vs m²) and scope.`);
    }
  }

  // If any hard errors, show and exit
  if (errors.length > 0) {
    showError(errors);
    return;
  } else {
    clearError();
  }

  // Safety: denominator guard
  if (!Number.isFinite(FT2_PER_HP) || FT2_PER_HP <= 0) {
    showError(["Internal configuration error: FT² per HP factor must be a positive number."]);
    return;
  }

  // Compute BHP
  const bhp = area / FT2_PER_HP;

  // Soft warnings for plausibility
  if (area < SOFT_LOW_FT2) {
    warnings.push("⚠️ Area is unusually low for a boiler. Verify the input and units (ft²).");
  }
  if (area > SOFT_HIGH_FT2) {
    warnings.push("⚠️ Area is very large. Verify units (ft² vs m²) and whether this covers multiple units.");
  }
  if (bhp < 1) {
    warnings.push("⚠️ Estimated capacity is < 1 HP; this is below typical industrial boiler scales.");
  }
  if (bhp > 10000) {
    warnings.push("⚠️ Estimated capacity exceeds 10,000 HP; confirm heating surface and units.");
  }

  // Update result (2 decimals for display)
  outputValue.textContent = bhp.toFixed(2);
  placeholder.classList.add("hidden");
  resultValue.classList.remove("hidden");

  // Show warnings (non-blocking) in the existing error box as informational text
  if (warnings.length > 0) {
    errorMessage.innerHTML = warnings.join("<br>");
    errorBox.classList.remove("hidden");
    // (Optional) add a CSS class like 'warning' to style this differently from errors.
    // e.g., errorBox.classList.add("warning");
  } else {
    clearError();
  }
}
</script>


    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}
<!--

Input: Heat Transfer Area (ft²)

Required: Cannot be empty.

Type: Positive real number only (no text, commas, or symbols).

Format: Allow decimals and scientific notation (e.g., 1.2e3).

Decimals: Up to 3 decimal places allowed.

Range (hard limits):

Minimum: 1 ft² (anything smaller not meaningful).

Maximum: 200,000 ft² (catch fat-finger errors or wrong units).

Plausibility checks (soft warnings):

<10 ft² → unusually low → warn user to recheck units.

50,000 ft² → unusually high → warn about ft² vs. m² confusion.

Output: Boiler Horsepower (HP)

Formula:

BHP = (Heat Transfer Area (ft²))/17



Display precision: 2 decimal places.

Sanity checks:

BHP < 1 → below typical industrial boiler scale.

BHP > 10,000 → unusually high for single boiler, warn to confirm units.

Division safety: Denominator (17) must remain a positive constant.

2) Comprehensive input validation rules

Field: Heat Transfer Area (ft²)

Type & unit: Positive real number; unit must be square feet (ft²).

Required: Must be provided.

Allowed format: Decimal numeric only; disallow text, ±, currency, thousands separators. Scientific notation is allowed (e.g., 1.2e3) but must resolve to a finite number.

Decimals: Up to 3 decimal places (engineering-reasonable precision for area inputs).

Range (hard validation):

Minimum: 1 ft² (anything smaller isn’t meaningful for boiler heating surface in industrial/comm HVAC contexts).

Maximum: 200,000 ft² (upper bound to catch fat-finger inputs; even very large utility boilers are seldom above this heating surface in one unit).

Plausibility (soft guidance/warning, not a block):

< 10 ft²: Likely not a conventional boiler; warn user this is below typical packaged boiler surfaces.

> 50,000 ft²: Uncommon; warn to double-check units (ft² vs m²) and system scope (single unit vs train).

Cross-field dependencies: N/A (single input).

UI text: Make sure label/help reads “Heat Transfer Area (ft²)” and your notes do not call it BTU/hr.

General numeric hygiene (applies to all number fields)

Reject NaN, Infinity, -Infinity.

Trim whitespace; reject empty/blank input.

Coerce commas to dots only if you explicitly support EU decimals; otherwise block commas.

Disallow leading/trailing non-numeric characters.

3) Edge-case validations to add

Empty / whitespace: “Heat transfer area is required.”

Zero or negative: “Must be > 0.”

Too many decimals: More than 3 dp → reject with message.

Out-of-range: <1 or >200,000 ft² → block with clear reason.

Extreme outliers (soft warnings): <10 ft² or >50,000 ft² → compute but display a non-blocking warning to re-check units/scope.

Scientific notation mishandled by browser: Parse safely and verify Number.isFinite(value).

Accidental unit mix-up: If BHP result is > 10,000 HP (rare in single packaged units), show a warning to check whether the input was in m² instead of ft² (m² to ft² factor ≈ 10.764).

Division safety: Constant denominator must be non-zero, numeric (guard against accidental edits/config).

4) Output validation logic & thresholds (audit-friendly)

Computation: BHP = Area / 17.

Display precision: Show 2 decimal places to the user (HP is a capacity KPI; 2 dp is readable and adequate). Keep internal value at full precision if you later export/print.

Result sanity flags (non-blocking):

BHP < 1 HP: “Below typical industrial boiler scale—likely a lab/bench unit or input error.”

BHP > 10,000 HP: “Unusually high for a single unit—verify area and units.”

Compliance disclaimer (in your notes/print): “This is an estimate based on the area-rule (17 ft²/HP). For regulatory reporting (OSHA/ISO 45001/NFPA/air permits), use manufacturer nameplate or BTU/hr basis (33,475 BTU/hr per BHP).”

Why this matters: ISO 45001 and OSHA data integrity expectations require correct units, documented assumptions, and validation to prevent decisions based on erroneous inputs. Auditable KPIs must be consistent, traceable, and not misleadin
-->