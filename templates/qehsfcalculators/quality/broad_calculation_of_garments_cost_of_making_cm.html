{% extends 'base.html' %}
{% block title %}Broad Calculation of Garments Cost of Making (CM){% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Broad Calculation of Garments Cost of Making (CM)</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
<<<<<<< HEAD
            padding: 0 20px;
=======
            padding:0 20px;
>>>>>>> 06383df6256b0c8e5d636769c537cdff1bc85bc9
            border-radius: 12px;
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 500px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }
        
        .input-group {
            display: flex;
            align-items: center;
        }
        
        .input-group .form-input {
            border-radius: 10px 0 0 10px;
        }
        
        .input-group-append {
            background: #e9ecef;
            padding: 14px 12px;
            border: 1px solid #ddd;
            border-left: none;
            border-radius: 0 10px 10px 0;
            color: #495057;
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 500px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }
        
        .result-breakdown {
            width: 100%;
            margin-top: 20px;
            text-align: left;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .breakdown-item:last-child {
            border-bottom: none;
            font-weight: bold;
            color: #1560bd;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        .hidden { 
            display: none; 
        }
<<<<<<< HEAD


               .btn-container {
    display: flex;
    justify-content: center; /* Horizontally center */
    margin: 30px 0;
}

.back-btn {
    background:linear-gradient(#1560bd,#000040); /* Dark navy background */
    color: #ffffff; /* White text */
    border: 2px solid #1560bd; /* Highlight border */
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none; /* Remove underline for link */
    transition: all 0.3s ease;
    cursor: pointer;
}

.back-btn:hover {
    background-color: #1560bd; /* Highlight on hover */
    color: #ffffff;
    border-color: #000040;
    transform: scale(1.05); /* Subtle hover effect */
}
=======
        
        .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }
        
        .toggle-advanced {
            color: #ffc107;
            background: transparent;
            border: none;
            text-decoration: underline;
            cursor: pointer;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .advanced-settings {
            border-top: 1px dashed rgba(255,255,255,0.3);
            padding-top: 15px;
            margin-top: 15px;
        }
>>>>>>> 06383df6256b0c8e5d636769c537cdff1bc85bc9
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'qualitycategory_calculators' %}" class="back-btn">Back To Quality Calculators</a>
    </div>

    <div class="calculator-container printable" id="printArea">
        {% include "includes/print_header_footer.html" %}

            <div class="btn-container">
    <a href="{% url 'quality_calculators' %}" class="back-btn">Back To Quality Calculators</a>
</div>


        <div class="calculator-header">
            <h1>Broad Calculation of Garments Cost of Making (CM)</h1>
            <p>Calculate the cost of making garments based on production parameters in <strong>‚Çπ (Rupees)</strong></p>
        </div>

        <div class="calc-content">
            <!-- Calculator Input Card -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="form-group">
                    <label for="expenditure">Monthly Expenditure (‚Çπ)</label>
                    <div class="input-group">
                        <input type="number" id="expenditure" class="form-input" placeholder="Enter monthly expenditure">
                    </div>
                </div>

                <div class="form-group">
                    <label for="machines">Number of Machines</label>
                    <input type="number" id="machines" class="form-input" min="1" placeholder="Enter total machines">
                </div>

                <div class="form-group">
                    <label for="runningMachines">Qty of Running Machines</label>
                    <input type="number" id="runningMachines" class="form-input" min="1" placeholder="Enter running machines">
                </div>

                <div class="form-group">
                    <label for="production">Production Capacity per Hour (pcs)</label>
                    <input type="number" id="production" class="form-input" min="1" placeholder="Enter pcs per hour per machine">
                </div>

                <div class="form-group">
                    <label for="efficiency">Production Efficiency (%)</label>
                    <div class="input-group">
                        <input type="number" id="efficiency" class="form-input" value="80" min="1" max="100">
                    </div>
                </div>

                <div class="form-group">
                    <label for="piecesPerDozen">Total Pieces in a Dozen</label>
                    <input type="number" id="piecesPerDozen" class="form-input" value="12" min="1" max="12">
                </div>
                
                <button class="toggle-advanced" onclick="toggleAdvanced()">+ Advanced Settings</button>
                
                <div class="advanced-settings hidden" id="advancedSettings">
                    <div class="form-group">
                        <label for="workingDays">Working Days per Month</label>
                        <input type="number" id="workingDays" class="form-input" value="26" min="1" max="31">
                    </div>
                    
                    <div class="form-group">
                        <label for="workingHours">Working Hours per Day</label>
                        <div class="input-group">
                            <input type="number" id="workingHours" class="form-input" value="8" min="1" max="24">
                        </div>
                    </div>
                </div>

                <button class="calculate-btn" onclick="calculateCM()">Calculate CM</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Boiler illustration">
                    <p>This tool calculates the <strong>Cost of Making (CM)</strong> for garments in ‚Çπ per dozen. Enter your production data to see results.</p>
                 </div>

                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>

                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Cost of Making (CM)</h2>
                    </div>
                    <div class="rate-value" id="cmValue">0.00</div>
                    <div class="rate-label"> per dozen (‚Çπ)</div>
                    
                    <div class="result-breakdown" id="breakdown">
                        <div class="breakdown-item">
                            <span>Daily Expenditure:</span>
                            <span id="dailyExpenditure">0.00 ‚Çπ</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Daily Production:</span>
                            <span id="dailyProduction">0 pcs</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Cost per Piece:</span>
                            <span id="costPerPiece">0.00 ‚Çπ</span>
                        </div>
                        <div class="breakdown-item">
                            <span>CM per Dozen:</span>
                            <span id="cmPerDozen">0.00 ‚Çπ</span>
                        </div>
                    </div>
                    
                    <div class="result-feedback">
                        <div class="feedback-title">Interpretation</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>

                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

<<<<<<< HEAD
        <!-- Notes Section -->
        <div class="note-section">
            <div class="note-card">
                <h3>üîé About This Calculator</h3>
                <p>
                    This calculator estimates the <strong>Cost of Making (CM)</strong> of garments per dozen based on 
        monthly expenditure, machines, and production capacity. It helps manufacturers assess 
        production costs, set accurate pricing, and improve efficiency.</p> 
            </div>


      <div class="note-card">
  <h3>üìå Input Validation</h3>
  <ul class="note-list">
    <li><strong>Expenditure:</strong> > 0, ‚â§ ‚Çπ100M, 2 decimals.</li>
    <li><strong>Machines:</strong> 1‚Äì10,000 (integer).</li>
    <li><strong>Running Machines:</strong> ‚â•1, ‚â§ total machines.</li>
    <li><strong>Prod/hr:</strong> 1‚Äì500 pcs (integer).</li>
    <li><strong>Pieces/Dozen:</strong> 1‚Äì12 (default 12).</li>
  </ul>
</div>


            <div class="note-card">
                <h3>‚ùì Explanation of Parameters</h3>
                <ul class="note-list">
                    <li><strong>Monthly Total Expenditure:</strong> The total cost  spent on manufacturing per month.</li>
        <li><strong>Qty of Running Machines:</strong> The number of machines currently running in production.</li>
        <li><strong>Number of Machines:</strong> The total number of machines used for production.</li>
        <li><strong>Production Capacity per Hour:</strong> The number of garments a machine can produce in one hour.</li>
        <li><strong>Total Pieces per Dozen:</strong> The total garments considered per dozen (usually 12 but can vary).</li>
    </ul>
            </div>

            

            <div class="note-card">
                <h3>üìä Real-Life Applications</h3>
                <ul class="note-list">
                    <li>Used in garment factories to estimate production costs.</li>
        <li>Helps manufacturers optimize costs and pricing strategies.</li>
        <li>Used in lean manufacturing to reduce wastage and increase efficiency.</li>
    </ul>
            </div>
            
            <div class="note-card">
                <h3>üí° Conclusion</h3>
            <p>
        This formula is crucial for the apparel industry, allowing manufacturers to determine production costs effectively.
        A well-calculated CM helps in cost-cutting and profit maximization.
    </p>
</div>
        </div>
    </div>
<script>function calculateCM() {
    const expenditure = document.getElementById('expenditure').value.trim();
    const machines = document.getElementById('machines').value.trim();
    const runningMachines = document.getElementById('runningMachines').value.trim();
    const production = document.getElementById('production').value.trim();
    const piecesPerDozen = document.getElementById('piecesPerDozen').value.trim();

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const cmValue = document.getElementById('cmValue');
    const feedbackContent = document.getElementById('feedbackContent');

    let errors = [];

    // --- Validation ---
    const expNum = parseFloat(expenditure);
    if (!expenditure || isNaN(expNum) || expNum <= 0) {
        errors.push("üëâ Monthly Expenditure must be greater than 0.");
    } else if (expNum > 100000000) {
        errors.push("üëâ Monthly Expenditure seems too high (>‚Çπ100M). Recheck input.");
    }

    const machinesNum = parseInt(machines);
    if (!machines || isNaN(machinesNum) || machinesNum <= 0) {
        errors.push("üëâ Number of Machines must be a positive integer.");
    } else if (machinesNum > 10000) {
        errors.push("üëâ Number of Machines cannot exceed 10,000 (unrealistic).");
    }

    const runningMachinesNum = parseInt(runningMachines);
    if (!runningMachines || isNaN(runningMachinesNum) || runningMachinesNum <= 0) {
        errors.push("üëâ Running Machines must be a positive integer.");
    } else if (runningMachinesNum > machinesNum) {
        errors.push("üëâ Running Machines cannot exceed Total Machines.");
    }

    const productionNum = parseInt(production);
    if (!production || isNaN(productionNum) || productionNum <= 0) {
        errors.push("üëâ Production Capacity must be greater than 0.");
    } else if (productionNum > 500) {
        errors.push("üëâ Production Capacity per Hour seems too high (>500 pcs/hr).");
    }

    const piecesPerDozenNum = parseInt(piecesPerDozen);
    if (!piecesPerDozen || isNaN(piecesPerDozenNum) || piecesPerDozenNum <= 0) {
        errors.push("üëâ Pieces per Dozen must be a positive integer.");
    } else if (piecesPerDozenNum > 12) {
        errors.push("üëâ Pieces per Dozen cannot exceed 12.");
    }

    // --- Error Handling ---
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // --- Corrected Formula ---
    const dailyExpenditure = expNum / 26;
    const dailyProduction = runningMachinesNum * productionNum * 8;
    const CM = (dailyExpenditure / dailyProduction) * (12 / piecesPerDozenNum);

    // --- Output Validation ---
    if (CM <= 0 || !isFinite(CM)) {
        errorMessage.innerHTML = "‚ùå Invalid calculation. Check your inputs.";
        errorBox.classList.remove("hidden");
        return;
    }

    // Show result
    cmValue.textContent = CM.toFixed(2);

    // Feedback
    let feedback = "";
    if (CM < 50) {
        feedback = "‚úÖ Efficient cost structure! Production costs are well optimized.";
    } else if (CM >= 50 && CM <= 100) {
        feedback = "‚öñÔ∏è Average cost structure. Review efficiency opportunities.";
    } else {
        feedback = "‚ö†Ô∏è High cost structure! Consider efficiency improvements.";
    }

    feedbackContent.textContent = feedback;

=======
       <!-- Notes Section -->
<div class="note-section">
    <div class="note-card">
        <h3>üîé About This Calculator</h3>
        <p>
            This calculator estimates the <strong>Cost of Making (CM)</strong> of garments per dozen in <strong>‚Çπ (Rupees)</strong>. 
            It helps manufacturers determine production costs, set pricing accurately, and improve efficiency. 
            The calculation accounts for both basic production parameters and advanced settings like working days, working hours, and efficiency percentage.
        </p> 
    </div>

    <div class="note-card">
        <h3>‚ùì Explanation of Parameters</h3>
        <ul class="note-list">
            <li><strong>Monthly Expenditure (‚Çπ):</strong> Total cost spent on manufacturing per month, including labor, utilities, and overheads.</li>
            <li><strong>Number of Machines:</strong> Total machines available for production in the factory.</li>
            <li><strong>Running Machines:</strong> Number of machines currently operational. This cannot exceed the total number of machines.</li>
            <li><strong>Production Capacity per Hour (pcs):</strong> The number of garments a single machine can produce in one hour at 100% efficiency.</li>
            <li><strong>Production Efficiency (%):</strong> The actual efficiency compared to the maximum capacity. For example, if a machine runs at 80% efficiency, it produces 80% of its maximum output.</li>
            <li><strong>Total Pieces per Dozen:</strong> Garments considered per dozen. Typically 12, but can be adjusted if needed.</li>
            <li><strong>Working Days per Month:</strong> (Advanced Setting) The number of days the factory operates per month. Default is 26.</li>
            <li><strong>Working Hours per Day:</strong> (Advanced Setting) The number of hours each machine operates per day. Default is 8.</li>
        </ul>
    </div>

   

    <div class="note-card">
        <h3>üìä Real-Life Applications</h3>
        <ul class="note-list">
            <li>Estimate production costs in ‚Çπ to set accurate pricing for garments.</li>
            <li>Identify inefficiencies in production, such as low machine utilization or low efficiency.</li>
            <li>Support lean manufacturing strategies to reduce wastage and improve profitability.</li>
            <li>Plan monthly budgets by understanding the impact of running fewer machines or reducing working hours.</li>
        </ul>
    </div>

    <div class="note-card">
        <h3>üí° Tips for Accurate Results</h3>
        <ul class="note-list">
            <li>Ensure all inputs reflect actual production conditions.</li>
            <li>Use the advanced settings if your factory does not operate standard 26 days or 8 hours/day.</li>
            <li>Adjust production efficiency based on machine downtime or operator skill levels.</li>
            <li>Compare CM results across different production scenarios to optimize costs.</li>
        </ul>
    </div>
    
    <div class="note-card">
        <h3>üí° Conclusion</h3>
        <p>
            Accurate CM calculation in ‚Çπ is essential for profit maximization and cost control in the apparel industry. 
            Using both basic and advanced settings ensures realistic estimates, allowing manufacturers to make informed decisions about pricing, production planning, and efficiency improvements.
        </p>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const now = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    if(document.getElementById('printDate')){
        document.getElementById('printDate').textContent = now.toLocaleDateString('en-IN', options);
    }
});

function toggleAdvanced() {
    const advancedSettings = document.getElementById('advancedSettings');
    const toggleBtn = document.querySelector('.toggle-advanced');
    
    if (advancedSettings.classList.contains('hidden')) {
        advancedSettings.classList.remove('hidden');
        toggleBtn.textContent = '- Advanced Settings';
    } else {
        advancedSettings.classList.add('hidden');
        toggleBtn.textContent = '+ Advanced Settings';
    }
}

function calculateCM() {
    const expenditure = parseFloat(document.getElementById('expenditure').value);
    const machines = parseFloat(document.getElementById('machines').value);
    const runningMachines = parseFloat(document.getElementById('runningMachines').value);
    const production = parseFloat(document.getElementById('production').value);
    const efficiency = parseFloat(document.getElementById('efficiency').value);
    const piecesPerDozen = parseFloat(document.getElementById('piecesPerDozen').value);
    const workingDays = parseFloat(document.getElementById('workingDays').value) || 26;
    const workingHours = parseFloat(document.getElementById('workingHours').value) || 8;

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const cmValue = document.getElementById('cmValue');
    const feedbackContent = document.getElementById('feedbackContent');
    const dailyExpenditureEl = document.getElementById('dailyExpenditure');
    const dailyProductionEl = document.getElementById('dailyProduction');
    const costPerPieceEl = document.getElementById('costPerPiece');
    const cmPerDozenEl = document.getElementById('cmPerDozen');

    let errors = [];

    // Validation
    if (isNaN(expenditure) || expenditure <= 0) errors.push("üëâ Monthly expenditure must be greater than 0 ‚Çπ.");
    if (isNaN(machines) || machines <= 0) errors.push("üëâ Number of machines must be greater than 0.");
    if (isNaN(runningMachines) || runningMachines <= 0 || runningMachines > machines) 
        errors.push("üëâ Running machines must be greater than 0 and cannot exceed total machines.");
    if (isNaN(production) || production <= 0) errors.push("üëâ Production capacity per hour must be greater than 0.");
    if (isNaN(efficiency) || efficiency <= 0 || efficiency > 100) errors.push("üëâ Efficiency must be between 1% and 100%.");
    if (isNaN(piecesPerDozen) || piecesPerDozen <= 0 || piecesPerDozen > 12) errors.push("üëâ Pieces per dozen must be between 1 and 12.");

    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // CM Calculation in ‚Çπ - Improved formula
    const dailyExpenditure = expenditure / workingDays;
    const effectiveProduction = production * (efficiency / 100);
    const dailyProduction = runningMachines * effectiveProduction * workingHours;
    const costPerPiece = dailyExpenditure / dailyProduction;
    const CM = costPerPiece * piecesPerDozen;

    // Update UI
    cmValue.textContent = CM.toFixed(2);
    dailyExpenditureEl.textContent = dailyExpenditure.toFixed(2) + " ‚Çπ";
    dailyProductionEl.textContent = Math.round(dailyProduction) + " pcs";
    costPerPieceEl.textContent = costPerPiece.toFixed(2) + " ‚Çπ";
    cmPerDozenEl.textContent = CM.toFixed(2) + " ‚Çπ";

    // Feedback
    let feedback = "";
    if (CM < 50) {
        feedback = "‚úÖ Efficient cost structure in ‚Çπ! Production costs are optimized.";
    } else if (CM >= 50 && CM <= 100) {
        feedback = "‚öñÔ∏è Average cost structure in ‚Çπ. Optimization possible.";
    } else {
        feedback = "‚ö†Ô∏è High cost structure in ‚Çπ! Consider efficiency improvements.";
    }

    feedbackContent.textContent = feedback;
>>>>>>> 06383df6256b0c8e5d636769c537cdff1bc85bc9
    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

<<<<<<< HEAD
    </script>
=======
function printReport() {
    const now = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    if(document.getElementById('printDate')){
        document.getElementById('printDate').textContent = now.toLocaleDateString('en-IN', options);
    }
    window.print();
}
</script>
>>>>>>> 06383df6256b0c8e5d636769c537cdff1bc85bc9

<script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}
<!--

Input Validation Rules (Compliance-based)
Monthly Expenditure (‚Çπ)

Required (cannot be blank).

Type: Numeric, decimal allowed (2 decimals for currency).

Min: > 0.

Max: ‚â§ 100,000,000 (‚Çπ100M; prevents accidental wrong unit entry like annual instead of monthly).

Compliance reasoning: Prevents underreporting/overreporting costs in audits.

Number of Machines

Required.

Type: Integer only.

Min: ‚â• 1.

Max: ‚â§ 10,000 (beyond this is unrealistic for garment factories).

Compliance reasoning: Machine count must be traceable in OSHA/ILO audits.

Quantity of Running Machines

Required.

Type: Integer only.

Min: ‚â• 1.

Max: Cannot exceed Number of Machines.

Compliance reasoning: Prevents false capacity reporting (ILO factory inspection requirement).

Production Capacity per Hour (pcs)

Required.

Type: Integer.

Min: ‚â• 1.

Max: ‚â§ 500 (typical upper bound for garment sewing/finishing).

Compliance reasoning: Unrealistic productivity values must be rejected to maintain reporting accuracy.

Total Pieces in a Dozen

Required.

Type: Integer only.

Allowed range: 1‚Äì12.

Default standard: 12.

Compliance reasoning: Prevents skewed cost-per-dozen reporting in quality audits.

üîπ 2. Output Validation & Thresholds

Formula (intended correction):

ùê∂M = ((Daily¬†Expenditure/Daily¬†Production) * (12/Pieces¬†per¬†Dozen))

Daily Expenditure:

Monthly¬†Expenditure
√∑
26
Monthly¬†Expenditure√∑26 (assuming 26 working days).

Daily Production (correction):

Running¬†Machines
√ó
Production¬†per¬†Hour
√ó
8
Running¬†Machines√óProduction¬†per¬†Hour√ó8 (8-hour day).
‚ö†Ô∏è Note: Original code incorrectly multiplied machines √ó running machines.

Output Range:

CM < 50 ‚Çπ/dozen ‚Üí Efficient.

50 ‚â§ CM ‚â§ 100 ‚Çπ/dozen ‚Üí Acceptable, but review efficiency.

CM > 100 ‚Çπ/dozen ‚Üí High-cost warning, requires corrective actions.

Edge Cases & Handling

Expenditure = 0 ‚Üí reject (division by zero).

Machines = 0 ‚Üí reject (invalid factory setup).

Running Machines > Total Machines ‚Üí reject.

Production per hour unrealistically high (>500 pcs/hr) ‚Üí reject.

Pieces per dozen = 0 or >12 ‚Üí reject.

Result CM ‚â§ 0 or NaN ‚Üí flagged as invalid output.
-->