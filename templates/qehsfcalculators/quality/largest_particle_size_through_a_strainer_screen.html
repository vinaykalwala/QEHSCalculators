{% extends 'base.html' %}
{% block title %}Largest Particle Size Through a Strainer Screen Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Largest Particle Size Through a Strainer Screen Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
            margin-top: 20px;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

        .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'qualitycategory_calculators' %}" class="back-btn">Back To Quality Calculators</a>
    </div>
    
    <div class="calculator-container printable" id="printArea">
        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Largest Particle Size Through a Strainer Screen Calculator</h1>
            <p>Calculates the maximum particle size that can pass through a strainer screen based on mesh dimensions</p>
        </div>

        <div class="calc-content">
            <!-- Calculator Input Card -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="form-group">
                    <label for="meshLength">Mesh Hole Length (a) [mm]</label>
                    <input type="number" id="meshLength" class="form-input" min="0.001" step="any" placeholder="Enter mesh hole length">
                </div>

                <div class="form-group">
                    <label for="meshWidth">Mesh Hole Width (b) [mm]</label>
                    <input type="number" id="meshWidth" class="form-input" min="0.001" step="any" placeholder="Enter mesh hole width">
                </div>

                <button class="calculate-btn" onclick="calculateParticleSize()">Calculate Particle Size</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Strainer illustration">
                    <p>This tool calculates the <strong>largest particle size</strong> in mm that can pass through a strainer screen. Enter your mesh dimensions to see results.</p>
                </div>

                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">❌</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>

                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Largest Particle Size</h2>
                    </div>
                    <div class="rate-value" id="particleSizeValue">0.00</div>
                    <div class="rate-label"><strong>mm</strong></div>
                    
                    <div class="result-feedback">
                        <div class="feedback-title">Strainer Screen Interpretation</div>
                        <div class="feedback-content" id="particleFeedback"></div>
                    </div>
                    
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
            <div class="note-card">
                <h3>🔎 About This Calculator</h3>
                <p>
                    The <strong>Largest Particle Size Calculator</strong> determines the maximum size of a particle that can pass through a strainer screen based on the mesh hole dimensions. It is essential in industrial filtration and material separation processes for quality control and equipment protection.
                </p> 
            </div>

            <div class="note-card">
                <h3>❓ Explanation of Parameters</h3>
                <ul class="note-list">
                    <li><strong>Mesh Hole Length (a):</strong> The horizontal length of an individual mesh opening, measured in millimeters (mm).</li>
                    <li><strong>Mesh Hole Width (b):</strong> The vertical width of an individual mesh opening, measured in millimeters (mm).</li>
                </ul>
            </div>
            
            <div class="note-card">
                <h3>📌 Input Validations</h3>
                <ul class="note-list">
                    <li><strong>Mesh Hole Length (a):</strong> Required, must be > 0 mm</li>
                    <li><strong>Mesh Hole Width (b):</strong> Required, must be > 0 mm</li>
                    <li><strong>All values:</strong> Must be positive numbers (cannot be zero or negative)</li>
                </ul>
            </div>

            <div class="note-card">
                <h3>📊 Real-Life Applications</h3>
                <ul class="note-list">
                    <li><strong>Water Treatment Plants:</strong> Ensures proper filtration of suspended particles.</li>
                    <li><strong>Food Processing:</strong> Controls particle size for ingredients and mixtures.</li>
                    <li><strong>Pharmaceutical Industry:</strong> Ensures precision filtering in medicine production.</li>
                    <li><strong>Mining & Metallurgy:</strong> Separates ores and minerals based on size.</li>
                    <li><strong>Plastic & Recycling Plants:</strong> Screens materials for uniform processing.</li>
                </ul>
            </div>
            
            <div class="note-card">
                <h3>💡 Conclusion</h3>
                <p>This calculation is essential in filtration and material separation. By using this formula, engineers and industries can ensure optimal filtration efficiency, equipment protection, and quality control across various applications.</p>
            </div>
            
        </div>
    </div>

    <script>
    function calculateParticleSize() {
    const meshLength = document.getElementById("meshLength").value.trim();
    const meshWidth = document.getElementById("meshWidth").value.trim();

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const particleSizeValue = document.getElementById('particleSizeValue');
    const feedbackBox = document.getElementById('particleFeedback');

    let errors = [];

    // 🔹 Validate Mesh Length (a)
    if (meshLength === "") {
        errors.push("👉 Please enter the mesh hole length (mm).");
    } else if (isNaN(meshLength)) {
        errors.push("👉 Mesh hole length must be a number.");
    } else {
        const aNum = parseFloat(meshLength);
        if (aNum <= 0) {
            errors.push("👉 Mesh hole length must be greater than 0 mm.");
        } else if (aNum > 100) {
            errors.push("👉 Mesh hole length must not exceed 100 mm.");
        }
    }

    // 🔹 Validate Mesh Width (b)
    if (meshWidth === "") {
        errors.push("👉 Please enter the mesh hole width (mm).");
    } else if (isNaN(meshWidth)) {
        errors.push("👉 Mesh hole width must be a number.");
    } else {
        const bNum = parseFloat(meshWidth);
        if (bNum <= 0) {
            errors.push("👉 Mesh hole width must be greater than 0 mm.");
        } else if (bNum > 100) {
            errors.push("👉 Mesh hole width must not exceed 100 mm.");
        }
    }

    // 🔹 Show errors
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    const aNum = parseFloat(meshLength);
    const bNum = parseFloat(meshWidth);

    // 🔹 Check for unrealistic ratios
    if (aNum / bNum > 50 || bNum / aNum > 50) {
        errorMessage.innerHTML = "⚠️ Unrealistic mesh dimensions: ratio of length to width is too extreme.";
        errorBox.classList.remove("hidden");
        return;
    }

    // ✅ Calculate largest particle size
    const particleSize = Math.sqrt(Math.pow(aNum, 2) + Math.pow(bNum, 2));

    // 🔹 Check impossible results
    if (particleSize > 141.42) {
        errorMessage.innerHTML = "❌ Calculated particle size exceeds maximum possible (141.4 mm). Check inputs.";
        errorBox.classList.remove("hidden");
        return;
    }

    particleSizeValue.textContent = particleSize.toFixed(3);

    // ✅ Feedback messages
    let feedback = "";
    if (particleSize < 1) {
        feedback = "✅ Ultra-Fine Mesh: Suitable for pharma and dust control applications.";
    } else if (particleSize < 5) {
        feedback = "✅ Fine Mesh: Suitable for food, water, and chemical filtration.";
    } else if (particleSize <= 50) {
        feedback = "✅ Moderate Mesh: Suitable for general industrial filtration.";
    } else {
        feedback = "⚠️ Coarse Mesh: May allow large debris; evaluate fire and safety risks.";
    }

    feedbackBox.textContent = feedback;

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}
<!--
Input Validation Rules (Real-World QEHS / Fire Safety)
Parameter	Typical Industrial Range	Validation Rules	Compliance Rationale
Mesh Hole Length (a) [mm]	0.01 → 100 mm	- Required
- Must be > 0
- Allow decimals up to 3 places
- Cap at 100 mm (mesh openings larger than 100 mm are not strainer screens but grates).	Prevents misclassification, ensures meaningful design data, avoids unsafe assumptions in filtration systems.
Mesh Hole Width (b) [mm]	0.01 → 100 mm	- Required
- Must be > 0
- Allow decimals up to 3 places
- Cap at 100 mm	Prevents entry of dangerously large particles into systems (risk: clogging, pump failure, fire hazard if debris ignites).
Logical Consistency	–	Both a and b must be within valid range. If one is extremely small (e.g., 0.01 mm) and the other extremely large (e.g., 100 mm) → flag as inconsistent.	Ensures design realism: strainer meshes are generally uniform; extreme ratios can indicate incorrect input.
2️⃣ Output Validation (Largest Particle Size)

Formula:

𝑐
=
𝑎
2
+
𝑏
2
c=
a
2
+b
2
	​


Thresholds for interpretation:

c < 1 mm → Ultra-fine mesh (used in pharma, dust filtration).

1 ≤ c < 5 mm → Fine mesh (food safety sieves, water treatment screens).

5 ≤ c ≤ 50 mm → Moderate mesh (industrial straining, preventing pump/pipe blockages).

50 < c ≤ 141 mm (max) → Coarse mesh (large debris straining, mining, recycling).

c > 141 mm → Impossible (if inputs capped at 100 mm, max is √(100²+100²) = 141.42 mm).

Compliance Note: These thresholds align with industry practice:

OSHA/ISO 45001 → prevent unsafe particle bypass.

NFPA (fire hazards) → prevent combustible debris from entering systems.

ILO standards → require predictable and safe filtration in workplaces.

3️⃣ Edge Case Validations

Division by zero → Not applicable here, but must ensure a > 0, b > 0.

Negative inputs → Must be r
ejected (no negative mesh size).

Empty inputs → Must show error (“required”).

Extreme differences → If a/b > 50 or b/a > 50, flag as unrealistic design.

Output outlier → If c > 141.42 mm, show error (impossible geometry).
            <div class="note-card formula-card">
                <h3>🧮 Formula</h3>
                <p>The largest particle size is calculated using the formula:</p>
                <code>c = √(a² + b²)</code>
                <p>Where:</p>
                <ul class="note-list">
                    <li><strong>c</strong> = Largest Particle Size (mm)</li>
                    <li><strong>a</strong> = Mesh Hole Length (mm)</li>
                    <li><strong>b</strong> = Mesh Hole Width (mm)</li>
                </ul>
            </div>
-->