{% extends 'base.html' %}
{% block title %}Correct the Conductivity of a Sample Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Correct the Conductivity of a Sample Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
            margin-bottom: 20px;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
<<<<<<< HEAD



        
        .btn-container {
    display: flex;
    justify-content: center; /* Horizontally center */
    margin: 30px 0;
}

.back-btn {
    background:linear-gradient(#1560bd,#000040); /* Dark navy background */
    color: #ffffff; /* White text */
    border: 2px solid #1560bd; /* Highlight border */
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none; /* Remove underline for link */
    transition: all 0.3s ease;
    cursor: pointer;
}

.back-btn:hover {
    background-color: #1560bd; /* Highlight on hover */
    color: #ffffff;
    border-color: #000040;
    transform: scale(1.05); /* Subtle hover effect */
}
=======
         .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
         .back-btn {
            background:linear-gradient(#1560bd,#000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }
>>>>>>> 06383df6256b0c8e5d636769c537cdff1bc85bc9
    </style>
</head>
<body>
     <div class="btn-container">
        <a href="{% url 'qualitycategory_calculators' %}" class="back-btn">Back To Quality Calculators</a>
    </div>

   <div class="calculator-container printable" id="printArea">

    <!-- Include header/footer for print -->
    {% include "includes/print_header_footer.html" %}

      <div class="btn-container">
    <a href="{% url 'quality_calculators' %}" class="back-btn">Back To Quality Calculators</a>
</div>

        <div class="calculator-header">
            <h1>Correct the Conductivity of a Sample Calculator</h1>
            <p>Calculate the corrected conductivity of a water sample based on temperature variations</p>
        </div>

        <div class="calc-content">
            <!-- Calculator Input Card -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="form-group">
                    <label for="conductivity25">Conductivity at 25¬∞C (œÉ‚ÇÇ‚ÇÖ) (¬µS/cm)</label>
                    <input type="number" id="conductivity25" class="form-input" min="0" step="any" placeholder="Enter conductivity at 25¬∞C">
                </div>

                <div class="form-group">
                    <label for="temperatureCoefficient">Temperature Coefficient (Œ±) per ¬∞C</label>
                    <input type="number" id="temperatureCoefficient" class="form-input" min="0" step="any" placeholder="Enter temperature coefficient" value="0.02">
                </div>

                <div class="form-group">
                    <label for="temperature">Temperature (T) (¬∞C)</label>
                    <input type="number" id="temperature" class="form-input" step="any" placeholder="Enter temperature in ¬∞C">
                </div>

                <button class="calculate-btn" onclick="calculateCorrectedConductivity()">Calculate Conductivity</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Conductivity illustration">
                    <p>This tool calculates the <strong>corrected conductivity</strong> of a water sample. Enter your data to see results.</p>
                </div>

                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>

                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Corrected Conductivity</h2>
                    </div>
                    <div class="rate-value" id="conductivityValue">0.00</div>
                    <div class="rate-label"><strong>¬µS/cm</strong></div>
                    
                    <div class="result-feedback">
                        <div class="feedback-title">Interpretation</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="note-section">
            <div class="note-card">
                <h3>üîé About This Calculator</h3>
                <p>
                    This calculator determines the <strong>corrected conductivity</strong> of a water sample at a given temperature 
                    based on its conductivity at 25¬∞C. It accounts for temperature variations that affect electrical conductivity 
                    measurements in water quality analysis.
                </p> 
            </div>

            
<div class="note-card">
  <h3>üìå Input Validation</h3>
  <ul class="note-list">
    <li><strong>œÉ‚ÇÇ‚ÇÖ (¬µS/cm):</strong> 0.1‚Äì2M; ‚â§ 3 decimals.</li>
    <li><strong>Œ± (per ¬∞C):</strong> 0.001‚Äì0.1; ‚â§ 4 decimals.</li>
    <li><strong>T (¬∞C):</strong> 0‚Äì100; ‚â§ 2 decimals.</li>

  </ul>
</div>

            <div class="note-card">
                <h3>‚ùì Explanation of Parameters</h3>
                <ul class="note-list">
                    <li><strong>Conductivity at 25¬∞C (œÉ‚ÇÇ‚ÇÖ):</strong> The electrical conductivity of the water sample measured at 25¬∞C, which serves as the reference value.</li>
                    <li><strong>Temperature Coefficient (Œ±):</strong> A correction factor that accounts for the change in conductivity with temperature (typically 0.02 or 2% per ¬∞C).</li>
                    <li><strong>Temperature (T):</strong> The actual temperature of the water sample in degrees Celsius.</li>
                </ul>
            </div>

            <div class="note-card">
                <h3>üå°Ô∏è Why 25¬∞C?</h3>
                <ul class="note-list">
                    <li><strong>Standard Reference Temperature:</strong> 25¬∞C is the standard reference temperature for conductivity measurements, providing a consistent baseline for comparison.</li>
                    <li><strong>Temperature Dependence:</strong> Conductivity increases with temperature due to higher ion mobility. Correcting to 25¬∞C removes the effect of temperature variations.</li>
                    <li><strong>Practical Use:</strong> Many conductivity meters and sensors are calibrated to report values at 25¬∞C, ensuring compatibility with water quality standards and regulations.</li>
                </ul>
            </div>

            <div class="note-card">
                <h3>üìä Key Applications</h3>
                <ul class="note-list">
                    <li><strong>Water Quality Analysis:</strong> Ensures accurate conductivity readings by adjusting for temperature variations.</li>
                    <li><strong>Environmental Monitoring:</strong> Helps in assessing the impact of temperature changes on natural water bodies.</li>
                    <li><strong>Industrial Processes:</strong> Used in industries like power plants, chemical processing, and water treatment where conductivity monitoring is essential.</li>
                </ul>
            </div>
            
            
            
            <div class="note-card">
                <h3>üí° Conclusion</h3>
                <p>
                    This tool allows users to accurately adjust conductivity readings for temperature changes, 
                    ensuring reliable water quality assessments in various applications. Understanding and correcting 
                    for temperature effects is essential for precise environmental monitoring and industrial process control.
                </p>
            </div>
        </div>
    </div>

    <script>
function calculateCorrectedConductivity() {
    const conductivity25Raw = document.getElementById('conductivity25').value.trim();
    const alphaRaw = document.getElementById('temperatureCoefficient').value.trim();
    const tempRaw = document.getElementById('temperature').value.trim();

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const conductivityValue = document.getElementById('conductivityValue');
    const feedbackContent = document.getElementById('feedbackContent');

    let errors = [];
    let warnings = [];

    // Presence check
    if (!conductivity25Raw) errors.push("üëâ Enter conductivity at 25¬∞C (¬µS/cm).");
    if (!alphaRaw) errors.push("üëâ Enter temperature coefficient (Œ±).");
    if (!tempRaw) errors.push("üëâ Enter sample temperature (¬∞C).");

    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    }

    // Parse numbers
    const conductivity25 = Number(conductivity25Raw);
    const alpha = Number(alphaRaw);
    const temp = Number(tempRaw);

    // Input sanity checks
    if (conductivity25 <= 0 || conductivity25 > 2000000) {
        errors.push("üëâ Conductivity at 25¬∞C must be between 0.1 and 2,000,000 ¬µS/cm.");
    }
    if (alpha <= 0 || alpha > 0.1) {
        errors.push("üëâ Temperature coefficient must be >0 and ‚â§0.1 (typical 0.01‚Äì0.03).");
    }
    if (temp < 0 || temp > 100) {
        errors.push("üëâ Temperature must be between 0 and 100¬∞C for valid correction.");
    }

    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    }

    // Compute corrected conductivity
    const correctedConductivity = conductivity25 * (1 + alpha * (temp - 25));

    if (!Number.isFinite(correctedConductivity) || correctedConductivity < 0) {
        errorMessage.innerHTML = "‚ùå Invalid calculation result (check inputs).";
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    }

    // Display result
    conductivityValue.textContent = correctedConductivity.toFixed(3);

    // Feedback interpretation
    let feedback = "";
    if (temp > 25) feedback = "Conductivity increased due to higher temperature.";
    else if (temp < 25) feedback = "Conductivity decreased due to lower temperature.";
    else feedback = "No correction needed at 25¬∞C.";

    // Add warnings for edge conditions
    if (alpha < 0.01 || alpha > 0.03) {
        warnings.push("‚ö†Ô∏è Temperature coefficient is outside typical water range (0.01‚Äì0.03).");
    }
    if (correctedConductivity > 200000) {
        warnings.push("‚ö†Ô∏è Extremely high corrected conductivity ‚Äî likely brine or input error.");
    }

    if (warnings.length > 0) {
        feedback += " " + warnings.join(" ");
        errorMessage.innerHTML = warnings.join("<br>");
        errorBox.classList.remove("hidden"); // Show as soft alerts
    } else {
        errorBox.classList.add("hidden");
    }

    feedbackContent.textContent = feedback;

    placeholder.classList.add("hidden");
    resultValue.classList.remove("hidden");
}

    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}
<!--
Input Validation Rules (Real-World, QEHS/Fire Safety Aligned)
Conductivity at 25¬∞C (œÉ‚ÇÇ‚ÇÖ, ¬µS/cm)

Required.

Type: Numeric (decimals allowed).

Range (Hard Limits): 0.1 ‚â§ œÉ‚ÇÇ‚ÇÖ ‚â§ 2,000,000 ¬µS/cm

Rationale:

Ultra-pure water ~0.05 ¬µS/cm

Drinking water ~50‚Äì1500 ¬µS/cm

Industrial brines >1,000,000 ¬µS/cm.

Soft Warning Range: If œÉ‚ÇÇ‚ÇÖ < 0.1 or œÉ‚ÇÇ‚ÇÖ > 5000 ¬µS/cm, flag as unusual for typical QA labs.

Decimals: Up to 3 decimals recommended (false precision otherwise).

Temperature Coefficient (Œ±, per ¬∞C)

Required.

Type: Numeric, decimal allowed.

Range (Hard Limits): 0.001 ‚â§ Œ± ‚â§ 0.1 (0.1 = 10%/¬∞C max).

Typical Value: 0.02 (2%/¬∞C) for water ‚Äî warn if outside 0.01‚Äì0.03.

Decimals: Up to 4 decimals.

Temperature (T, ¬∞C)

Required.

Type: Numeric (decimal allowed).

Range (Hard Limits): 0 ‚â§ T ‚â§ 100 ¬∞C (practical for water conductivity).

Soft Warnings:

T < 0 ¬∞C ‚Üí likely unit error (Kelvin vs ¬∞C).

T > 80 ¬∞C ‚Üí caution: equipment/material safety limits.

T > 100 ¬∞C ‚Üí critical warning unless pressurized system.

Decimals: Up to 2 decimals.

2. Output Validation & Thresholds

Formula:

ùúéT = œÉ25 * (1 + Œ± * (T‚àí25))

Corrected Conductivity (œÉ_T, ¬µS/cm)

Must be finite, positive, and realistic.

Hard Limits: 0 ‚â§ œÉ_T ‚â§ 2,000,000 ¬µS/cm.

Interpretation Bands:

< 1 ¬µS/cm ‚Üí ultrapure/RO water (used in power plants, labs).

50‚Äì1500 ¬µS/cm ‚Üí potable water range (WHO guidelines).

> 5000 ¬µS/cm ‚Üí industrial/high-salinity water.

> 200,000 ¬µS/cm ‚Üí brines; flag as extreme.

Safety Flags:

If œÉ_T increases > 100% from œÉ‚ÇÇ‚ÇÖ ‚Üí show ‚Äúcheck input ‚Äî unrealistic correction.‚Äù

3. Edge Case Validations

Division by zero: Not present in formula, but Œ± = 0 ‚Üí meaningless ‚Üí block.

Negative œÉ‚ÇÇ‚ÇÖ: Block, conductivity cannot be negative.

Œ± = 0 or negative: Block, invalid physical input.

Temperature way outside range (e.g., -273, 5000): Block as unit error.

NaN or Infinity: Block.

False precision: Warn if > 6 decimals entered (misleading in audit reports).
-->