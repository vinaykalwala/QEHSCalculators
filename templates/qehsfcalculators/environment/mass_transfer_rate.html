{% extends 'base.html' %}
{% block title %}Mass Transfer Rate Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mass Transfer Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
<style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover¬†effect¬†*/
        }
        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
             /* display: flex;  */
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            /* overflow-y: auto;  */
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Input rows for better organization */
        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .input-row .form-group {
            flex: 1;
        }
        
        @media (max-width: 600px) {
            .input-row {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }

                .rate-display {
                display: flex;
                gap: 20px;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap; /* responsive */
                text-align: center;
            }

            .rate-block {
                display: flex;
                flex-direction: column;
                align-items: center;
                min-width: 120px; /* keeps blocks same width */
            }

            .rate-label {
                font-weight: bold;
                font-size: 16px;
                color: #444;
                margin-bottom: 5px;
            }

            .rate-value {
                font-size: 40px;
                font-weight: 700;
                color: #2980b9;
                line-height: 1.2;
            }

            .rate-unit {
                font-size: 14px;
                color: #777;
                margin-top: 4px;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .rate-value { font-size: 32px; }
            }

            @media (max-width: 480px) {
                .rate-value { font-size: 26px; }
                
                .rate-unit { font-size: 12px; }
                
            }



        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
                .result-feedback {
    background: #f8f9fa;
    border-radius: 10px;
    padding: 18px 20px;
    border-left: 4px solid #3498db;
    text-align: left;
    max-width: 800px; /* keeps it readable on large screens */
    margin: 0 auto;   /* centers it */
}

.feedback-title {
    font-weight: 600;
    margin-bottom: 8px;
    color: #2c3e50;
    font-size: 18px;
}

.feedback-content { 
    color: #34495e; 
    font-size: 16px;
    line-height: 1.5;
}

/* Responsive breakpoints */
@media (max-width: 768px) {
    .result-feedback {
        padding: 15px;
        font-size: 15px;
    }

    .feedback-title {
        font-size: 16px;
    }

    .feedback-content {
        font-size: 14px;
    }
}

@media (max-width: 480px) {
    .result-feedback {
        padding: 12px;
        border-left-width: 3px;
    }

    .feedback-title {
        font-size: 15px;
    }

    .feedback-content {
        font-size: 13px;
    }
}

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>

<div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>
<div class="calculator-container printable" id="printArea">


{% include "includes/print_header_footer.html" %}

<div class="calculator-header">
    <h1>Mass Transfer Rate Calculator</h1>
    <p>Estimate the mass transfer rate for gas-to-liquid transfer. Result shown in <strong>mg/(L¬∑s)</strong>.</p>
</div>

<div class="calc-content">
    <!-- Calculator -->
    <div class="calc-card">
        <h2>Enter Parameters</h2>

        <div class="input-row">
            <div class="form-group">
                <label for="kl">Liquid Film Coefficient (K<sub>L</sub>) [m/s]</label>
                <input type="number" id="kl" class="form-input" step="any" min="0" placeholder="e.g., 0.0001" aria-label="Liquid film coefficient">
            </div>

            <div class="form-group">
                <label for="a">Interfacial Area per Unit Volume (a) [m¬≤/m¬≥]</label>
                <input type="number" id="a" class="form-input" step="any" min="0" placeholder="e.g., 300" aria-label="Interfacial area">
            </div>
        </div>

        <div class="input-row">
            <div class="form-group">
                <label for="cs">Saturation Concentration (C<sub>s</sub>) [mg/L]</label>
                <input type="number" id="cs" class="form-input" step="any" min="0" placeholder="e.g., 9.0" aria-label="Saturation concentration">
            </div>

            <div class="form-group">
                <label for="c">Bulk Concentration (C) [mg/L]</label>
                <input type="number" id="c" class="form-input" step="any" min="0" placeholder="e.g., 2.5" aria-label="Bulk concentration">
            </div>
        </div>

        <button class="calculate-btn" onclick="calculateMassTransfer()">Calculate Mass Transfer Rate</button>
    </div>

    <!-- Result Section -->
    <div class="result-card">
        <div class="result-placeholder" id="placeholder">
            <img src="/static/images/mlc_environment_result.png" alt="Mass transfer illustration">
            <p>This tool estimates the mass transfer rate (gas ‚Üí liquid) using the provided inputs.</p>
        </div>

        <div class="result-error hidden" id="resultError" role="alert" aria-live="polite">
            <div class="error-icon">‚ùå</div>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <div class="result-value hidden" id="resultValue" aria-live="polite">
            <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                <h2>Mass Transfer Rate</h2>
            </div>

            <div class="rate-display" style="gap:12px; align-items:center; justify-content:center;">
                <div class="rate-value" id="headLoss">0.000000</div>
                <div class="rate-label" style="font-size:16px; color: #2980b9;">mg/(L¬∑s)</div>
            </div>

            <div class="result-feedback">
                <div class="feedback-title">Interpretation</div>
                <div class="feedback-content" id="feedbackContent"></div>
            </div>

            <div class="btn-wrapper">
                <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
            </div>
        </div>
    </div>
</div>

<!-- Notes Section -->
<div class="note-section">

  <div class="note-card">
    <h3>üìò About This Calculator</h3>
    <p>This calculator estimates the steady-state mass transfer rate for gas-to-liquid transfer under a film-controlled regime. Use consistent units: <strong>K<sub>L</sub> in m/s, a in m¬≤/m¬≥, concentrations in mg/L</strong>. The result is given in <strong>mg/(L¬∑s)</strong>.</p>
  </div>

  <div class="note-card">
    <h3>‚öô Parameters Used</h3>
    <ul class="note-list">
      <li>K<sub>L</sub>: Liquid-side mass transfer coefficient (m/s)</li>
      <li>a: Interfacial area per unit volume (m¬≤/m¬≥)</li>
      <li>C<sub>s</sub>: Saturation concentration (mg/L)</li>
      <li>C: Bulk concentration (mg/L)</li>
      <li>ŒîC = (C<sub>s</sub> ‚àí C): Driving force (mg/L)</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>‚úÖ Input Validation Rules</h3>
    <ul class="note-list">
      <li>K<sub>L</sub>: numeric, &gt;0, typical 1e-6 ‚Äì 1e-2; errors if ‚â§0 or &lt;1e-10 or &gt;1.0</li>
      <li>a: numeric, &gt;0, typical 0.1 ‚Äì 1e5; errors if ‚â§0 or &lt;1e-6 or &gt;1e6</li>
      <li>C<sub>s</sub>: numeric, &gt;0, errors if ‚â§0 or &gt;1e6</li>
      <li>C: numeric, ‚â•0 and &lt; C<sub>s</sub>, errors if negative or ‚â• C<sub>s</sub></li>
      <li>Precision: >6 decimal places triggers a warning</li>
      <li>Computation safety: results >1e6 mg/(L¬∑s) treated as invalid</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>üìä Output Validations & Assessment</h3>
    <ul class="note-list">
      <li>Computed mass transfer rate must be finite and &gt; 0</li>
      <li>Warnings for extreme values:
        <ul>
          <li>K<sub>L</sub> &lt; 1e-6 ‚Üí very slow transfer, check units</li>
          <li>K<sub>L</sub> &gt; 1e-1 ‚Üí unusually high, verify source</li>
          <li>a &lt; 0.01 ‚Üí low interfacial area, transfer may be limited</li>
          <li>a &gt; 1e5 ‚Üí very large, check geometry and units</li>
          <li>ŒîC ‚âà 0 ‚Üí negligible driving force</li>
          <li>Mass transfer rate &gt; 1000 mg/(L¬∑s) ‚Üí verify inputs</li>
          <li>Mass transfer rate &lt; 1e-8 ‚Üí below measurement sensitivity</li>
        </ul>
      </li>
      <li>Assessment / feedback displayed along with results:
        <ul>
          <li>Rate &lt; 1 mg/(L¬∑s) ‚Üí Low ‚Üí Consider increasing interfacial area or improving agitation/aeration</li>
          <li>1‚Äì50 mg/(L¬∑s) ‚Üí Moderate ‚Üí Typical for many systems; validate with pilot data</li>
          <li>&gt;50 mg/(L¬∑s) ‚Üí High ‚Üí Ensure process control and review mass balance</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="note-card">
    <h3>üìñ Governing Principle</h3>
    <p>A mass transfer rate calculator is not of one single standard; rather, it is based on fundamental principles like Fick's Law of Diffusion for molecular mass transfer and various established theoretical and empirical correlations developed for different applications and equipment types. Standards like the ASCE Standard 2‚Äì06 provide guidelines for specific mass transfer contexts, but the calculations themselves rely on diverse methodologies depending on the specific process.</p>
    <ul class="note-list">
      <li><strong>Fick's Law of Diffusion:</strong> Describes molecular transfer from high to low concentration due to a concentration gradient.</li>
      <li><strong>Theoretical Models:</strong> Predict mass transfer coefficients using dimensionless numbers (Reynolds, Sherwood, Schmidt) to account for physical properties and flow.</li>
      <li><strong>Application-Specific Standards:</strong> ASCE Standard 2‚Äì06 for gas transfer in water; BioProcess International uses kLa correlations for bioreactors.</li>
      <li><strong>Key Considerations:</strong> Process and equipment specificity, theoretical vs. empirical methods depending on available data.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3> Conclusion</h3>
    <ul class="note-list">
      <li>Steady-state assumption ‚Äî not valid for transient processes</li>
      <li>Empirical correlations may vary depending on equipment and conditions</li>
      <li>Results are generic ‚Äî always compare with process-specific standards or experimental data</li>
    </ul>
  </div>

</div>


<script>
/* preserve showErrors UI behavior */
function showErrors(errors) {
  const errorBox = document.getElementById("resultError");
  const errorMessage = document.getElementById("errorMessage");
  const placeholder = document.getElementById("placeholder");
  const resultValue = document.getElementById("resultValue");

  errorMessage.innerHTML = errors.join("<br>");
  errorBox.classList.remove("hidden");
  placeholder.classList.add("hidden");
  resultValue.classList.add("hidden");
}

/* loose decimal counter */
function countDecimals(rawStr) {
  if (typeof rawStr !== 'string') rawStr = String(rawStr || '');
  if (!rawStr.includes('.')) return 0;
  let decPart = rawStr.split('.')[1].split(/e|E/)[0];
  decPart = decPart.replace(/[^0-9]/g, '');
  return decPart.length;
}

function calculateMassTransfer() {
  const rawKL = (document.getElementById("kl")?.value || "").trim();
  const rawA = (document.getElementById("a")?.value || "").trim();
  const rawCs = (document.getElementById("cs")?.value || "").trim();
  const rawC = (document.getElementById("c")?.value || "").trim();

  const placeholder = document.getElementById("placeholder");
  const errorBox = document.getElementById("resultError");
  const resultValue = document.getElementById("resultValue");
  const rateEl = document.getElementById("headLoss"); // kept id for numeric display
  const feedbackEl = document.getElementById("feedbackContent");

  errorBox.classList.add("hidden");
  feedbackEl.innerHTML = "";

  const errors = [];
  const warnings = [];

  // presence checks
  if (rawKL === "") errors.push("üëâ K_L is required.");
  if (rawA === "") errors.push("üëâ a (interfacial area) is required.");
  if (rawCs === "") errors.push("üëâ C_s (saturation conc.) is required.");
  if (rawC === "") errors.push("üëâ C (bulk conc.) is required.");
  if (errors.length) return showErrors(errors);

  // parse
  const KL = parseFloat(rawKL);
  const a = parseFloat(rawA);
  const Cs = parseFloat(rawCs);
  const C = parseFloat(rawC);

  // numeric checks
  if (!Number.isFinite(KL)) errors.push("üëâ K_L must be a valid number (m/s).");
  if (!Number.isFinite(a)) errors.push("üëâ a must be a valid number (m¬≤/m¬≥).");
  if (!Number.isFinite(Cs)) errors.push("üëâ C_s must be a valid number (mg/L).");
  if (!Number.isFinite(C)) errors.push("üëâ C must be a valid number (mg/L).");
  if (errors.length) return showErrors(errors);

  // hard ranges (errors)
  const ranges = {
    KL: { min: 1e-10, max: 1.0 },
    a: { min: 1e-6, max: 1e6 },
    Cs: { min: 1e-6, max: 1e6 },
    C: { min: 0, max: 1e6 }
  };

  if (KL <= 0 || KL < ranges.KL.min || KL > ranges.KL.max) errors.push(`üëâ K_L must be > 0 and between ${ranges.KL.min} and ${ranges.KL.max} (m/s).`);
  if (a <= 0 || a < ranges.a.min || a > ranges.a.max) errors.push(`üëâ a must be > 0 and between ${ranges.a.min} and ${ranges.a.max} (m¬≤/m¬≥).`);
  if (Cs <= 0 || Cs < ranges.Cs.min || Cs > ranges.Cs.max) errors.push(`üëâ C_s must be > 0 and between ${ranges.Cs.min} and ${ranges.Cs.max} (mg/L).`);
  if (C < 0 || C >= Cs) errors.push("üëâ C must be ‚â• 0 and less than C_s (check units and values).");
  if (errors.length) return showErrors(errors);

  // decimal precision warnings
  if (countDecimals(rawKL) > 6 || countDecimals(rawA) > 6 || countDecimals(rawCs) > 6 || countDecimals(rawC) > 6) {
    warnings.push("‚ö†Ô∏è One or more inputs have >6 decimal places ‚Äî round for reporting.");
  }

  // domain warnings
  if (KL < 1e-6) warnings.push("‚ö†Ô∏è K_L is very small; mass transfer may be extremely slow (check units).");
  if (KL > 1e-1) warnings.push("‚ö†Ô∏è K_L unusually large for typical film control values; verify source.");
  if (a < 0.01) warnings.push("‚ö†Ô∏è a is small ‚Äî low interfacial area; mass transfer limited.");
  if (a > 1e5) warnings.push("‚ö†Ô∏è a very large ‚Äî verify geometry and units.");
  if (Cs > 1e4) warnings.push("‚ö†Ô∏è C_s unusually large ‚Äî ensure correct concentration units.");
  if ((Cs - C) < 1e-6) warnings.push("‚ö†Ô∏è Driving force (C_s ‚àí C) is near zero ‚Äî transfer rate may be negligible.");

  // compute rate: N = K_L * a * (C_s - C)  => mg/(L¬∑s)
  const deltaC = Cs - C;
  const rate = KL * a * deltaC;

  if (!Number.isFinite(rate) || isNaN(rate)) {
    return showErrors(["‚ùå Computation failed. Check input magnitudes and units."]);
  }

  // sanity / magnitude checks
  if (rate <= 0) return showErrors(["‚ùå Computed transfer rate ‚â§ 0. Check that C_s > C and inputs are correct."]);
  if (rate > 1e6) return showErrors(["‚ùå Computed transfer rate unphysically large (>1e6 mg/(L¬∑s)). Check units."]);
  if (rate > 1000) warnings.push("‚ö†Ô∏è High transfer rate (>1000 mg/(L¬∑s)) ‚Äî verify inputs or units.");
  if (rate < 1e-8) warnings.push("‚ö†Ô∏è Very low transfer rate ‚Äî may be below measurement sensitivity.");

  // classification (generic guidance)
  let classification = "";
  if (rate < 1) classification = "Low";
  else if (rate <= 50) classification = "Moderate";
  else classification = "High";

  let advice = "";
  if (classification === "Low") advice = "Consider increasing interfacial area or improving agitation/ aeration.";
  else if (classification === "Moderate") advice = "Typical for many systems; validate with pilot data.";
  else advice = "High transfer ‚Äî ensure process control and review mass balance.";

  // display result (no formula shown)
  let details = `<div><b>Mass transfer rate</b>: <b>${rate.toExponential(6)}</b> mg/(L¬∑s)</div>`;
  details += `<div style="margin-top:6px;">Driving force (C_s ‚àí C): <b>${deltaC.toExponential(6)}</b> mg/L</div>`;
  details += `<div style="margin-top:6px;">Classification: <b>${classification}</b></div>`;
  details += `<div style="margin-top:6px;">Advice: ${advice}</div>`;
  if (warnings.length) details += `<div style="margin-top:8px; color:#b35d00;">${warnings.join(" | ")}</div>`;

  // update UI
  rateEl.textContent = rate.toExponential(6);
  feedbackEl.innerHTML = details;

  placeholder.classList.add("hidden");
  resultValue.classList.remove("hidden");
  errorBox.classList.add("hidden");
}

/* print helper retained */
function printReport() {
  const el = document.getElementById('printDate');
  if (el) {
    el.textContent = new Date().toLocaleDateString('en-US', { year:'numeric', month:'long', day:'numeric' });
  }
  window.print();
}
</script>


<script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}

<!-- /*
---------------------------------------------------------
üìå Formula (Mass Transfer Rate):
    N = K_L √ó a √ó (C_s ‚àí C)

Where:
  - N   = mass transfer rate (mg/(L¬∑s))
  - K_L = liquid-side mass transfer coefficient (m/s)
  - a   = interfacial area (m¬≤/m¬≥)
  - C_s = saturation concentration (mg/L)
  - C   = bulk concentration (mg/L)

---------------------------------------------------------
‚úÖ Inputs & Validation:

1. K_L (m/s)
   - Required, numeric
   - Must be >0
   - Range: 1e-10 ‚Äì 1.0 m/s
   - Warning if <1e-6 (very small) or >1e-1 (unusually large)

2. a (m¬≤/m¬≥)
   - Required, numeric
   - Must be >0
   - Range: 1e-6 ‚Äì 1e6
   - Warning if <0.01 (small) or >1e5 (very large)

3. C_s (mg/L)
   - Required, numeric
   - Must be >0
   - Range: 1e-6 ‚Äì 1e6
   - Warning if >1e4 (units issue possible)

4. C (mg/L)
   - Required, numeric
   - Must be ‚â•0 and < C_s
   - Range: 0 ‚Äì 1e6
   - Warning if (C_s ‚àí C) ‚âà 0 ‚Üí negligible driving force

---------------------------------------------------------
‚ö†Ô∏è Warnings:
- Decimal places >6 ‚Üí reporting clarity issue
- Very small K_L ‚Üí mass transfer extremely slow
- Very large K_L ‚Üí check realism
- Very small/large a ‚Üí confirm geometry/units
- Driving force ‚âà 0 ‚Üí negligible transfer
- Computed N too large (>1000 mg/(L¬∑s)) ‚Üí unrealistic
- Computed N too small (<1e-8 mg/(L¬∑s)) ‚Üí below sensitivity

---------------------------------------------------------
üìä Outputs:

- Mass transfer rate N (mg/(L¬∑s), scientific notation, 6 sig figs)
- Driving force ŒîC = (C_s ‚àí C) (mg/L)
- Classification (generic guidance):
    ‚Ä¢ Low ‚Üí N < 1 mg/(L¬∑s)  
    ‚Ä¢ Moderate ‚Üí 1‚Äì50 mg/(L¬∑s)  
    ‚Ä¢ High ‚Üí >50 mg/(L¬∑s)
- Practical advice depending on classification
- Warnings (if triggered)

---------------------------------------------------------

*/ -->
