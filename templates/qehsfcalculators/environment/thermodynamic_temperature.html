{% extends 'base.html' %}
{% block title %}Thermodynamic Temperature Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thermodynamic Temperature Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
       
    <style>
    .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            overflow-y: auto;
            justify-content: center;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
      .btn-wrapper {
    text-align: center; /* centers inline-block buttons */
    margin-top: 20px;
  }

   .btn-wrapper {
    text-align: center; /* centers the button */
    margin-top: 20px;
  }

  .print-btn {
    display: inline-block;
    background:linear-gradient(#1560bd,#000040);
    color: white;
    padding: 8px 18px;   /* control button size */
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    width: auto !important; /* prevent full width */
  }

  .print-btn:hover {
    background: #1560bd;
  }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

       
    </style>
</head>
<body>

        <div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>

    <div class="calculator-container printable" id="printArea">

    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Thermodynamic Temperature Calculator</h1>
        <p>Convert temperature from Celsius to Kelvin using the absolute temperature scale (result shown in K).</p>
    </div>

    <div class="calc-content">
        <!-- Calculator -->
        <div class="calc-card">
            <h2>Enter Data</h2>

            <div class="input-row">
                <div class="form-group">
                    <label for="celsiusTemp">Temperature in Celsius (°C)</label>
                    <input type="number" id="celsiusTemp" class="form-input" step="any" placeholder="e.g., 25" aria-label="Temperature in Celsius">
                    
                </div>
            </div>

            <button class="calculate-btn" onclick="calculateKelvin()">Convert to Kelvin</button>
        </div>

        <!-- Result Section -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="/static/images/mlc_environment_result.png" alt="Temperature conversion illustration">
                <p>This tool converts temperature from Celsius to Kelvin using the absolute temperature scale.</p>
            </div>

            <div class="result-error hidden" id="resultError" role="alert" aria-live="polite">
                <div class="error-icon">❌</div>
                <div class="error-message" id="errorMessage"></div>
            </div>

            <div class="result-value hidden" id="resultValue" aria-live="polite">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Temperature in Kelvin</h2>
                </div>

                <div class="rate-display" style="gap:12px; align-items:center; justify-content:center;">
                    
                        <div class="rate-value" id="kelvinValue">0.00</div>
                        <div class="rate-label" style="font-size:16px; color: #2980b9; ">K</div>
                </div>

                <div class="result-feedback">
                    <div class="feedback-title">Thermodynamic Assessment</div>
                    <div class="feedback-content" id="feedbackContent"></div>
                </div>

                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Section -->
    <div class="note-section">
        <div class="note-card">
            <h3>📘 About</h3>
            <p>
                This calculator converts temperature from Celsius to Kelvin using the absolute temperature scale. 
                The Kelvin scale is essential in scientific applications as it starts from absolute zero, 
                the theoretical point where all molecular motion ceases.
            </p>
        </div>


        <div class="note-card">
        <h3>✅ Input Validations</h3>
        <ul class="note-list">
            <li>Celsius temperature is <b>required</b> — cannot be left blank.</li>
            <li>Must be a <b>numeric value</b> (finite number).</li>
            <li>Minimum value: <b>-273.15°C</b> (absolute zero, cannot be lower)</li>
            <li>Maximum value: <b>10,000°C</b> (extremely high temperature, beyond typical industrial processes)</li>
            <li>Warning for values < -200°C (cryogenic temperatures)</li>
            <li>Warning for values > 5,000°C (plasma/astrophysical temperatures)</li>
        </ul>
        </div>

        <div class="note-card">
            <h3>📊 Temperature Classification</h3>
            <ul class="note-list">
                <li><span class="good">0 K to 100 K</span> → Cryogenic temperatures (scientific research)</li>
                <li><span class="average">100 K to 273.15 K</span> → Low temperatures (industrial cooling)</li>
                <li><span class="good">273.15 K to 300 K</span> → Ambient temperatures (everyday conditions)</li>
                <li><span class="average">300 K to 373.15 K</span> → Warm temperatures (biological processes)</li>
                <li><span class="bad">373.15 K to 1,000 K</span> → High temperatures (industrial processes)</li>
                <li><span class="bad">> 1,000 K</span> → Extreme temperatures (metallurgical/astrophysical)</li>
            </ul>
        </div>

        <div class="note-card">
            <h3>🌍 Key Applications</h3>
            <ul class="note-list">
                <li><strong>Scientific Research:</strong> Physics, chemistry, and thermodynamics experiments</li>
                <li><strong>Industrial Processes:</strong> Temperature control in manufacturing and materials processing</li>
                <li><strong>Environmental Monitoring:</strong> Climate studies and atmospheric research</li>
                <li><strong>Safety Engineering:</strong> Thermal hazard assessment and prevention</li>
                <li><strong>Quality Control:</strong> Precise temperature measurements in laboratories</li>
                <li><strong>Energy Sector:</strong> Thermal efficiency calculations in power generation</li>
            </ul>
        </div>

        <div class="note-card">
            <h3>🛑 Limitations</h3>
            <ul class="note-list">
                <li>Assumes standard atmospheric pressure for phase transition references</li>
                <li>Does not account for temperature variations due to altitude or pressure changes</li>
                <li>For extremely high temperatures, material properties may deviate from ideal behavior</li>
                <li>At cryogenic temperatures, some materials exhibit unique quantum effects</li>
            </ul>
        </div>
    </div>

</div>

<script>
/* Helper: show errors consistently */
function showErrors(errors) {
  const errorBox = document.getElementById("resultError");
  const errorMessage = document.getElementById("errorMessage");
  const placeholder = document.getElementById("placeholder");
  const resultValue = document.getElementById("resultValue");

  if (errorMessage) errorMessage.innerHTML = errors.join("<br>");
  if (errorBox) errorBox.classList.remove("hidden");
  if (placeholder) placeholder.classList.add("hidden");
  if (resultValue) resultValue.classList.add("hidden");
}

/* Main Temperature conversion calculation with strong validations */
function calculateKelvin() {
  // Safe reads
  const celsiusRaw = document.getElementById("celsiusTemp")?.value.trim() ?? "";

  const kelvinEl = document.getElementById("kelvinValue");
  const feedbackEl = document.getElementById("feedbackContent");

  // Reset UI
  document.getElementById("resultError").classList.add("hidden");
  if (feedbackEl) feedbackEl.innerHTML = "";

  const errors = [];
  const warnings = [];

  // Required input check
  if (celsiusRaw === "") errors.push("👉 Enter temperature in Celsius (°C).");

  if (errors.length > 0) { showErrors(errors); return; }

  // Parse number
  const celsius = parseFloat(celsiusRaw);

  // Numeric validation
  if (!Number.isFinite(celsius)) errors.push("👉 Temperature must be a valid numeric value.");

  // Absolute zero constraint
  if (celsius < -273.15) errors.push("👉 Temperature cannot be below absolute zero (-273.15°C).");

  // Extreme value warnings
  if (celsius > 10000) errors.push("👉 Temperature exceeds maximum allowed value (10,000°C).");
  
  if (errors.length > 0) { showErrors(errors); return; }

  // Warning checks
  if (celsius < -200) warnings.push("⚠️ Cryogenic temperature range - specialized handling required.");
  if (celsius > 5000) warnings.push("⚠️ Extreme high temperature - plasma/astrophysical conditions.");

  // Compute Kelvin temperature
  // Formula: K = °C + 273.15
  const kelvin = celsius + 273.15;

  if (!Number.isFinite(kelvin) || kelvin < 0) {
    showErrors(["⚠️ Computed temperature is invalid. Check input values."]);
    return;
  }

  // Temperature classification
  let classification = "";
  let suggestion = "";
  
  if (kelvin < 100) {
    classification = "Cryogenic Temperature";
    suggestion = "✅ Extreme cold conditions. Typical in scientific research and cryogenics.";
  } else if (kelvin >= 100 && kelvin < 273.15) {
    classification = "Low Temperature";
    suggestion = "✅ Cold conditions. Common in refrigeration and industrial cooling processes.";
  } else if (kelvin >= 273.15 && kelvin < 300) {
    classification = "Ambient Temperature";
    suggestion = "✅ Normal environmental conditions. Comfortable for most biological processes.";
  } else if (kelvin >= 300 && kelvin < 373.15) {
    classification = "Warm Temperature";
    suggestion = "⚠️ Warm conditions. Monitor for heat stress in biological systems.";
  } else if (kelvin >= 373.15 && kelvin < 1000) {
    classification = "High Temperature";
    suggestion = "❌ Hot conditions. Industrial processes, requires thermal protection.";
  } else {
    classification = "Extreme Temperature";
    suggestion = "❌ Dangerous conditions. Metallurgical processes or astrophysical environments.";
  }

  // Special cases
  if (kelvin === 273.15) {
    suggestion = "✅ Freezing point of water at standard pressure (0°C).";
  } else if (kelvin === 373.15) {
    suggestion = "✅ Boiling point of water at standard pressure (100°C).";
  }

  // Compose feedback content
  let details = `<div>Kelvin temperature = <b>${kelvin.toFixed(2)}</b> K</div>`;
  details += `<div>Celsius input = <b>${celsius.toFixed(2)}</b> °C</div>`;
  details += `<div>Classification: <b>${classification}</b></div>`;
  details += `<div style="margin-top:6px;">${suggestion}</div>`;
  if (warnings.length) {
    details += `<div style="margin-top:8px; color:#b35d00;">Note: ${warnings.join(" | ")}</div>`;
  }

  // Update UI
  if (kelvinEl) kelvinEl.textContent = kelvin.toFixed(2);
  if (feedbackEl) feedbackEl.innerHTML = details;

  // Toggle display
  document.getElementById("placeholder").classList.add("hidden");
  document.getElementById("resultValue").classList.remove("hidden");
  document.getElementById("resultError").classList.add("hidden");
}

/* Print-safe report with date */
function printReport() {
  const el = document.getElementById('printDate');
  if (el) {
    const now = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    el.textContent = now.toLocaleDateString('en-US', options);
  }
  window.print();
}
</script>
<script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}
<!--

Input Validations:
Celsius Temperature: Must be ≥ -273.15°C and ≤ 10,000°C

Must be numeric and finite

Cannot be below absolute zero (-273.15°C)

Warning for extreme values: < -200°C or > 5,000°C
-------------------------------------------------------------------------------------
Output Validations:
Kelvin temperature must be finite and ≥ 0

Classification based on temperature ranges

Special recognition for phase transition points (freezing/boiling)
-----------------------------------------------------------------------------------------
Edge Cases:
Absolute zero (-273.15°C)

Freezing point of water (0°C)

Boiling point of water (100°C)

Extremely low cryogenic temperatures

Extremely high temperatures (>5,000°C)

Non-numeric inputs

Empty inputs
---------------------------------------------------------------------------------------
The code converts temperature from Celsius to Kelvin using a simple linear conversion formula:

Formula
text
Kelvin = Celsius + 273.15
-->