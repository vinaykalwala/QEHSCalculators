{% extends 'base.html' %}
{% block title %}Two-Film Theory Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two-Film Theory Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding:0 20px;
            border-radius: 12px;
        }
        
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }
        
        /* Input rows for side-by-side fields */
        .input-row {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        @media (min-width: 480px) {
            .input-row {
                flex-direction: row;
            }
        }
        
        .input-row .form-group {
            flex: 1;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
       
    </style>
</head>
<body>
    <div class="btn-container">
        <a href="{% url 'safetycategory_calculators' %}" class="back-btn">Back To Safety Calculators</a>
    </div>
    
    <div class="calculator-container printable" id="printArea">
        <!-- Include header/footer for print -->
        {% include "includes/print_header_footer.html" %}

        <div class="calculator-header">
            <h1>Two-Film Theory Calculator</h1>
            <p>Calculate mass transfer rates across gas-liquid interfaces using the two-film theory model</p>
        </div>

        <div class="calc-content">
            <!-- Calculator -->
            <div class="calc-card">
                <h2>Enter Data</h2>
                <div class="input-row">
                    <div class="form-group">
                        <label for="gasCoeff">Gas Phase Mass Transfer Coefficient (k<sub>G</sub>) [mol/m¬≤s¬∑Pa]</label>
                        <input type="number" id="gasCoeff" class="form-input" min="0.00000001" step="any" placeholder="e.g., 0.00001">
                    </div>
                    <div class="form-group">
                        <label for="liquidCoeff">Liquid Phase Mass Transfer Coefficient (k<sub>L</sub>) [m/s]</label>
                        <input type="number" id="liquidCoeff" class="form-input" min="0.00000001" step="any" placeholder="e.g., 0.0001">
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="gasBulk">Bulk Gas Partial Pressure (p<sub>AG</sub>) [Pa]</label>
                        <input type="number" id="gasBulk" class="form-input" step="any" placeholder="e.g., 101325">
                    </div>
                    <div class="form-group">
                        <label for="gasInterface">Interface Gas Partial Pressure (p<sub>Ai</sub>) [Pa]</label>
                        <input type="number" id="gasInterface" class="form-input" step="any" placeholder="e.g., 100000">
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="liquidInterface">Interface Liquid Concentration (C<sub>Ai</sub>) [mol/m¬≥]</label>
                        <input type="number" id="liquidInterface" class="form-input" step="0.001" placeholder="e.g., 0.5">
                    </div>
                    <div class="form-group">
                        <label for="liquidBulk">Bulk Liquid Concentration (C<sub>AL</sub>) [mol/m¬≥]</label>
                        <input type="number" id="liquidBulk" class="form-input" step="0.001" placeholder="e.g., 0.1">
                    </div>
                </div>
                
                <button class="calculate-btn" onclick="calculateMassTransfer()">Calculate Mass Transfer Rate</button>
            </div>

            <!-- Result Section -->
            <div class="result-card">
                <div class="result-placeholder" id="placeholder">
                    <img src="https://cdn-icons-png.flaticon.com/512/2942/2942789.png" alt="Mass transfer illustration">
                    <p>This tool will calculate the <strong>Mass Transfer Rate</strong> using the Two-Film Theory. Enter your data to see results and insights here.</p>
                </div>
                
                <div class="result-error hidden" id="resultError">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
                 
                <div class="result-value hidden" id="resultValue">
                    <div class="calculation-type" id="calculationType" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                        <h2>Mass Transfer Rate</h2>
                    </div>
                    <div class="rate-display">
                        <div class="rate-value" id="rateValue">0.00</div>
                        <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">Flux (mol/m¬≤s)</div>
                    </div>

                    <div class="safety-meter">
                        <div class="meter-fill" id="meterFill"></div>
                    </div>
                    <div class="meter-labels">
                        <span>Negligible</span><span>Slow</span><span>Moderate</span><span>Significant</span><span>High</span>
                    </div>

                    <div class="result-feedback">
                        <div class="feedback-title">Transfer Rate Assessment</div>
                        <div class="feedback-content" id="feedbackContent"></div>
                    </div>
                    <div class="btn-wrapper">
                        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="note-section">
            <!-- About -->
            <div class="note-card">
                <h3>üìò About This Calculator</h3>
                <p>
                    The <strong>Two-Film Theory Calculator</strong> determines the mass transfer rate across gas-liquid interfaces 
                    by considering resistance in two stagnant films. This model is fundamental for designing and analyzing 
                    environmental engineering systems involving gas-liquid contact, such as aeration tanks, scrubbers, 
                    and natural gas exchange processes.
                </p>
            </div>

            <!-- Parameters Used -->
            <div class="note-card">
                <h3>‚öô Parameters Used</h3>
                <ul class="note-list">
                    <li><strong>k<sub>G</sub> (Gas Film Coefficient):</strong> Gas phase mass transfer coefficient (mol/m¬≤s¬∑Pa).</li>
                    <li><strong>k<sub>L</sub> (Liquid Film Coefficient):</strong> Liquid phase mass transfer coefficient (m/s).</li>
                    <li><strong>p<sub>AG</sub> (Bulk Gas Partial Pressure):</strong> Partial pressure in bulk gas phase (Pa).</li>
                    <li><strong>p<sub>Ai</sub> (Interface Gas Partial Pressure):</strong> Partial pressure at gas-liquid interface (Pa).</li>
                    <li><strong>C<sub>Ai</sub> (Interface Liquid Concentration):</strong> Concentration at gas-liquid interface (mol/m¬≥).</li>
                    <li><strong>C<sub>AL</sub> (Bulk Liquid Concentration):</strong> Concentration in bulk liquid phase (mol/m¬≥).</li>
                </ul>
            </div>

            <!-- Input Validation Rules -->
            <div class="note-card">
    <h3>‚úÖ <strong>Input Validation Rules</strong></h3>
    <ul class="note-list">
        <li>k<sub>G</sub> & k<sub>L</sub>: <strong>Positive numbers</strong> (0.000001‚Äì1000 / 0.000001‚Äì100)</li>
        <li>p<sub>AG</sub>, p<sub>Ai</sub>: <strong>Non-negative</strong> (0‚Äì1,000,000 Pa)</li>
        <li>C<sub>Ai</sub>, C<sub>AL</sub>: <strong>Non-negative</strong> (0‚Äì100 mol/m¬≥)</li>
        <li>Gas driving force: p<sub>AG</sub> > p<sub>Ai</sub></li>
        <li>Liquid driving force: C<sub>Ai</sub> > C<sub>AL</sub></li>
        <li>If both driving forces are insufficient ‚Üí mass transfer = 0</li>
        <li>Decimals allowed up to 6 places for scientific accuracy</li>
    </ul>
</div>

<div class="note-card">
    <h3>‚úÖ <strong>Output Validation Rules</strong></h3>
    <ul class="note-list">
        <li>Flux < 0.000001 ‚Üí <strong>Negligible transfer ‚Äî may be insignificant in practical systems.</strong></li>
        <li>0.000001 ‚â§ Flux ‚â§ 0.00001 ‚Üí <strong>Slow transfer ‚Äî typical in natural environmental processes.</strong></li>
        <li>0.00001 &lt; Flux ‚â§ 0.0001 ‚Üí <strong>Moderate transfer ‚Äî common in engineered environmental systems.</strong></li>
        <li>0.0001 &lt; Flux ‚â§ 0.001 ‚Üí <strong>Significant transfer ‚Äî high-rate treatment processes.</strong></li>
        <li>Flux &gt; 0.001 ‚Üí <strong>High transfer rate ‚Äî intensive industrial processes</strong> (verify inputs)</li>
        <li>Negative flux ‚Üí Reverse transfer warning</li>
    </ul>
</div>


            <!-- Standards -->
            <div class="note-card">
                <h3>üìè Standards</h3>
                <p>
                    This calculator aligns with <strong>ASCE Standard 2-06</strong> (Measurement of Oxygen Transfer in Clean Water), 
                    <strong>EPA's Wastewater Technology Fact Sheets</strong>, and <strong>ASTM D4188</strong> 
                    (Standard Practice for Performing Pressure In-Line Coagulation-Flocculation-Filtration Test in Water). 
                    It supports proper design of aeration systems, pollution control equipment, and assessment of natural gas exchange processes.
                </p>
            </div>

            <!-- Conclusion -->
            <div class="note-card">
                <h3>üìù Conclusion</h3>
                <p>
                    The two-film theory provides a practical framework for analyzing gas-liquid mass transfer in environmental systems. 
                    Understanding these principles enables better design of aeration systems, pollution control equipment, 
                    and assessment of natural gas exchange processes in water bodies, contributing to more effective environmental protection.
                </p>
            </div>
        </div>
    </div>

    <script>
        // Set current date for print header
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
        });

        function calculateMassTransfer() {
    const kG = parseFloat(document.getElementById('gasCoeff').value.trim());
    const kL = parseFloat(document.getElementById('liquidCoeff').value.trim());
    const pAG = parseFloat(document.getElementById('gasBulk').value.trim());
    const pAi = parseFloat(document.getElementById('gasInterface').value.trim());
    const CAi = parseFloat(document.getElementById('liquidInterface').value.trim());
    const CAL = parseFloat(document.getElementById('liquidBulk').value.trim());

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');

    let errors = [];
    let warnings = [];

    // Input validations
    if (isNaN(kG) || kG <= 0 || kG > 0.01) {
        errors.push("üëâ Gas coefficient invalid. Enter 0.0000001 ‚Äì 0.01 mol/m¬≤¬∑s¬∑Pa.");
    }
    if (isNaN(kL) || kL <= 0 || kL > 0.01) {
        errors.push("üëâ Liquid coefficient invalid. Enter 0.000001 ‚Äì 0.01 m/s.");
    }
    if (isNaN(pAG) || pAG < 0 || pAG > 200000) {
        errors.push("üëâ Bulk gas pressure invalid. Enter 0 ‚Äì 200000 Pa.");
    }
    if (isNaN(pAi) || pAi < 0 || pAi > pAG) {
        errors.push("üëâ Interface gas pressure invalid. Enter 0 ‚Äì bulk gas pressure.");
    }
    if (isNaN(CAi) || CAi < 0 || CAi > 100) {
        errors.push("üëâ Interface liquid concentration invalid. Enter 0 ‚Äì 100 mol/m¬≥.");
    }
    if (isNaN(CAL) || CAL < 0 || CAL > CAi) {
        errors.push("üëâ Bulk liquid concentration invalid. Enter 0 ‚Äì interface liquid concentration.");
    }

    // Driving force check
    if (errors.length === 0) {
        if (pAG <= pAi && CAi <= CAL) {
            errors.push("üëâ No mass transfer possible: Both gas and liquid driving forces are insufficient.");
        } else if (pAG <= pAi) {
            warnings.push("‚ö†Ô∏è No gas side driving force. Only liquid side transfer will occur.");
        } else if (CAi <= CAL) {
            warnings.push("‚ö†Ô∏è No liquid side driving force. Only gas side transfer will occur.");
        }
    }

    // Show errors if any
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove("hidden");
        placeholder.classList.add("hidden");
        resultValue.classList.add("hidden");
        return;
    } else {
        errorBox.classList.add("hidden");
    }

    // Calculate flux
    const gasFlux = kG * (pAG - pAi);
    const liquidFlux = kL * (CAi - CAL);

    let fluxValue;
    if (pAG > pAi && CAi > CAL) {
        fluxValue = (gasFlux + liquidFlux) / 2;
    } else if (pAG > pAi) {
        fluxValue = gasFlux;
    } else {
        fluxValue = liquidFlux;
    }

    if (!isFinite(fluxValue) || isNaN(fluxValue)) {
        errorMessage.innerHTML = "üëâ Calculation error: check inputs for valid values.";
        errorBox.classList.remove("hidden");
        resultValue.classList.add("hidden");
        return;
    }

    // Output warnings
    if (Math.abs(fluxValue) < 0.0000001 || Math.abs(fluxValue) > 0.01) {
        warnings.push("‚ö†Ô∏è Flux outside typical range (0.0000001 ‚Äì 0.01 mol/m¬≤¬∑s). Verify inputs.");
    }

    // Display result
    document.getElementById('rateValue').textContent = fluxValue.toFixed(6);

    // Meter & feedback
    const meterFill = document.getElementById('meterFill');
    let meterWidth, meterColor, feedback;

    const absFlux = Math.abs(fluxValue);
    if (absFlux < 0.000001) {
        meterWidth = '20%'; meterColor = '#2ecc71';
        feedback = 'Negligible transfer ‚Äî may be insignificant in practical systems.';
    } else if (absFlux <= 0.00001) {
        meterWidth = '40%'; meterColor = '#27ae60';
        feedback = 'Slow transfer ‚Äî typical in natural environmental processes.';
    } else if (absFlux <= 0.0001) {
        meterWidth = '60%'; meterColor = '#f39c12';
        feedback = 'Moderate transfer ‚Äî common in engineered environmental systems.';
    } else if (absFlux <= 0.001) {
        meterWidth = '80%'; meterColor = '#e67e22';
        feedback = 'Significant transfer ‚Äî high-rate treatment processes.';
    } else {
        meterWidth = '95%'; meterColor = '#e74c3c';
        feedback = 'High transfer rate ‚Äî intensive industrial processes, verify inputs';
    }

    if (fluxValue < 0) {
        feedback = "Reverse " + feedback.toLowerCase();
    }

    meterFill.style.width = meterWidth;
    meterFill.style.backgroundColor = meterColor;
    document.getElementById('feedbackContent').textContent = feedback + (warnings.length ? " " + warnings.join(" ") : "");

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
}

        function printReport() {
            // Update date just before printing
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('printDate').textContent = now.toLocaleDateString('en-US', options);
            
            window.print();
        }
    </script>
    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}
{% comment %} 
1. Formula & Concept (for reference & comments)

Two-Film Theory Mass Transfer Flux:

Flux
=
ùêΩ
=
ùëò
ùê∫
(
ùëù
ùê¥
ùê∫
‚àí
ùëù
ùê¥
ùëñ
)
+
ùëò
ùêø
(
ùê∂
ùê¥
ùëñ
‚àí
ùê∂
ùê¥
ùêø
)
ùëõ
Flux=J=
n
k
G
	‚Äã

(p
AG
	‚Äã

‚àíp
Ai
	‚Äã

)+k
L
	‚Äã

(C
Ai
	‚Äã

‚àíC
AL
	‚Äã

)
	‚Äã


Where:

ùëò
ùê∫
k
G
	‚Äã

 = Gas phase mass transfer coefficient [mol/m¬≤¬∑s¬∑Pa]

ùëò
ùêø
k
L
	‚Äã

 = Liquid phase mass transfer coefficient [m/s]

ùëù
ùê¥
ùê∫
p
AG
	‚Äã

 = Bulk gas partial pressure [Pa]

ùëù
ùê¥
ùëñ
p
Ai
	‚Äã

 = Interface gas partial pressure [Pa]

ùê∂
ùê¥
ùëñ
C
Ai
	‚Äã

 = Interface liquid concentration [mol/m¬≥]

ùê∂
ùê¥
ùêø
C
AL
	‚Äã

 = Bulk liquid concentration [mol/m¬≥]

ùëõ
=
2
n=2 if both gas and liquid driving forces exist, else 1

QEHS/Fire Safety Perspective:

Ensures mass transfer rates are physically meaningful.

Prevents unrealistic inputs (negative pressures, concentrations, or zero coefficients).

Provides thresholds for safe engineering design and environmental compliance.

2. Recommended Input Validation Rules

Strongly recommended for QEHS compliance:

Input	Unit	Acceptable Range	Validation Rules	QEHS Justification
kG (Gas Mass Transfer Coefficient)	mol/m¬≤¬∑s¬∑Pa	0.000001 ‚Äì 1000	Must be >0, numeric, max 6 decimals	Prevents division by zero or physically impossible fluxes
kL (Liquid Mass Transfer Coefficient)	m/s	0.000001 ‚Äì 100	Must be >0, numeric, max 6 decimals	Ensures engineering relevance and prevents calculation errors
pAG (Bulk Gas Pressure)	Pa	0 ‚Äì 1,000,000	Non-negative, numeric	Negative pressures are non-physical
pAi (Interface Gas Pressure)	Pa	0 ‚Äì 1,000,000	Non-negative, numeric	Must not exceed pAG for normal gas-side transfer
CAi (Interface Liquid Conc.)	mol/m¬≥	0 ‚Äì 100	Non-negative, numeric	Prevents negative concentrations
CAL (Bulk Liquid Conc.)	mol/m¬≥	0 ‚Äì 100	Non-negative, numeric	CAL must be < CAi for normal liquid-side driving force

Cross-field/Logical Validations:

Gas driving force: pAG > pAi ‚Üí required for gas-side transfer

Liquid driving force: CAi > CAL ‚Üí required for liquid-side transfer

If both driving forces are insufficient ‚Üí mass transfer = 0

Edge Case Handling:

Division by zero (both kG or kL = 0) ‚Üí error

Negative flux ‚Üí reverse transfer warning

Extremely large flux (>0.001 mol/m¬≤¬∑s) ‚Üí verify inputs

3. Recommended Output Validation Logic
Flux Range (mol/m¬≤¬∑s)	Level	Feedback	Meter Width & Color
<0.000001	Negligible	May be insignificant in practical systems	20%, #2ecc71
0.000001 ‚Äì 0.00001	Slow	Typical in natural environmental processes	40%, #27ae60
0.00001 ‚Äì 0.0001	Moderate	Common in engineered systems	60%, #f39c12
0.0001 ‚Äì 0.001	Significant	High-rate treatment processes	80%, #e67e22
>0.001	High	Intensive industrial processes, verify inputs	95%, #e74c3c

Reverse flux: Add ‚ÄúReverse‚Äù if negative flux

Warnings: Outside typical environmental range (10‚Åª‚Å∑ ‚Äì 10‚Åª¬≥ mol/m¬≤¬∑s) {% endcomment %}