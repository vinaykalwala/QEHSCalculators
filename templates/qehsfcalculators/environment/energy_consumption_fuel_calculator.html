{% extends 'base.html' %}
{% block title %}Energy Consumption Calculator Based On Fuel Used{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
      

        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover¬†effect¬†*/
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
      .btn-wrapper {
    text-align: center; /* centers inline-block buttons */
    margin-top: 20px;
  }

   .btn-wrapper {
    text-align: center; /* centers the button */
    margin-top: 20px;
  }

  .print-btn {
    display: inline-block;
    background:linear-gradient(#1560bd,#000040);
    color: white;
    padding: 8px 18px;   /* control button size */
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    width: auto !important; /* prevent full width */
  }

  .print-btn:hover {
    background: #1560bd;
  }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

       
    </style>
</head>
<body>

    <div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>
<div class="calculator-container printable" id="printArea">

  {% include "includes/print_header_footer.html" %}

  <div class="calculator-header">
    <h1>Energy Consumption Calculator Based On Fuel Used</h1>
    <p>Calculate energy consumed based on fuel usage and fuel energy content.</p>
  </div>

  <div class="calc-content">
    <!-- Calculator -->
    <div class="calc-card">
      <h2>Enter Data</h2>
      <div class="form-group">
        <label for="fuelConsumed">Fuel Consumed (Litres)</label>
        <input type="number" id="fuelConsumed" class="form-input" min="0" step="0.01" placeholder="e.g., 50">
      </div>
      <div class="form-group">
        <label for="fuelEnergy">Fuel Energy Content (kWh/Litre)</label>
        <input type="number" id="fuelEnergy" class="form-input" min="0" step="0.01" placeholder="e.g., 9.8">
      </div>
      <button class="calculate-btn" onclick="calculateEnergy()">Calculate Energy</button>
    </div>

    <!-- Result Section -->
    <div class="result-card">
      <!-- Placeholder -->
      <div class="result-placeholder" id="placeholder">
        <img src="/static/images/mlc_environment_result.png" alt="Energy illustration">
        <p>This tool will calculate the <strong>Energy Consumption</strong>. Enter your data to see results here.</p>
      </div>

      <!-- Error Box -->
      <div class="result-error hidden" id="resultError">
        <div class="error-icon">‚ùå</div>
        <div class="error-message" id="errorMessage"></div>
      </div>

      <!-- Result Output -->
      <div class="result-value hidden" id="resultValue">
        <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
          <h2>Energy Consumption</h2>
        </div>

        <div class="rate-display">
          <div class="rate-value" id="rateValue">0.00</div>
          <div class="rate-label" style="color:#2980b9; font-size:18px; font-weight:bold;">kWh</div>
        </div>

        <div class="result-feedback">
          <div class="feedback-title">Assessment</div>
          <div class="feedback-content" id="feedbackContent"></div>
        </div>

        <div class="btn-wrapper">
          <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Notes Section -->
  <div class="note-section">
    <div class="note-card">
      <h3>üìò About This Calculator</h3>
      <p>
        The <strong>Energy Consumption Calculator</strong> determines the energy consumed based on the amount of fuel used and the fuel's energy content.  
        This is useful for energy audits, industrial monitoring, and efficiency analysis.
      </p>
    </div>

    <div class="note-card">
      <h3>‚öôÔ∏è Parameters Used</h3>
      <ul class="note-list">
        <li><strong>Fuel Consumed (Litres):</strong> The quantity of fuel used.</li>
        <li><strong>Fuel Energy Content (kWh/Litre):</strong> Energy provided per litre of fuel.</li>
      </ul>
    </div>

   <div class="note-card">
  <h3>‚úÖ Input Validation Rules</h3>
  <ul class="note-list">
    <li>No negative values allowed ‚Äî all inputs must be positive numbers.</li>
    <li>Fuel Consumed: must be between <b>0.1 L</b> and <b>100,000 L</b>.</li>
    <li>Fuel Energy Content: must be between <b>5 kWh/L</b> and <b>12 kWh/L</b>.</li>
    <li>Decimal precision: up to 2 decimals for both inputs.</li>
    <li>Empty fields are not allowed ‚Äî both Fuel Consumed and Energy Content are required.</li>
    <li>Extreme values outside realistic operational ranges are blocked to ensure compliance and audit accuracy.</li>
  </ul>
</div>

   <div class="note-card">
  <h3>üì§ Output Validation</h3>
    <p>Assessment of calculated energy consumption based on fuel</p>

  <ul class="note-list">
    <li>Energy = 0 ‚Üí ‚ùó No energy consumed.</li>
    <li>Energy &lt; 1000 kWh ‚Üí ‚ö†Ô∏è Low energy consumption.</li>
    <li>1000 ‚â§ Energy ‚â§ 5000 kWh ‚Üí ‚úÖ Typical energy consumption.</li>
    <li>Energy &gt; 5000 kWh ‚Üí üåü High energy consumption.</li>
    <li>Optional Warnings for Extreme Values:
      <ul>
        <li>Fuel Consumed &gt; 50,000 L ‚Üí ‚ö†Ô∏è  Fuel consumed is very high ‚Äî verify data.</li>
        <li>Fuel Energy Content &gt; 11 kWh/L ‚Üí ‚ö†Ô∏è Fuel energy content is high ‚Äî verify fuel type.</li>
      </ul>
    </li>
  </ul>
</div>
<div class="note-card">
  <h3>üìè Governing Principle</h3>
  <p>
    The calculation of energy consumption from fuel used is based on internationally recognized standards and regulatory frameworks, ensuring safety, compliance, and auditability.
  </p>
  <ul class="note-list">
    <li>
      <strong>Calculation Basis:</strong> Energy (kWh) = Fuel Consumed (L) √ó Fuel Energy Content (kWh/L).  
      This is the standard method for converting fuel usage into energy metrics for operational and fire safety assessments.
    </li>
  </ul><br>
      <h3>Standards Referenced:</h3>
      <ul>
        <li><strong>ISO 50001:</strong> Energy Management Systems ‚Äî provides guidance on monitoring and reporting energy consumption.</li>
        <li><strong>ISO 1928 / ASTM D240:</strong> Fuel calorific value standards ensuring correct energy content is applied for liquid and solid fuels.</li>
        <li><strong>NFPA 30 / NFPA 1:</strong> Fire Code standards for calculating combustible load based on fuel storage and usage.</li>
        <li><strong>OSHA / ILO Guidelines:</strong> Occupational safety rules requiring accurate tracking of fuel and energy usage to prevent hazards.</li>
        <li><strong>Regional Energy Codes:</strong> ECBC, CIBSE, and local energy codes for industrial energy efficiency calculations.</li>
      </ul>
    
    
      <h3>Compliance Rationale:</h3> Accurately calculating energy consumption allows:
      <ul>
        <li>Evaluation of energy efficiency and operational KPIs.</li>
        <li>Assessment of fire load and potential combustible hazards in compliance with NFPA and ISO fire safety requirements.</li>
        <li>Monitoring for extreme or abnormal fuel usage that may indicate unsafe conditions.</li>
        <li>Documentation and reporting for regulatory audits and environmental sustainability reporting.</li>
      </ul>
    </li>
    
      <strong>Operational Note:</strong> All inputs must be verified for accuracy, realistic range, and conformity with fuel certificates and equipment specifications to ensure meaningful energy calculations.
    </li>
</div>

    <div class="note-card">
      <h3>üîö Conclusion</h3>
      <p>
        This calculator provides quick and accurate energy consumption based on fuel usage.  
        It helps engineers, energy auditors, and operators assess efficiency and plan energy needs.
      </p>
    </div>
  </div>
</div>

<script>
function calculateEnergy() {
  const fuelRaw = document.getElementById('fuelConsumed')?.value.trim() ?? "";
  const energyRaw = document.getElementById('fuelEnergy')?.value.trim() ?? "";

  const errorBox = document.getElementById('resultError');
  const errorMessage = document.getElementById('errorMessage');
  const placeholder = document.getElementById('placeholder');
  const resultValue = document.getElementById('resultValue');
  const rateEl = document.getElementById('rateValue');
  const feedbackEl = document.getElementById('feedbackContent');

  // Reset UI
  if (errorBox) errorBox.classList.add('hidden');
  if (errorMessage) errorMessage.innerHTML = "";
  if (feedbackEl) feedbackEl.innerHTML = "";

  const errors = [];
  const warnings = [];

  // Required fields check
  if (fuelRaw === "") errors.push("üëâ Please enter the fuel consumed (Litres).");
  if (energyRaw === "") errors.push("üëâ Please enter the fuel energy content (kWh/Litre).");

  if (errors.length > 0) {
    errorMessage.innerHTML = errors.join("<br>");
    errorBox.classList.remove('hidden');
    placeholder.classList.add('hidden');
    resultValue.classList.add('hidden');
    return;
  }

  const fuel = parseFloat(fuelRaw);
  const energyContent = parseFloat(energyRaw);

  // Numeric and positive check
  if (!Number.isFinite(fuel) || !Number.isFinite(energyContent)) {
    errorMessage.innerHTML = "‚ö†Ô∏è Invalid numeric values.";
    errorBox.classList.remove('hidden');
    placeholder.classList.add('hidden');
    resultValue.classList.add('hidden');
    return;
  }

  if (fuel <= 0) errors.push("‚ö†Ô∏è Fuel consumed must be greater than 0.");
  if (energyContent <= 0) errors.push("‚ö†Ô∏è Fuel energy content must be greater than 0.");

  // Strict QEHS/fire safety range enforcement
  if (fuel < 0.1 || fuel > 100000) {
    errors.push("‚ö†Ô∏è Fuel consumed must be between 0.1 L and 100,000 L.");
  }
  if (energyContent < 5 || energyContent > 12) {
    errors.push("‚ö†Ô∏è Fuel energy content must be between 5 and 12 kWh/L.");
  }

  // Stop calculation if any errors
  if (errors.length > 0) {
    errorMessage.innerHTML = errors.join("<br>");
    errorBox.classList.remove('hidden');
    placeholder.classList.add('hidden');
    resultValue.classList.add('hidden');
    return;
  }

  // Optional warnings for extreme but valid values
  if (fuel > 50000) warnings.push("‚ö†Ô∏è Fuel consumed is very high ‚Äî verify data.");
  if (energyContent > 11) warnings.push("‚ö†Ô∏è Fuel energy content is high ‚Äî verify fuel type.");

  // Calculation
  const energyConsumed = fuel * energyContent;
  rateEl.textContent = energyConsumed.toFixed(2);

  // Feedback based on thresholds
  let feedback = "";
  if (energyConsumed === 0) feedback = "‚ùó No energy consumed.";
  else if (energyConsumed < 1000) feedback = "‚ö†Ô∏è Low energy consumption.";
  else if (energyConsumed <= 5000) feedback = "‚úÖ Typical energy consumption.";
  else feedback = "üåü High energy consumption.";

  let details = `<div style="margin-top:6px;">
                 
                 </div>`;

  if (warnings.length > 0) {
    details += `<div style="margin-top:6px; font-size:0.9em; color:#b35d00;">Note: ${warnings.join(" | ")}</div>`;
  }

  feedbackEl.innerHTML = `<div>${feedback}</div>${details}`;

  // Show result
  placeholder.classList.add('hidden');
  resultValue.classList.remove('hidden');
  errorBox.classList.add('hidden');
}

// Print function (unchanged)
function printReport() {
  const el = document.getElementById('printDate');
  if (el) {
    const now = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    el.textContent = now.toLocaleDateString('en-IN', options);
  }
  window.print();
}

</script>


        <script src="{% static 'js/print.js' %}"></script>



<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
{% endblock %}


 <!-- . QEHS / Fire Safety Analysis of Inputs and Outputs

Inputs:

Fuel Consumed (L)

Represents the amount of fuel used in a process or equipment.

Critical for energy audits, fuel tracking, fire load calculations, and environmental reporting.

Must be non-negative, physically realistic, and consistent with the equipment‚Äôs rated consumption.

Fuel Energy Content (kWh/L)

Indicates the calorific value of the fuel.

Directly used to calculate energy consumption (kWh).

Must reflect real fuel standards (ISO 1928 for coal, ASTM D240 for liquid fuels, or local fuel certificates).

Output:

Energy Consumption (kWh)

KPI for energy efficiency, carbon footprint calculations, and fire safety load estimation.

Must be logically consistent with inputs and checked for anomalies.

2. Recommended Input Validation Rules
Parameter	Unit	Allowed Range	Precision	QEHS / Compliance Notes
Fuel Consumed	Litres	0.1 ‚Äì 100,000	2 decimals	Must be positive; 0 means no consumption. Ensures realistic fire load and energy calculation.
Fuel Energy Content	kWh/Litre	5 ‚Äì 12	2 decimals	Typical diesel/gasoline/kerosene range; prevents unrealistic values. Needed for energy audit accuracy.
Cross-validation	‚Äì	N/A	‚Äì	Energy consumed should not exceed maximum rated capacity of equipment (optional but recommended for industrial audits).

Additional rules:

Reject empty inputs.

Reject non-numeric inputs.

Allow default if energy content not provided, but alert user.

Warn if Fuel Consumed or Energy Content is unusually high (fire hazard / audit flag).

3. Edge Case Validations

Zero Fuel Consumed: Energy = 0 ‚Üí Show warning ‚ÄúNo energy consumed.‚Äù

Zero Energy Content: Invalid ‚Üí Show error ‚ÄúEnergy content cannot be zero.‚Äù

Negative Values: Not allowed.

Extreme Outliers:

Fuel > 100,000 L ‚Üí warn ‚ÄúCheck for possible data entry error.‚Äù

Energy Content outside realistic range ‚Üí warn ‚ÄúVerify fuel calorific value.‚Äù

Large Energy Values: Could indicate overconsumption ‚Üí flag for audit review.

4. Output Validation Logic & Thresholds
Energy (kWh)	Assessment	Notes
0	‚ùó No energy consumed	Indicates idle or missing data.
0 < Energy < 1000	‚ö†Ô∏è Low energy consumption	May be insufficient for process; small equipment.
1000 ‚â§ Energy ‚â§ 5000	‚úÖ Typical energy consumption	Standard operating conditions for moderate equipment.
Energy > 5000	üåü High energy consumption	Large fuel use; may indicate fire load or abnormal operation; flag for review.

Compliance Rationale:

Aligns with fire safety audits to understand potential combustible load.

Supports ISO 50001 / energy management KPIs.

Alerts operators to abnormal energy/fuel consumption which may indicate unsafe operating conditions. -->