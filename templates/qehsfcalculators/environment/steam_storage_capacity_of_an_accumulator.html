{% extends 'base.html' %}
{% block title %}Steam storage capacity of an accumulator calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam storage capacity of an accumulator calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .back-btn {
            background: linear-gradient(#1560bd, #000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }

        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd, #000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center;
            flex-wrap: wrap;
        }

        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
            line-height: 1.1;
        }

        .rate-label { 
            color: #7f8c8d;
            font-size: 20px;
            font-weight: bold;
        }

        /* Responsive styles */
        @media (max-width: 1200px) {
            .rate-value {
                font-size: 38px;
            }
            .rate-label {
                font-size: 18px;
            }
        }
        
        @media (max-width: 992px) {
            .rate-value {
                font-size: 34px;
            }
            .rate-label {
                font-size: 17px;
            }
        }
        
        @media (max-width: 768px) {
            .rate-value {
                font-size: 30px;
                margin-bottom: 8px;
            }
            .rate-label {
                font-size: 16px;
            }
        }
        
        @media (max-width: 576px) {
            .rate-value {
                font-size: 28px;
                margin-bottom: 6px;
            }
            .rate-label {
                font-size: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .rate-display {
                flex-direction: column;
                gap: 2px;
                text-align: center;
            }
            .rate-value {
                font-size: 24px;
                margin-bottom: 4px;
            }
            .rate-label {
                font-size: 14px;
            }
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>

    <div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>


<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}



<div class="calculator-header">
    <h1>Steam Storage Capacity of an Accumulator Calculator</h1>
    <p>Calculate the amount of steam that can be stored in a <strong>steam accumulator</strong> based on water enthalpy, mass, and evaporation enthalpy.</p>
</div>

<div class="calc-content">
    <!-- Calculator Inputs -->
    <div class="calc-card">
        <h2>Enter Parameters</h2>

        <div class="form-group">
            <label><strong>Water Enthalpy (kJ/kg):</strong></label>
            <input type="number" id="waterEnthalpy" class="form-input" placeholder="Enter water enthalpy" step="any">
        </div>

        <div class="form-group">
            <label><strong>Mass of Water (kg):</strong></label>
            <input type="number" id="massOfWater" class="form-input" placeholder="Enter mass of water" step="any">
        </div>

        <div class="form-group">
            <label><strong>Enthalpy of Evaporation (kJ/kg):</strong></label>
            <input type="number" id="enthalpyEvaporation" class="form-input" placeholder="Enter enthalpy of evaporation" step="any">
        </div>

        <button class="calculate-btn" onclick="calculateSteamStorage()">Calculate</button>
    </div>

    <!-- Result Section -->
    <div class="result-card">
        <div class="result-placeholder" id="placeholder">
            <img src="/static/images/mlc_environment_result.png" alt="Steam accumulator illustration">
            <p>This tool calculates the <strong>Steam Storage Capacity</strong> of an accumulator in kg.</p>
        </div>

        <div class="result-error hidden" id="resultError" role="alert" aria-live="polite">
            <div class="error-icon">❌</div>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <div class="result-value hidden" id="resultValue" aria-live="polite">
            <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                <h2>Steam Storage Capacity</h2>
            </div>

            <div class="rate-display" style="gap:12px; align-items:center; justify-content:center;">
                <div class="rate-value" id="steamStorage">0.00</div>
                <div class="rate-label" style="font-size:16px; color: #2980b9;">kg</div>
            </div>

            <div class="result-feedback">
                <div class="feedback-title">Warnings & Assessment</div>
                <div class="feedback-content" id="feedbackContent"></div>
            </div>

            <div class="btn-wrapper">
                <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
            </div>
        </div>
    </div>
</div>

<!-- Notes Section -->
<div class="note-section">
  <div class="note-card">
    <h3>📘 About This Calculator</h3>
    <p>
      Determines how much steam can be stored in a <strong>steam accumulator</strong> using the water's heat content 
      and the energy required for evaporation. Helps industries manage steam production, maintain pressure stability, 
      and optimize energy usage.
    </p>
  </div>

  <div class="note-card">
    <h3>⚙ Parameters Used</h3>
    <ul class="note-list">
      <li><strong>Water Enthalpy (kJ/kg):</strong> Energy content of water before steam formation.</li>
      <li><strong>Mass of Water (kg):</strong> Total water present in the accumulator.</li>
      <li><strong>Enthalpy of Evaporation (kJ/kg):</strong> Energy required to convert water into steam.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>✅ Input Validation Rules</h3>
    <ul class="note-list">
      <li><strong>Water Enthalpy:</strong> Required, numeric, 1 ≤ value ≤ 5,000 kJ/kg.</li>
      <li><strong>Mass of Water:</strong> Required, numeric, 1 ≤ value ≤ 50,000 kg.</li>
      <li><strong>Enthalpy of Evaporation:</strong> Required, numeric, 50 ≤ value ≤ 3,000 kJ/kg, cannot be zero.</li>
      <li><strong>Advisories:</strong>
        <ul>
          <li>Mass < 10 kg: Steam storage may be insufficient.</li>
          <li>Water Enthalpy < 100 kJ/kg: Steam generation may be inefficient.</li>
          <li>Enthalpy of Evaporation < 500 kJ/kg: Check input accuracy.</li>
          <li>Mass > 40,000 kg: Check accumulator capacity.</li>
          <li>Water Enthalpy > 4,000 kJ/kg: Confirm process parameters.</li>
          <li>Enthalpy of Evaporation > 2,500 kJ/kg: Check input correctness.</li>
        </ul>
      </li>
      <li><strong>Constraints:</strong> All inputs must be numeric and non-negative; division by zero not allowed.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>📊 Output Validations & Feedback</h3>
    <ul class="note-list">
      <li><strong>Steam Storage:</strong> Displayed in kg, rounded to 2 decimal places, must be finite and > 0.</li>
      <li><strong>Assessment:</strong>
        <ul>
          <li>No warnings: Steam storage is sufficient and system performance is optimal.</li>
          <li>1–3 warnings: Check input parameters; steam storage may be suboptimal.</li>
          <li>>3 warnings: Inputs indicate potential system issues; verify accumulator capacity and process settings.</li>
        </ul>
      </li>
      <li>Warnings triggered for: non-finite or ≤0 results, or unusual input values as listed above.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>📖 Governing Principle</h3>
    <p>
      A steam accumulator's storage capacity is not tied to a single global standard but is rather designed and calculated according to specific industry standards and regulations based on its application and jurisdiction, such as the ASME Boiler and Pressure Vessel Code in the United States or European codes like the AD 2000 and EN 12953 for boiler design and safety in Europe. The capacity calculation itself depends on the vessel's dimensions, internal pressure, and the specific needs of the steam system it serves.
    </p>
    <p><b>Key factors influencing steam accumulator standards and calculations:</b></p>
    <p><b>Application:</b> The intended use of the accumulator (e.g., industrial steam supply, power generation) dictates which standards are most relevant.</p>
    <p><b>Jurisdictional Standards:</b> Different regions have their own safety and design codes for pressure vessels, including accumulators.</p>
    <p><b>ASME Code:</b> In the United States, the American Society of Mechanical Engineers (ASME) Boiler and Pressure Vessel Code provides rules for the design, construction, and operation of steam accumulators.</p>
    <p><b>European Standards:</b> In Europe, regulations like the Pressure Equipment Directive (PED) and specific codes for boiler design (e.g., parts of the EN 12953 series) are used.</p>
    <p><b>Material and Construction:</b> Standards also address the types of materials and construction methods for accumulators, which can range from welded steel to cast steel.</p>
    <p><b>Customer-Specific Needs:</b> Ultimately, the required storage capacity is determined by the client based on the steam load requirements of their specific plant or process.</p>
    <p><b>How to find the relevant standard:</b></p>
    <p><b>The manufacturer:</b> They will have detailed specifications and compliance information for their equipment.</p>
    <p><b>The operating region:</b> Identify the relevant national or regional safety and design codes for pressure vessels.</p>
    <p><b>The design engineer:</b> The engineer responsible for the overall steam system will specify the appropriate standards to be followed.</p>
  </div>

  <div class="note-card">
    <h3>🔚 Conclusion</h3>
    <p>
      This calculator provides reliable estimates of steam storage capacity, supporting <strong>energy efficiency</strong>, <strong>pressure stability</strong>, and <strong>QEHS compliance</strong>. Ensure input values (Water Enthalpy, Mass of Water, Enthalpy of Evaporation) are accurate and validate with standards like ASME Boiler and Pressure Vessel Code, EN 12953, or field measurements for critical applications to ensure safe and efficient steam system performance.
    </p>
  </div>
</div>

<script>
function showErrors(errors) {
    const errorBox = document.getElementById("resultError");
    const errorMessage = document.getElementById("errorMessage");
    const placeholder = document.getElementById("placeholder");
    const resultValue = document.getElementById("resultValue");

    errorMessage.innerHTML = errors.join("<br>");
    errorBox.classList.remove("hidden");
    placeholder.classList.add("hidden");
    resultValue.classList.add("hidden");
}

function calculateSteamStorage() {
    const waterEnthalpyRaw = document.getElementById("waterEnthalpy").value.trim();
    const massOfWaterRaw = document.getElementById("massOfWater").value.trim();
    const enthalpyEvaporationRaw = document.getElementById("enthalpyEvaporation").value.trim();

    const errors = [];
    const warnings = [];
    const resultEl = document.getElementById("steamStorage");
    const feedbackEl = document.getElementById("feedbackContent");

    // Empty input validation
    if (!waterEnthalpyRaw) errors.push("Please enter Water Enthalpy (kJ/kg).");
    if (!massOfWaterRaw) errors.push("Please enter Mass of Water (kg).");
    if (!enthalpyEvaporationRaw) errors.push("Please enter Enthalpy of Evaporation (kJ/kg).");
    if (errors.length) return showErrors(errors);

    const waterEnthalpy = parseFloat(waterEnthalpyRaw);
    const massOfWater = parseFloat(massOfWaterRaw);
    const enthalpyEvaporation = parseFloat(enthalpyEvaporationRaw);

    // Numeric & range validation
    if (!Number.isFinite(waterEnthalpy) || waterEnthalpy <= 0 || waterEnthalpy > 5000)
        errors.push("Water Enthalpy must be > 0 and ≤ 5000 kJ/kg.");
    if (!Number.isFinite(massOfWater) || massOfWater <= 0 || massOfWater > 50000)
        errors.push("Mass of Water must be > 0 and ≤ 50,000 kg.");
    if (!Number.isFinite(enthalpyEvaporation) || enthalpyEvaporation <= 0 || enthalpyEvaporation > 3000)
        errors.push("Enthalpy of Evaporation must be > 0 and ≤ 3000 kJ/kg.");
    if (enthalpyEvaporation === 0) errors.push("Enthalpy of Evaporation cannot be zero.");

    if (errors.length) return showErrors(errors);

    // Warnings for unusual input values
    if (massOfWater < 10) warnings.push("Small mass of water; steam storage may be insufficient.");
    if (waterEnthalpy < 100) warnings.push("Low water enthalpy; steam generation may be inefficient.");
    if (enthalpyEvaporation < 500) warnings.push("Very low enthalpy of evaporation; check input accuracy.");
    if (massOfWater > 40000) warnings.push("Very high mass of water; check accumulator capacity.");
    if (waterEnthalpy > 4000) warnings.push("Very high water enthalpy; confirm process parameters.");
    if (enthalpyEvaporation > 2500) warnings.push("High enthalpy of evaporation; check input correctness.");

    // Calculation
    const steamStorage = (waterEnthalpy * massOfWater) / enthalpyEvaporation;
    resultEl.textContent = steamStorage.toFixed(2);

    // Assessment / Feedback based on number of warnings
    let assessment = "";
    if (warnings.length === 0) {
        assessment = "Steam storage is sufficient and system performance is optimal.";
    } else if (warnings.length <= 3) {
        assessment = "Check input parameters; steam storage may be suboptimal.";
    } else {
        assessment = "Inputs indicate potential system issues; verify accumulator capacity and process settings.";
    }

    // Display warnings + assessment
    feedbackEl.innerHTML = warnings.length 
        ? `<div style="color:#b35d00;">${warnings.join("<br>")}</div><div style="margin-top:5px;"><strong>Assessment:</strong> ${assessment}</div>` 
        : `<div><strong>Assessment:</strong> ${assessment}</div>`;

    document.getElementById("placeholder").classList.add("hidden");
    document.getElementById("resultValue").classList.remove("hidden");
    document.getElementById("resultError").classList.add("hidden");
}

function printReport() {
    const el = document.getElementById('printDate');
    if (el) {
        el.textContent = new Date().toLocaleDateString('en-US', { year:'numeric', month:'long', day:'numeric' });
    }
    window.print();
}
</script>




    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- 
📌 Steam Storage Calculator (Essentials)

🔹 Formula:
    • Steam Storage (kg) = (Water Enthalpy × Mass of Water) / Enthalpy of Evaporation
      - Water Enthalpy (kJ/kg)
      - Mass of Water (kg)
      - Enthalpy of Evaporation (kJ/kg)

🔹 Input Validations:
    • Water Enthalpy:
        - Required
        - Must be numeric
        - >0 and ≤5000 kJ/kg
    • Mass of Water:
        - Required
        - Must be numeric
        - >0 and ≤50,000 kg
    • Enthalpy of Evaporation:
        - Required
        - Must be numeric
        - >0 and ≤3000 kJ/kg
        - Cannot be zero
    • Warnings for unusual values:
        - Mass <10 kg → steam storage may be insufficient
        - Water Enthalpy <100 → inefficient steam generation
        - Enthalpy of Evaporation <500 → check input accuracy
        - Mass >40,000 → check accumulator capacity
        - Water Enthalpy >4000 → confirm process parameters
        - Enthalpy of Evaporation >2500 → check input correctness

🔹 Output Validations:
    • Steam Storage must be finite and >0
    • Display warnings if any unusual values detected
-->
