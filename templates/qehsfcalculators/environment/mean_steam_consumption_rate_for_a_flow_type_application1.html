{% extends 'base.html' %}
{% block title %}Mean Steam Consumption Rate For  A Flow Type Application(1){% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mean Steam Consumption Rate For  A Flow Type Application(1)</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
<style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }
        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
             /* display: flex;  */
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            /* overflow-y: auto;  */
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Input rows for better organization */
        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .input-row .form-group {
            flex: 1;
        }
        
        @media (max-width: 600px) {
            .input-row {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }

                .rate-display {
                display: flex;
                gap: 20px;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap; /* responsive */
                text-align: center;
            }

            .rate-block {
                display: flex;
                flex-direction: column;
                align-items: center;
                min-width: 120px; /* keeps blocks same width */
            }

            .rate-label {
                font-weight: bold;
                font-size: 16px;
                color: #444;
                margin-bottom: 5px;
            }

            .rate-value {
                font-size: 40px;
                font-weight: 700;
                color: #2980b9;
                line-height: 1.2;
            }

            .rate-unit {
                font-size: 14px;
                color: #777;
                margin-top: 4px;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .rate-value { font-size: 32px; }
            }

            @media (max-width: 480px) {
                .rate-value { font-size: 26px; }
                
                .rate-unit { font-size: 12px; }
                
            }



        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
                .result-feedback {
    background: #f8f9fa;
    border-radius: 10px;
    padding: 18px 20px;
    border-left: 4px solid #3498db;
    text-align: left;
    max-width: 800px; /* keeps it readable on large screens */
    margin: 0 auto;   /* centers it */
}

.feedback-title {
    font-weight: 600;
    margin-bottom: 8px;
    color: #2c3e50;
    font-size: 18px;
}

.feedback-content { 
    color: #34495e; 
    font-size: 16px;
    line-height: 1.5;
}

/* Responsive breakpoints */
@media (max-width: 768px) {
    .result-feedback {
        padding: 15px;
        font-size: 15px;
    }

    .feedback-title {
        font-size: 16px;
    }

    .feedback-content {
        font-size: 14px;
    }
}

@media (max-width: 480px) {
    .result-feedback {
        padding: 12px;
        border-left-width: 3px;
    }

    .feedback-title {
        font-size: 15px;
    }

    .feedback-content {
        font-size: 13px;
    }
}

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>

    <div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>


<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}


<div class="calculator-header">
  <h1>Mean Steam Consumption Rate For  A Flow Type Application(1)</h1>
    <p>
    Calculate the <strong>mean steam consumption rate (ṁₛ, kg/s)</strong> required to heat a fluid stream. 
    Ensure all inputs are provided in consistent SI units.
    </p>

</div>

<div class="calc-content">
  <!-- Calculator -->
  <div class="calc-card">
    <h2>Enter Data</h2>

    <div class="input-row">
      <div class="form-group">
        <label for="mflow"><strong>Mass Flow of Fluid (ṁ) (kg/s):</strong></label>
        <input type="number" id="mflow" class="form-input" step="any" placeholder="e.g., 2.5">
      </div>

      <div class="form-group">
        <label for="cp"><strong>Specific Heat Capacity (cₚ) (kJ/kg·°C):</strong></label>
        <input type="number" id="cp" class="form-input" step="any" placeholder="e.g., 4.18 (water)">
      </div>
    </div>

    <div class="input-row">
      <div class="form-group">
        <label for="dT"><strong>Temperature Rise (ΔT) (°C):</strong></label>
        <input type="number" id="dT" class="form-input" step="any" placeholder="e.g., 25">
      </div>

      <div class="form-group">
        <label for="hfg"><strong>Latent Heat of Vaporization (h<sub>fg</sub>) (kJ/kg):</strong></label>
        <input type="number" id="hfg" class="form-input" step="any" placeholder="e.g., 2257">
      </div>
    </div>

    <button class="calculate-btn" onclick="calculateSteamConsumption()">Calculate Steam Consumption</button>
  </div>

  <!-- Result Section -->
  <div class="result-card">
    <div class="result-placeholder" id="placeholder">
      <img src="/static/images/mlc_environment_result.png" alt="Steam consumption illustration">
      <p>This tool calculates <strong>mean steam consumption (kg/s)</strong> and equivalent kg/hr.</p>
    </div>

    <div class="result-error hidden" id="resultError">
      <div class="error-icon">❌</div>
      <div class="error-message" id="errorMessage"></div>
    </div>

    <div class="result-value hidden" id="resultValue">
      <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
        <h2>Calculated Steam Consumption</h2>
      </div>

      <div class="rate-display">
        <div class="rate-value" id="steamRate">0.0000</div>
        <div class="rate-label" style="color:#2980b9; font-size:20px; font-weight:bold;">kg/s</div>
      </div>

      <div style="margin-top:8px;">
        <div><strong>Equivalent:</strong> <span id="steamRateHour">0.00</span> kg/hr</div>
      </div>

      <div class="result-feedback">
        <div class="feedback-title">Assessment</div>
        <div class="feedback-content" id="feedbackContent"></div>
      </div>

      <div class="btn-wrapper">
        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
      </div>
    </div>
  </div>
</div>

<!-- Notes Section -->
<div class="note-section">
  <div class="note-card">
    <h3>📘 About This Calculator</h3>
    <p>
      This calculator estimates steam required to heat a process fluid by ΔT.
      It assumes steady-state conditions and ignores heat losses. Inputs must be in consistent SI units.
    </p>
  </div>
  <div class="note-card">
  <h3>❓  Parameters</h3>
    <ul class="note-list">
        <li><strong>Mass Flow Rate (ṁ):</strong> Process fluid flow rate in kg/s. Typical range: 0.0001 – 10,000 kg/s.</li>
        <li><strong>Specific Heat Capacity (cₚ):</strong> Fluid's heat capacity in kJ/kg·°C. Typical: water ≈ 4.18, oils ≈ 1.67–2.1.</li>
        <li><strong>Temperature Rise (ΔT):</strong> Desired temperature increase in °C. Typical range: 0.1 – 200°C.</li>
        <li><strong>Latent Heat of Vaporization (h<sub>fg</sub>):</strong> Steam's latent heat in kJ/kg. Typical: 2257 kJ/kg at 100°C.</li>
        <li><strong>Assumptions:</strong> Steady-state conditions, no heat losses, saturated steam used for heating.</li>
    </ul>
</div>


  <div class="note-card">
    <h3>✅ Input Validations</h3>
    <ul class="note-list">
      <li><strong>ṁ (kg/s):</strong> > 0. Typical: 0.0001 – 10000.</li>
      <li><strong>cₚ (kJ/kg·°C):</strong> > 0. Typical: 0.1 – 10.</li>
      <li><strong>ΔT (°C):</strong> > 0. Typical: 0.1 – 200.</li>
      <li><strong>h<sub>fg</sub> (kJ/kg):</strong> > 0. Typical: 100 – 3000.</li>
      <li>Decimal precision: warning if > 4 decimals.</li>
    </ul>
  </div>
  <div class="note-card">
    <h3>✅ Output Validations</h3>
    <ul class="note-list">
        <li><strong>Steam Consumption (ṁₛ):</strong> Must be finite and positive (kg/s). Error if result ≤ 0 or non-finite.</li>
        <li><strong>Plausibility Check:</strong> Error if ṁₛ > 100,000 kg/s (likely unit error).</li>
        <li><strong>Range Assessment:</strong>
            <ul>
                <li>ṁₛ &lt; 0.01 kg/s → Very low steam demand (lab/pilot scale).</li>
                <li>0.01 ≤ ṁₛ &lt; 10 kg/s → Normal industrial steam demand</li>
                <li>ṁₛ ≥ 10 kg/s → Very large steam demand — verify inputs and system design.</li>
            </ul>
        </li>
        <li><strong>Unit Consistency:</strong> Output in kg/s with equivalent kg/hr provided.</li>
        <li><strong>Input Verification:</strong> Results display includes all input values for cross-checking.</li>
    </ul>
</div>
<div class="note-card">
    <h3>📐 Governing Principle</h3>

    <p>
        There is no single international standard for calculating mean steam consumption in flow-type applications; rather, it is a principle derived from heat transfer calculations, often referencing specific industrial guidelines like those from Spirax Sarco or calculating based on British Standards (BS) for boiler efficiency testing under steady load conditions. The specific method depends on the application, but typically involves accounting for the heat needed to raise a product's temperature (heating-up component) and the ongoing heat loss to the environment (heat loss component) to determine the total heat demand and thus the steam rate.
    </p>

    <h3>How to Determine Mean Steam Consumption:</h3>
    <ul class="note-list">
        <li><strong>Understand the Heat Transfer Process:</strong> Steam's primary function in these applications is to deliver heat. This involves the steam condensing on one side of a heat exchanger, releasing its latent heat to a process on the other side.</li>
        <li><strong>Identify the Components of Steam Demand:</strong>
            <ul class="note-list">
                <li><strong>Heating-up Component:</strong> The energy required to raise the temperature of the process fluid or product to the desired level.</li>
                <li><strong>Heat Loss Component:</strong> The ongoing energy required to compensate for heat lost to the surrounding environment as the product temperature is maintained.</li>
            </ul>
        </li>
        <li><strong>Utilize Heat Transfer Equations:</strong> The mean steam consumption is determined by calculating the total heat demand, which is the sum of these two components. This calculation often uses formulas that relate the steam's latent heat, the temperature difference, and the mass of the product to be heated.</li>
        <li><strong>Refer to Industry Guidelines:</strong>
            <ul class="note-list">
                <li><strong>Spirax Sarco:</strong> Provides detailed methods and equations for estimating steam consumption in various heating and process applications.</li>
                <li><strong>British Standards (BS845:1987):</strong> While focused on boiler efficiency, this standard describes methods for operating boilers under steady-load conditions, which is a crucial aspect for accurately determining steam consumption rates in flow applications.</li>
            </ul>
        </li>
    </ul>

    <h3>Key Considerations:</h3>
    <ul class="note-list">
        <li><strong>Application-Specific:</strong> The exact method and relevant formulas will vary based on the specific flow-type application (e.g., a heat exchanger for process heating vs. a steam turbine).</li>
        <li><strong>Energy Optimization:</strong> Accurately determining the mean steam consumption is vital for optimizing energy usage and ensuring that the system is sized correctly to meet heat demands.</li>
        <li><strong>Safety and Monitoring:</strong> Always follow industry safety standards and regularly monitor for steam leaks and pressure drops to ensure system efficiency and prevent failures.</li>
    </ul>
</div>


  <div class="note-card">
    <h3>💡 Conclusion</h3>
    <p>
        This calculator provides reliable steam consumption estimates for heating applications using fundamental 
        heat transfer principles. The results assume ideal conditions without heat losses, so actual steam 
        requirements may be 10-20% higher in practice. Always verify steam properties from current steam tables 
        for your specific pressure conditions, as h<sub>fg</sub> varies significantly with pressure. For critical 
        applications, consider efficiency factors and consult engineering standards.
    </p>
</div>

</div>


<script>
function showErrors(errors) {
  const errorBox = document.getElementById("resultError");
  const errorMessage = document.getElementById("errorMessage");
  const placeholder = document.getElementById("placeholder");
  const resultValue = document.getElementById("resultValue");
  errorMessage.innerHTML = errors.join("<br>");
  errorBox.classList.remove("hidden");
  placeholder.classList.add("hidden");
  resultValue.classList.add("hidden");
}

function calculateSteamConsumption() {
  const mflow = parseFloat(document.getElementById("mflow").value);
  const cp = parseFloat(document.getElementById("cp").value);
  const dT = parseFloat(document.getElementById("dT").value);
  const hfg = parseFloat(document.getElementById("hfg").value);

  const steamEl = document.getElementById("steamRate");
  const steamHourEl = document.getElementById("steamRateHour");
  const feedbackEl = document.getElementById("feedbackContent");
  const placeholder = document.getElementById("placeholder");
  const resultValue = document.getElementById("resultValue");
  const errorBox = document.getElementById("resultError");

  errorBox.classList.add("hidden");
  feedbackEl.innerHTML = "";

  const errors = [];
  const warnings = [];

  // required checks
  if (!mflow || mflow <= 0) errors.push("👉 Enter mass flow rate (ṁ) > 0, in kg/s.");
  if (!cp || cp <= 0) errors.push("👉 Enter specific heat capacity (cₚ) > 0, in kJ/kg·°C.");
  if (!dT || dT <= 0) errors.push("👉 Enter ΔT > 0, in °C.");
  if (!hfg || hfg <= 0) errors.push("👉 Enter latent heat (hfg) > 0, in kJ/kg.");

  if (errors.length) return showErrors(errors);

  // range checks
  if (mflow > 10000) warnings.push("⚠️ Very high mass flow — check units.");
  if (cp > 10) warnings.push("⚠️ cₚ unusually high — check if units are J/kg·°C instead of kJ/kg·°C.");
  if (dT > 200) warnings.push("⚠️ ΔT very high — may indicate unrealistic heating duty.");
  if (hfg < 100 || hfg > 3000) warnings.push("⚠️ hfg outside typical range (100–3000 kJ/kg) — check steam tables.");

  // compute steam consumption
  const ms = (mflow * cp * dT) / hfg;

  if (!Number.isFinite(ms) || ms <= 0) {
    return showErrors(["⚠️ Computed steam consumption is invalid. Check inputs."]);
  }

  const msHr = ms * 3600;
  steamEl.textContent = ms.toFixed(4);
  steamHourEl.textContent = msHr.toFixed(2);

  let assessment = "";
  if (ms < 0.01) assessment = "🔎 Very low steam demand (lab/pilot scale).";
  else if (ms < 10) assessment = "✅ Normal industrial steam demand.";
  else assessment = "⚠️ Very large steam demand — verify inputs and system design.";

  let details = `<div>ṁₛ = <b>${ms.toFixed(4)}</b> kg/s</div>`;
  if (warnings.length) {
    details += `<div style="margin-top:6px; color:#b35d00;">${warnings.join(" | ")}</div>`;
  }

  feedbackEl.innerHTML = `<div>${assessment}</div>${details}`;
  placeholder.classList.add("hidden");
  resultValue.classList.remove("hidden");
}

function printReport() {
  const el = document.getElementById('printDate');
  if (el) {
    el.textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
  }
  window.print();
}
</script>


    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- /*
===========================================
Steam Consumption Calculator (1)
===========================================

📌 Formula:
    ṁₛ = (ṁ × cₚ × ΔT) / hfg

    where:
      ṁ   = Mass flow rate of process fluid (kg/s)
      cₚ  = Specific heat capacity (kJ/kg·°C)
      ΔT  = Temperature rise (°C)
      hfg = Latent heat of steam (kJ/kg)
      ṁₛ  = Steam consumption (kg/s)

-------------------------------------------
✅ Input Requirements & Validations:

1. Required inputs:
   - Mass Flow Rate (ṁ, kg/s)  
   - Specific Heat Capacity (cₚ, kJ/kg·°C)  
   - Temperature Rise (ΔT, °C)  
   - Latent Heat of Steam (hfg, kJ/kg)  

2. Basic validation:
   - All inputs > 0.  
   - If any input missing/invalid → error.  

3. Range checks:
   - ṁ > 10,000 kg/s → warn, likely unit mismatch.  
   - cₚ > 10 kJ/kg·°C → warn, may be entered in J/kg·°C instead.  
   - ΔT > 200 °C → warn, unusually high duty.  
   - hfg < 100 or > 3000 kJ/kg → warn, outside typical steam-table values.  

-------------------------------------------
⚠️ Warnings / Plausibility Checks:

- Implausible if result is not finite or ≤ 0 → error.  
- Very high or low steam demand flagged with assessment.  

-------------------------------------------
📊 Output:

- Steam Consumption (kg/s)  
- Equivalent Steam Consumption (kg/hr)  
- Input summary (ṁ, cₚ, ΔT, hfg)  
- Warning messages (if any)  
- System assessment:

    • < 0.01 → 🔎 Very low (lab/pilot scale)  
    • 0.01 – 10 → ✅ Normal industrial steam demand  
    • > 10 → ⚠️ Very large demand (check inputs/design)  

-------------------------------------------
*/ -->
