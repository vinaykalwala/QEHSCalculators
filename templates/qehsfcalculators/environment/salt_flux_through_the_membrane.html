{% extends 'base.html' %}
{% block title %}Salt Flux Through Membrane Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salt Flux Through Membrane Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover¬†effect¬†*/
        }
        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
             /* display: flex;  */
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            /* overflow-y: auto;  */
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Input rows for better organization */
        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .input-row .form-group {
            flex: 1;
        }
        
        @media (max-width: 600px) {
            .input-row {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }

                .rate-display {
                display: flex;
                gap: 20px;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap; /* responsive */
                text-align: center;
            }

            .rate-block {
                display: flex;
                flex-direction: column;
                align-items: center;
                min-width: 120px; /* keeps blocks same width */
            }

            .rate-label {
                font-weight: bold;
                font-size: 16px;
                color: #444;
                margin-bottom: 5px;
            }

            .rate-value {
                font-size: 40px;
                font-weight: 700;
                color: #2980b9;
                line-height: 1.2;
            }

            .rate-unit {
                font-size: 14px;
                color: #777;
                margin-top: 4px;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .rate-value { font-size: 32px; }
            }

            @media (max-width: 480px) {
                .rate-value { font-size: 26px; }
                
                .rate-unit { font-size: 12px; }
                
            }



        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
                .result-feedback {
    background: #f8f9fa;
    border-radius: 10px;
    padding: 18px 20px;
    border-left: 4px solid #3498db;
    text-align: left;
    max-width: 800px; /* keeps it readable on large screens */
    margin: 0 auto;   /* centers it */
}

.feedback-title {
    font-weight: 600;
    margin-bottom: 8px;
    color: #2c3e50;
    font-size: 18px;
}

.feedback-content { 
    color: #34495e; 
    font-size: 16px;
    line-height: 1.5;
}

/* Responsive breakpoints */
@media (max-width: 768px) {
    .result-feedback {
        padding: 15px;
        font-size: 15px;
    }

    .feedback-title {
        font-size: 16px;
    }

    .feedback-content {
        font-size: 14px;
    }
}

@media (max-width: 480px) {
    .result-feedback {
        padding: 12px;
        border-left-width: 3px;
    }

    .feedback-title {
        font-size: 15px;
    }

    .feedback-content {
        font-size: 13px;
    }
}

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>

<div class="btn-container">
    <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
</div>

<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Salt Flux Through Membrane Calculator</h1>
        <p>Calculate salt flux through a membrane for water treatment and separation processes.</p>
    </div>

    <div class="calc-content">
        <!-- Input Card -->
        <div class="calc-card">
            <h2>Enter Parameters</h2>

            <div class="input-row">
                <div class="form-group">
                    <label for="D_s">Diffusivity (D<sub>s</sub>, m¬≤/s)</label>
                    <input type="number" id="D_s" class="form-input" step="any" min="0" placeholder="e.g., 1.5e-9">
                </div>
                <div class="form-group">
                    <label for="K_s">Solute Distribution Coefficient (K<sub>s</sub>)</label>
                    <input type="number" id="K_s" class="form-input" step="any" min="0" placeholder="e.g., 0.8">
                </div>
            </div>

            <div class="input-row">
                <div class="form-group">
                    <label for="deltaZ">Membrane Thickness (ŒîZ, m)</label>
                    <input type="number" id="deltaZ" class="form-input" step="any" min="0" placeholder="e.g., 0.0001">
                </div>
                <div class="form-group">
                    <label for="C_in">Concentration Inlet (C<sub>in</sub>, kmol/m¬≥)</label>
                    <input type="number" id="C_in" class="form-input" step="any" min="0" placeholder="e.g., 0.5">
                </div>
            </div>

            <div class="form-group">
                <label for="C_out">Concentration Outlet (C<sub>out</sub>, kmol/m¬≥)</label>
                <input type="number" id="C_out" class="form-input" step="any" min="0" placeholder="e.g., 0.1">
            </div>

            <button class="calculate-btn" onclick="calculateSaltFlux()">Calculate Salt Flux</button>
        </div>

        <!-- Result Card -->
        <div class="result-card">
            <div class="result-placeholder" id="placeholder">
                <img src="/static/images/mlc_environment_result.png" alt="Membrane illustration">
                <p>This tool calculates salt flux through membranes for water treatment applications.</p>
            </div>

            <div class="result-error hidden" id="resultError">
                <div class="error-icon">‚ùå</div>
                <div class="error-message" id="errorMessage"></div>
            </div>

            <div class="result-value hidden" id="resultValue">
                <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                    <h2>Salt Flux (J<sub>s</sub>)</h2>
                </div>

                <div class="rate-display">
                    <div class="rate-value" id="saltFluxValue">0.000</div>
                    <div class="rate-unit">kmol/(m¬≤¬∑s)</div>
                </div>

                <div class="result-feedback">
                    <div class="feedback-title"> Assessment</div>
                    <div class="feedback-content" id="feedbackContent"></div>
                </div>

                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

<div class="note-section">

    <div class="note-card">
        <h3>üìò About This Calculator</h3>
        <p>
            The <strong>Salt Flux Through Membrane Calculator</strong> determines the rate of salt transport across a membrane, 
            which is essential in water treatment, desalination processes, and industrial separation applications. 
            Understanding salt flux helps optimize membrane performance and efficiency.
        </p>
    </div>

    <div class="note-card">
        <h3>‚öô Parameters Used</h3>
        <ul class="note-list">
            <li><strong>D<sub>s</sub> (Diffusivity):</strong> Diffusion coefficient of salt in the membrane (m¬≤/s).</li>
            <li><strong>K<sub>s</sub> (Solute Distribution Coefficient):</strong> Partition coefficient between membrane and solution (dimensionless).</li>
            <li><strong>ŒîZ (Membrane Thickness):</strong> Thickness of the membrane layer (m).</li>
            <li><strong>C<sub>in</sub> (Concentration Inlet):</strong> Salt concentration at membrane inlet (kmol/m¬≥).</li>
            <li><strong>C<sub>out</sub> (Concentration Outlet):</strong> Salt concentration at membrane outlet (kmol/m¬≥).</li>
        </ul>
    </div>

    <div class="note-card">
        <h3>‚úÖ Input Validation Rules</h3>
        <ul class="note-list">
            <li><strong>Diffusivity (D<sub>s</sub>):</strong> Must be > 0 m¬≤/s (typical range: 1e-12 to 1e-8 m¬≤/s).</li>
            <li><strong>Solute Distribution Coefficient (K<sub>s</sub>):</strong> Must be > 0 (typical range: 0.1‚Äì10).</li>
            <li><strong>Membrane Thickness (ŒîZ):</strong> Must be > 0 m (typical range: 1e-6 to 1e-3 m).</li>
            <li><strong>Concentration Inlet (C<sub>in</sub>):</strong> Must be ‚â• 0 kmol/m¬≥ (typical range: 0‚Äì10 kmol/m¬≥).</li>
            <li><strong>Concentration Outlet (C<sub>out</sub>):</strong> Must be ‚â• 0 kmol/m¬≥ and ‚â§ C<sub>in</sub>.</li>
            <li><strong>Concentration Gradient:</strong> C<sub>in</sub> must be > C<sub>out</sub> for positive flux.</li>
        </ul>
    </div>

    <div class="note-card">
        <h3>üîé Output Validations & Assessment</h3>
        <ul class="note-list">
            <li><strong>J<sub>s</sub> must be finite:</strong> If result is NaN or Infinity ‚Üí ‚ùå Invalid result, check inputs.</li>
            <li><strong>J<sub>s</sub> > 1e-3 kmol/(m¬≤¬∑s):</strong> ‚ö†Ô∏è Very high flux ‚Üí May indicate membrane failure or unrealistic inputs. <br>
                <em><strong>Assessment/Feedback:</strong></em> Very High Flux.</li>
            <li><strong>1e-6 ‚â§ J<sub>s</sub> ‚â§ 1e-3 kmol/(m¬≤¬∑s):</strong> ‚úÖ Appropriate Range ‚Üí Salt flux is within typical range for membrane processes. <br>
                <em><strong>Assessment/Feedback:</strong></em> Appropriate Flux.</li>
            <li><strong>J<sub>s</sub> < 1e-6 kmol/(m¬≤¬∑s):</strong> ‚ö†Ô∏è Very low flux ‚Üí May indicate membrane fouling or low efficiency. <br>
                <em><strong>Assessment/Feedback:</strong></em> Very Low Flux.</li>
            <li><strong>J<sub>s</sub> = 0: </strong>‚ÑπÔ∏è No salt flux ‚Üí Check if C<sub>in</sub> = C<sub>out</sub>. <br>
                <em><strong>Assessment/Feedback:</strong></em> Zero Flux.</li>
            <li><strong>J<sub>s</sub> < 0:</strong> ‚ùå Negative flux ‚Üí Physically impossible, check concentration values. <br>
                <em><strong>Assessment/Feedback:</strong></em> Negative Flux.</li>
        </ul>
    </div>

    <div class="note-card">
        <h3>üìê Governing Principle</h3>
        <p>
            A <strong>Salt Flux Through the Membrane Calculator</strong> does not adhere to a single universal standard but operates based on established scientific principles and models, 
            such as the solution-friction theory or the solution-diffusion model, which relate salt flux to factors like salt concentration, membrane properties (permeability), and operating pressure. 
            Calculators may incorporate different theoretical frameworks or provide options for converting between common units like LMH (Liters per square meter per hour) and GFD (Gallons per square foot per day).
        </p>
        <p><strong style="color: #1976d2;">Key Concepts and Models:</strong></p>
        <ul class="note-list">
            <li><strong>Theoretical Models:</strong> Models like solution-diffusion (SD) and solution-friction (SF) describe salt transport across membranes.</li>
            <li><strong>Parameters:</strong> Membrane permeability, concentration gradient, pressure, fouling, and concentration polarization affect flux.</li>
            <li><strong>Standardization:</strong> While no universal standard exists, calculators use recognized scientific methods and aim for comparability between membranes.</li>
            <li><strong>Units:</strong> Metric: L/m¬≤/h (LMH), US Customary: GFD. Some calculators include unit conversion options.</li>
        </ul>
    </div>

    <div class="note-card">
        <h3>üìå Conclusion</h3>
        <p>
            The <strong>Salt Flux Through Membrane Calculator</strong> provides a clear estimation of salt transport rate across a membrane. 
            By analyzing diffusivity, solute distribution coefficient, membrane thickness, and concentration gradient, it helps in <strong>optimizing water treatment, desalination, and industrial separation processes</strong>. 
            Results guide engineers in detecting performance issues, such as <span class="good">efficient operation</span>, <span class="average">possible fouling</span>, 
            or <span class="bad">membrane failure</span>, ensuring reliable and sustainable applications.
        </p>
    </div>

</div>

<script>
function showErrors(errors) {
    const errorBox = document.getElementById("resultError");
    const errorMessage = document.getElementById("errorMessage");
    const placeholder = document.getElementById("placeholder");
    const resultValue = document.getElementById("resultValue");

    errorMessage.innerHTML = errors.join("<br>");
    errorBox.classList.remove("hidden");
    placeholder.classList.add("hidden");
    resultValue.classList.add("hidden");
}

function calculateSaltFlux() {
    // Read values
    const D_s = parseFloat(document.getElementById("D_s").value);
    const K_s = parseFloat(document.getElementById("K_s").value);
    const deltaZ = parseFloat(document.getElementById("deltaZ").value);
    const C_in = parseFloat(document.getElementById("C_in").value);
    const C_out = parseFloat(document.getElementById("C_out").value);

    const saltFluxValueEl = document.getElementById("saltFluxValue");
    const feedbackEl = document.getElementById("feedbackContent");
    document.getElementById("resultError").classList.add("hidden");
    feedbackEl.innerHTML = "";

    const errors = [];
    const warnings = [];

    // Validation
    if (![D_s, K_s, deltaZ, C_in, C_out].every(Number.isFinite)) {
        return showErrors(["üëâ Please enter all values (numeric)."]);
    }
    
    if (D_s <= 0) errors.push("üëâ Diffusivity must be > 0 m¬≤/s.");
    if (K_s <= 0) errors.push("üëâ Solute distribution coefficient must be > 0.");
    if (deltaZ <= 0) errors.push("üëâ Membrane thickness must be > 0 m.");
    if (C_in < 0) errors.push("üëâ Inlet concentration must be ‚â• 0 kmol/m¬≥.");
    if (C_out < 0) errors.push("üëâ Outlet concentration must be ‚â• 0 kmol/m¬≥.");
    
    // Check concentration relationship
    if (C_in < C_out) {
        errors.push("üëâ Inlet concentration must be ‚â• outlet concentration.");
    }
    
    // Warning for unusual values
    if (D_s > 1e-8) warnings.push("‚ö†Ô∏è Diffusivity unusually high (>1e-8 m¬≤/s).");
    if (D_s < 1e-12) warnings.push("‚ö†Ô∏è Diffusivity unusually low (<1e-12 m¬≤/s).");
    if (K_s > 10) warnings.push("‚ö†Ô∏è Distribution coefficient unusually high (>10).");
    if (K_s < 0.1) warnings.push("‚ö†Ô∏è Distribution coefficient unusually low (<0.1).");
    if (deltaZ > 0.01) warnings.push("‚ö†Ô∏è Membrane thickness unusually large (>0.01 m).");
    if (deltaZ < 1e-6) warnings.push("‚ö†Ô∏è Membrane thickness unusually small (<1e-6 m).");
    if (C_in > 10) warnings.push("‚ö†Ô∏è Inlet concentration unusually high (>10 kmol/m¬≥).");
    if (C_out > 10) warnings.push("‚ö†Ô∏è Outlet concentration unusually high (>10 kmol/m¬≥).");
    if (C_in === C_out) warnings.push("‚ö†Ô∏è No concentration gradient - zero flux expected.");

    if (errors.length) return showErrors(errors);

    // Formula: J‚Çõ = (D‚Çõ √ó K‚Çõ / ŒîZ) √ó (C·µ¢‚Çô - C‚Çí·µ§‚Çú)
    const concentrationDifference = C_in - C_out;
    const J_s = (D_s * K_s / deltaZ) * concentrationDifference;

    if (!Number.isFinite(J_s)) {
        return showErrors(["‚ö†Ô∏è Computed salt flux is invalid (possible calculation error)."]);
    }

    // Classification
    let classification, suggestion, color;
    if (J_s > 0.001) {
        classification = "Very High Flux";
        suggestion = "‚ö†Ô∏è May indicate membrane failure or unrealistic inputs.";
        color = "#e65100";
    } else if (J_s >= 1e-6) {
        classification = "Appropriate Flux";
        suggestion = "‚úÖ Salt flux is within typical range for membrane processes.";
        color = "#2e7d32";
    } else if (J_s >= 0) {
        classification = "Very Low Flux";
        suggestion = "‚ö†Ô∏è May indicate membrane fouling or low efficiency.";
        color = "#c62828";
    } else {
        classification = "Negative Flux";
        suggestion = "‚ùå Physically impossible - check concentration values.";
        color = "#c62828";
    }

    // Check for negative flux (physically impossible)
    if (J_s < 0) {
        return showErrors(["‚ùå Negative salt flux is physically impossible. Check concentration values."]);
    }

    // Format the flux for display (scientific notation for very small values)
    let displayValue;
    if (J_s < 0.0001) {
        displayValue = J_s.toExponential(4);
    } else {
        displayValue = J_s.toFixed(6);
    }

    // Display result
    saltFluxValueEl.textContent = displayValue;
    feedbackEl.innerHTML = `
        <div>J<sub>s</sub> = <b>${displayValue}</b> kmol/(m¬≤¬∑s)</div>
        <div>Classification: <b style="color:${color};">${classification}</b></div>
        <div style="margin-top:6px;">${suggestion}</div>
        ${warnings.length ? `<div style="margin-top:8px; color:#b35d00;">${warnings.join(" | ")}</div>` : ""}
    `;

    document.getElementById("placeholder").classList.add("hidden");
    document.getElementById("resultValue").classList.remove("hidden");
}

function printReport() {
    const el = document.getElementById('printDate');
    if (el) el.textContent = new Date().toLocaleDateString();
    window.print();
}
</script>
<script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}
<!--

Input Validations:
Diffusivity (D‚Çõ): Must be > 0 m¬≤/s (typical range: 1e-12 to 1e-8 m¬≤/s)

Solute Distribution Coefficient (K‚Çõ): Must be > 0 (typical range: 0.1-10)

Membrane Thickness (ŒîZ): Must be > 0 m (typical range: 1e-6 to 1e-3 m)

Concentration Inlet (C·µ¢‚Çô): Must be ‚â• 0 kmol/m¬≥ (typical range: 0-10 kmol/m¬≥)

Concentration Outlet (C‚Çí·µ§‚Çú): Must be ‚â• 0 kmol/m¬≥ and ‚â§ C·µ¢‚Çô

Concentration Gradient: C·µ¢‚Çô must be ‚â• C‚Çí·µ§‚Çú for non-negative flux
---------------------------------------------------------------------------------------------
Output Validations:
J‚Çõ must be finite: Check for NaN or Infinity results

J‚Çõ > 1e-3 kmol/(m¬≤¬∑s): Very high flux (warning about possible membrane failure)

1e-6 ‚â§ J‚Çõ ‚â§ 1e-3 kmol/(m¬≤¬∑s): Appropriate range (typical for membrane processes)

J‚Çõ < 1e-6 kmol/(m¬≤¬∑s): Very low flux (warning about membrane fouling)

J‚Çõ = 0: No salt flux (information only)

J‚Çõ < 0: Negative flux (error - physically impossible)
---------------------------------------------------------------------------------------------
Formula:
J‚Çõ = (D‚Çõ √ó K‚Çõ / ŒîZ) √ó (C·µ¢‚Çô - C‚Çí·µ§‚Çú)
Where:

J‚Çõ = Salt flux (kmol/m¬≤¬∑s)

D‚Çõ = Diffusivity (m¬≤/s)

K‚Çõ = Solute distribution coefficient (dimensionless)

ŒîZ = Membrane thickness (m)

C·µ¢‚Çô = Concentration at membrane inlet (kmol/m¬≥)

C‚Çí·µ§‚Çú = Concentration at membrane outlet (kmol/m¬≥)

-----------------------------------------------------------------------------------------------------
Edge Cases:
Extremely thin membrane: ŒîZ = 1e-9 m (nanomembrane)

Extremely thick membrane: ŒîZ = 1 m (unrealistic but should be handled)

Very high diffusivity: D‚Çõ = 1e-5 m¬≤/s (unrealistic for membranes)

Very low diffusivity: D‚Çõ = 1e-15 m¬≤/s (approaching molecular limits)

Zero concentration gradient: C·µ¢‚Çô = C‚Çí·µ§‚Çú (should result in zero flux)

Negative concentration: Should be caught by validation

Division by zero scenarios: Check for zero membrane thickness



-->