{% extends 'base.html' %}
{% block title %}Speed of sound in steamcalculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed of sound in steamcalculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
<style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .back-btn {
            background: linear-gradient(#1560bd, #000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }

        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd, #000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center;
            flex-wrap: wrap;
        }

        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
            line-height: 1.1;
        }

        .rate-label { 
            color: #7f8c8d;
            font-size: 20px;
            font-weight: bold;
        }

        /* Responsive styles */
        @media (max-width: 1200px) {
            .rate-value {
                font-size: 38px;
            }
            .rate-label {
                font-size: 18px;
            }
        }
        
        @media (max-width: 992px) {
            .rate-value {
                font-size: 34px;
            }
            .rate-label {
                font-size: 17px;
            }
        }
        
        @media (max-width: 768px) {
            .rate-value {
                font-size: 30px;
                margin-bottom: 8px;
            }
            .rate-label {
                font-size: 16px;
            }
        }
        
        @media (max-width: 576px) {
            .rate-value {
                font-size: 28px;
                margin-bottom: 6px;
            }
            .rate-label {
                font-size: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .rate-display {
                flex-direction: column;
                gap: 2px;
                text-align: center;
            }
            .rate-value {
                font-size: 24px;
                margin-bottom: 4px;
            }
            .rate-label {
                font-size: 14px;
            }
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>

<div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>
<div class="calculator-container printable" id="printArea">


{% include "includes/print_header_footer.html" %}

<div class="calculator-header">
    <h1>Speed of Sound in Steam Calculator</h1>
    <p>Calculate the speed of sound in steam for engineering, process, and safety evaluations.</p>
</div>

<div class="calc-content">
    <!-- Calculator -->
    <div class="calc-card">
        <h2>Enter Parameters</h2>

            <div class="form-group">
                <label for="gamma">Isentropic Exponent (γ)</label>
                <select id="gamma" class="form-input">
                    <option value="1.135">1.135 (Saturated Steam)</option>
                    <option value="1.3">1.3 (Superheated Steam)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="temperature">Absolute Steam Temperature (T, K)</label>
                <input type="number" id="temperature" class="form-input" step="0.1" min="273" max="2000" placeholder="e.g., 373">
            </div>


        <button class="calculate-btn" onclick="calculateSpeedOfSound()">Calculate Speed</button>
    </div>

    <!-- Result Section -->
    <div class="result-card">
        <div class="result-placeholder" id="placeholder">
            <img src="/static/images/mlc_environment_result.png" alt="Steam illustration">
            <p>Calculated speed of sound in steam will appear here.</p>
        </div>

        <div class="result-error hidden" id="resultError" role="alert" aria-live="polite">
            <div class="error-icon">❌</div>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <div class="result-value hidden" id="resultValue" aria-live="polite">
            <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                <h2>Speed of Sound</h2>
            </div>

            <div class="rate-display" style="gap:12px; align-items:center; justify-content:center;">
                <div class="rate-value" id="speedOfSound">0.00</div>
                <div class="rate-label" style="font-size:16px; color: #2980b9;">m/s</div>
            </div>

            <div class="result-feedback">
                <div class="feedback-title">Assessment</div>
                <div class="feedback-content" id="feedbackContent"></div>
            </div>

            <div class="btn-wrapper">
                <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
            </div>
        </div>
    </div>
</div>

<!-- Notes Section -->
<div class="note-section">
  <div class="note-card">
    <h3>📘 About This Calculator</h3>
    <p>
      This calculator determines the speed of sound in steam under different thermal conditions, supporting process safety, fire system design, and industrial engineering assessments. It helps identify abnormal steam conditions quickly for QEHS compliance.
    </p>
  </div>

  <div class="note-card">
    <h3>⚙ Parameters Used</h3>
    <ul class="note-list">
      <li><strong>γ (Isentropic Exponent):</strong> Indicates the type of steam (saturated: 1.135, superheated: 1.3).</li>
      <li><strong>T (K):</strong> Absolute steam temperature in Kelvin, representing operational conditions.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>✅ Input Validation Rules</h3>
    <ul class="note-list">
      <li><strong>γ:</strong> Required, selectable values (1.135 or 1.3).</li>
      <li><strong>T:</strong> Required, numeric, 273 ≤ T ≤ 2,000 K.</li>
      <li><strong>Advisories:</strong> Warning for T > 1,500 K (unusual operational conditions).</li>
      <li><strong>Constraints:</strong> All inputs must be numeric and non-empty.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>📊 Output Validations & Feedback</h3>
    <ul class="note-list">
      <li><strong>Speed of Sound:</strong> Displayed in m/s, rounded to 2 decimal places, must be positive and finite.</li>
      <li><strong>Assessment:</strong>
        <ul>
          <li>Speed < 300 m/s: Low speed — typical of low-temperature steam.</li>
          <li>300 ≤ Speed ≤ 600 m/s: Normal speed — within normal operating range.</li>
          <li>Speed > 600 m/s: High speed — ensure process parameters are safe.</li>
        </ul>
      </li>
      <li>Warnings triggered for: non-finite or ≤0 results, or T > 1,500 K.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>📖 Governing Principle</h3>
    <p>
      A "speed of sound in steam calculator" is based on the International Association for the Properties of Water and Steam (IAPWS) Industrial Formulation 1997 (IAPWS-IF97) standard, which provides the thermodynamic properties of water and steam. This formulation is widely used in calculators and software, such as those from Knovel, to accurately determine the speed of sound in different phases of steam.
    </p>
    <p><b>Key Points</b></p>
    <p><b>IAPWS-IF97:</b> This international standard is the foundation for thermodynamic property calculations for water and steam, including the speed of sound.</p>
    <p><b>Comprehensive Formulation:</b> The IAPWS-IF97 formulation covers various conditions, including a range of temperatures and pressures, allowing for accurate calculations across different states of steam.</p>
    <p><b>Industry Standard:</b> It is a widely adopted standard, meaning that most steam property calculators and software are built upon its guidelines and formulations.</p>
    <p><b>Application:</b> Calculators using this standard can provide fine control over conditions like temperature, pressure, and quality (dryness) to deliver precise results for the speed of sound.</p>
  </div>

  <div class="note-card">
    <h3>🔚 Conclusion</h3>
    <p>
      This calculator provides reliable estimates of the speed of sound in steam, supporting <strong>process safety</strong>, <strong>fire system design</strong>, and <strong>QEHS compliance</strong>. Ensure input values (γ, T) are accurate and validate with IAPWS-IF97 standards or field measurements for critical applications to ensure safe and efficient steam system performance.
    </p>
  </div>
</div>

<script>
function showErrors(errors) {
    const errorBox = document.getElementById("resultError");
    const errorMessage = document.getElementById("errorMessage");
    const placeholder = document.getElementById("placeholder");
    const resultValue = document.getElementById("resultValue");

    errorMessage.innerHTML = errors.join("<br>");
    errorBox.classList.remove("hidden");
    placeholder.classList.add("hidden");
    resultValue.classList.add("hidden");
}

function calculateSpeedOfSound() {
    const gamma = parseFloat(document.getElementById("gamma").value);
    const T = parseFloat(document.getElementById("temperature").value);
    const K = 31.6;
    const R = 0.461; // kJ/kg.K constant

    const resultEl = document.getElementById("speedOfSound");
    const feedbackEl = document.getElementById("feedbackContent");
    const errors = [];

    // Validations
    if (!Number.isFinite(T)) errors.push("Temperature is required and must be numeric.");
    if (T < 273 || T > 2000) errors.push("Temperature must be between 273 K and 2000 K.");
    if (errors.length) return showErrors(errors);

    // Calculation
    const speed = K * Math.sqrt(gamma * R * T);

    // Feedback
    let feedback = "";
    if (speed < 300) feedback = "🔵 Low speed; typical of low-temperature steam.";
    else if (speed <= 600) feedback = "🟢 Normal operating speed.";
    else feedback = "🔴 High speed; verify process parameters for safety.";

    // Display
    resultEl.textContent = speed.toFixed(2);
    feedbackEl.innerHTML = `<strong>${feedback}</strong>`;
    document.getElementById("placeholder").classList.add("hidden");
    document.getElementById("resultValue").classList.remove("hidden");
    document.getElementById("resultError").classList.add("hidden");
}

function printReport() {
    const el = document.getElementById('printDate');
    if (el) {
        el.textContent = new Date().toLocaleDateString('en-US', { year:'numeric', month:'long', day:'numeric' });
    }
    window.print();
}
</script>


<script src="{% static 'js/print.js' %}"></script>

</body>
</html>
{% endblock %}



<!-- 
📌 Speed of Sound in Steam Calculator (Essentials)

🔹 Formula:
    • Speed of Sound (m/s) = K × √(γ × R × T)
      - γ = Ratio of specific heats (unitless)
      - R = Specific gas constant = 0.461 kJ/kg·K
      - T = Temperature in K
      - K = 31.6 (unit conversion factor)

🔹 Input Validations:
    • Temperature (T):
        - Required
        - Must be numeric
        - Valid range: 273 K ≤ T ≤ 2000 K
    • γ (gamma):
        - Must be numeric (assumed constant or user input)
    • Warnings for unusual values:
        - None specifically implemented, but very low/high T may affect speed plausibility

🔹 Output Validations:
    • Speed must be finite and >0
    • Classification / Feedback:
        - Speed < 300 m/s → Low speed (typical of low-temperature steam)
        - 300 ≤ Speed ≤ 600 m/s → Normal operating speed
        - Speed > 600 m/s → High speed; verify process parameters for safety
-->




