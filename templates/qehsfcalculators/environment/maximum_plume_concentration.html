{% extends 'base.html' %}
{% block title %}Maximum Plume Concentration Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maximum Plume Concentration Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
<style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover¬†effect¬†*/
        }
        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
             /* display: flex;  */
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            /* overflow-y: auto;  */
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Input rows for better organization */
        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .input-row .form-group {
            flex: 1;
        }
        
        @media (max-width: 600px) {
            .input-row {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }

                .rate-display {
                display: flex;
                gap: 20px;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap; /* responsive */
                text-align: center;
            }

            .rate-block {
                display: flex;
                flex-direction: column;
                align-items: center;
                min-width: 120px; /* keeps blocks same width */
            }

            .rate-label {
                font-weight: bold;
                font-size: 16px;
                color: #444;
                margin-bottom: 5px;
            }

            .rate-value {
                font-size: 40px;
                font-weight: 700;
                color: #2980b9;
                line-height: 1.2;
            }

            .rate-unit {
                font-size: 14px;
                color: #777;
                margin-top: 4px;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .rate-value { font-size: 32px; }
            }

            @media (max-width: 480px) {
                .rate-value { font-size: 26px; }
                
                .rate-unit { font-size: 12px; }
                
            }



        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
                .result-feedback {
    background: #f8f9fa;
    border-radius: 10px;
    padding: 18px 20px;
    border-left: 4px solid #3498db;
    text-align: left;
    max-width: 800px; /* keeps it readable on large screens */
    margin: 0 auto;   /* centers it */
}

.feedback-title {
    font-weight: 600;
    margin-bottom: 8px;
    color: #2c3e50;
    font-size: 18px;
}

.feedback-content { 
    color: #34495e; 
    font-size: 16px;
    line-height: 1.5;
}

/* Responsive breakpoints */
@media (max-width: 768px) {
    .result-feedback {
        padding: 15px;
        font-size: 15px;
    }

    .feedback-title {
        font-size: 16px;
    }

    .feedback-content {
        font-size: 14px;
    }
}

@media (max-width: 480px) {
    .result-feedback {
        padding: 12px;
        border-left-width: 3px;
    }

    .feedback-title {
        font-size: 15px;
    }

    .feedback-content {
        font-size: 13px;
    }
}

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>

<div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>
<div class="calculator-container printable" id="printArea">


{% include "includes/print_header_footer.html" %}

<div class="calculator-header">
    <h1>Maximum Plume Concentration Calculator</h1>
    <p>Estimate the peak ground-level concentration from a point source using emission rate, wind and dispersion inputs. Result shown in <strong>g/m¬≥</strong> (and ¬µg/m¬≥).</p>
</div>

<div class="calc-content">
    <!-- Calculator -->
    <div class="calc-card">
        <h2>Enter Parameters</h2>

        <div class="input-row">
            <div class="form-group">
                <label for="emissionRate">Emission Rate (Q) [g/s]</label>
                <input type="number" id="emissionRate" class="form-input" step="any" min="0" placeholder="e.g., 0.05" aria-label="Emission Rate">
            </div>

            <div class="form-group">
                <label for="windSpeed">Wind Speed (U) [m/s]</label>
                <input type="number" id="windSpeed" class="form-input" step="any" min="0" placeholder="e.g., 3" aria-label="Wind speed">
            </div>
        </div>

        <div class="input-row">
            <div class="form-group">
                <label for="effectiveHeight">Effective Height (H) [m]</label>
                <input type="number" id="effectiveHeight" class="form-input" step="any" min="0" placeholder="e.g., 50" aria-label="Effective height">
            </div>

            <div class="form-group">
                <label for="sigmaY">Horizontal Dispersion (œÉ<sub>y</sub>) [m]</label>
                <input type="number" id="sigmaY" class="form-input" step="any" min="0" placeholder="e.g., 20" aria-label="Sigma Y">
            </div>
        </div>

        <button class="calculate-btn" onclick="calculateCmax()">Calculate Maximum Concentration</button>
    </div>

    <!-- Result Section -->
    <div class="result-card">
        <div class="result-placeholder" id="placeholder">
            <img src="/static/images/mlc_environment_result.png" alt="Plume illustration">
            <p>This tool estimates the maximum plume concentration at ground level based on the supplied parameters.</p>
        </div>

        <div class="result-error hidden" id="resultError" role="alert" aria-live="polite">
            <div class="error-icon">‚ùå</div>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <div class="result-value hidden" id="resultValue" aria-live="polite">
            <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                <h2>Maximum Plume Concentration</h2>
            </div>

            <div class="rate-display" style="gap:12px; align-items:center; justify-content:center;">
                <div class="rate-value" id="headLoss">0.00</div>
                <div class="rate-label" style="font-size:16px; color: #2980b9;">g/m<sup>3</sup></div>
            </div>

            <div class="result-feedback">
                <div class="feedback-title">Interpretation</div>
                <div class="feedback-content" id="feedbackContent"></div>
            </div>

            <div class="btn-wrapper">
                <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
            </div>
        </div>
    </div>
</div>

<!-- Notes Section -->
<div class="note-section">

  <div class="note-card">
    <h3>üìò About This Calculator</h3>
    <p>This calculator provides a conservative estimate of the peak ground-level concentration from a point source, using standard Gaussian dispersion assumptions and an internal estimate for vertical dispersion.</p>
  </div>

  <div class="note-card">
    <h3>‚öô Parameters Used</h3>
    <ul class="note-list">
      <li>Q: Emission rate (g/s)</li>
      <li>U: Wind speed (m/s)</li>
      <li>H: Effective stack height (m)</li>
      <li>œÉy: Horizontal dispersion parameter (m)</li>
      <li>œÉz: Vertical dispersion parameter (m, internally estimated)</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>‚úÖ Input Validation Rules</h3>
    <ul class="note-list">
      <li>Q: numeric, &gt;0; typical 1e-6 ‚Äì 1e6 g/s; errors outside 1e-9‚Ä¶1e9</li>
      <li>U: numeric, &gt;0; typical 0.1 ‚Äì 50 m/s; errors if ‚â§0 or &gt;200</li>
      <li>H: numeric, &gt;0; typical 1 ‚Äì 2000 m; errors if ‚â§0 or &gt;10000</li>
      <li>œÉy: numeric, &gt;0; typical 0.1 ‚Äì 1000 m; errors if ‚â§0 or &gt;1e6</li>
      <li>Decimals: inputs &gt;6 dp ‚Üí precision warning</li>
      <li>Cross-checks: œÉy should not be unreasonably small relative to H (warning if œÉy &lt; 0.01¬∑H)</li>
      <li>Computation safety: extremely large values (e.g., &gt;1e9 g/m¬≥) are treated as invalid</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>üìä Output Validations & Assessment</h3>
    <ul class="note-list">
      <li>Computed peak concentration must be finite and &gt; 0</li>
      <li>Warnings for extreme values:
        <ul>
          <li>Q &gt; 1e4 g/s ‚Üí verify units and source magnitude</li>
          <li>U &lt; 0.1 m/s ‚Üí limited dispersion</li>
          <li>œÉy &lt; 0.01¬∑H ‚Üí check units or dispersion input</li>
          <li>Peak concentration &gt; 1 g/m¬≥ ‚Üí extremely high, check inputs</li>
          <li>Peak concentration &lt; 1e-12 g/m¬≥ ‚Üí extremely low, below detection limit</li>
        </ul>
      </li>
      <li>Assessment / feedback displayed along with results:
        <ul>
          <li>Peak &lt; 50 ¬µg/m¬≥ ‚Üí Low (generic) ‚Üí concentration likely low; compare with pollutant-specific standards</li>
          <li>50‚Äì500 ¬µg/m¬≥ ‚Üí Moderate (generic) ‚Üí monitor and compare to regulatory limits</li>
          <li>&gt;500 ¬µg/m¬≥ ‚Üí High (generic) ‚Üí consider mitigation (stack height, controls) and emergency planning</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="note-card">
    <h3>üìñ Governing Principle</h3>
    <p>A maximum plume concentration calculator is not tied to one single standard but is commonly based on the Gaussian plume diffusion model and often incorporates the Briggs plume rise model, which provide theoretical frameworks for predicting pollutant dispersion and concentration levels. Regulatory standards, such as those from the U.S. Nuclear Regulatory Commission (NUREG-1140), may reference these models for conservative air quality assessments.</p>
    <ul class="note-list">
      <li><strong>Gaussian Plume Model:</strong> Assumes pollutant concentration follows a normal (Gaussian) distribution.</li>
      <li><strong>Briggs Plume Rise Model:</strong> Estimates effective stack height, critical for ground-level concentration.</li>
      <li><strong>Regulatory References:</strong> Models are referenced in standards like DOE-STD-1189-2008 and NRC NUREG-1140 for dispersion analysis.</li>
      <li><strong>Factors Influencing Concentration:</strong> Meteorology (wind speed, stability), emission rate, stack dimensions, and stability classes.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3> Conclusion </h3>
    <ul class="note-list">
      <li>Steady-state Gaussian assumption ‚Äî not suitable for near-field instantaneous puff releases</li>
      <li>Vertical dispersion is internally approximated ‚Äî conservative estimate used</li>
      <li>Results are generic ‚Äî always compare to pollutant-specific regulatory thresholds</li>
    </ul>
  </div>

</div>


<script>
function showErrors(errors) {
  const errorBox = document.getElementById("resultError");
  const errorMessage = document.getElementById("errorMessage");
  const placeholder = document.getElementById("placeholder");
  const resultValue = document.getElementById("resultValue");

  errorMessage.innerHTML = errors.join("<br>");
  errorBox.classList.remove("hidden");
  placeholder.classList.add("hidden");
  resultValue.classList.add("hidden");
}

/* helper: count decimals loosely */
function countDecimals(rawStr) {
  if (typeof rawStr !== 'string') rawStr = String(rawStr || '');
  if (!rawStr.includes('.')) return 0;
  let decPart = rawStr.split('.')[1].split(/e|E/)[0];
  decPart = decPart.replace(/[^0-9]/g, '');
  return decPart.length;
}

function calculateCmax() {
  const rawQ = (document.getElementById("emissionRate")?.value || "").trim();
  const rawU = (document.getElementById("windSpeed")?.value || "").trim();
  const rawH = (document.getElementById("effectiveHeight")?.value || "").trim();
  const rawSy = (document.getElementById("sigmaY")?.value || "").trim();

  const placeholder = document.getElementById("placeholder");
  const errorBox = document.getElementById("resultError");
  const resultValue = document.getElementById("resultValue");
  const cEl = document.getElementById("headLoss"); // kept id for numeric display
  const feedbackEl = document.getElementById("feedbackContent");

  errorBox.classList.add("hidden");
  feedbackEl.innerHTML = "";

  const errors = [];
  const warnings = [];

  // presence
  if (rawQ === "") errors.push("üëâ Emission Rate (Q) is required.");
  if (rawU === "") errors.push("üëâ Wind Speed (U) is required.");
  if (rawH === "") errors.push("üëâ Effective Height (H) is required.");
  if (rawSy === "") errors.push("üëâ Horizontal dispersion (œÉy) is required.");
  if (errors.length) return showErrors(errors);

  // parse
  const Q = parseFloat(rawQ);
  const U = parseFloat(rawU);
  const H = parseFloat(rawH);
  const sigmaY = parseFloat(rawSy);

  // numeric checks + ranges
  if (!Number.isFinite(Q) || Q <= 0 || Q < 1e-9 || Q > 1e9) errors.push("üëâ Q must be a finite positive number (typical range 1e-6 to 1e6 g/s).");
  if (!Number.isFinite(U) || U <= 0 || U > 200) errors.push("üëâ U must be a finite positive number in m/s (typical 0.1‚Äì50 m/s).");
  if (!Number.isFinite(H) || H <= 0 || H > 10000) errors.push("üëâ H must be a finite positive number in m (typical 1‚Äì2000 m).");
  if (!Number.isFinite(sigmaY) || sigmaY <= 0 || sigmaY > 1e6) errors.push("üëâ œÉy must be a finite positive number in m (typical 0.1‚Äì1000 m).");
  if (errors.length) return showErrors(errors);

  // decimal warnings
  if (countDecimals(rawQ) > 6 || countDecimals(rawU) > 6 || countDecimals(rawH) > 6 || countDecimals(rawSy) > 6) {
    warnings.push("‚ö†Ô∏è Some inputs have >6 decimal places ‚Äî round for reporting.");
  }

  // cross-field logic
  if (sigmaY < H * 0.01) warnings.push("‚ö†Ô∏è œÉy is very small compared to H ‚Äî check units or dispersion input.");
  if (U < 0.1) warnings.push("‚ö†Ô∏è Very low wind speed ‚Äî dispersion may be limited; consider time-dependent modelling.");
  if (H < 1) warnings.push("‚ö†Ô∏è Very low effective height ‚Äî ground-level release; concentrations may be large near source.");
  if (Q > 1e4) warnings.push("‚ö†Ô∏è Very large emission rate ‚Äî ensure units are correct (g/s) and verify source.");

  // compute sigmaZ (internal conservative estimate)
  const sigmaZ = H / Math.SQRT2; // internal estimation

  // compute Cmax (internal formula used)
  // Cmax = (2 * Q / (e * pi * U * H^2)) * (sigmaZ / sigmaY)
  const numerator = 2 * Q * sigmaZ;
  const denom = Math.E * Math.PI * U * H * H * sigmaY;
  const Cmax = numerator / denom;

  if (!Number.isFinite(Cmax) || isNaN(Cmax)) {
    return showErrors(["‚ùå Computation failed. Check inputs for magnitude and units."]);
  }

  // sanity / magnitude checks
  if (Cmax <= 0) return showErrors(["‚ùå Computed concentration is non-positive. Check inputs."]);
  if (Cmax > 1e9) return showErrors(["‚ùå Computed concentration is unphysically large (>1e9 g/m¬≥). Check units."]);
  if (Cmax > 1) warnings.push("‚ö†Ô∏è Computed concentration > 1 g/m¬≥ ‚Äî extremely high; verify inputs/units.");
  if (Cmax < 1e-12) warnings.push("‚ö†Ô∏è Computed concentration is extremely low ‚Äî may be below detection limits.");

  // convert to ¬µg/m¬≥ for easier standards comparison
  const Cmax_ug = Cmax * 1e6;

  // classification (generic guidance)
  let classification = "";
  if (Cmax_ug < 50) classification = "Low (generic)";
  else if (Cmax_ug <= 500) classification = "Moderate (generic)";
  else classification = "High (generic)";

  let advice = "";
  if (classification === "Low (generic)") advice = "Concentration likely low; compare with pollutant-specific standards.";
  else if (classification === "Moderate (generic)") advice = "Monitor and compare to regulatory limits for the specific pollutant.";
  else advice = "High concentration ‚Äî consider mitigation (heightening stack, controls) and emergency planning.";

  // Build display (no formula visible)
  let details = `<div><b>Peak concentration</b>: <b>${Cmax.toExponential(4)}</b> g/m¬≥</div>`;
  details += `<div style="margin-top:6px;"><b>Peak concentration</b>: <b>${Cmax_ug.toExponential(4)}</b> ¬µg/m¬≥</div>`;
  details += `<div style="margin-top:6px;">Vertical dispersion estimate (internal): <b>${sigmaZ.toFixed(3)}</b> m</div>`;
  details += `<div style="margin-top:6px;">Classification: <b>${classification}</b></div>`;
  details += `<div style="margin-top:6px;">Advice: ${advice}</div>`;
  if (warnings.length) details += `<div style="margin-top:8px; color:#b35d00;">${warnings.join(" | ")}</div>`;

  // update UI (keeps original ids/classes)
  cEl.textContent = Cmax.toExponential(4);
  feedbackEl.innerHTML = details;

  placeholder.classList.add("hidden");
  resultValue.classList.remove("hidden");
  errorBox.classList.add("hidden");
}

/* print helper kept */
function printReport() {
  const el = document.getElementById('printDate');
  if (el) {
    el.textContent = new Date().toLocaleDateString('en-US', { year:'numeric', month:'long', day:'numeric' });
  }
  window.print();
}
</script>

<script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- /*
---------------------------------------------------------
üìå Formula (used internally for Cmax estimation):
    œÉz ‚âà H / ‚àö2                (vertical dispersion estimate)

    Cmax = (2 √ó Q √ó œÉz) / (e √ó œÄ √ó U √ó H¬≤ √ó œÉy)

Where:
  - Cmax   = peak ground-level concentration (g/m¬≥)
  - Q      = emission rate (g/s)
  - U      = wind speed (m/s)
  - H      = effective stack height (m)
  - œÉy     = horizontal dispersion parameter (m)
  - œÉz     = vertical dispersion parameter (m, estimated)
  - e, œÄ   = constants (Euler‚Äôs number, pi)

---------------------------------------------------------
‚úÖ Inputs & Validation:

1. Emission Rate (Q, g/s)
   - Required, numeric
   - Must be >0
   - Typical range: 1e-6 to 1e6 g/s
   - Warning if very large (>1e4 g/s)

2. Wind Speed (U, m/s)
   - Required, numeric
   - Must be >0 and ‚â§200
   - Typical range: 0.1‚Äì50 m/s
   - Warning if <0.1 (limited dispersion)

3. Effective Height (H, m)
   - Required, numeric
   - Must be >0 and ‚â§10,000
   - Typical range: 1‚Äì2000 m
   - Warning if <1 (ground-level release)

4. Horizontal Dispersion (œÉy, m)
   - Required, numeric
   - Must be >0 and ‚â§1e6
   - Typical range: 0.1‚Äì1000 m
   - Warning if œÉy ‚â™ H (possible unit issue)

---------------------------------------------------------
‚ö†Ô∏è Warnings:
- Excessive decimal places (>6) ‚Üí reporting clarity issue
- Very low U (<0.1 m/s) ‚Üí limited dispersion
- œÉy too small vs H ‚Üí check units
- Large Q (>1e4 g/s) ‚Üí unit check
- Very high Cmax (>1 g/m¬≥) ‚Üí unrealistic, verify inputs
- Very low Cmax (<1e-12 g/m¬≥) ‚Üí below detection

---------------------------------------------------------
üìä Outputs:

- Peak concentration in **g/m¬≥** (scientific notation, 4 sig figs)
- Peak concentration in **¬µg/m¬≥** (converted for standards comparison)
- Internal œÉz estimate (m)
- Classification (generic, based on ¬µg/m¬≥):
    ‚Ä¢ <50 ‚Üí Low  
    ‚Ä¢ 50‚Äì500 ‚Üí Moderate  
    ‚Ä¢ >500 ‚Üí High
- Generic advice for interpretation
- Warnings (if triggered)

---------------------------------------------------------

*/ -->
