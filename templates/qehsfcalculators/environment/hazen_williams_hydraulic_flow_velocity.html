{% extends 'base.html' %}
{% block title %}Hazen-Williams Hydraulic Flow Velocity Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hazen-Williams Hydraulic Flow Velocity Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .back-btn {
            background: linear-gradient(#1560bd, #000040);
            color: #ffffff;
            border: 2px solid #1560bd;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd;
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05);
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }

        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd, #000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center;
            flex-wrap: wrap;
        }

        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
            line-height: 1.1;
        }

        .rate-label { 
            color: #7f8c8d;
            font-size: 20px;
            font-weight: bold;
        }

        /* Responsive styles */
        @media (max-width: 1200px) {
            .rate-value {
                font-size: 30px;
            }
            .rate-label {
                font-size: 18px;
            }
        }
        
        @media (max-width: 992px) {
            .rate-value {
                font-size: 34px;
            }
            .rate-label {
                font-size: 17px;
            }
        }
        
        @media (max-width: 768px) {
            .rate-value {
                font-size: 30px;
                margin-bottom: 8px;
            }
            .rate-label {
                font-size: 16px;
            }
        }
        
        @media (max-width: 576px) {
            .rate-value {
                font-size: 28px;
                margin-bottom: 6px;
            }
            .rate-label {
                font-size: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .rate-display {
                flex-direction: column;
                gap: 2px;
                text-align: center;
            }
            .rate-value {
                font-size: 24px;
                margin-bottom: 4px;
            }
            .rate-label {
                font-size: 14px;
            }
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>

    <div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>


<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}



<div class="calculator-header">
  <h1>Hazen-Williams Hydraulic Flow Velocity Calculator</h1>
  <p>Estimate flow velocity <strong>U</strong> (m/s) using an empirical Hazen-Williams form. Enter consistent units: <strong>r_H (m)</strong>, <strong>S (m/m)</strong>, <strong>C (dimensionless)</strong>.</p>
</div>

<div class="calc-content">
  <div class="calc-card">
    <h2>Enter Data</h2>

    <div class="form-group">
      <label for="C"><strong>Hazen-Williams Coefficient (C) ‚Äî dimensionless *</strong></label>
      <input type="number" id="C" class="form-input" step="any" placeholder="e.g., 100">
    </div>

    <div class="form-group">
      <label for="r_H"><strong>Hydraulic Radius (r_H) ‚Äî m *</strong></label>
      <input type="number" id="r_H" class="form-input" step="any" placeholder="e.g., 0.05">
    </div>

    <div class="form-group">
      <label for="S"><strong>Slope (S) ‚Äî m/m (energy grade line) *</strong></label>
      <input type="number" id="S" class="form-input" step="any" placeholder="e.g., 0.001">
    </div>

    <button class="calculate-btn" onclick="calculateCorrosionRate()">Calculate Flow Velocity</button>
  </div>

  <!-- Result Section (keeps your pattern for compatibility) -->
  <div class="result-card">
    <div class="result-placeholder" id="placeholder">
      <img src="/static/images/mlc_environment_result.png" alt="flow illustration">
      <p>This tool computes velocity using an empirical Hazen-Williams velocity form and provides QEHS-oriented guidance.</p>
    </div>

    <div class="result-error hidden" id="resultError" role="alert" aria-live="polite">
      <div class="error-icon">‚ùå</div>
      <div class="error-message" id="errorMessage"></div>
    </div>

    <div class="result-value hidden" id="resultValue" aria-live="polite">
      <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
        <h2>Flow Velocity Result</h2>
      </div>

      <div class="rate-display" style="display:flex; gap:24px; align-items:center;">
        <div>
          <div class="rate-label" style="font-size:14px; color:#2980b9;">Velocity (U)</div>
          <div class="rate-value" id="rateValue">0.0000</div>
          <div class="rate-label" style="font-size:12px; color:#666;">m/s</div>
        </div>

        <div>
          <div class="rate-label" style="font-size:14px; color:#2980b9;">Classification</div>
          <div class="rate-values" id="classValue">‚Äî</div>
          <div class="rate-labels" style="font-size:15px; color:#666;">(qualitative)</div>
        </div>
      </div>

      <div class="result-feedback">
        <div class="feedback-title">Assessment & Details</div>
        <div class="feedback-content" id="feedbackContent"></div>
      </div>

      <div class="btn-wrapper">
        <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
      </div>
    </div>
  </div>
</div>


<div class="note-section">

  <!-- ‚úÖ ABOUT THIS CALCULATOR -->
  <div class="note-card">
    <h3>üìò About This Calculator</h3>
    <p>
      This calculator estimates the flow velocity of water-like fluids in pipes using the Hazen‚ÄìWilliams method.
      All inputs must use consistent SI units: <strong>C (dimensionless roughness)</strong>,
      <strong>hydraulic radius r<sub>H</sub> in meters</strong>, and <strong>slope S in m/m</strong>.
      The computed output is <strong>velocity (U) in m/s</strong>, useful for hydraulic design, fire safety, QEHS
      documentation, erosion checks, and sedimentation risk evaluation.
    </p>
  </div>

  <!-- ‚úÖ PARAMETERS USED -->
  <div class="note-card">
    <h3>‚öô Parameters Used</h3>
    <ul class="note-list">
      <li><strong>C:</strong> Hazen‚ÄìWilliams roughness coefficient (dimensionless).</li>
      <li><strong>r<sub>H</sub> (m):</strong> Hydraulic radius of the pipe or channel.</li>
      <li><strong>S (m/m):</strong> Energy grade line slope.</li>
      <li><strong>U (m/s):</strong> Computed water velocity.</li>
      <li><strong>Classification:</strong> QEHS-based qualitative assessment of velocity behaviour.</li>
    </ul>
  </div>

  <!-- ‚úÖ INPUT VALIDATIONS -->
  <div class="note-card">
    <h3>‚úÖ Input Validation Rules</h3>
    <ul class="note-list">
      <li><strong>C:</strong> Required; numeric; must be >0. Typical 60‚Äì150; acceptable 20‚Äì300; warnings if out of range.</li>
      <li><strong>r<sub>H</sub> (m):</strong> Required; numeric; >0. Typical 0.001‚Äì2 m; acceptable 1e‚àí4 to 50 m.</li>
      <li><strong>S (m/m):</strong> Required; numeric; >0. Typical 1e‚àí8‚Äì0.1; acceptable 1e‚àí12‚Äì1.</li>
      <li><strong>Precision:</strong> Up to 6 decimals allowed for C and r<sub>H</sub>; S may have more precision.</li>
      <li><strong>Cross-checks:</strong> Large velocities (>3 m/s), very small radius, or slope possibly entered in % trigger warnings.</li>
    </ul>
  </div>

  <!-- ‚úÖ OUTPUT VALIDATIONS ‚Äî MUST MATCH JS FEEDBACK EXACTLY -->
  <div class="note-card">
    <h3>üìè Output Validations</h3>
    <ul class="note-list">
      <li>Velocity U is shown in m/s with up to 4 significant digits or exponential format.</li>
      <li>U must be >0 and finite; extremely large values trigger warnings or error.</li>
      <li><strong>Assessment Categories (same text displayed in results):</strong></li>
      <ul>
        <li>(&lt;0.01 m/s) ‚ÄúPractically stagnant  ‚Äî severe sedimentation risk.‚Äù</li>
        <li>(&lt;0.3 m/s) ‚ÄúLow velocity  ‚Äî sedimentation and quality risk.‚Äù</li>
        <li>(0.3‚Äì1.5 m/s) ‚ÄúNormal velocity ‚Äî typical for safe distribution.‚Äù</li>
        <li>(1.5‚Äì3.0 m/s)  ‚ÄúHigh velocity ‚Äî watch for erosion and noise.‚Äù</li>
        <li>(&gt;3.0 m/s) ‚ÄúVery high velocity ‚Äî likely erosion, pipe wear, or unit error.‚Äù</li>
      </ul>
      <li>Warnings appear when input ranges or trends suggest unit mismatches or unrealistic values.</li>
    </ul>
  </div>

  <!-- ‚úÖ GOVERNING PRINCIPLE (FULL TEXT PROVIDED, NO FORMULA SHOWN) -->
  <div class="note-card">
    <h3>üìñ Governing Principle</h3>
    <p>
      The Hazen-Williams equation is not based on a single, specific standard but is an empirical formula used in
      various hydraulic calculations, particularly for water-based fire sprinkler systems. It is stipulated and
      recognized by international standards such as the National Fire Protection Association (NFPA) 13 and the
      European standards EN 12845 and EN 16925 for pressure loss calculations in pipe networks.
    </p>
    <p><strong>Key aspects of the standard:</strong></p>
    <p><strong>Empirical basis:</strong>  
      The formula is derived from observations and experiments, not a theoretical foundation.
    </p>
    <p><strong>Applicability to water:</strong>  
      It is specifically designed for water-based systems and does not account for the viscosity of other fluids,
      temperature effects, or density variations.
    </p>
    <p><strong>Velocity limitations:</strong>  
      Some authorities and standards, such as FM Global and certain older NFPA guidelines, impose limits on maximum
      water velocity when using the formula to maintain its accuracy.
    </p>
    <p><strong>Fire protection focus:</strong>  
      The formula is widely adopted for the hydraulic design of fire sprinkler and firefighting pipe networks.
    </p>
    <p><strong>Alternative equations:</strong>  
      For higher accuracy or non-water systems, the Darcy‚ÄìWeisbach method is recommended.
    </p>
  </div>

  <!-- ‚úÖ CONCLUSION -->
  <div class="note-card">
    <h3>üîö Conclusion</h3>
    <p>
      This Hazen‚ÄìWilliams velocity calculator supports hydraulic design, firefighting system evaluation, QEHS audits,
      and sedimentation/erosion risk analysis. Ensure that slope values are in m/m, hydraulic radius is specified in
      meters, and C reflects realistic pipe material conditions. Use the velocity classification and warnings to guide
      safety checks, pipe maintenance, and design validation.
    </p>
  </div>

</div>


<script>
/* Reuse showErrors pattern */
function showErrors(errors) {
  const errorBox = document.getElementById("resultError");
  const errorMessage = document.getElementById("errorMessage");
  const placeholder = document.getElementById("placeholder");
  const resultValue = document.getElementById("resultValue");
  errorMessage.innerHTML = errors.join("<br>");
  errorBox.classList.remove("hidden");
  placeholder.classList.add("hidden");
  resultValue.classList.add("hidden");
}

/* Main calculator ‚Äî kept name to preserve existing button wiring */
function calculateCorrosionRate() {
  const sC = document.getElementById("C").value.trim();
  const srH = document.getElementById("r_H").value.trim();
  const sS = document.getElementById("S").value.trim();

  const placeholder = document.getElementById("placeholder");
  const errorBox = document.getElementById("resultError");
  const resultValue = document.getElementById("resultValue");
  const rateEl = document.getElementById("rateValue");
  const classEl = document.getElementById("classValue");
  const feedbackEl = document.getElementById("feedbackContent");

  errorBox.classList.add("hidden");
  feedbackEl.innerHTML = "";

  const errors = [];
  const warnings = [];

  const isFiniteNum = v => Number.isFinite(v) && !Number.isNaN(v);
  const decLen = s => (s && s.includes('.')) ? s.split('.')[1].length : 0;

  // presence
  if (sC === "") errors.push("üëâ Enter Hazen-Williams coefficient (C).");
  if (srH === "") errors.push("üëâ Enter hydraulic radius (r_H) in meters.");
  if (sS === "") errors.push("üëâ Enter slope (S) in m/m (energy grade line).");
  if (errors.length) return showErrors(errors);

  // parse
  const C = parseFloat(sC);
  const rH = parseFloat(srH);
  const S = parseFloat(sS);

  if (!isFiniteNum(C)) errors.push("üëâ C must be numeric (dimensionless).");
  if (!isFiniteNum(rH)) errors.push("üëâ r_H must be numeric (m).");
  if (!isFiniteNum(S)) errors.push("üëâ S must be numeric (m/m).");
  if (errors.length) return showErrors(errors);

  // basic >0 checks
  if (C <= 0) errors.push("üëâ C must be > 0.");
  if (rH <= 0) errors.push("üëâ r_H must be > 0 m.");
  if (S <= 0) errors.push("üëâ S must be > 0 (m/m).");

  // plausible ranges (reject likely unit errors)
  if (C < 20 || C > 300) warnings.push("‚ö†Ô∏è C is outside typical 20‚Äì300 range ‚Äî check material/age or unit error.");
  if (rH < 1e-4 || rH > 50) warnings.push("‚ö†Ô∏è r_H is outside typical practical range (1e-4 ‚Äì 50 m) ‚Äî verify units (mm‚Üím?).");
  if (S < 1e-12 || S > 1) warnings.push("‚ö†Ô∏è S is outside typical range (1e-12 ‚Äì 1). Ensure you entered slope in m/m.");

  // decimal precision warnings
  if (decLen(sC) > 6) warnings.push("‚ö†Ô∏è C has >6 decimals; results will be rounded.");
  if (decLen(srH) > 6) warnings.push("‚ö†Ô∏è r_H has >6 decimals; results will be rounded.");
  if (decLen(sS) > 12) warnings.push("‚ö†Ô∏è S has >12 decimals; results will be rounded.");

  if (errors.length) return showErrors(errors);

  // Heuristic unit-mismatch checks
  if (rH > 5 && rH < 1000) {
    // Possibly user entered pipe diameter in mm (100 mm) ‚Äî suggest check
    warnings.push("‚ö†Ô∏è r_H seems large for a hydraulic radius (did you enter diameter in mm instead of meters?).");
  }
  if (S > 1e-2 && S < 100) {
    // slope values larger than typical for buried pipes; maybe percent used (e.g., 1% = 0.01)
    warnings.push("‚ö†Ô∏è S is large for an energy slope ‚Äî did you enter percent (%) instead of m/m?");
  }

  // compute velocity using Hazen-Williams empirical velocity form:
  // U = 0.85 * C * r_H^0.63 * S^0.54
  const U = 0.85 * C * Math.pow(rH, 0.63) * Math.pow(S, 0.54);

  // numeric sanity checks
  if (!isFiniteNum(U) || Number.isNaN(U)) return showErrors(["‚ö†Ô∏è Computed velocity is invalid. Check inputs for extremes or non-finite values."]);
  if (U <= 0) return showErrors(["‚ö†Ô∏è Computed velocity ‚â§ 0. Check inputs."]);
  if (U > 1e6) return showErrors(["‚ö†Ô∏è Computed velocity extremely large (>1√ó10‚Å∂ m/s). Likely unit or scale error."]);

  // classification (QEHS)
  let classification = "";
  let color = "#2c7a7b";
  if (U < 0.01) {
    classification = "Practically stagnant (<0.01 m/s) ‚Äî severe sedimentation risk.";
    color = "#b35d00";
  } else if (U < 0.3) {
    classification = "Low velocity (<0.3 m/s) ‚Äî sedimentation and quality risk.";
    color = "#b35d00";
  } else if (U <= 1.5) {
    classification = "Normal velocity (0.3‚Äì1.5 m/s) ‚Äî typical for safe distribution.";
    color = "#006400";
  } else if (U <= 3.0) {
    classification = "High velocity (1.5‚Äì3.0 m/s) ‚Äî watch for erosion and noise.";
    color = "#b35d00";
  } else {
    classification = "Very high velocity (>3.0 m/s) ‚Äî likely erosion, pipe wear, or unit error.";
    color = "#b00020";
  }

  // build feedback details
  const fmt = v => {
    if (v === 0) return "0.0000";
    if (v >= 0.01 && v < 1000) return v.toFixed(4);
    return v.toExponential(4);
  };

  rateEl.textContent = fmt(U);
  classEl.textContent = classification;

  let details = `<div><b>Computed velocity (U):</b> ${fmt(U)} m/s</div>`;
  details += `<div style="margin-top:6px;"><b>Classification:</b> <span style="color:${color}; font-weight:600">${classification}</span></div>`;
  feedbackEl.innerHTML = details;

  // show results
  placeholder.classList.add("hidden");
  resultValue.classList.remove("hidden");
  errorBox.classList.add("hidden");
}

/* Print helper */
function printReport() {
  const el = document.getElementById('printDate');
  if (el) el.textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
  window.print();
}
</script>


    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}

<!--
=======================================
 Hazen‚ÄìWilliams Velocity Calculator
=======================================

 Formula:
   U = 0.85 √ó C √ó r_H^0.63 √ó S^0.54

 Where:
   U   = Flow velocity (m/s)
   C   = Hazen‚ÄìWilliams roughness coefficient (dimensionless)
   r_H = Hydraulic radius (m)
   S   = Slope of energy grade line (m/m)

---------------------------------------
 Input Validations
---------------------------------------
 ‚Ä¢ C (Hazen‚ÄìWilliams coefficient)
   - Must be numeric
   - Must be > 0
   - Warning if outside 20‚Äì300 ‚Üí unusual for common materials

 ‚Ä¢ r_H (hydraulic radius, m)
   - Must be numeric
   - Must be > 0
   - Warning if < 1e‚àí4 m or > 50 m ‚Üí likely unit error (mm entered as m)

 ‚Ä¢ S (slope of energy grade line, m/m)
   - Must be numeric
   - Must be > 0
   - Warning if < 1e‚àí12 or > 1 ‚Üí slope unrealistic
   - Warning if value looks like % (e.g. 1% entered as 1 instead of 0.01)

 ‚Ä¢ Decimal precision
   - >6 decimals for C or r_H, >12 for S ‚Üí results rounded

---------------------------------------
 Output Validations
---------------------------------------
 ‚Ä¢ Computed U must be:
   - Finite
   - > 0
   - Not excessively large (>1√ó10‚Å∂ m/s ‚Üí unit error)

---------------------------------------
 Output Classification
---------------------------------------
 ‚Ä¢ U < 0.01 m/s ‚Üí Practically stagnant (sedimentation risk)
 ‚Ä¢ 0.01 ‚â§ U < 0.3 m/s ‚Üí Low velocity (sedimentation / quality issues)
 ‚Ä¢ 0.3 ‚â§ U ‚â§ 1.5 m/s ‚Üí Normal range (safe distribution)
 ‚Ä¢ 1.5 < U ‚â§ 3.0 m/s ‚Üí High velocity (erosion / noise risk)
 ‚Ä¢ U > 3.0 m/s ‚Üí Very high velocity (erosion / wear / unit error)

---------------------------------------
 Heuristic Warnings
---------------------------------------
 ‚Ä¢ r_H > 5 and <1000 ‚Üí Possibly entered diameter in mm
 ‚Ä¢ S > 0.01 ‚Üí Possibly entered slope in percent (%) instead of m/m
-->



