{% extends 'base.html' %}
{% block title %}Energy Consumption Per Hours Worked Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Consumption Per Hours Worked Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
      

        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
      .btn-wrapper {
    text-align: center; /* centers inline-block buttons */
    margin-top: 20px;
  }

   .btn-wrapper {
    text-align: center; /* centers the button */
    margin-top: 20px;
  }

  .print-btn {
    display: inline-block;
    background:linear-gradient(#1560bd,#000040);
    color: white;
    padding: 8px 18px;   /* control button size */
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    width: auto !important; /* prevent full width */
  }

  .print-btn:hover {
    background: #1560bd;
  }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-display {
            display: flex;
            gap: 6px;
            align-items: center;  
            justify-content: center; 
        }
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }

      @media (max-width: 600px) {
    .rate-label {
        font-size: 10px; /* smaller font for mobile */
    }
} 
    </style>
</head>
<body>

    <div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>
<div class="calculator-container printable" id="printArea">

  {% include "includes/print_header_footer.html" %}

  <div class="calculator-header">
    <h1>Energy Consumption per Hours Worked Calculator</h1>
    <p>Normalizes energy consumption against total manhours worked using fuel consumption data.</p>
  </div>

  <div class="calc-content">
    <!-- Calculator -->
    <div class="calc-card">
      <h2>Enter Data</h2>

      <div class="form-group">
        <label for="fuelConsumed">Fuel Consumed (liters)</label>
        <input type="number" id="fuelConsumed" class="form-input" min="0" step="0.01" placeholder="e.g., 1500">
      </div>

      <div class="form-group">
        <label for="hoursWorked">Total Hours Worked</label>
        <input type="number" id="hoursWorked" class="form-input" min="0" step="0.01" placeholder="e.g., 12000">
      </div>

      <button class="calculate-btn" onclick="calculateEnergyConsumption()">Calculate Energy</button>
    </div>

    <!-- Result Section -->
    <div class="result-card">
      <!-- Placeholder -->
      <div class="result-placeholder" id="placeholder">
        <img src="/static/images/mlc_environment_result.png" alt="Energy illustration">
        <p>This tool will calculate the <strong>Energy Consumption per Hours Worked</strong>. Enter your data to see results here.</p>
      </div>

      <!-- Error Box -->
      <div class="result-error hidden" id="resultError">
        <div class="error-icon">❌</div>
        <div class="error-message" id="errorMessage"></div>
      </div>

      <!-- Result Output -->
      <div class="result-value hidden" id="resultValue">
        <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
          <h2>Energy Consumption</h2>
        </div>

        <div class="rate-display">
          <div class="rate-value" id="rateValue">0.00</div>
          <div class="rate-label" style="color:#2980b9; font-size:18px; font-weight:bold;">L / 200,000 manhours</div>
        </div>

        <div class="result-feedback">
          <div class="feedback-title">Assessment</div>
          <div class="feedback-content" id="feedbackContent"></div>
        </div>

        <div class="btn-wrapper">
          <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Notes Section -->
  <div class="note-section">
    <div class="note-card">
      <h3>📘 About This Calculator</h3>
      <p>
        The <strong>Energy Consumption per Hours Worked Calculator</strong> estimates normalized fuel energy consumption relative to total manhours worked.
        This helps evaluate energy efficiency, monitor performance trends, and ensure compliance with sustainability benchmarks.
      </p>
    </div>

    <div class="note-card">
      <h3>⚙️ Parameters Used</h3>
      <ul class="note-list">
        <li><strong>Fuel Consumed (liters):</strong> Total fuel used over the period of operation.</li>
        <li><strong>Total Hours Worked:</strong> Total cumulative hours worked by personnel or machines.</li>
        <li><strong>Energy Formula:</strong> (Fuel Consumed / Total Hours Worked) × 200,000.</li>
      </ul>
    </div>

   <div class="note-card">
  <h3>✅ Input Validation Rules</h3>
  <ul class="note-list">
    <li><strong>Fuel Consumed:</strong> Must be a positive number (0–10,000,000 L).  
        ❌ Error if negative or exceeds 10,000,000 L.  
        ⚠️ Warning if high but ≤10,000,000 L (e.g., 5,000,001–10,000,000 L) — verify data.</li>
    <li><strong>Total Hours Worked:</strong> Must be greater than zero (0–100,000,000 hr).  
        ❌ Error if ≤0 or exceeds 100,000,000 hr.  
        ⚠️ Warning if high but ≤100,000,000 hr (e.g., 50,000,001–100,000,000 hr) — verify data.</li>
    <li>No negative or non-numeric values allowed.</li>
    <li>Decimal precision: Fuel (2), Hours (2).</li>
    <li>If Hours Worked = 0 → ❌ Calculation not possible (division by zero).</li>
    <li>If Fuel Consumed = 0 → ⚠️ Energy Consumption = 0 (possible downtime or no fuel use).</li>
  </ul>
</div>



    <div class="note-card">
  <h3>📤 Output Validations</h3>
  <p>
    The following energy consumption ranges per 200,000 manhours help assess operational efficiency:
    low, typical, or high usage based on the calculated energy value.
  </p>
  <ul class="note-list">
    <li>Energy = 0 → ❗ No energy consumed.</li>
    <li>Energy &lt; 1000 → ⚠️ Low energy usage — indicates high efficiency.</li>
    <li>1000 ≤ Energy ≤ 3000 → ✅ Typical operational energy range.</li>
    <li>Energy &gt; 3000 → 🌟 High energy usage — may indicate inefficiency or heavy operational load.</li>
  </ul>
</div>


  <div class="note-card">
  <h3>📐 Governing Principle</h3>
  <p>
    This calculator is based on the principle of <strong>specific energy consumption normalization</strong>,
    which allows comparison of energy usage per unit of productive output or per 200,000 manhours. 
    It is widely used to evaluate operational efficiency and identify opportunities for energy savings.
  </p>
  <p>
    The methodology follows international and regional standards, regulations, and guidelines including:
    <ul class="note-list">
      <li><strong>ISO 50001:2018</strong> — Energy Management Systems; sets requirements for energy performance monitoring and improvement.</li>
      <li><strong>ISO 14064</strong> — Greenhouse Gas accounting; provides guidance on measuring emissions related to fuel consumption.</li>
      <li><strong>CIBSE Guide A</strong> — Provides best practices for energy assessment in buildings and industrial processes.</li>
      <li><strong>ECBC / ASHRAE Standards</strong> — Energy codes for building and operational efficiency.</li>
      <li><strong>US Energy Codes (e.g., DOE, EPA)</strong> — Standards for fuel efficiency, energy reporting, and industrial benchmarking.</li>
      <li>Normalization against <strong>200,000 manhours</strong> aligns with standard industrial KPI practices to allow comparison across sites and time periods.</li>
    </ul>
  </p>
  <p>
    By using these guidelines, the calculator ensures that energy consumption assessments are consistent, reliable, and in compliance with recognized energy efficiency and sustainability practices.
  </p>
</div>


    <div class="note-card">
      <h3>🔚 Conclusion</h3>
      <p>
        The Energy Consumption per Hours Worked Calculator provides insight into operational energy efficiency.
        It helps organizations identify energy-saving opportunities, track improvements, and align with sustainability standards such as ISO 50001 and corporate ESG goals.
      </p>
    </div>
  </div>

  <script>
function calculateEnergyConsumption() {
    const fuelRaw = document.getElementById('fuelConsumed')?.value.trim() ?? "";
    const hoursRaw = document.getElementById('hoursWorked')?.value.trim() ?? "";

    const errorBox = document.getElementById('resultError');
    const errorMessage = document.getElementById('errorMessage');
    const placeholder = document.getElementById('placeholder');
    const resultValue = document.getElementById('resultValue');
    const rateEl = document.getElementById('rateValue');
    const feedbackEl = document.getElementById('feedbackContent');

    // Reset UI
    if (errorBox) errorBox.classList.add('hidden');
    if (errorMessage) errorMessage.innerHTML = "";
    if (feedbackEl) feedbackEl.innerHTML = "";

    const errors = [];
    const warnings = [];

    // Input presence validation
    if (fuelRaw === "") errors.push("👉 Please enter the fuel consumed (liters).");
    if (hoursRaw === "") errors.push("👉 Please enter the total hours worked.");
    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove('hidden');
        placeholder.classList.add('hidden');
        resultValue.classList.add('hidden');
        return;
    }

    const fuel = parseFloat(fuelRaw);
    const hours = parseFloat(hoursRaw);

    // Numeric validation
    if (!Number.isFinite(fuel) || !Number.isFinite(hours)) {
        errorMessage.innerHTML = "⚠️ Invalid numeric values.";
        errorBox.classList.remove('hidden');
        placeholder.classList.add('hidden');
        resultValue.classList.add('hidden');
        return;
    }

    // Value checks
    if (fuel < 0) errors.push("👉 Fuel consumed cannot be negative.");
    if (hours <= 0) errors.push("👉 Total hours worked must be greater than zero.");

    // Out-of-range as errors
    if (fuel > 10000000) errors.push("❌ Fuel consumed exceeds realistic maximum (10,000,000 L).");
    if (hours > 100000000) errors.push("❌ Total hours worked exceeds realistic maximum (100,000,000 hr).");

    // Minor warnings
    if (fuel > 5000000 && fuel <= 10000000) warnings.push("⚠️ High fuel consumption — verify data.");
    if (hours > 50000000 && hours <= 100000000) warnings.push("⚠️ High total hours — verify data.");

    if (errors.length > 0) {
        errorMessage.innerHTML = errors.join("<br>");
        errorBox.classList.remove('hidden');
        placeholder.classList.add('hidden');
        resultValue.classList.add('hidden');
        return;
    }

    // Calculation
    const energy = (fuel / hours) * 200000;

    // Output formatting
    rateEl.textContent = energy.toFixed(2);

    let feedback = "";
    if (energy === 0) feedback = "❗ No energy consumed.";
    else if (energy < 1000) feedback = "⚠️ Low energy usage — indicates high efficiency.";
    else if (energy <= 3000) feedback = "✅ Typical operational energy range.";
    else feedback = "🌟 High energy usage — may indicate inefficiency or heavy operational load.";

    // Warnings display
    let details = `<div style="margin-top:6px;">Energy Consumption: <b>${energy.toFixed(2)} L / 200,000 manhours</b></div>`;
    if (warnings.length) details += `<div style="margin-top:6px; font-size:0.9em; color:#b35d00;">Note: ${warnings.join(" | ")}</div>`;

    feedbackEl.innerHTML = `<div>${feedback}</div>${details}`;

    placeholder.classList.add('hidden');
    resultValue.classList.remove('hidden');
    errorBox.classList.add('hidden');
}

function printReport() {
    const el = document.getElementById('printDate');
    if (el) {
        const now = new Date();
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        el.textContent = now.toLocaleDateString('en-IN', options);
    }
    window.print();
}
</script>

</div>


        <script src="{% static 'js/print.js' %}"></script>



<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
{% endblock %}


 <!-- .

🧭 1. QEHS & Fire Safety Perspective Analysis
Purpose

The calculator measures:

Energy Consumption per 200,000 Manhours
using:

Energy
=
Fuel Consumed (L)
Total Manhours
×
200
,
000
Energy=
Total Manhours
Fuel Consumed (L)
	​

×200,000

This KPI helps track energy intensity per productive work — a key metric under:

ISO 50001:2018 — Energy Management Systems (Operational control & performance evaluation)

ISO 14064 — GHG quantification

ISO 45001:2018 — linking manhours to resource efficiency

ILO Guidelines — sustainable workplace indicators

NFPA 30, 70B — safe energy and fuel management in industrial operations

⚙️ 2. Comprehensive Input Validation Rules (Real-World Standards)
Parameter	Expected Unit	Allowed Range	Precision	Validation Logic	Rationale / Standard Basis
Fuel Consumed	Liters (L)	10 ≤ Fuel ≤ 1,000,000	2 decimals	Must be > 0 and realistic for reporting period (monthly/yearly)	Typical diesel use for medium industries (ISO 50006 guidance on boundaries). <10 L = negligible sample, > 1 million L = data entry error.
Total Hours Worked	Manhours	100 ≤ Hours ≤ 10,000,000	0–2 decimals	Must be > 0, must exceed Fuel (i.e., can’t consume fuel with zero work)	Manhour-based KPIs typically normalized per 200,000 hrs (as per OSHA TRIR base). Extremely high hours > 10 M = multi-year cumulative.
Cross-Field Validation	—	—	—	If Fuel = 0 and Hours > 0 → Energy = 0 (warning). If Fuel > 0 and Hours = 0 → invalid (error).	Prevents division by zero and illogical reporting.
Decimal Handling	—	—	—	Round results to 2 decimals (precision consistent with fuel metering).	Follows ISO 5167 fuel measurement accuracy.
⚠️ 3. Edge-Case Validations
Scenario	Expected Handling	Why It Matters
hoursWorked = 0	❌ Error: Division by zero. Stop calculation.	Prevents invalid KPI values.
fuelConsumed = 0	⚠️ Warning: No fuel consumed. Energy = 0.	Indicates downtime or non-fuel energy sources.
fuelConsumed > 1,000,000	⚠️ Warning: Outlier — verify reporting scope.	May indicate cumulative or data error.
hoursWorked < 100	⚠️ Warning: Too small for normalization (unstable result).	200,000 normalization magnifies tiny datasets.
Non-numeric or negative input	❌ Error	Invalid measurement data.
fuel/hours < 0.001	⚠️ Unusually efficient; check input units.	Often due to wrong unit (e.g., kL instead of L).
fuel/hours > 10	⚠️ Unusually high intensity; check plant type/load.	Might be generator-heavy or incorrect hours.
📊 4. Output Validation & Threshold Logic
Range (L / 200k manhours)	Category	Assessment Message	QEHS Interpretation
= 0	❗ None	“No energy consumed.”	Possibly non-operational or electricity-only phase.
< 1000	✅ High Efficiency	“Low energy usage — excellent operational efficiency.”	Typical of automated or grid-electric operations.
1000 – 3000	⚙️ Normal	“Within typical operational range.”	Balanced mechanical and fuel load.
> 3000	⚠️ High Usage	“Energy intensity high — verify processes or maintenance.”	May indicate poor maintenance, excessive idling, or heavy diesel reliance.

These thresholds are derived from industrial energy benchmarking (ISO 50006 Annex A) and UNIDO Industrial Energy System Efficiency guidelines. -->