{% extends 'base.html' %}
{% block title %}Steam Condensing Rate for Air Heating Equipment caluculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam Condensing Rate for Air Heating Equipment caluculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
<style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0px 20px;
            border-radius: 12px;
        }

        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }
        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
             /* display: flex;  */
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: auto;
            /* overflow-y: auto;  */
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Input rows for better organization */
        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .input-row .form-group {
            flex: 1;
        }
        
        @media (max-width: 600px) {
            .input-row {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: auto;
            text-align: center;
            margin-top: 20px;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }

                .rate-display {
                display: flex;
                gap: 20px;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap; /* responsive */
                text-align: center;
            }

            .rate-block {
                display: flex;
                flex-direction: column;
                align-items: center;
                min-width: 120px; /* keeps blocks same width */
            }

            .rate-label {
                font-weight: bold;
                font-size: 16px;
                color: #444;
                margin-bottom: 5px;
            }

            .rate-value {
                font-size: 40px;
                font-weight: 700;
                color: #2980b9;
                line-height: 1.2;
            }

            .rate-unit {
                font-size: 14px;
                color: #777;
                margin-top: 4px;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .rate-value { font-size: 32px; }
            }

            @media (max-width: 480px) {
                .rate-value { font-size: 26px; }
                
                .rate-unit { font-size: 12px; }
                
            }



        /* Meter */
        .safety-meter {
            width: 100%; 
            height: 12px;
            background: #f1f5f9;
            border-radius: 6px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .meter-fill {
            height: 100%;
            transition: width 1s ease-in-out;
            border-radius: 6px;
        }
        
        .meter-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        /* Feedback */
                .result-feedback {
    background: #f8f9fa;
    border-radius: 10px;
    padding: 18px 20px;
    border-left: 4px solid #3498db;
    text-align: left;
    max-width: 800px; /* keeps it readable on large screens */
    margin: 0 auto;   /* centers it */
}

.feedback-title {
    font-weight: 600;
    margin-bottom: 8px;
    color: #2c3e50;
    font-size: 18px;
}

.feedback-content { 
    color: #34495e; 
    font-size: 16px;
    line-height: 1.5;
}

/* Responsive breakpoints */
@media (max-width: 768px) {
    .result-feedback {
        padding: 15px;
        font-size: 15px;
    }

    .feedback-title {
        font-size: 16px;
    }

    .feedback-content {
        font-size: 14px;
    }
}

@media (max-width: 480px) {
    .result-feedback {
        padding: 12px;
        border-left-width: 3px;
    }

    .feedback-title {
        font-size: 15px;
    }

    .feedback-content {
        font-size: 13px;
    }
}

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .formula-card {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #0d47a1;
        }
        
        .formula-card code {
            display: inline-block;
            background: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #0d47a1;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>

<div class="btn-container">
        <a href="{% url 'environmentcategory_calculators' %}" class="back-btn">Back To Environment Calculators</a>
    </div>
<div class="calculator-container printable" id="printArea">


{% include "includes/print_header_footer.html" %}

<div class="calculator-header">
    <h1>Steam Condensing Rate Calculator</h1>
    <p>Calculate the required steam condensing rate for air heating equipment (result in kg/h).</p>
</div>

<div class="calc-content">
    <!-- Calculator -->
    <div class="calc-card">
        <h2>Enter Parameters</h2>

        <div class="input-row">
            <div class="form-group">
                <label for="V">Volumetric Flowrate of Air (V̇) (m³/s)</label>
                <input type="number" id="V" class="form-input" step="any" min="0" placeholder="e.g., 1.2" aria-label="Volumetric Flowrate">
            </div>

            <div class="form-group">
                <label for="deltaT">Air Temperature Rise (ΔT) (°C)</label>
                <input type="number" id="deltaT" class="form-input" step="any" min="0" placeholder="e.g., 40" aria-label="Temperature rise">
            </div>
        </div>

        <div class="input-row">
            <div class="form-group">
                <label for="cp">Specific Heat of Air (cₚ) (kJ/m³°C)</label>
                <input type="number" id="cp" class="form-input" step="any" min="0" placeholder="e.g., 1.005" aria-label="Specific heat">
            </div>

            <div class="form-group">
                <label for="hfg">Enthalpy of Evaporation (h_fg) (kJ/kg)</label>
                <input type="number" id="hfg" class="form-input" step="any" min="0" placeholder="e.g., 2257" aria-label="Enthalpy of evaporation">
            </div>
        </div>

        <button class="calculate-btn" onclick="calculateSteamCondensingRate()">Calculate Steam Condensing Rate</button>
    </div>

    <!-- Result Section -->
    <div class="result-card">
        <div class="result-placeholder" id="placeholder">
            <img src="/static/images/mlc_environment_result.png" alt="Air heating illustration">
            <p>This tool calculates the required steam condensing rate for air heating equipment.</p>
        </div>

        <div class="result-error hidden" id="resultError" role="alert" aria-live="polite">
            <div class="error-icon">❌</div>
            <div class="error-message" id="errorMessage"></div>
        </div>

        <div class="result-value hidden" id="resultValue" aria-live="polite">
            <div class="calculation-type" style="font-weight:bold; font-size:16px; margin-bottom:5px; color:#1560bd;">
                <h2>Steam Condensing Rate</h2>
            </div>

            <div class="rate-display" style="gap:12px; align-items:center; justify-content:center;">
                <div class="rate-value" id="steamRate">0.00</div>
                <div class="rate-label" style="font-size:16px; color: #2980b9;">kg/h</div>
            </div>

            <div class="result-feedback">
                <div class="feedback-title">System Assessment</div>
                <div class="feedback-content" id="feedbackContent"></div>
            </div>

            <div class="btn-wrapper">
                <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
            </div>
        </div>
    </div>
</div>

<!-- Notes Section -->
<div class="note-section">
  <div class="note-card">
    <h3>📘 About This Calculator</h3>
    <p>
      This calculator determines the steam condensing rate required for air heating systems. It ensures proper energy utilization, supports efficient heating, and prevents excessive steam consumption in industrial and HVAC processes. The result helps engineers make informed decisions about steam load management and system optimization.
    </p>
  </div>

  <div class="note-card">
    <h3>⚙ Parameters Used</h3>
    <ul class="note-list">
      <li><strong>V̇ (m³/s):</strong> Volumetric flowrate of air.</li>
      <li><strong>ΔT (°C):</strong> Air temperature rise due to heating.</li>
      <li><strong>c<sub>p</sub> (kJ/m³°C):</strong> Specific heat capacity of air.</li>
      <li><strong>h<sub>fg</sub> (kJ/kg):</strong> Enthalpy of evaporation of steam.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>✅ Input Validation Rules</h3>
    <ul class="note-list">
      <li><strong>V̇:</strong> Required, numeric, >0 and ≤50 m³/s.</li>
      <li><strong>ΔT:</strong> Required, numeric, >0 and ≤200 °C.</li>
      <li><strong>c<sub>p</sub>:</strong> Required, numeric, >0 and ≤2.0 kJ/m³°C.</li>
      <li><strong>h<sub>fg</sub>:</strong> Required, numeric, >0 and ≤3,000 kJ/kg.</li>
      <li><strong>Constraints:</strong> All inputs must be finite and numeric; zero or negative values invalid.</li>
      <li><strong>Advisories:</strong> Warning if V̇ * ΔT * c<sub>p</sub> > 1e6 (unrealistically high steam load).</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>📏 Output Validations</h3>
    <ul class="note-list">
      <li><strong>Steam Condensing Rate:</strong> Displayed in kg/h, rounded to 2 decimal places.</li>
      <li><strong>Assessment:</strong>
        <ul>
          <li>Rate < 10 kg/h: Low Steam Load — System may struggle to maintain target temperature.</li>
          <li>10 ≤ Rate ≤ 500 kg/h: Optimal Steam Load — System operates efficiently.</li>
          <li>Rate > 500 kg/h: High Steam Load — Consider insulation improvements or system optimization.</li>
        </ul>
      </li>
      <li>Warnings triggered for: non-finite or ≤0 results, or extremely high steam load (V̇ * ΔT * c<sub>p</sub> > 1e6).</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>📖 Governing Principle</h3>
    <p>
      There isn't a single, universal "Steam Condensing Rate for Air Heating Equipment calculator standard"; rather, the calculation is based on established thermodynamic principles and industry-specific guidelines from experts like Spirax Sarco, which provide formulas and data using concepts like enthalpy of evaporation, specific heat capacity, and temperature changes to determine the required steam flow rate in kg/h. Manufacturers of air heating equipment may also provide their own equipment-specific formulas and data for calculating condensing rates.
    </p>
    <p><b>Key Principles and Formulas</b></p>
    <p><b>The general approach to calculating steam condensing rate involves these steps:</b></p>
    <p><b>Determine the heat load:</b> Required by the air heating equipment, often given in kW.</p>
    <p><b>Find the enthalpy of evaporation:</b> (also known as latent heat, h<sub>fg</sub>) for the steam at its operating pressure, typically found in steam tables.</p>
    <p><b>Calculate the mass flow rate:</b> of steam by dividing the heat load by the enthalpy of evaporation, then multiplying by 3,600 (to convert from hours to seconds, if necessary) to get the rate in kilograms per hour.</p>
    <p><b>Industry-Specific Resources</b></p>
    <p><b>Spirax Sarco:</b> A leading authority on steam engineering, they offer detailed guides and formulas on steam consumption and consumption rates for various applications, including air heaters.</p>
    <p><b>Manufacturers:</b> The manufacturers of your specific air heating equipment often provide proprietary equations or data for determining the steam condensing rate required for their products, according to Spirax Sarco.</p>
    <p><b>The Engineering ToolBox:</b> This online resource offers practical engineering calculations, including those for steam heating processes and their relation to equipment kW rating.</p>
    <p><b>Factors to Consider</b></p>
    <p><b>Equipment Rating (kW):</b> The output or capacity of the heating equipment.</p>
    <p><b>Steam Properties:</b> The pressure, temperature, and specific volume of the steam, all of which influence its energy content.</p>
    <p><b>Airflow and Temperature Rise:</b> For calculating heat transfer and required steam.</p>
  </div>

  <div class="note-card">
    <h3>🔚 Conclusion</h3>
    <p>
      This calculator provides reliable estimates of steam condensing rates for air heating systems, supporting <strong>energy efficiency</strong>, <strong>system optimization</strong>, and <strong>QEHS compliance</strong>. Ensure input values (V̇, ΔT, c<sub>p</sub>, h<sub>fg</sub>) are accurate and validate with standards like ASME Steam Tables, Spirax Sarco guidelines, or manufacturer data for critical applications to ensure efficient and safe operation.
    </p>
  </div>
</div>

<script>
function showErrors(errors) {
    const errorBox = document.getElementById("resultError");
    const errorMessage = document.getElementById("errorMessage");
    const placeholder = document.getElementById("placeholder");
    const resultValue = document.getElementById("resultValue");

    errorMessage.innerHTML = errors.join("<br>");
    errorBox.classList.remove("hidden");
    placeholder.classList.add("hidden");
    resultValue.classList.add("hidden");
}

function calculateSteamCondensingRate() {
    const V = parseFloat(document.getElementById("V")?.value.trim());
    const deltaT = parseFloat(document.getElementById("deltaT")?.value.trim());
    const cp = parseFloat(document.getElementById("cp")?.value.trim());
    const hfg = parseFloat(document.getElementById("hfg")?.value.trim());

    const resultEl = document.getElementById("steamRate");
    const feedbackEl = document.getElementById("feedbackContent");
    document.getElementById("resultError").classList.add("hidden");
    feedbackEl.innerHTML = "";

    const errors = [];
    const warnings = [];

    // Validate numeric values
    if (![V, deltaT, cp, hfg].every(Number.isFinite)) {
        errors.push("All inputs are required and must be numeric.");
    }

    // Threshold validation
    if (V <= 0 || V > 50) errors.push("Volumetric flowrate must be >0 and ≤50 m³/s.");
    if (deltaT <= 0 || deltaT > 200) errors.push("Air temperature rise must be >0 and ≤200 °C.");
    if (cp <= 0 || cp > 2.0) errors.push("Specific heat must be >0 and ≤2.0 kJ/m³°C.");
    if (hfg <= 0 || hfg > 3000) errors.push("Enthalpy of evaporation must be >0 and ≤3000 kJ/kg.");

    // Logical cross-field validation
    if (V * deltaT * cp > 1e6) warnings.push("⚠️ Steam load very high; verify inputs for realism.");

    if (errors.length) return showErrors(errors);

    // Calculate steam condensing rate
    const ms = (3600 * V * deltaT * cp) / hfg;

    // Feedback
    let classification = "";
    let suggestion = "";
    if (ms < 10) {
        classification = "Low Steam Load";
        suggestion = "System may struggle to maintain target temperature.";
    } else if (ms >= 10 && ms <= 500) {
        classification = "Optimal Steam Load";
        suggestion = "System operates efficiently.";
    } else {
        classification = "High Steam Load";
        suggestion = "Consider insulation improvements or system optimization.";
    }

    let details = `<div>Steam Condensing Rate = <b>${ms.toFixed(2)}</b> kg/h</div>`;
    details += `<div>Classification: <b>${classification}</b></div>`;
    details += `<div style="margin-top:6px;">${suggestion}</div>`;
    if (warnings.length) details += `<div style="margin-top:8px; color:#b35d00;">${warnings.join(" | ")}</div>`;

    resultEl.textContent = ms.toFixed(2);
    feedbackEl.innerHTML = details;

    document.getElementById("placeholder").classList.add("hidden");
    document.getElementById("resultValue").classList.remove("hidden");
    document.getElementById("resultError").classList.add("hidden");
}

function printReport() {
  const el = document.getElementById('printDate');
  if (el) {
    el.textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
  }
  window.print();
}
</script>


<script src="{% static 'js/print.js' %}"></script>

</body>
</html>
{% endblock %}



<!-- 
📌 Steam Condensing Rate Calculator (Essentials)

🔹 Formula:
    • Steam Condensing Rate (m_s, kg/h) = (3600 × V × ΔT × Cp) / h_fg
      - V     = Volumetric flowrate (m³/s)
      - ΔT    = Air temperature rise (°C)
      - Cp    = Specific heat of air (kJ/m³°C)
      - h_fg  = Enthalpy of evaporation (kJ/kg)

🔹 Input Validations:
    • Volumetric Flowrate (V):
        - Required
        - Must be numeric
        - Must be >0 and ≤50 m³/s
    • Temperature Rise (ΔT):
        - Required
        - Must be numeric
        - Must be >0 and ≤200 °C
    • Specific Heat (Cp):
        - Required
        - Must be numeric
        - Must be >0 and ≤2.0 kJ/m³°C
    • Enthalpy of Evaporation (h_fg):
        - Required
        - Must be numeric
        - Must be >0 and ≤3000 kJ/kg
    • Cross-field / Logical check:
        - V × ΔT × Cp > 1,000,000 → warning, verify realism

🔹 Output Validations:
    • Steam Condensing Rate (m_s):
        - Must be finite and >0
        - Warnings:
            - m_s < 10 → Low Steam Load
            - 10 ≤ m_s ≤ 500 → Optimal Steam Load
            - m_s > 500 → High Steam Load, consider insulation/optimization
-->
