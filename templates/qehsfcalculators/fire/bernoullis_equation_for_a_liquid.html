{% extends 'base.html' %}
{% block title %}Bernoulli's Equation For A Liquid Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;

        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
        /* Remove list dots & align horizontally */
.note-section ul {
    list-style: none;       /* removes bullets */
    
   
}

/* Space between items if more links later */


    </style>
</head>
<body>
   <div class="btn-container">
    <a href="{% url 'firecategory_calculators' %}" class="back-btn">Back To Fire Calculators</a>
</div>

<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}

    <!-- Calculator Header -->
   <div class="calculator-header">
    <h1>Bernoulli's Equation for a Liquid Calculator</h1>
    <p>
        This calculator helps you analyze fluid flow using Bernoulli’s principle. 
        It estimates how <strong>pressure, velocity, and elevation</strong> interact in systems such as pipelines, pumps, and sprinklers.
    </p>
</div>

    <div class="calc-content">
        <!-- Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label>Pressure at Point 1 (P₁ in Pa)</label>
                <input type="number" id="p1" class="form-input" placeholder="Example: 100000">
            </div>
            <div class="form-group">
                <label>Velocity at Point 1 (u₁ in m/s)</label>
                <input type="number" id="u1" class="form-input" placeholder="Example: 10">
            </div>
            <div class="form-group">
                <label>Height at Point 1 (h₁ in m)</label>
                <input type="number" id="h1" class="form-input" placeholder="Example: 5">
            </div>
            <div class="form-group">
                <label>Pressure at Point 2 (P₂ in Pa)</label>
                <input type="number" id="p2" class="form-input" placeholder="Example: 80000">
            </div>
            <div class="form-group">
                <label>Velocity at Point 2 (u₂ in m/s)</label>
                <input type="number" id="u2" class="form-input" placeholder="Example: 15">
            </div>
            <div class="form-group">
                <label>Height at Point 2 (h₂ in m)</label>
                <input type="number" id="h2" class="form-input" placeholder="Example: 10">
            </div>
            <div class="form-group">
                <label>Fluid Density (ρ in kg/m³)</label>
                <input type="number" id="rho" class="form-input" value="1000" placeholder="Enter density">
            </div>
            <div class="form-group">
                <label>Gravitational Acceleration (g in m/s²)</label>
                <input type="number" id="g" class="form-input" value="9.81" placeholder="Enter g">
            </div>
            <button class="calculate-btn" onclick="calculateBernoulli()">Calculate</button>
        </div>

        <!-- Result Card -->
        <div class="result-card">
            <!-- Placeholder -->
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/resultimage.png' %}" alt="Bernoulli Illustration">
                <p>
                    This tool applies <strong>Bernoulli’s Equation</strong> to compare fluid energy at two points. 
                    Enter the required values to analyze <strong>pressure, velocity, and height</strong> relationships.
                </p>
            </div>

            <!-- Error -->
            <div class="result-error hidden" id="resultError" style="font-size: 28px;"></div>

            <!-- Result -->
            <div class="result-value hidden" id="resultValue">
                <div class="rate-value" id="bernValue">0.00</div>
                <div class="rate-label" style="font-size:16px; font-weight:bold;">Energy Difference</div>
                <div class="result-feedback" id="feedbackContent"></div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Section -->
    <div class="note-section">
        <!-- About -->
       <div class="note-card">
    <h3>📘 About This Calculator</h3>
    <p>
        Bernoulli’s Equation is a fundamental principle of <strong>fluid dynamics</strong>. 
        It states that the total energy in a flowing fluid — made up of <strong>pressure energy, kinetic energy, and potential energy</strong> — 
        remains constant along a streamline, provided the fluid is incompressible and there is negligible friction.
    </p>
    <p>
        In simpler terms, if a fluid speeds up, its pressure decreases, and if it slows down, its pressure increases. 
        This relationship explains why airplanes can fly, how pumps move liquids, why water flows faster through narrow pipes, 
        and how fire sprinklers or ventilation ducts work.
    </p>
    <p>
        This calculator applies Bernoulli’s principle to practical problems in <strong>engineering, firefighting systems, pipelines, pumps, and HVAC systems</strong>. 
        By entering your parameters, you can better understand fluid motion and energy distribution, which helps in both system design and troubleshooting.
    </p>
</div>


        <!-- Parameters -->
        <div class="note-card">
    <h3>⚙️ Parameters</h3>
    <ul class="note-list">
        <li><strong>P₁, P₂ (Pressure at Points 1 & 2):</strong> 
            The force per unit area exerted by the fluid at two different points in the system 
            (measured in Pascals, Pa).
        </li>
        <li><strong>u₁, u₂ (Velocity at Points 1 & 2):</strong> 
            The speed of the fluid at two points in the system 
            (measured in meters per second, m/s).
        </li>
        <li><strong>h₁, h₂ (Height at Points 1 & 2):</strong> 
            The elevation of the fluid at two different points 
            (measured in meters, m).
        </li>
        <li><strong>ρ (Density of Fluid):</strong> 
            The mass per unit volume of the fluid 
            (measured in kilograms per cubic meter, kg/m³).
        </li>
        <li><strong>g (Gravitational Acceleration):</strong> 
            The acceleration due to gravity, typically 
            <strong>9.81 m/s²</strong> on Earth.
        </li>
    </ul>
</div>


        <!-- Validations -->
        <div class="note-card">
            <h3>🛡️ Input Validations</h3>
            <ul class="note-list">
                <li>✅ All fields are <strong>mandatory</strong>.</li>
                <li>✅ <strong>Positive values only:</strong> Pressures, density, and gravity must be >0.</li>
                <li>✅ <strong>Velocities:</strong> Must be zero or positive (no negative flow speed).</li>
                <li>✅ <strong>Heights:</strong> Cannot be negative.</li>
                <li>⚠️ Errors and warnings will be displayed in the result box.</li>
            </ul>
        </div>
         <div class="note-card">
    <h3>🛡️ Input Validations & Compliance Rules</h3>
    <ul class="note-list">
        <li>✅ <strong>All fields are mandatory:</strong> Missing inputs will prevent calculation.</li>
        <li>✅ <strong>Pressure (P₁, P₂):</strong> Must be <strong>positive values</strong> above 1 Pa and realistically within <strong>1 Pa – 5 MPa</strong>. Values outside this may indicate sensor error or invalid data entry.</li>
        <li>✅ <strong>Velocity (u₁, u₂):</strong> Must be <strong>≥0</strong>. Typical safe range: <strong>0 – 100 m/s</strong> in pipelines and sprinkler systems.</li>
        <li>✅ <strong>Height (h₁, h₂):</strong> Cannot be negative. Acceptable range: <strong>0 – 500 m</strong> depending on structure/elevation limits.</li>
        <li>✅ <strong>Fluid Density (ρ):</strong> Must be >0. Acceptable range: <strong>500 – 2000 kg/m³</strong>. (Water ~1000 kg/m³, oils ~800–900, special liquids may vary).</li>
        <li>✅ <strong>Gravity (g):</strong> Must be >0, with typical Earth value <strong>9.81 m/s²</strong>. Acceptable range for compliance: <strong>9.7 – 9.9 m/s²</strong>.</li>
        <li>⚠️ <strong>Logical Consistency:</strong> Extreme mismatches (e.g., very high pressure with zero velocity) will trigger a warning for review.</li>
        <li>⚠️ <strong>Output Sanity Check:</strong> If the calculated energy difference is <strong>very high (>100 m)</strong> or near zero (<0.01 m), warnings will highlight potential measurement or assumption errors.</li>
        <li>❌ <strong>No Negative or Zero Values:</strong> Not allowed for pressure, density, or gravity (non-physical inputs).</li>
        <li>📋 <strong>Audit-Ready:</strong> All validations align with <strong>NFPA, ISO 45001, and OSHA good practice</strong> to ensure reliable engineering calculations.</li>
    </ul>
</div>

        <!-- Applications -->
        <div class="note-card">
            <h3>🌍 Real-Life Applications</h3>
            <ul class="note-list">
                <li><strong>Fire Sprinkler Systems:</strong> Used to calculate water pressure and flow rate for effective fire suppression.</li>
        <li><strong>Aircraft Wing Lift:</strong> Helps in understanding how pressure differences generate lift, allowing airplanes to fly.</li>
        <li><strong>Water Supply Systems:</strong> Used to design pipelines and ensure efficient water distribution.</li>
        <li><strong>Ventilation and Airflow:</strong> Applied in designing HVAC (Heating, Ventilation, and Air Conditioning) systems to optimize airflow.</li>
        <li><strong>Medical Applications:</strong> Used in devices like blood flow monitors to measure the velocity of blood in veins and arteries.</li>
 
            </ul>
        </div>

        <!-- Conclusion -->
        <div class="note-card">
            <h3>🔎 Conclusion</h3>
            <p>
                Bernoulli’s principle provides deep insights into fluid mechanics. 
                By balancing <strong>pressure, velocity, and height</strong>, engineers can design 
                efficient systems in aviation, firefighting, medicine, and more.
            </p>
        </div>
    </div>
</div>

<script>
function calculateBernoulli() {
    // Grab inputs
    const p1 = parseFloat(document.getElementById("p1").value);
    const u1 = parseFloat(document.getElementById("u1").value);
    const h1 = parseFloat(document.getElementById("h1").value);
    const p2 = parseFloat(document.getElementById("p2").value);
    const u2 = parseFloat(document.getElementById("u2").value);
    const h2 = parseFloat(document.getElementById("h2").value);
    const rho = parseFloat(document.getElementById("rho").value);
    const g   = parseFloat(document.getElementById("g").value);

    const placeholder     = document.getElementById("placeholder");
    const resultError     = document.getElementById("resultError");
    const resultValue     = document.getElementById("resultValue");
    const bernValue       = document.getElementById("bernValue");
    const feedbackContent = document.getElementById("feedbackContent");

    // Reset view
    placeholder.classList.add("hidden");
    resultError.classList.add("hidden");
    resultValue.classList.add("hidden");
    resultError.innerHTML = "";
    feedbackContent.innerHTML = "";
    feedbackContent.style.color = "";

    const values = [p1,u1,h1,p2,u2,h2,rho,g];

    // 1) Required & numeric
    if (values.some(v => v === null || v === undefined || Number.isNaN(v) || !Number.isFinite(v))) {
        showError("⚠️ Please fill in all fields with valid numeric values.");
        return;
    }

    // 2) Basic sign checks (per current UI: heights treated as ≥ 0)
    if (p1 <= 0 || p2 <= 0) return showError("❌ Pressures must be positive (Pa).");
    if (u1 < 0 || u2 < 0)   return showError("❌ Velocities cannot be negative (m/s).");
    if (h1 < 0 || h2 < 0)   return showError("❌ Heights cannot be negative (m).");
    if (rho <= 0)           return showError("❌ Fluid density must be greater than zero (kg/m³).");
    if (g <= 0)             return showError("❌ Gravity must be greater than zero (m/s²).");

    // 3) Hard bounds (safety/physics)
    if (p1 < 1e3 || p2 < 1e3 || p1 > 1e8 || p2 > 1e8)
        return showError("❌ Pressure out of acceptable range (1×10³ to 1×10⁸ Pa). Check units.");
    if (u1 > 100 || u2 > 100)
        return showError("❌ Velocity out of acceptable range (≤ 100 m/s).");
    if (h1 > 200 || h2 > 200)
        return showError("❌ Height out of acceptable range (≤ 200 m).");
    if (rho < 100 || rho > 3000)
        return showError("❌ Density out of acceptable range (100–3000 kg/m³).");
    if (g < 9.0 || g > 10.0)
        return showError("❌ Gravity out of acceptable range (9.0–10.0 m/s²).");

    // 4) Soft warnings (will not block result, but shown prominently)
    let warnings = [];
    if (p1 < 5e4 || p2 < 5e4) warnings.push("Pressure looks low for typical water systems. Did you enter kPa instead of Pa?");
    if (u1 > 30 || u2 > 30)   warnings.push("High velocity (>30 m/s). Potential erosion/cavitation risk.");
    if (h1 > 100 || h2 > 100) warnings.push("Unusually large elevation. Confirm datum and units.");
    if (rho < 700 || rho > 2000) warnings.push("Density is atypical for common liquids. Confirm fluid and units.");

    // 5) Compute head terms (m)
    const H1_p = p1 / (rho * g);
    const H1_v = (u1 * u1) / (2 * g);
    const H1_z = h1;

    const H2_p = p2 / (rho * g);
    const H2_v = (u2 * u2) / (2 * g);
    const H2_z = h2;

    // Numerical sanity
    const terms = [H1_p,H1_v,H1_z,H2_p,H2_v,H2_z];
    if (terms.some(t => !Number.isFinite(t) || Math.abs(t) > 1e6)) {
        return showError("❌ Numerical instability detected. Check inputs and units (values too extreme).");
    }

    const H1 = H1_p + H1_v + H1_z;
    const H2 = H2_p + H2_v + H2_z;
    const dH = H1 - H2; // positive means point 1 has higher total head

    // 6) Display ΔH and component breakdown
    bernValue.innerText = dH.toFixed(4);
    resultValue.classList.remove("hidden");

    // 7) Interpretation thresholds
    const absdH = Math.abs(dH);
    let verdict = "";
    if (absdH < 0.01) {
        verdict = "✅ Energy balance is ideal (|ΔH| < 0.01 m).";
        feedbackContent.style.color = "green";
    } else if (absdH < 1) {
        verdict = "ℹ️ Small head difference (0.01–1 m). Likely minor losses/measurement tolerance.";
        feedbackContent.style.color = "inherit";
    } else if (absdH < 10) {
        verdict = "⚠️ Noticeable head difference (1–10 m). Consider friction, fittings, throttling, or elevation error.";
        feedbackContent.style.color = "orange";
    } else {
        verdict = "❗ Significant head difference (≥10 m). Check pipe losses, valves, pump conditions, or unit errors.";
        feedbackContent.style.color = "red";
    }

    // Add component breakdown for auditability
    const breakdown = `
        <div style="margin-top:8px; font-size:14px; line-height:1.4;">
            <strong>Head components (m):</strong><br>
            Point 1 → Pressure: ${H1_p.toFixed(3)}, Velocity: ${H1_v.toFixed(3)}, Elevation: ${H1_z.toFixed(3)}, Total: ${H1.toFixed(3)}<br>
            Point 2 → Pressure: ${H2_p.toFixed(3)}, Velocity: ${H2_v.toFixed(3)}, Elevation: ${H2_z.toFixed(3)}, Total: ${H2.toFixed(3)}
        </div>
    `;

    // If warnings exist, show them above the verdict
    if (warnings.length) {
        const w = warnings.map(x => `• ${x}`).join("<br>");
        feedbackContent.innerHTML = `<div style="color:orange; margin-bottom:6px;">${w}</div>${verdict}${breakdown}`;
    } else {
        feedbackContent.innerHTML = `${verdict}${breakdown}`;
    }

    // helper
    function showError(msg) {
        resultError.innerHTML = msg;
        resultError.style.color = "red";
        resultError.classList.remove("hidden");
        // keep resultValue hidden on error
    }
}
function printReport(){ window.print(); }
</script>

    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}

<!-- 1) Expert analysis (QEHS & fire safety lens)

What the calculator does
It compares total mechanical energy per unit weight (head) between two points:

Pressure head: 
𝑃
/
(
𝜌
𝑔
)
P/(ρg)

Velocity head: 
𝑢
2
/
(
2
𝑔
)
u
2
/(2g)

Elevation head: 
ℎ
h

For liquids in safety systems (sprinklers, hydrants, pumps, foam lines, cooling water) this is used to:

Check expected pressure drops and confirm pump sizing and sprinkler performance.

Diagnose losses (friction, fittings) when measured vs. expected head differ.

Validate commissioning data against design criteria (NFPA/EN standards often call for minimum residual pressures and densities).

What should be validated

Units must be SI (Pa, m/s, m, kg/m³, m/s²).

Ranges must reflect realistic system bounds.

Cross-field logic must prevent mathematically invalid states (e.g., 
𝜌
=
0
ρ=0, 
𝑔
=
0
g=0).

Output meaning must reflect head balance: near-zero difference → ideal/low-loss; larger difference → probable losses, throttling, elevation changes or measurement errors.

2) Comprehensive input validation rules

All inputs are required, numeric, finite, and in SI units.

A. Physical plausibility (per field)

P₁, P₂ (Pa)

Must be > 0 (absolute pressure in Pa).

Typical water systems: 1×10⁵ to 2.5×10⁶ Pa (1–25 bar).

Hard limits accepted by tool: 1×10³ ≤ P ≤ 1×10⁸ Pa (0.01–1000 bar).

Warning if P < 5×10⁴ Pa (possible vacuum/mistaken kPa) or P > 5×10⁷ Pa (extreme/unlikely for building systems).

u₁, u₂ (m/s)

Must be ≥ 0.

Typical for fire/water lines: 0–20 m/s (usually 1–8 m/s).

Hard limits accepted by tool: 0 ≤ u ≤ 100 m/s.

Warning if u > 30 m/s (erosion/noise/cavitation risk).

h₁, h₂ (m)

Must be ≥ 0 (treat as elevation above chosen datum for this UI).

Hard upper bound: ≤ 200 m (typical building/plant elevation differences).

Warning if any h > 100 m (unusual for building internals).

ρ (kg/m³)

Must be > 0.

Typical liquids: 700–2000 kg/m³ (water ≈ 1000).

Hard limits accepted: 100 ≤ ρ ≤ 3000 kg/m³.

Warning outside 700–2000.

g (m/s²)

Must be > 0.

Earth: 9.81; acceptable range 9.5–9.9 for rounding.

Hard limits accepted: 9.0 ≤ g ≤ 10.0 m/s².

Error outside hard limits.

B. Allowed decimals & formatting

Accept up to 3–4 decimals on all fields.

Reject NaN, Infinity, blank, or whitespace.

C. Cross-field dependencies & logic

Division by zero guard: 
𝜌
>
0
ρ>0, 
𝑔
>
0
g>0 enforced before computing heads.

If all six state variables at both points are identical → head difference should be ≈ 0 (used in testing).

If elevation increases significantly (h₂ ≫ h₁) and pressures/velocities don’t reflect that, warn about inconsistency.

If velocity increases a lot without adequate pressure drop, warn about measurement mismatch.

3) Edge-case validations

Zero or negative: P ≤ 0, ρ ≤ 0, g ≤ 0 → error (invalid).

Unrealistic extremes:

P > 1×10⁸ Pa, u > 100 m/s, h > 200 m, ρ < 100 or > 3000, g < 9.0 or > 10.0 → error.

Suspicious units: P < 50000 Pa (50 kPa) for water networks → warning “Check if you entered kPa instead of Pa.”

Numerical stability: any computed head term > 1e6 m or NaN/Infinity → error.

All zeros except heights → error (not physically meaningful).

Large |Δhead| with small changes in inputs → warning (possible unit mix or transposition).

4) Output validation & thresholds (audit-ready)

The output shown as Energy Difference (ΔH) in meters of fluid (m):

Δ
𝐻
=
𝐻
1
−
𝐻
2
ΔH=H
1
	​

−H
2
	​

, where 
𝐻
=
𝑃
/
(
𝜌
𝑔
)
+
𝑢
2
/
(
2
𝑔
)
+
ℎ
H=P/(ρg)+u
2
/(2g)+h.

Threshold interpretation (typical water systems):

|ΔH| < 0.01 m → “Balanced / ideal” (within numerical noise).

0.01 m ≤ |ΔH| < 1 m → “Small difference” (minor losses or measurement tolerance).

1 m ≤ |ΔH| < 10 m → “Noticeable losses” (friction, fittings, valves).

|ΔH| ≥ 10 m → “Significant head loss or data issue” (check pipe friction, throttling, partial closure, cavitation, or unit errors).

Also display the three head components per point so an auditor can see which term dominates (pressure vs. velocity vs. elevation). This mirrors how commissioning reports justify pressure drops/head losses.
Why each validation matters (compliance rationale)

Positive & bounded pressures/density/gravity → Prevent non-physical calculations that would invalidate engineering judgments and audit trails (OSHA due diligence; ISO 45001 control of documented information).

Range checks → Catch unit mistakes (kPa vs Pa) and outliers before they propagate into design/acceptance decisions (NFPA/EN compliance).

Cross-field logic → Ensures engineering consistency (e.g., higher elevation should require more head), supporting defensible reports.

Numerical stability guards → Avoid misleading outputs from overflow/rounding so the record is reliable.

Warnings vs. errors → Mirrors real safety practice: block on unsafe/invalid entries; allow plausible but unusual cases with flags for review & sign-off.

Component breakdown in output → Provides clear traceability for auditors/inspectors to see exactly which term drives head differences. -->
