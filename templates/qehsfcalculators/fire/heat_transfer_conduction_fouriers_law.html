{% extends 'base.html' %}
{% block title %}Heat Transfer By Conduction Calculator (Fourier's Law){% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
         @media (max-width: 768px) {
    .rate-value {
        font-size: 28px; /* smaller font for tablets/mobiles */
    }
}

@media (max-width: 480px) {
    .rate-value {
        font-size: 24px; /* even smaller for phones */
    }
}
    </style>
</head>
<body>
   <div class="btn-container">
    <a href="{% url 'firecategory_calculators' %}" class="back-btn">Back To Fire Calculators</a>
</div>

<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Heat Transfer By Conduction Calculator (Fourier's Law)</h1>
        <p>Calculate heat transfer through materials to assess thermal dissipation, insulation efficiency, and fire safety risks.</p>
    </div>

    <div class="calc-content">
        <!-- Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label for="thermalConductivity">Thermal Conductivity (W/m°C)</label>
                <input type="number" id="thermalConductivity" class="form-input" placeholder="Enter thermal conductivity">
            </div>
            <div class="form-group">
                <label for="heatTransferArea">Heat Transfer Area (m²)</label>
                <input type="number" id="heatTransferArea" class="form-input" placeholder="Enter heat transfer area">
            </div>
            <div class="form-group">
                <label for="temperatureDifference">Temperature Difference (°C)</label>
                <input type="number" id="temperatureDifference" class="form-input" placeholder="Enter temperature difference">
            </div>
            <div class="form-group">
                <label for="materialThickness">Material Thickness (m)</label>
                <input type="number" id="materialThickness" class="form-input" placeholder="Enter material thickness">
            </div>
            <button class="calculate-btn" onclick="calculateHeatTransfer()">Calculate Heat Transfer</button>
        </div>

        <!-- Result Card -->
        <div class="result-card">
            <!-- Placeholder -->
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/resultimage.png' %}" alt="Heat Transfer Illustration">
                <p>This tool will calculate the <strong>Heat Transfer Rate</strong>. Enter your data to see results and insights here.</p>
            </div>

            <!-- Error -->
            <div class="result-error hidden" id="resultError" style="font-size: 28px;"></div>

            <!-- Result -->
            <div class="result-value hidden" id="resultValue">
                <div class="rate-value">Heat Transfer Rate</div>
                <div class="rate-value" id="heatTransferValue">0.00</div>
                <div class="rate-label" style="font-size:16px; font-weight:bold;">W (Watts)</div>
                <div class="result-feedback" id="feedbackContent">Assessment</div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>
<!-- Notes Section -->
<div class="note-section">

  <div class="note-card">
    <h3>📘 About This Calculator</h3>
    <p>
      The <strong>Heat Transfer by Conduction Calculator</strong> uses 
      <b>Fourier’s Law of Heat Conduction</b> to estimate the rate of heat transfer (Q). 
      This helps evaluate insulation efficiency, thermal safety, and fire risk in 
      building materials, industrial equipment, and process systems.
    </p>
  </div>

  <div class="note-card">
    <h3>⚙️ Parameters Used</h3>
    <ul class="note-list">
      <li><strong>Thermal Conductivity (k):</strong> Material property (W/m·°C) defining ability to conduct heat.</li>
      <li><strong>Heat Transfer Area (A):</strong> Surface area through which conduction occurs (m²).</li>
      <li><strong>Temperature Difference (ΔT):</strong> Difference in temperature across the material (°C).</li>
      <li><strong>Material Thickness (L):</strong> Thickness of the barrier material (m).</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>✅ Input Validation Rules</h3>
    <ul class="note-list">
      <li>All fields are <b>mandatory</b> and must be <b>positive numbers</b>.</li>
      <li><b>Thermal Conductivity (k):</b> 0.01 – 500 W/m·°C (Insulation ~0.01, Metals 50–400).</li>
      <li><b>Heat Transfer Area (A):</b> 0.001 – 1000 m² (pipes, machinery to walls/buildings).</li>
      <li><b>Temperature Difference (ΔT):</b> 1 – 1000 °C (normal to fire scenario ranges).</li>
      <li><b>Thickness (L):</b> 0.001 – 1 m (foils to heavy insulation; zero not allowed).</li>
      <li><b>Cross-check:</b> If ΔT > 500 °C with L < 0.01 m → flagged as 
        <span style="color:red;font-weight:bold;">🔥 Extreme fire risk</span>.
      </li>
      <li>Decimals: Up to 3 places accepted to keep results audit-friendly.</li>
    </ul>
  </div>

  <div class="note-card">
    <h3>📊 Output Validations</h3>
    <ul class="note-list">
      <li>✅ Q &lt; 100 W:</span> Low Heat Transfer — Safe, good insulation.</li>
      <li>⚠️ 100 – 1000 W:</span> Moderate Heat Transfer — Monitor insulation or design limits.</li>
      <li>🚨 Q &gt; 1000 W:</span> High Heat Transfer — Potential hazard – assess fire safety or improve insulation.</li>
    </ul>
    
  </div>

<div class="note-card">
    <h3>📐 Governing Principle</h3>
    <p>
        A heat transfer conduction calculator based on Fourier's Law does not adhere to a single, specific engineering standard but rather to the fundamental principles of heat conduction as described by Fourier's Law itself, which are then applied within the context of applicable national or international engineering standards (like those from ISO, ASTM, or industry-specific codes) for material properties and units. These standards dictate how thermal conductivity (k), area (A), and temperature gradient (dT/dx) are measured and specified.
    </p>

    <h3 style="margin-top:12px; color:#1976d2;">Key Aspects of Fourier's Law Calculators</h3>
    <ul class="note-list">
        <li><b>The Law Itself:</b> The calculator's basis is the mathematical expression of Fourier's Law, which defines the rate of heat flow (q) as proportional to the negative temperature gradient (dT/dx), the area (A), and the thermal conductivity (k) of the material.</li>
        <li><b>No Single Standard:</b> Unlike a specific product standard for a pump or a valve, Fourier's Law is a fundamental physics law, not an engineering standard itself.</li>
        <li><b>Standards for Components:</b> Engineering standards become relevant for the inputs of the calculation:
            <ul>
                <li><b>Material Properties:</b> Standards are used to define the thermal conductivity (k) for different materials, ensuring consistency in material characterization.</li>
                <li><b>Units:</b> National or international standards (such as ISO, ASTM, or SI units) dictate the units used for temperature, length, and heat flux, ensuring that calculations are consistent across different designs and regions.</li>
            </ul>
        </li>
        <li><b>Application Context:</b> Specific industry codes or guidelines may provide additional constraints or requirements for calculating heat transfer in certain applications, such as building design or industrial processes.</li>
    </ul>

    <h3 style="margin-top:12px; color:#1976d2;">Implementation Summary</h3>
    <p>
        In essence, a Fourier's Law conduction calculator is a tool that implements the fundamental principles of the law, and its accuracy relies on adhering to appropriate engineering standards for the material properties, measurement units, and the application context.
    </p>
</div>

  <div class="note-card">
    <h3>🔎 Conclusion</h3>
    <p>
      This calculator provides a clear assessment of conductive heat transfer across materials. 
      It supports <b>fire safety evaluations</b>, <b>thermal efficiency checks</b>, and 
      <b>design optimization</b> for insulation and structures.  
      Always cross-check results against <b>NFPA</b>, <b>ISO 45001</b>, or 
      <b>local fire/building codes</b> for regulatory compliance.
    </p>
  </div>

</div>

<script>
function calculateHeatTransfer() {
    const kInput = document.getElementById('thermalConductivity').value.trim();
    const areaInput = document.getElementById('heatTransferArea').value.trim();
    const deltaTInput = document.getElementById('temperatureDifference').value.trim();
    const thicknessInput = document.getElementById('materialThickness').value.trim();

    const resultValue = document.getElementById('resultValue');
    const placeholder = document.getElementById('placeholder');
    const feedbackContent = document.getElementById('feedbackContent');
    const resultError = document.getElementById('resultError');

    // Reset UI
    resultError.classList.add('hidden');
    resultValue.classList.add('hidden');
    placeholder.classList.add('hidden');
    resultError.innerHTML = "";
    feedbackContent.innerHTML = "";

    // Mandatory check
    if (!kInput || !areaInput || !deltaTInput || !thicknessInput) {
        resultError.innerHTML = "⚠️ All fields are required.";
        resultError.style.color = "orange";
        resultError.classList.remove('hidden');
        return;
    }

    const k = parseFloat(kInput);
    const area = parseFloat(areaInput);
    const deltaT = parseFloat(deltaTInput);
    const thickness = parseFloat(thicknessInput);

    // Positive & numeric validation
    if ([k, area, deltaT, thickness].some(v => isNaN(v) || v <= 0)) {
        resultError.innerHTML = "❌ Invalid input. Values must be positive numbers.";
        resultError.style.color = "red";
        resultError.classList.remove('hidden');
        return;
    }

    // Division by zero protection
    if (thickness === 0) {
        resultError.innerHTML = "❌ Material thickness cannot be zero.";
        resultError.style.color = "red";
        resultError.classList.remove('hidden');
        return;
    }

    // Validation ranges (realistic thresholds)
    if (k < 0.01 || k > 500) {
        resultError.innerHTML = "⚠️ Thermal conductivity out of typical range (0.01–500 W/m·°C). Verify units.";
        resultError.style.color = "orange";
        resultError.classList.remove('hidden');
        return;
    }
    if (area < 0.001 || area > 1000) {
        resultError.innerHTML = "⚠️ Heat transfer area out of realistic range (0.001–1000 m²). Verify inputs.";
        resultError.style.color = "orange";
        resultError.classList.remove('hidden');
        return;
    }
    if (deltaT < 1 || deltaT > 1000) {
        resultError.innerHTML = "⚠️ Temperature difference outside normal range (1–1000 °C).";
        resultError.style.color = "orange";
        resultError.classList.remove('hidden');
        return;
    }
    if (thickness < 0.001 || thickness > 1) {
        resultError.innerHTML = "⚠️ Material thickness outside practical range (0.001–1 m).";
        resultError.style.color = "orange";
        resultError.classList.remove('hidden');
        return;
    }

    // Edge case: extreme fire scenario
    if (deltaT > 500 && thickness < 0.01) {
        resultError.innerHTML = "🔥 Extreme scenario: Very high ΔT with very thin material. High fire risk.";
        resultError.style.color = "red";
        resultError.classList.remove('hidden');
        return;
    }

    // Fourier’s Law calculation
    const Q = (k * area * deltaT) / thickness;
    document.getElementById('heatTransferValue').innerText = Q.toFixed(2);
    resultValue.classList.remove('hidden');

    // Feedback classification
    let feedback = "";
    if (Q < 100) {
        feedback = "✅ Low Heat Transfer: Safe / good insulation.";
        feedbackContent.style.color = "green";
    } else if (Q <= 1000) {
        feedback = "⚠️ Moderate Heat Transfer: Monitor insulation or design limits.";
        feedbackContent.style.color = "orange";
    } else {
        feedback = "🚨 High Heat Transfer: Potential hazard – assess fire safety or improve insulation.";
        feedbackContent.style.color = "red";
    }
    feedbackContent.innerHTML = feedback;
}

function printReport() {
    window.print();
}
</script>



    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- 1. QEHS/Fire Safety Input Analysis
Inputs

Thermal Conductivity (k, W/m·°C)

Real-world range:

Insulation: ~0.01–0.1

Concrete: ~0.8–1.8

Steel: ~50

Copper/Aluminum: 200–400

Extreme upper bound (safety check): ~500 W/m·°C.

Heat Transfer Area (A, m²)

Typical: <100 m² (walls, machinery)

Upper bound for building envelope calculations: ~1000 m²

1000 m² → caution flag (likely unit error or unrealistic input).

Temperature Difference (ΔT, °C)

Typical safety-critical: 0–200 °C (walls, insulation, fire doors)

Fire scenarios: up to ~1000 °C difference

Above 1000 °C → flag (most construction materials fail).

Material Thickness (L, m)

Practical range: 0.001 m (1 mm sheet metal) – 1 m (thick insulation, walls)

Zero → division by zero error

<0.001 → warning (foil, very thin layer, often negligible)

1 → unusual (verify units).

2. Output (Heat Transfer Rate, Q in Watts)

Formula:

𝑄
=
𝑘
⋅
𝐴
⋅
Δ
𝑇
𝐿
Q=
L
k⋅A⋅ΔT
	​

Interpretation thresholds

Q < 100 W → ✅ Good insulation / safe condition

100 ≤ Q ≤ 1000 W → ⚠️ Moderate heat transfer; monitor efficiency

Q > 1000 W → 🚨 High conduction risk; possible safety or fire hazard, requires review

This aligns with how auditors (OSHA, NFPA, ISO 45001) report KPIs: values must be contextualized with “safe, caution, danger” feedback.

3. Comprehensive Validation Rules
General

All fields mandatory.

Numeric, positive values only.

Max 3 decimals allowed (avoid unrealistic precision in safety reports).

Specific Ranges

Thermal Conductivity (k): 0.01 – 500 W/m·°C

Area (A): 0.001 – 1000 m²

Temperature Difference (ΔT): 1 – 1000 °C

Thickness (L): 0.001 – 1 m

Edge Cases

Division by zero → prevent if L = 0

Negative/zero inputs → reject

Extreme outliers (outside ranges) → caution message, not fatal error, so the engineer can still calculate but gets a “Verify units” warning.

Cross-field dependency: If ΔT > 500 °C and L < 0.01 m, then Q skyrockets → flag as “🔥 unrealistic / check fire scenario.” -->