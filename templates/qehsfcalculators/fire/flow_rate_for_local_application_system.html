{% extends 'base.html' %}
{% block title %}flow_rate_for_local_application_system.html{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
          @media (max-width: 768px) {
    .rate-value {
        font-size: 28px; /* smaller font for tablets/mobiles */
    }
}

@media (max-width: 480px) {
    .rate-value {
        font-size: 24px; /* even smaller for phones */
    }
}
    </style>
</head>
<body>
   <div class="btn-container">
    <a href="{% url 'firecategory_calculators' %}" class="back-btn">Back To Fire Calculators</a>
</div>

<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Flow Rate Calculator for Local Application System</h1>
        <p>Determine the Design Rate of CO‚ÇÇ required for local application systems, ensuring effective fire suppression.</p>
    </div>

    <div class="calc-content">
        <!-- Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label for="V">Protected Volume (m¬≥):</label>
                <input type="number" id="V" class="form-input" placeholder="Enter Protected Volume (V)">
            </div>
            <div class="form-group">
                <label for="Q">Flow Rate (kg/m¬≥¬∑s or L/s):</label>
                <input type="number" id="Q" class="form-input" placeholder="Enter Flow Rate (Q)">
            </div>
            <button class="calculate-btn" onclick="calculateDesignRate()">Calculate Design Rate</button>
        </div>

        <!-- Result Card -->
        <div class="result-card">
            <!-- Placeholder -->
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/co2.jpg' %}" alt="Flow Rate Illustration">
                <p>This tool will calculate the <strong>Design Rate of CO‚ÇÇ</strong>. Enter your data to see results and insights here.</p>
            </div>

            <!-- Error -->
            <div class="result-error hidden" id="resultError" style="font-size: 20px;"></div>

            <!-- Result -->
            <div class="result-value hidden" id="resultValue">
                <div class="rate-value">Design Rate of CO‚ÇÇ</div>
                <div class="rate-value" id="designRateValue">0.00</div>
                <div class="rate-label" style="font-size:16px; font-weight:bold;">kg/s</div>
                <div class="result-feedback" id="feedbackContent"></div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

   <!-- Notes Section -->
<div class="note-section">

    <!-- About This Calculator -->
    <div class="note-card">
        <h3>üìò About This Calculator</h3>
        <p>
            This calculator determines the <strong>Design Rate of CO‚ÇÇ</strong> required for local application systems, 
            ensuring effective fire suppression for the protected space.
        </p>
    </div>

    <!-- Parameters Used -->
    <div class="note-card">
        <h3>‚öôÔ∏è Parameters Used</h3>
        <ul class="note-list">
            <li><strong>Protected Volume (V):</strong> The space requiring CO‚ÇÇ protection (m¬≥).</li>
            <li><strong>Flow Rate (Q):</strong> Required CO‚ÇÇ release per unit volume per second (kg/m¬≥¬∑s or L/s).</li>
            <li><strong>Design Rate of CO‚ÇÇ:</strong> Total CO‚ÇÇ discharged per second to achieve effective coverage.</li>
        </ul>
    </div>

    <!-- Input Validation Rules -->
    <div class="note-card">
        <h3>‚úÖ Input Validation Rules</h3>
        <ul class="note-list">
            <li>All fields are <strong>mandatory</strong>; empty fields trigger a warning.</li>
            <li><strong>Numeric values only:</strong> Non-numeric entries are invalid.</li>
            <li><strong>Positive values required:</strong> Zero or negative numbers are invalid.</li>
            <li><strong>Protected Volume (V):</strong> &gt; 0 m¬≥; values above <code>1,000,000 m¬≥</code> trigger a caution for unrealistic design.</li>
            <li><strong>Flow Rate (Q):</strong> &gt; 0 kg/m¬≥¬∑s (or L/s); values above <code>1,000 kg/m¬≥¬∑s</code> trigger a caution for possible overpressure.</li>
            <li>Any errors or warnings will display in the result box; placeholder image disappears upon calculation.</li>
        </ul>
    </div>

    <!-- Output Validations & Feedback -->
    <div class="note-card">
        <h3>‚ö° Output Validations</h3>
        <p>
            The <strong>Design Rate of CO‚ÇÇ</strong> 
            Feedback is displayed alongside the result to guide safe design:
        </p>
        <ul class="note-list">
            <li>&lt; 0.1 kg/s ‚Üí ‚ö†Ô∏è Low Design Rate: May not achieve sufficient fire suppression (orange).</li>
            <li>0.1‚Äì1,000 kg/s ‚Üí ‚úÖ Normal Design Rate: System likely effective (green).</li>
            <li>&gt; 1,000 kg/s ‚Üí ‚ö†Ô∏è High Design Rate: May exceed system capacity; check cylinder size and pipe rating (red).</li>
        </ul>
        <p>This ensures real-time assessment of design adequacy with safety feedback.</p>
    </div>

    <!-- Governing Principle -->
    <!-- Governing Principle -->
<div class="note-card">
    <h3>üìê Governing Principle</h3>
    <p>
        There is no single global standard for determining the flow rate of a <strong>local application system</strong>, 
        as it varies depending on the system‚Äôs purpose and operational requirements.  
        In the context of fire protection systems, <strong>NFPA 13</strong> is widely recognized internationally 
        for calculating water density and required flow rates for sprinkler systems.  
        Other systems may follow different international, national, or internal standards depending on the application type.
    </p>
    <p>
        <h3>Standard:</h3>  
        The applicable standard depends on the nature of the system and regional regulations.  
        <ul class="note-list">
            <li><strong>NFPA 13:</strong> Used globally for determining water density (GPM/ft¬≤) and total flow for fire sprinklers based on hazard levels.</li>
            <li><strong>IS 15493 (India):</strong> Governs the flow rate calculation for engineered gaseous fire extinguishing systems.</li>
            <li><strong>CIPHE or Internal Guidelines:</strong> Applied in plumbing and HVAC systems using loading units (LU) or fixture-based estimation methods.</li>
            <li><strong>Manufacturer Specifications:</strong> Often provide precise design parameters and flow requirements for proprietary systems.</li>
        </ul>
    </p>
    <p>
        Related concept: Selecting the correct standard for a flow rate calculator follows the same principle as aligning with 
        recognized frameworks in other technical domains ‚Äî ensuring accuracy, regulatory compliance, and reliability.  
        Identifying the system type, consulting local codes, and referring to manufacturer guidelines are key steps in applying 
        the correct governing standard.
    </p>
</div>


    <!-- Conclusion -->
    <div class="note-card">
        <h3>‚úÖ Conclusion</h3>
        <ul class="note-list">
            <li>Ensures CO‚ÇÇ system delivers correct agent mass for effective fire suppression.</li>
            <li>Optimizes CO‚ÇÇ usage to reduce waste and operational costs.</li>
            <li>Provides real-time assessment and feedback alongside result to support safe system design.</li>
            <li>Aligns with NFPA 12 standards for local application CO‚ÇÇ systems.</li>
        </ul>
    </div>

</div>

</div>
<script>
function calculateDesignRate() {
    const VInput = document.getElementById("V").value.trim();
    const QInput = document.getElementById("Q").value.trim();
    const resultError = document.getElementById("resultError");
    const resultValue = document.getElementById("resultValue");
    const placeholder = document.getElementById("placeholder");
    const feedbackContent = document.getElementById("feedbackContent");
    const designRateValue = document.getElementById("designRateValue");

    // Reset state
    resultError.classList.add("hidden");
    resultValue.classList.add("hidden");
    placeholder.classList.add("hidden");
    resultError.innerHTML = "";
    feedbackContent.innerHTML = "";

    // Empty check
    if (VInput === "" || QInput === "") {
        resultError.innerHTML = "‚ö†Ô∏è All fields are mandatory; empty fields trigger a warning.";
        resultError.style.color = "orange";
        resultError.classList.remove("hidden");
        return;
    }

    const V = parseFloat(VInput);
    const Q = parseFloat(QInput);

    // Numeric validation
    if (isNaN(V) || isNaN(Q)) {
        resultError.innerHTML = "‚ùå Numeric values only: Non-numeric entries are invalid.";
        resultError.style.color = "red";
        resultError.classList.remove("hidden");
        return;
    }

    // Positive values validation
    if (V <= 0 || Q <= 0) {
        resultError.innerHTML = "‚ùå Positive values required: Zero or negative numbers are invalid.";
        resultError.style.color = "red";
        resultError.classList.remove("hidden");
        return;
    }

    // Maximum threshold warnings
    if (V > 1000000) {
        resultError.innerHTML = "‚ö†Ô∏è Protected Volume (V) above 1,000,000 m¬≥ triggers a caution for unrealistic design.";
        resultError.style.color = "orange";
        resultError.classList.remove("hidden");
        return;
    }

    if (Q > 1000) {
        resultError.innerHTML = "‚ö†Ô∏è Flow Rate (Q) above 1,000 kg/m¬≥¬∑s triggers a caution for possible overpressure.";
        resultError.style.color = "orange";
        resultError.classList.remove("hidden");
        return;
    }

    // Calculate Design Rate
    const designRate = V * Q;
    designRateValue.innerText = designRate.toFixed(2);
    resultValue.classList.remove("hidden");

    // Feedback based on magnitude
    let feedback = "";
    if (designRate < 0.1) {
        feedback = "‚ö†Ô∏è Low Design Rate: May not achieve sufficient fire suppression (orange).";
        feedbackContent.style.color = "orange";
    } else if (designRate <= 1000) {
        feedback = "‚úÖ Normal Design Rate: System likely effective (green).";
        feedbackContent.style.color = "green";
    } else {
        feedback = "‚ö†Ô∏è High Design Rate: May exceed system capacity; check cylinder size and pipe rating (red).";
        feedbackContent.style.color = "red";
    }

    feedbackContent.innerHTML = feedback;
}

function printReport() {
    window.print();
}
</script>




    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- 1. Analysis of Inputs, Outputs, and Formula

Inputs:

Input	Unit	Purpose	Notes
Protected Volume (V)	m¬≥	Space requiring CO‚ÇÇ protection	Must be realistic for the system‚Äôs installation
Flow Rate (Q)	kg/m¬≥¬∑s or L/s	CO‚ÇÇ release per unit volume	Should comply with NFPA 12 (CO‚ÇÇ systems), ISO 14520, or local fire code

Formula:

Design¬†Rate
=
ùëâ
√ó
ùëÑ
Design¬†Rate=V√óQ

Outputs total CO‚ÇÇ discharge rate (kg/s) for the protected space.

Ensures that the CO‚ÇÇ system delivers the correct agent mass to achieve the required concentration.

Outputs:

Output	Unit	Interpretation
Design Rate	kg/s	Total CO‚ÇÇ release rate; ensures system delivers sufficient CO‚ÇÇ to suppress fire efficiently.
2. Input Validation Rules (QEHS & Fire Safety Perspective)
a. Protected Volume (V)

Type: Numeric, positive float.

Minimum: 1 m¬≥ (cannot protect zero or negative space).

Maximum: 1,000,000 m¬≥ (very large industrial spaces; above this, check design assumptions).

Decimals: 0‚Äì2 decimal places allowed.

Cross-field dependency: V √ó Q must not exceed system‚Äôs max discharge capacity (check against CO‚ÇÇ cylinder or pipe limits).

b. Flow Rate (Q)

Type: Numeric, positive float.

Minimum: 0.01 kg/m¬≥¬∑s (too low means system will not suppress fire).

Maximum: 1,000 kg/m¬≥¬∑s (unrealistic; exceeds typical NFPA 12/ISO 14520 ranges).

Decimals: 0‚Äì4 decimal places allowed.

Unit consistency: Ensure user knows kg/m¬≥¬∑s or L/s.

3. Edge Case Validations

Empty inputs: Prompt user to fill all fields.

Zero values: Cannot calculate; display error.

Negative values: Invalid; display error.

Unrealistic high inputs: Warning; may indicate unit conversion issues.

Extreme product V √ó Q: Warn if system capacity might be exceeded.

Non-numeric entries: Display error.

4. Output Validation Logic & Threshold Explanations

Low design rate (<0.1 √ó NFPA 12 min requirement): Warning ‚Äì system may be ineffective.

Moderate design rate (0.1‚Äì1 √ó NFPA 12 requirement): Acceptable ‚Äì system effective, monitor system size.

High design rate (>1 √ó NFPA 12 recommended): Warning ‚Äì possible overpressure or overfill.

Feedback colors and messages improve operational safety awareness.
 -->
