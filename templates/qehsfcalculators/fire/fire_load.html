{% extends 'base.html' %}
{% block title %}Fire Load Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accident Rate Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 42px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>
   <div class="btn-container">
    <a href="{% url 'firecategory_calculators' %}" class="back-btn">Back To Fire Calculators</a>
</div>

<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}

    <!-- Calculator Header -->
    <div class="calculator-header">
        <h1>Fire Load Calculator</h1>
        <p>Determine the potential energy release per square meter to assess fire risks in buildings and materials.</p>
    </div>

    <div class="calc-content">
        <!-- Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label for="mass">Mass of Material (kg)</label>
                <input type="number" id="mass" class="form-input" placeholder="Enter mass of material">
                    <small id="massWarning" style="color: orange; display: none;"></small>

            </div>
            <div class="form-group">
                <label for="calories">Calories in Material (kJ/kg)</label>
                <input type="number" id="calories" class="form-input" placeholder="Enter calories in material">
                    <small id="caloriesWarning" style="color: orange; display: none;"></small>

            </div>
            <div class="form-group">
                <label for="area">Total Area (m¬≤)</label>
                <input type="number" id="area" class="form-input" placeholder="Enter total area">
                    <small id="areaWarning" style="color: orange; display: none;"></small>

            </div>
            <button class="calculate-btn" onclick="calculateFireLoad()">Calculate Fire Load</button>
        </div>

        <!-- Result Card -->
        <div class="result-card">
            <!-- Placeholder -->
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/fireload.png' %}" alt="Fire Load Illustration">
                <p style="margin-top: 10px;">Enter your values to calculate the <strong>Fire Load</strong> per square meter.</p>
            </div>

            <!-- Error -->
            <div class="result-error hidden" id="resultError" style="font-size: 28px;"></div>

            <!-- Result -->
            <div class="result-value hidden" id="resultValue">
                <div class="rate-label" style="font-size:16px; font-weight:bold; margin: 5px 0;">
        Fire Load Calculated (kJ/m¬≤)
    </div>
                <div class="rate-value" id="fireLoadValue">0.00</div>
                <div class="result-feedback" id="explanationContent"></div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Section -->
    <div class="note-section">
       <!-- About This Calculator -->
<div class="note-card">
    <h3>üìò About This Calculator</h3>
    <p>
        The Fire Load Calculator is a useful tool for estimating the potential energy release in the event of a fire. 
        Fire load is a key factor in understanding fire safety requirements for buildings and materials. 
        This tool calculates the fire load per square meter of an area.
    </p>
    <p>
        Once you enter the required inputs, the calculator will provide the fire load in <strong>kJ/m¬≤</strong>. 
        Additionally, the result is explained in relatable terms, like the energy equivalent of burning apples or cups of coffee, 
        to make the concept easier to grasp.
    </p>
</div>

<!-- Parameters -->
<div class="note-card">
    <h3>‚öôÔ∏è Parameters Used</h3>
    <ul class="note-list">
        <li><strong>Mass of Material (kg):</strong> The total weight of the combustible material.</li>
        <li><strong>Calories in Material (kJ/kg):</strong> The energy content of the material when burned.</li>
        <li><strong>Total Area (m¬≤):</strong> The floor area where the material is distributed.</li>
    </ul>
</div>


        <div class="note-card">
            <h3>üî• Fire Load vs. Fire Load Density ‚Äì When to Use Which?</h3>
            <p>
                üî• <strong>Fire Load (kJ):</strong> If you are assessing the total potential energy in a space without considering its size, 
                fire load is used. This is common in cases where fire suppression systems are designed based on total energy storage.
            </p>
            <p>
                üìè <strong>Fire Load Density (kJ/m¬≤):</strong> When comparing fire risk across different-sized areas, fire load density is more useful. 
                It standardizes the fire load per square meter, helping in fire safety classification, building regulations, and risk assessment.
            </p>
            <p>
                üîç **If you're unsure which one to use**:  
                - Use **Fire Load** if you just want to know the total energy in the material.  
                - Use **Fire Load Density** if you want to compare fire hazards across areas of different sizes.
            </p>
            <p>
                Understanding fire load is crucial for assessing fire risks and planning fire protection measures. 
                Use this calculator to ensure safety and compliance with fire safety standards.
            </p>
        </div>

        <div class="note-card">
    <h3>üõ°Ô∏è Input Validations</h3>
    <ul class="note-list">
        <li>All fields are <strong>mandatory</strong> ‚Äì leaving any field empty will trigger a warning.</li>
        <li><strong>Numeric values only:</strong> Letters, symbols, or special characters are not allowed.</li>
        <li><strong>Positive values required:</strong> Mass, calories, and area must be greater than zero.</li>
        <li><strong>Realistic ranges:</strong>
            <ul>
                <li>Mass: 0 ‚Äì 100,000 kg (warn if higher)</li>
                <li>Calories: 0 ‚Äì 50,000 kJ/kg (warn if higher)</li>
                <li>Area: 0 ‚Äì 10,000 m¬≤ (warn if higher)</li>
            </ul>
        </li>
        <li><strong>Cross-field checks:</strong> Area cannot be zero to avoid division by zero.</li>
        <li>Any warning or error will be displayed in the result box (the placeholder image will disappear).</li>
    </ul>
</div>

<div class="note-card">
    <h3>üìä Output Validations</h3>
    <ul class="note-list">
        <li>(Fire Load &lt; 500 kJ/m¬≤) ‚úÖ Low Fire Load: Minimal fire risk.</li>
        <li>(500 ‚â§ Fire Load ‚â§ 2000 kJ/m¬≤) ‚ö†Ô∏è Moderate Fire Load: Monitor and implement fire precautions.</li>
        <li>(2000 ‚â§ Fire Load ‚â§ 5000 kJ/m¬≤) üö® High Fire Load: Increased fire protection required!</li>
        <li>(Fire Load &gt; 5000 kJ/m¬≤) üî¥ Extreme Fire Load: Immediate action needed! Review materials & suppression.</li>
    </ul>
</div>

<div class="note-card">
    <h3>üìê Governing Principle</h3>
    <p>
        A fire load calculation adheres to various regional or project-specific standards, with the most prominent being the 
        <strong>NFPA 557</strong> standard in the United States for structural fire protection design, and the 
        <strong>Indian Standard (IS 1646)</strong> and <strong>National Building Code (NBC) 2016</strong> in India. 
        Other relevant standards include <strong>Eurocode (BS EN 1991-1-2:2002)</strong> for European regions and local 
        guidelines for specific sites or factory rules.
    </p>

    <h5>üîñ Key Standards and Guidelines</h5>
    <ul>
        <li><strong>NFPA 557 (United States):</strong> Published by the National Fire Protection Association, this standard provides guidelines for determining fire loads for use in the design of structural fire protection.</li>
        <li><strong>IS 1656 (India):</strong> An Indian Standard code of practice that includes guidelines for fire safety, with fire load considerations, particularly related to electrical installations.</li>
        <li><strong>National Building Code (NBC) of India, 2016:</strong> A comprehensive code for building construction in India that incorporates fire load guidelines and safety requirements.</li>
        <li><strong>BS EN 1991-1-2:2002 (Europe):</strong> This European standard outlines the actions on structures, including those exposed to fire, relevant for fire load calculations in European contexts.</li>
        <li><strong>Local Factory Rules and Regulations:</strong> Specific industries or regions may have their own factory rules or local regulations that mandate particular methods for fire load assessment.</li>
    </ul>

    <h5>üî• Purpose of Fire Load Calculation</h5>
    <p>
        Fire load calculations help determine the potential size and severity of a fire by quantifying the total heat energy released from combustible materials in a given space. This information is crucial for:
    </p>
    <ul>
        <li><strong>Designing Fire Protection Systems:</strong> Helps select appropriate fire resistance ratings for building components and design effective sprinkler systems.</li>
        <li><strong>Emergency Planning:</strong> Aids in developing efficient evacuation routes and emergency response strategies.</li>
        <li><strong>Regulatory Compliance:</strong> Ensures buildings meet local fire codes and safety standards.</li>
        <li><strong>Risk Assessment:</strong> Provides a quantitative measure of fire risk to identify and mitigate potential hazards.</li>
    </ul>
</div>


<div class="note-card">
    <h3>‚úÖ Conclusion</h3>
    <p>
        Using the <strong>Fire Load Calculator</strong> allows for a clear assessment of potential fire energy per square meter, helping to identify areas of low, moderate, high, or extreme fire risk. 
        By providing actionable feedback based on input parameters and recognized standards such as <strong>NFPA 557</strong>, this tool supports informed decisions in fire safety planning, structural design, and hazard mitigation. 
        Always verify unusually high values and ensure inputs are realistic to maintain accuracy and safety compliance.
    </p>
</div>

    </div>
</div>

<script>
function calculateFireLoad() {
    const massInput = document.getElementById('mass').value.trim();
    const caloriesInput = document.getElementById('calories').value.trim();
    const areaInput = document.getElementById('area').value.trim();

    const resultValue = document.getElementById('resultValue');
    const placeholder = document.getElementById('placeholder');
    const explanationContent = document.getElementById('explanationContent');
    const resultError = document.getElementById('resultError');

    // Warnings under fields
    const massWarning = document.getElementById('massWarning');
    const caloriesWarning = document.getElementById('caloriesWarning');
    const areaWarning = document.getElementById('areaWarning');

    // Reset display
    resultError.classList.add('hidden');
    resultValue.classList.add('hidden');
    placeholder.classList.add('hidden');
    resultError.innerHTML = '';
    explanationContent.innerHTML = '';
    massWarning.style.display = "none";
    caloriesWarning.style.display = "none";
    areaWarning.style.display = "none";

    // Empty check
    if (!massInput || !caloriesInput || !areaInput) {
        resultError.innerHTML = "‚ö†Ô∏è Please fill in all required fields.";
        resultError.style.color = "orange";
        resultError.classList.remove('hidden');
        return;
    }

    const mass = parseFloat(massInput);
    const calories = parseFloat(caloriesInput);
    const area = parseFloat(areaInput);

    // Numeric & positive check
    if (isNaN(mass) || isNaN(calories) || isNaN(area)) {
        resultError.innerHTML = "‚ùå Invalid entry. Please enter numeric values only.";
        resultError.style.color = "red";
        resultError.classList.remove('hidden');
        return;
    }

    if (mass <= 0 || calories <= 0 || area <= 0) {
        resultError.innerHTML = "‚ùå All values must be greater than zero.";
        resultError.style.color = "red";
        resultError.classList.remove('hidden');
        return;
    }

    // Inline Warnings (not errors with full names and ranges)
if (mass > 100000) {
    massWarning.innerText = "‚ö†Ô∏è Mass of material is unusually high. Recommended range: 0 ‚Äì 100,000 kilograms.";
    massWarning.style.display = "block";
}
if (calories > 50000) {
    caloriesWarning.innerText = "‚ö†Ô∏è Calorific value of material is unusually high. Recommended range: 0 ‚Äì 50,000 kilojoules per kilogram.";
    caloriesWarning.style.display = "block";
}
if (area > 10000) {
    areaWarning.innerText = "‚ö†Ô∏è Total area is unusually large. Recommended range: 0 ‚Äì 10,000 square meters.";
    areaWarning.style.display = "block";
}

    // Fire Load Calculation
    const fireLoad = (mass * calories) / area;
    document.getElementById('fireLoadValue').innerText = fireLoad.toFixed(2);
    resultValue.classList.remove('hidden');

    // Feedback thresholds
    let feedback = "";
    if (fireLoad < 500) {
        feedback = "‚úÖ Low Fire Load: Minimal fire risk.";
        explanationContent.style.color = "green";
    } else if (fireLoad <= 2000) {
        feedback = "‚ö†Ô∏è Moderate Fire Load: Monitor and implement fire precautions.";
        explanationContent.style.color = "orange";
    } else if (fireLoad <= 5000) {
        feedback = "üö® High Fire Load: Increased fire protection required!";
        explanationContent.style.color = "red";
    } else {
        feedback = "üî¥ Extreme Fire Load: Immediate action needed! Review materials & suppression.";
        explanationContent.style.color = "darkred";
    }

    explanationContent.innerHTML = `
        <p>${feedback}</p>
        <p>For every square meter, <strong>${fireLoad.toFixed(2)} kJ</strong> of energy could be released if it burns.</p>
    `;
}

</script>


    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- 1Ô∏è‚É£ Detailed Input Validation Rules
Field	Units	Allowed Range	Decimals	Notes & Logical Checks
Mass of Material	kg	0 < Mass ‚â§ 100,000	Up to 2 decimals	Must be positive. Mass > 50,000 kg is flagged as unusually high in small buildings.
Calories in Material	kJ/kg	0 < Calories ‚â§ 50,000	Up to 2 decimals	Typical combustible material: 10,000‚Äì20,000 kJ/kg. Values above 50,000 are unusual.
Total Area	m¬≤	0 < Area ‚â§ 10,000	Up to 2 decimals	Extremely large areas (>10,000 m¬≤) are rare in standard buildings. Zero triggers division by zero error.

Cross-field dependencies:

Fire Load = (Mass √ó Calories) / Area ‚Üí Area must be > 0.

If Mass or Calories are unusually high and Area is very small ‚Üí Issue warning of extreme fire load.

General numeric rules:

No letters or special characters.

Only numeric entries.

No negative or zero values.

2Ô∏è‚É£ Output Validation Logic & Thresholds

Fire Load (kJ/m¬≤) is calculated as:

Fire¬†Load
=
Mass¬†(kg)
√ó
Calories¬†(kJ/kg)
Area¬†(m¬≤)
Fire¬†Load=
Area¬†(m¬≤)
Mass¬†(kg)√óCalories¬†(kJ/kg)
	‚Äã


Thresholds (industry perspective):

Fire Load (kJ/m¬≤)	Safety Interpretation
0 ‚Äì 500	‚úÖ Low: Minimal fire risk
500 ‚Äì 2000	‚ö†Ô∏è Moderate: Monitor, implement fire precautions
2000 ‚Äì 5000	üö® High: Increased fire protection required
>5000	üî¥ Extreme: Immediate action, high hazard potential, review building materials & suppression systems

Output validation:

Result should always be ‚â• 0.

Warn user if extreme (>5000 kJ/m¬≤).

3Ô∏è‚É£ Edge Cases & Handling
Edge Case	Handling
Area = 0	‚ùå Display error: "Area must be greater than zero (division by zero not allowed)"
Extremely high Mass & Calories with small Area	‚ö†Ô∏è Warning: "Fire load unusually high ‚Äì verify inputs"
Negative or zero inputs	‚ùå Reject and display error
Empty input fields	‚ö†Ô∏è Prompt user to enter all values
Non-numeric entries	‚ùå Reject and display error -->