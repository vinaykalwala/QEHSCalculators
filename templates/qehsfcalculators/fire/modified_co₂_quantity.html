{% extends 'base.html' %}
{% block title %}Modified CO‚ÇÇ Quantity Calculator{% endblock %}
{% block content %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modified CO‚ÇÇ Quantity Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/print.css' %}">
    <style>
        /* Main container */
        .calculator-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            border-radius: 12px;
        }
        .btn-container {
            display: flex;
            justify-content: center; /* Horizontally center */
            margin: 30px 0;
        }

        .back-btn {
            background:linear-gradient(#1560bd,#000040); /* Dark navy background */
            color: #ffffff; /* White text */
            border: 2px solid #1560bd; /* Highlight border */
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 8px;
            text-decoration: none; /* Remove underline for link */
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .back-btn:hover {
            background-color: #1560bd; /* Highlight on hover */
            color: #ffffff;
            border-color: #000040;
            transform: scale(1.05); /* Subtle hover effect */
        }

        /* Header */
        .calculator-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .calculator-header h1 {
            color: #1560bd;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .calculator-header p {
            color: #7f8c8d;
            font-size: 18px;
            margin: 0 auto;
        }

        /* Layout */
        .calc-content {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }
        
        @media (max-width: 900px) {
            .calc-content { 
                flex-direction: column; 
            }
        }

        /* Cards */
        .result-card {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            border: 2px solid #1560bd;
        }
        
        .calc-card {
            flex: 1;
            background: linear-gradient(135deg, #1560bd, #1560bd, #000040);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 420px;
            overflow-y: auto;
        }
        
        .calc-card:hover { 
            transform: translateY(-5px); 
        }
        
        .calc-card h2 {
            color: #ffff;
            margin-bottom: 25px;
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 10px;
            font-weight: 600;
        }

        /* Inputs */
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #fff;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9fbfd;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
        }

        /* Button */
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: #ffc107;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-wrapper {
            text-align: center;
            margin-top: 20px;
        }

        .print-btn {
            display: inline-block;
            background: linear-gradient(#1560bd,#000040);
            color: white;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: auto !important;
        }

        .print-btn:hover {
            background: #1560bd;
        }

        /* Result Card */
        .result-card {
            justify-content: center;
            align-items: center;
            min-height: 420px;
            text-align: center;
        }
        
        .result-placeholder img {
            max-width: 240px;
            margin-bottom: 20px;
            opacity: 0.85;
        }
        
        .result-placeholder p {
            color: #7f8c8d;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .result-value { 
            width: 100%; 
        }
        
        .rate-value {
            font-size: 36px;
            font-weight: 700;
            color: #2980b9;
            margin-bottom: 10px;
        }
        
        .rate-label { 
            color: #7f8c8d; 
        }

        /* Feedback */
        .result-feedback {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 18px;
            border-left: 4px solid #3498db;
            text-align: left;
            margin-top: 20px;
        }
        
        .feedback-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .feedback-content { 
            color: #34495e; 
        }

        .note-section {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0faff;
            padding: 15px;
            margin-top: 60px;
            border-radius: 12px;
        }

        .note-card {
            background: #ffffff;
            border-left: 6px solid #1976d2;
            padding: 18px 22px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .note-card:hover {
            transform: translateY(-2px);
        }
        
        .note-card h3 {
            margin: 0 0 10px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .note-card p, .note-card li {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            text-align: justify;
        }
        
        .note-list {
            margin: 0;
            padding-left: 18px;
        }
        
        .good { 
            color: #2e7d32; 
            font-weight: 600; 
        }
        
        .average { 
            color: #f9a825; 
            font-weight: 600; 
        }
        
        .bad { 
            color: #c62828; 
            font-weight: 600; 
        }

        .result-error {
            background: #ffe6e6;
            border: 2px solid #e74c3c;
            color: #c0392b;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            gap: 12px;
            margin-top: 20px;
        }
        
        .error-icon {
            font-size: 76px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .error-message {
            font-size: 24px;
            line-height: 1.6;
        }

        /* Toggle helper */
        .hidden { 
            display: none; 
        }
          @media (max-width: 768px) {
    .rate-value {
        font-size: 28px; /* smaller font for tablets/mobiles */
    }
}

@media (max-width: 480px) {
    .rate-value {
        font-size: 24px; /* even smaller for phones */
    }
}
    </style>
</head>
<body>
   <div class="btn-container">
    <a href="{% url 'firecategory_calculators' %}" class="back-btn">Back To Fire Calculators</a>
</div>
<div class="calculator-container printable" id="printArea">
    {% include "includes/print_header_footer.html" %}

    <div class="calculator-header">
        <h1>Modified Quantity (m<sub>D</sub>) Calculator</h1>
        <p>Adjust the base CO‚ÇÇ design quantity according to the Material Conversion Factor (MCF) to account for specific hazards.</p>
    </div>

    <div class="calc-content">
        <!-- Input Card -->
        <div class="calc-card">
            <h2>Enter Data</h2>
            <div class="form-group">
                <label for="mBD">Base Design Quantity (m<sub>BD</sub>) [kg]:</label>
                <input type="number" id="mBD" class="form-input" placeholder="Enter Base Design Quantity">
            </div>
            <div class="form-group">
                <label for="MCF">Material Conversion Factor (MCF):</label>
                <input type="number" id="MCF" class="form-input" placeholder="Enter Material Conversion Factor">
            </div>
            <button class="calculate-btn" onclick="calculateModifiedQuantity()">Calculate Modified Quantity</button>
        </div>

        <!-- Result Card -->
        <div class="result-card">
            <!-- Placeholder -->
            <div class="result-placeholder" id="placeholder">
                <img src="{% static 'images/co2.jpg' %}" alt="Modified Quantity Illustration">
                <p>This tool will calculate the <strong>Modified Quantity (m<sub>D</sub>)</strong>. Enter your data to see results here.</p>
            </div>

            <!-- Error -->
            <div class="result-error hidden" id="resultError" style="font-size: 20px;"></div>

            <!-- Result -->
            <div class="result-value hidden" id="resultValue">
                <div class="rate-value">Modified Quantity (m<sub>D</sub>)</div>
                <div class="rate-value" id="modifiedValue">0.00</div>
                <div class="rate-label" style="font-size:16px; font-weight:bold;">kg</div>
                <div class="result-feedback" id="feedbackContent"></div>
                <div class="btn-wrapper">
                    <button class="calculate-btn print-btn" onclick="printReport()">Print Report</button>
                </div>
            </div>
        </div>
    </div>

<!-- Notes Section -->
<div class="note-section">

    <!-- About -->
    <div class="note-card">
        <h3>üìò About This Calculator</h3>
        <p>
            This calculator determines the <strong>Modified Quantity (m<sub>D</sub>)</strong> of CO‚ÇÇ required for fire suppression, 
            adjusting the base design quantity using the <strong>Material Conversion Factor (MCF)</strong>.  
            It ensures that different hazards or materials receive the correct CO‚ÇÇ dose for effective fire control.
        </p>
    </div>

    <!-- Parameters -->
    <div class="note-card">
        <h3>‚öôÔ∏è Parameters Used</h3>
        <ul class="note-list">
            <li><strong>Base Design Quantity (m<sub>BD</sub>)</strong>: CO‚ÇÇ amount calculated for the protected volume in kg.</li>
            <li><strong>Material Conversion Factor (MCF)</strong>: Factor accounting for the hazard type or material; adjusts the base quantity to ensure proper fire suppression.</li>
        </ul>
    </div>

    <!-- Input Validation Rules -->
    <div class="note-card">
        <h3>‚úÖ Input Validation Rules</h3>
        <ul class="note-list">
            <li><strong>Mandatory Fields:</strong> Both m<sub>BD</sub> and MCF must be provided. Empty inputs trigger a warning.</li>
            <li><strong>Numeric Values Only:</strong> All inputs must be numeric; text or special characters are invalid.</li>
            <li><strong>Positive Values:</strong> m<sub>BD</sub> &gt; 0 kg, MCF &gt; 0. Zero or negative values are invalid.</li>
            <li><strong>Practical Upper Limits:</strong> m<sub>BD</sub> ‚â§ 10,000 kg; MCF ‚â§ 5. Exceeding these values triggers a caution.</li>
            <li><strong>Output Reasonableness:</strong> Modified Quantity (m<sub>D</sub>) &lt; 50,000 kg. Values above this limit trigger a caution for verification.</li>
            <li><strong>Feedback Based on Range:</strong>  
                <ul>
                    <li>m<sub>D</sub> &lt; 50 kg ‚Üí ‚ö†Ô∏è Very low ‚Äì verify hazard type and protected volume.</li>
                    <li>50 ‚â§ m<sub>D</sub> ‚â§ 5,000 kg ‚Üí ‚úÖ Normal range ‚Äì CO‚ÇÇ dose is appropriate.</li>
                    <li>m<sub>D</sub> &gt; 5,000 kg ‚Üí ‚ö†Ô∏è High ‚Äì verify hazard type, volume, and MCF.</li>
                </ul>
            </li>
            <li><strong>Edge Cases:</strong> Empty inputs, non-numeric entries, negative or zero values, and extreme combinations trigger warnings or errors.</li>
            <li><strong>Compliance Rationale:</strong> These validations align with <strong>NFPA 12, OSHA, ISO 45001</strong>, and QEHS best practices, ensuring safe and auditable CO‚ÇÇ dosing.</li>
        </ul>
    </div>

    <!-- Output Validations -->
    <div class="note-card">
        <h3>üìä Output Validations</h3>
        <ul class="note-list">
            <li>‚ö†Ô∏è <strong>Modified Quantity &lt; 50 kg:</strong>‚ö†Ô∏è Modified Quantity is very low ‚Äì verify hazard type and protected volume.</li>
            <li>‚úÖ <strong>50 ‚â§ Modified Quantity ‚â§ 5,000 kg:</strong> Normal range ‚Äì CO‚ÇÇ dose appropriate. </li>
            <li>‚ö†Ô∏è <strong>Modified Quantity &gt; 5,000 kg:</strong>‚ö†Ô∏è High Modified Quantity ‚Äì verify hazard type, volume, and MCF.</li>
            <li>üö® <strong>Modified Quantity &gt; 50,000 kg:</strong> Unrealistic; likely input error. (Blocked calculation with error)</li>
            <li>All assessments/feedback displayed with calculation results are repeated here for clarity and audit purposes.</li>
        </ul>
    </div>
<div class="note-card">
    <h3>üìê Governing Principle</h3>
    <p>
        The "Modified CO‚ÇÇ Quantity Calculator" refers to a specific proprietary tool rather than a single, universally recognized standard. One example is a calculator for fire suppression systems, and another is for emissions reporting. The calculation methodology, including any "modifications," would be defined by the entity or standard that governs its specific application.
    </p>

    <h3 style="margin-top:12px; color:#1976d2;">Commonly Recognized Standards by Application</h3>
    <ul class="note-list">
        <li><strong>For fire suppression systems:</strong> The quantity of CO‚ÇÇ required is often calculated based on the gross volume of the protected space, with adjustments for factors like leakage and ventilation. These calculations are guided by standards and procedures from regulatory bodies like the International Maritime Organization (IMO) or local fire safety authorities.</li>
        <li><strong>For carbon footprint and emissions reporting:</strong> The calculation of CO‚ÇÇ emissions often uses standards defined by organizations such as the Greenhouse Gas (GHG) Protocol and the International Organization for Standardization (ISO) 14064 or 14067.</li>
        <li><strong>For specific applications:</strong> Other calculating methods exist for various fields:
            <ul>
                <li><strong>Transport and logistics:</strong> The European standard EN 16258 and the ISO 14083 standard provide frameworks for calculating and reporting greenhouse gas emissions from transport services.</li>
                <li><strong>Cement and coal production:</strong> The GHG Protocol and the EU's Emissions Trading System have specific guidance and emission factors for calculating CO‚ÇÇ in these industries.</li>
                <li><strong>Vehicles:</strong> Regulatory agencies like the U.S. Environmental Protection Agency (EPA) have established methods for calculating CO‚ÇÇ emissions from vehicles.</li>
            </ul>
        </li>
    </ul>

    <h3 style="margin-top:12px; color:#1976d2;">Implementation Summary</h3>
    <p>
        Because the term "Modified CO‚ÇÇ Quantity Calculator" is generic, you must know the calculator's intended application to determine the standard it follows.
    </p>
</div>


    <!-- Conclusion -->
    <div class="note-card">
        <h3>üèÅ Conclusion</h3>
        <p>
            This calculator helps engineers and safety officers determine the appropriate CO‚ÇÇ quantity for fire suppression.  
            By combining validated inputs, output thresholds, and the governing NFPA 12 principle, the tool ensures safe, effective, and auditable CO‚ÇÇ dosing.  
            Feedback on result ranges directly guides operational decisions, highlighting low, normal, or high CO‚ÇÇ quantities.
        </p>
    </div>

</div>

</div>
<script>
function calculateModifiedQuantity() {
    const mBDInput = document.getElementById("mBD").value.trim();
    const MCFInput = document.getElementById("MCF").value.trim();
    const resultError = document.getElementById("resultError");
    const resultValue = document.getElementById("resultValue");
    const placeholder = document.getElementById("placeholder");
    const feedbackContent = document.getElementById("feedbackContent");
    const modifiedValue = document.getElementById("modifiedValue");

    // Reset UI
    resultError.classList.add("hidden");
    resultValue.classList.add("hidden");
    placeholder.classList.add("hidden");
    resultError.innerHTML = "";
    feedbackContent.innerHTML = "";

    // Mandatory check
    if (!mBDInput || !MCFInput) {
        resultError.innerHTML = "‚ö†Ô∏è Please fill in all required fields.";
        resultError.style.color = "orange";
        resultError.classList.remove("hidden");
        return;
    }

    const mBD = parseFloat(mBDInput);
    const MCF = parseFloat(MCFInput);

    // Numeric check
    if (isNaN(mBD) || isNaN(MCF)) {
        resultError.innerHTML = "‚ùå Invalid entry. Please enter numeric values only.";
        resultError.style.color = "red";
        resultError.classList.remove("hidden");
        return;
    }

    // Positive check
    if (mBD <= 0) {
        resultError.innerHTML = "‚ùå Base Design Quantity must be greater than zero.";
        resultError.style.color = "red";
        resultError.classList.remove("hidden");
        return;
    }
    if (MCF <= 0) {
        resultError.innerHTML = "‚ùå Material Conversion Factor must be greater than zero.";
        resultError.style.color = "red";
        resultError.classList.remove("hidden");
        return;
    }

    // Upper thresholds
    if (mBD > 10000) {
        resultError.innerHTML = "‚ö†Ô∏è Base Design Quantity is unusually high (>10,000 kg). Verify units.";
        resultError.style.color = "orange";
        resultError.classList.remove("hidden");
        return;
    }
    if (MCF > 5) {
        resultError.innerHTML = "‚ö†Ô∏è Material Conversion Factor is unusually high (>5). Verify hazard type.";
        resultError.style.color = "orange";
        resultError.classList.remove("hidden");
        return;
    }

    // Calculation
    const mD = mBD * MCF;

    // Extreme output check
    if (mD > 50000) {
        resultError.innerHTML = "üö® Modified Quantity exceeds 50,000 kg. Verify inputs.";
        resultError.style.color = "red";
        resultError.classList.remove("hidden");
        return;
    }

    modifiedValue.innerText = mD.toFixed(2);
    resultValue.classList.remove("hidden");

    // Feedback
    let feedback = "";
    if (mD < 50) {
        feedback = "‚ö†Ô∏è Modified Quantity is very low ‚Äì verify hazard type and protected volume.";
        feedbackContent.style.color = "orange";
    } else if (mD <= 5000) {
        feedback = "‚úÖ Normal range ‚Äì CO‚ÇÇ dose appropriate. ";
        feedbackContent.style.color = "green";
    } else {
        feedback = "‚ö†Ô∏è High Modified Quantity ‚Äì verify hazard type, volume, and MCF.";
        feedbackContent.style.color = "orange";
    }
    feedbackContent.innerHTML = feedback;
}

function printReport() {
    window.print();
}

</script>



    <script src="{% static 'js/print.js' %}"></script>
</body>
</html>
{% endblock %}


<!-- 1Ô∏è‚É£ Analysis of Inputs, Outputs, and Calculation Formula

Inputs:

Base Design Quantity (m<sub>BD</sub>) [kg]

Base CO‚ÇÇ amount calculated for the hazard volume.

Units: kg.

Expected range: small to large depending on the facility (1‚Äì10,000 kg typical).

Material Conversion Factor (MCF)

Adjusts m<sub>BD</sub> based on material/hazard type.

Dimensionless multiplier, usually provided in fire safety standards (NFPA 12).

Expected range: >0, usually 0.8‚Äì2.0 depending on material hazard.

Calculation Formula:

ùëö
ùê∑
=
ùëö
ùêµ
ùê∑
√ó
ùëÄ
ùê∂
ùêπ
m
D
	‚Äã

=m
BD
	‚Äã

√óMCF

Output:

Modified Quantity (m<sub>D</sub>) [kg]

Adjusted CO‚ÇÇ amount for effective fire suppression.

QEHS Perspective:

Ensures correct CO‚ÇÇ dosing for different hazard types.

Prevents under-suppression (risk of fire spreading) or over-suppression (waste, high cost, potential asphyxiation hazard).

Must comply with NFPA 12, ISO, OSHA, and facility-specific standards.

2Ô∏è‚É£ Recommended Input Validation Rules
Input	Validation	Thresholds & Units	Compliance Rationale
Base Design Quantity (m<sub>BD</sub>)	Mandatory, numeric, positive	>0 kg, typical max ‚â§ 10,000 kg	Prevents invalid zero/negative values; ensures realistic fire protection coverage.
Material Conversion Factor (MCF)	Mandatory, numeric, positive	>0, typical range 0.5‚Äì2.0	Ensures proper adjustment for hazard type; prevents unrealistic suppression doses.
Combined check	m<sub>D</sub> should not exceed 50,000 kg	Upper limit depends on facility	Prevents extreme CO‚ÇÇ doses that could endanger personnel or equipment.
3Ô∏è‚É£ Output Validation Logic and Threshold Explanations

Very Low m<sub>D</sub> (<50 kg):
‚ö†Ô∏è May indicate the hazard is underestimated or input values are too low.

Normal Range (50‚Äì5000 kg):
‚úÖ Typical, expected CO‚ÇÇ quantities for standard hazards.

High m<sub>D</sub> (>5000 kg):
‚ö†Ô∏è Could indicate large protected volume or high hazard; user should verify values.

Extreme (>50,000 kg):
üö® Unrealistic; likely input error.

Rationale: These thresholds are derived from practical fire safety scenarios and NFPA 12 guidelines. They ensure outputs are meaningful in audits and safety reviews.

4Ô∏è‚É£ Edge Case Validations

Empty Inputs: Trigger mandatory field warning.

Non-numeric inputs: Trigger numeric validation error.

Zero or negative values: Trigger invalid input error.

Extreme inputs: Trigger caution warnings for unusually high m<sub>BD</sub> or MCF.

Overflow: m<sub>D</sub> > 50,000 kg triggers a high alert to prevent unrealistic CO‚ÇÇ allocation. -->